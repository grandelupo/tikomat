import{q as A,j as e,$ as I,m as T}from"./app-odBV00io.js";import{u as M,A as F,a as Y,b as B,c as D,I as x}from"./app-layout-D5c34v_S.js";import{B as m}from"./button-Bs3KYNwP.js";import{C as f,b as p,c as _,a as b}from"./card-BE9YH7Ga.js";import{B as j}from"./badge-DX2LFy_g.js";import{A as g,a as u}from"./alert-DQLPBHDK.js";import{X as z}from"./x-hqKwgzZo.js";import{T as c}from"./test-tube-DfbZf5Ys.js";import{P as E,C as H}from"./palette-ChLr28Zq.js";import{F as L}from"./facebook-0ETU2lTm.js";import{V}from"./video-BRuCjezt.js";import{I as W}from"./instagram-DH1sPfbH.js";import{Y as X}from"./youtube-CKvs1css.js";import"./index-BN_p8KeJ.js";import"./index-C3aTuILH.js";import"./settings-CNlgCFz_.js";import"./circle-check-big-BlADcRFn.js";import"./shield-Dd8jK75O.js";import"./file-text-DQhl5sov.js";const q={youtube:X,instagram:W,tiktok:V,facebook:L,snapchat:H,pinterest:E,x:z},O={youtube:"text-red-600",instagram:"text-pink-600",tiktok:"text-black",facebook:"text-blue-600",snapchat:"text-yellow-500",pinterest:"text-red-500",x:"text-black"},R=[{title:"My channels",href:"/dashboard"},{title:"Connections",href:"/connections"}];function xe({channels:d,socialAccounts:N,availablePlatforms:y,allowedPlatforms:U}){const r=M(),{app:C}=A().props,h=C.env==="local",k=(a,n)=>{window.location.href=`/channels/${n}/auth/${a}`},v=(a,n)=>{confirm(`Create a mock ${a} connection for testing?`)&&(window.location.href=`/channels/${n}/auth/${a}/simulate`)},w=(a,n)=>{confirm(`Are you sure you want to disconnect ${a}?`)&&T.delete(`/channels/${n}/social/${a}`)},$=a=>N.filter(n=>n.platform===a),P=a=>a.access_token==="fake_token_for_development";return e.jsxs(F,{breadcrumbs:R,children:[e.jsx(I,{title:"Platform Connections"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[h&&e.jsxs(g,{className:"border-blue-200 bg-blue-50",children:[e.jsx(c,{className:"h-4 w-4 text-blue-600"}),e.jsxs(u,{className:"text-blue-800",children:[e.jsx("strong",{children:"Development Mode:"}),' You can create mock platform connections for testing using the "Test Connect" buttons below.']})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Platform Connections"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your social media platform connections across all channels"})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:y.map(a=>{const n=q[a.name],l=$(a.name),o=l.length>0;return e.jsxs(f,{className:"relative",children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(_,{className:"text-lg font-medium",children:a.label}),e.jsx(n,{className:`h-6 w-6 ${O[a.name]}`})]}),e.jsx(b,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(j,{variant:o?"default":"secondary",className:o?"bg-green-100 text-green-800":"",children:o?`${l.length} Connected`:"Not Connected"})}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Connected Channels:"}),l.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsxs(Y,{className:"h-8 w-8",children:[e.jsx(B,{src:s.platform==="youtube"&&s.platform_channel_thumbnail_url?s.platform_channel_thumbnail_url:s.profile_avatar_url,alt:s.platform==="youtube"&&s.platform_channel_name?s.platform_channel_name:s.platform==="facebook"&&s.facebook_page_name?s.facebook_page_name:s.profile_name||s.channel_name}),e.jsx(D,{className:"text-xs bg-background",children:s.platform==="youtube"&&s.platform_channel_name?r(s.platform_channel_name):s.platform==="facebook"&&s.facebook_page_name?r(s.facebook_page_name):s.profile_name?r(s.profile_name):r(s.channel_name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.channel_name}),P(s)&&e.jsxs(j,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:[e.jsx(c,{className:"w-3 h-3 mr-1"}),"Mock"]})]}),(s.platform_channel_name||s.profile_name)&&e.jsxs("p",{className:"text-xs text-gray-600 truncate",children:["Connected as: ",s.profile_name||s.platform_channel_name,(s.profile_username||s.platform_channel_handle)&&` (${`@${s.profile_username||s.platform_channel_handle}`})`]}),s.platform==="facebook"&&s.facebook_page_name&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["Facebook Page: ",s.facebook_page_name]}),s.platform==="youtube"&&s.platform_channel_name&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["YouTube Channel: ",s.platform_channel_name,s.platform_channel_handle&&` (${s.platform_channel_handle})`]}),s.platform_channel_specific&&s.platform_channel_name&&s.platform!=="youtube"&&s.platform!=="facebook"&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["Channel: ",s.platform_channel_name,s.platform_channel_handle&&` (${s.platform_channel_handle})`]}),s.platform==="instagram"&&s.instagram_upload_compatible===!1&&e.jsxs(g,{className:"mt-2 p-2 bg-yellow-50 border-yellow-200",children:[e.jsx(x,{className:"h-3 w-3 text-yellow-600"}),e.jsxs(u,{className:"text-xs text-yellow-800",children:["⚠️ Upload incompatible: ",s.instagram_incompatibility_reason,e.jsx("br",{}),e.jsx("span",{className:"font-medium",children:"Please reconnect to enable uploads."})]})]})]})]}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>{const t=d.find(i=>i.id===s.channel_id);t&&w(a.name,t.slug)},className:"text-xs h-7 ml-2",children:"Disconnect"})]},s.id))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Connect to Channel:"}),e.jsx("div",{className:"grid gap-2",children:d.map(s=>{const t=l.some(i=>i.channel_id===s.id);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(m,{size:"sm",variant:t?"outline":"default",onClick:()=>k(a.name,s.slug),disabled:t,className:"w-full justify-start text-xs",children:[t?"✓ ":"+ ",s.name]}),h&&!t&&e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>v(a.name,s.slug),className:"w-full justify-start text-xs text-orange-600 border-orange-200 hover:bg-orange-50",children:[e.jsx(c,{className:"w-3 h-3 mr-1"}),"Test Connect"]})]},s.id)})})]})]})})]},a.name)})}),e.jsxs(f,{className:"mt-6",children:[e.jsx(p,{children:e.jsxs(_,{className:"flex items-center",children:[e.jsx(x,{className:"w-5 h-5 mr-2"}),"How Platform Connections Work"]})}),e.jsx(b,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Per-Channel Connections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Each channel can have its own social media connections. This allows you to manage different brands or content types with separate social accounts."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"OAuth Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When you connect a platform, you'll be redirected to authenticate with that service. Your credentials are securely stored and encrypted."})]})]})})]})]})]})}export{xe as default};
