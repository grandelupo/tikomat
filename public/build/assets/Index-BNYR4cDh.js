import{r as i,j as e,$ as G,Y as x,m as u}from"./app-ZoHiRkFP.js";import{c as K,a as m,B as n}from"./button-D5D_O4Ex.js";import{C as F,b as $,c as D,a as _,d as M}from"./card-DI9mXKLO.js";import{B as X}from"./badge-DckAfh3N.js";import{S as g,a as N,b as v,c as y,d as r}from"./select-vS9EyPxI.js";import{I as J}from"./input-C42imSZE.js";import{A as Q}from"./app-layout-DYRsSSJS.js";import{V as W}from"./VideoThumbnail--ednXbD-.js";import{P as U}from"./plus-Dj5H_kB2.js";import{S as Z}from"./search-B9aaQjLN.js";import{V as h}from"./video-Bv6MDVZS.js";import{C as ee}from"./circle-x-Boc1j-oS.js";import{C as se}from"./circle-check-big-BYONN01t.js";import{C as ae}from"./circle-alert-DkqASCrP.js";import{C as te}from"./clock-CuPXh4p5.js";import{I as le,Y as re}from"./youtube-BGWq9hi7.js";import{E as ie}from"./eye-ejDrqCG5.js";import{S as ce}from"./square-pen-DlMT0UfW.js";import{T as ne}from"./trash-2-6RCTImfw.js";import"./index-BnersX7h.js";import"./index-BdQq_4o_.js";import"./index-CEMpSFpa.js";import"./index-DGUKhhcF.js";import"./check-oN8WZKc2.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],oe=K("Filter",de),B=i.forwardRef(({className:l,...t},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:m("w-full caption-bottom text-sm",l),...t})}));B.displayName="Table";const E=i.forwardRef(({className:l,...t},a)=>e.jsx("thead",{ref:a,className:m("[&_tr]:border-b",l),...t}));E.displayName="TableHeader";const Y=i.forwardRef(({className:l,...t},a)=>e.jsx("tbody",{ref:a,className:m("[&_tr:last-child]:border-0",l),...t}));Y.displayName="TableBody";const me=i.forwardRef(({className:l,...t},a)=>e.jsx("tfoot",{ref:a,className:m("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",l),...t}));me.displayName="TableFooter";const w=i.forwardRef(({className:l,...t},a)=>e.jsx("tr",{ref:a,className:m("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",l),...t}));w.displayName="TableRow";const d=i.forwardRef(({className:l,...t},a)=>e.jsx("th",{ref:a,className:m("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",l),...t}));d.displayName="TableHead";const o=i.forwardRef(({className:l,...t},a)=>e.jsx("td",{ref:a,className:m("p-4 align-middle [&:has([role=checkbox])]:pr-0",l),...t}));o.displayName="TableCell";const he=i.forwardRef(({className:l,...t},a)=>e.jsx("caption",{ref:a,className:m("mt-4 text-sm text-muted-foreground",l),...t}));he.displayName="TableCaption";const xe=[{title:"Dashboard",href:"/dashboard"},{title:"Recently Uploaded",href:"/videos"}],ue={youtube:re,instagram:le,tiktok:h,facebook:h,twitter:h,snapchat:h,pinterest:h},je={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},pe={pending:te,processing:ae,success:se,failed:ee};function ze({videos:l,channels:t,filters:a}){var A,P,I;const[j,C]=i.useState(a.search||""),[p,T]=i.useState(a.channel||""),[f,S]=i.useState(a.platform||""),[b,k]=i.useState(a.status||""),R=()=>{const s=new URLSearchParams;j&&s.set("search",j),p&&s.set("channel",p),f&&s.set("platform",f),b&&s.set("status",b),u.get("/videos",Object.fromEntries(s),{preserveState:!0})},z=()=>{C(""),T(""),S(""),k(""),u.get("/videos",{},{preserveState:!0})},H=s=>{u.post(`/video-targets/${s}/retry`)},L=s=>{confirm("Are you sure you want to delete this video?")&&u.delete(`/videos/${s}`)},V=()=>t.find(s=>s.name.toLowerCase().includes("default"))||t[0];return e.jsxs(Q,{breadcrumbs:xe,children:[e.jsx(G,{title:"Recently Uploaded Videos"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recently Uploaded"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all your uploaded videos and their publishing status"})]}),t.length>0&&e.jsx(x,{href:`/channels/${(A=V())==null?void 0:A.slug}/videos/create`,children:e.jsxs(n,{size:"lg",children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})]}),e.jsxs(F,{children:[e.jsx($,{children:e.jsxs(D,{className:"flex items-center",children:[e.jsx(oe,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsx(_,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(J,{placeholder:"Search videos...",value:j,onChange:s=>C(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&R()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Channel"}),e.jsxs(g,{value:p,onValueChange:T,children:[e.jsx(N,{children:e.jsx(v,{placeholder:"All channels"})}),e.jsxs(y,{children:[e.jsx(r,{value:"",children:"All channels"}),t.map(s=>e.jsx(r,{value:s.slug,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Platform"}),e.jsxs(g,{value:f,onValueChange:S,children:[e.jsx(N,{children:e.jsx(v,{placeholder:"All platforms"})}),e.jsxs(y,{children:[e.jsx(r,{value:"",children:"All platforms"}),e.jsx(r,{value:"youtube",children:"YouTube"}),e.jsx(r,{value:"instagram",children:"Instagram"}),e.jsx(r,{value:"tiktok",children:"TikTok"}),e.jsx(r,{value:"facebook",children:"Facebook"}),e.jsx(r,{value:"twitter",children:"Twitter"}),e.jsx(r,{value:"snapchat",children:"Snapchat"}),e.jsx(r,{value:"pinterest",children:"Pinterest"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(g,{value:b,onValueChange:k,children:[e.jsx(N,{children:e.jsx(v,{placeholder:"All statuses"})}),e.jsxs(y,{children:[e.jsx(r,{value:"",children:"All statuses"}),e.jsx(r,{value:"pending",children:"Pending"}),e.jsx(r,{value:"processing",children:"Processing"}),e.jsx(r,{value:"success",children:"Success"}),e.jsx(r,{value:"failed",children:"Failed"})]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(n,{onClick:R,className:"flex-1",children:"Apply Filters"}),e.jsx(n,{variant:"outline",onClick:z,children:"Clear"})]})]})})]}),e.jsxs(F,{children:[e.jsxs($,{children:[e.jsxs(D,{children:["Videos (",((P=l.meta)==null?void 0:P.total)||0,")"]}),e.jsx(M,{children:"Your uploaded videos and their publishing status across platforms"})]}),e.jsx(_,{children:l.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No videos found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:Object.values(a).some(s=>s)?"Try adjusting your filters.":"Get started by uploading your first video."}),!Object.values(a).some(s=>s)&&t.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(x,{href:`/channels/${(I=V())==null?void 0:I.slug}/videos/create`,children:e.jsxs(n,{children:[e.jsx(U,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})})]}):e.jsxs(B,{children:[e.jsx(E,{children:e.jsxs(w,{children:[e.jsx(d,{className:"w-20",children:"Thumbnail"}),e.jsx(d,{children:"Title"}),e.jsx(d,{children:"Channel"}),e.jsx(d,{children:"Duration"}),e.jsx(d,{children:"Platforms"}),e.jsx(d,{children:"Upload Date"}),e.jsx(d,{className:"text-right",children:"Actions"})]})}),e.jsx(Y,{children:l.data.map(s=>e.jsxs(w,{children:[e.jsx(o,{children:e.jsx(W,{src:s.thumbnail_path,alt:s.title,width:s.video_width??void 0,height:s.video_height??void 0,className:"w-16 h-12"})}),e.jsx(o,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(o,{children:e.jsx(x,{href:`/channels/${s.channel.slug}`,className:"text-blue-600 hover:text-blue-700",children:s.channel.name})}),e.jsx(o,{children:s.formatted_duration}),e.jsx(o,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.targets.map(c=>{const O=pe[c.status],q=ue[c.platform];return e.jsxs("div",{className:"flex items-center",children:[e.jsxs(X,{variant:"secondary",className:`${je[c.status]} flex items-center gap-1 text-xs`,children:[e.jsx(q,{className:"h-3 w-3"}),e.jsx(O,{className:"h-3 w-3"}),c.platform.charAt(0).toUpperCase()+c.platform.slice(1)]}),c.status==="failed"&&e.jsx(n,{variant:"ghost",size:"sm",onClick:()=>H(c.id),className:"text-xs px-1 py-0 h-auto ml-1 text-red-600",children:"Retry"})]},c.id)})})}),e.jsx(o,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(o,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(x,{href:`/videos/${s.id}`,children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(ie,{className:"mr-1 h-3 w-3"}),"View"]})}),e.jsx(x,{href:`/videos/${s.id}/edit`,children:e.jsxs(n,{variant:"outline",size:"sm",children:[e.jsx(ce,{className:"mr-1 h-3 w-3"}),"Edit"]})}),e.jsxs(n,{variant:"outline",size:"sm",onClick:()=>L(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(ne,{className:"mr-1 h-3 w-3"}),"Delete"]})]})})]},s.id))})]})})]})]})]})}export{ze as default};
