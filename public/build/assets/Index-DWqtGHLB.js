import{r as j,j as e,$ as Y,Y as f,m as x}from"./app-q07ROoqf.js";import{c as z,B as i}from"./button-D517XJU-.js";import{C as h,b as L,c as V,d as B,a as p}from"./card-DutEE086.js";import{B as $}from"./badge-CB2eIO0A.js";import{S as g,a as v,b as N,c as w,d as y}from"./select-LYxxnRkj.js";import{I as b}from"./input-B-yieYJB.js";import{L as c}from"./label-BeYwpPYF.js";import{S as E}from"./switch-BjWLGR7f.js";import{A as _,a as C}from"./alert-Cn2e9lTA.js";import{A as R,S as U}from"./app-layout-RIHH3a4v.js";import{P as k}from"./plus-DN8bNjlO.js";import{I as S}from"./info-CDDsHxsV.js";import{P as Z,C as G,T as H,F as q}from"./twitter-DItj9TTg.js";import{V as J}from"./video-1_16ZoGB.js";import{I as K,Y as M}from"./youtube-BE_VTxrd.js";import{Z as O}from"./zap-BeBf9aas.js";import{D as Q}from"./download-vyRQWIcB.js";import{A as X}from"./arrow-right-CEpnq30h.js";import{U as ee}from"./upload-Di5UxdGC.js";import{P as se}from"./play-DpNGD9uh.js";import{T as ae}from"./trash-2-B_W9h8GV.js";import"./index-CZKAHIZZ.js";import"./index-BdQq_4o_.js";import"./index-C8IGYvts.js";import"./index-DJfFtUmr.js";import"./check-gal3aX99.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],re=z("Pause",te),ie=[{title:"Dashboard",href:"/dashboard"},{title:"Workflow",href:"/workflow"}],d={youtube:M,instagram:K,tiktok:J,facebook:q,twitter:H,snapchat:G,pinterest:Z};function We({workflows:u,channels:I,platforms:A}){const[D,n]=j.useState(!1),[a,t]=j.useState({name:"",description:"",channel_id:"",source_platform:"",target_platforms:[],is_active:!0}),F=()=>{x.post("/workflow",a,{onSuccess:()=>{n(!1),t({name:"",description:"",channel_id:"",source_platform:"",target_platforms:[],is_active:!0})}})},W=(s,r)=>{x.patch(`/workflow/${s}`,{is_active:r})},P=s=>{confirm("Are you sure you want to delete this workflow?")&&x.delete(`/workflow/${s}`)},o=A.filter(s=>s.connected);return e.jsxs(R,{breadcrumbs:ie,children:[e.jsx(Y,{title:"Workflow Automation"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflow Automation"}),e.jsx("p",{className:"text-muted-foreground",children:"Automatically sync videos between your social media platforms"})]}),e.jsxs(i,{onClick:()=>n(!0),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]}),e.jsxs(_,{children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx(C,{children:"Workflows automatically detect when you upload a video to one platform and sync it to your other connected accounts. This helps you maintain consistent content across all your social media channels."})]}),o.length<2&&e.jsxs(_,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(S,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(C,{className:"text-yellow-800",children:["You need to first connect other social media accounts to use them in workflows."," ",e.jsx(f,{href:"/connections",className:"font-medium underline hover:no-underline",children:"Go to Connections"})]})]}),D&&o.length>=2&&e.jsxs(h,{children:[e.jsxs(L,{children:[e.jsx(V,{children:"Create New Workflow"}),e.jsx(B,{children:"Set up automatic video syncing between platforms for a specific channel"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Workflow Name"}),e.jsx(b,{id:"name",placeholder:"e.g., YouTube to Instagram",value:a.name,onChange:s=>t({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"channel",children:"Channel"}),e.jsxs(g,{value:a.channel_id,onValueChange:s=>t({...a,channel_id:s}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select channel"})}),e.jsx(w,{children:I.map(s=>e.jsx(y,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(b,{id:"description",placeholder:"Brief description of this workflow",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"source",children:"Source Platform"}),e.jsxs(g,{value:a.source_platform,onValueChange:s=>t({...a,source_platform:s}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select source platform"})}),e.jsx(w,{children:o.map(s=>{const r=d[s.name];return e.jsx(y,{value:s.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),s.label]})},s.name)})})]})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Target Platforms"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:o.filter(s=>s.name!==a.source_platform).map(s=>{const r=d[s.name],l=a.target_platforms.includes(s.name);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:s.name,checked:l,onChange:m=>{m.target.checked?t({...a,target_platforms:[...a.target_platforms,s.name]}):t({...a,target_platforms:a.target_platforms.filter(T=>T!==s.name)})},className:"rounded"}),e.jsxs("label",{htmlFor:s.name,className:"flex items-center text-sm",children:[e.jsx(r,{className:"w-4 h-4 mr-1"}),s.label]})]},s.name)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"active",checked:a.is_active,onCheckedChange:s=>t({...a,is_active:s})}),e.jsx(c,{htmlFor:"active",children:"Activate workflow immediately"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(i,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(i,{onClick:F,children:"Create Workflow"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Workflows"}),u.length===0?e.jsx(h,{children:e.jsxs(p,{className:"text-center py-12",children:[e.jsx(O,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workflows yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workflow to start automating video distribution across platforms."}),e.jsxs(i,{onClick:()=>n(!0),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Create Your First Workflow"]})]})}):e.jsx("div",{className:"grid gap-4",children:u.map(s=>{const r=d[s.source_platform];return e.jsx(h,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx($,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-1 rounded-lg",children:[e.jsx(Q,{className:"w-4 h-4 text-blue-600"}),e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:s.source_platform})]}),e.jsx(X,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"flex items-center space-x-1",children:s.target_platforms.map(l=>{const m=d[l];return e.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-2 py-1 rounded",children:[e.jsx(ee,{className:"w-3 h-3 text-green-600"}),e.jsx(m,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs capitalize",children:l})]},l)})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Created: ",new Date(s.created_at).toLocaleDateString()]}),s.last_run_at&&e.jsxs("span",{children:["Last run: ",new Date(s.last_run_at).toLocaleDateString()]}),e.jsxs("span",{children:["Videos processed: ",s.videos_processed]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>W(s.id,!s.is_active),children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Activate"]})}),e.jsx(f,{href:`/workflow/${s.id}/edit`,children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(U,{className:"w-3 h-3 mr-1"}),"Edit"]})}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>P(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})})},s.id)})})]})]})]})}export{We as default};
