import{r as i,j as e,v as xe,$ as fe,Y as D}from"./app-sDOLWXss.js";import{c as be,u as G,a as V,B as I}from"./button-C3RfLvpW.js";import{C as ge,a as ve,b as je,c as ye,d as Ne}from"./card-1u_2t67r.js";import{L as N,I as S}from"./label-DiFi20tK.js";import{T as we}from"./textarea-we3LrCp3.js";import{u as ke,C as Ce}from"./checkbox-Bx0b9wGr.js";import{u as Re,c as U,a as A,P as Pe,b as _e}from"./index-sO_PHVYq.js";import{P as C}from"./index-C7BC6hHm.js";import{c as $,u as De,R as Ie,I as Se,A as Ee}from"./app-layout-DgsYFBJY.js";import{A as E,a as T}from"./alert-BBF5BaoI.js";import{A as Te}from"./arrow-left-BrwIVTPK.js";import{I as Ae}from"./info-CAv1DN6z.js";import{U as Fe,C as Ge}from"./upload-Wbx8OXA2.js";import{T as Me,P as Oe,C as Ve,F as Ue}from"./twitter-w6rbNPNA.js";import{V as $e,I as Le,Y as Be}from"./youtube-BrI8ReLR.js";import{C as Ye}from"./clock-DqEy3A8F.js";import"./check-bV2aQC0d.js";import"./chart-column-CRUlAJ-r.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qe=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ze=be("Circle",qe);var M="Radio",[We,L]=U(M),[He,Xe]=We(M),B=i.forwardRef((r,d)=>{const{__scopeRadio:a,name:h,checked:o=!1,required:l,disabled:m,value:f="on",onCheck:b,form:g,...v}=r,[n,j]=i.useState(null),c=G(d,w=>j(w)),t=i.useRef(!1),p=n?g||!!n.closest("form"):!0;return e.jsxs(He,{scope:a,checked:o,disabled:m,children:[e.jsx(C.button,{type:"button",role:"radio","aria-checked":o,"data-state":W(o),"data-disabled":m?"":void 0,disabled:m,value:f,...v,ref:c,onClick:A(r.onClick,w=>{o||b==null||b(),p&&(t.current=w.isPropagationStopped(),t.current||w.stopPropagation())})}),p&&e.jsx(z,{control:n,bubbles:!t.current,name:h,value:f,checked:o,required:l,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});B.displayName=M;var Y="RadioIndicator",q=i.forwardRef((r,d)=>{const{__scopeRadio:a,forceMount:h,...o}=r,l=Xe(Y,a);return e.jsx(Pe,{present:h||l.checked,children:e.jsx(C.span,{"data-state":W(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:d})})});q.displayName=Y;var Je="RadioBubbleInput",z=i.forwardRef(({__scopeRadio:r,control:d,checked:a,bubbles:h=!0,...o},l)=>{const m=i.useRef(null),f=G(m,l),b=ke(a),g=_e(d);return i.useEffect(()=>{const v=m.current;if(!v)return;const n=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(n,"checked").set;if(b!==a&&c){const t=new Event("click",{bubbles:h});c.call(v,a),v.dispatchEvent(t)}},[b,a,h]),e.jsx(C.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:f,style:{...o.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});z.displayName=Je;function W(r){return r?"checked":"unchecked"}var Qe=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[Ze,Ns]=U(R,[$,L]),H=$(),X=L(),[Ke,es]=Ze(R),J=i.forwardRef((r,d)=>{const{__scopeRadioGroup:a,name:h,defaultValue:o,value:l,required:m=!1,disabled:f=!1,orientation:b,dir:g,loop:v=!0,onValueChange:n,...j}=r,c=H(a),t=De(g),[p,w]=Re({prop:l,defaultProp:o??null,onChange:n,caller:R});return e.jsx(Ke,{scope:a,name:h,required:m,disabled:f,value:p,onValueChange:w,children:e.jsx(Ie,{asChild:!0,...c,orientation:b,dir:t,loop:v,children:e.jsx(C.div,{role:"radiogroup","aria-required":m,"aria-orientation":b,"data-disabled":f?"":void 0,dir:t,...j,ref:d})})})});J.displayName=R;var Q="RadioGroupItem",Z=i.forwardRef((r,d)=>{const{__scopeRadioGroup:a,disabled:h,...o}=r,l=es(Q,a),m=l.disabled||h,f=H(a),b=X(a),g=i.useRef(null),v=G(d,g),n=l.value===o.value,j=i.useRef(!1);return i.useEffect(()=>{const c=p=>{Qe.includes(p.key)&&(j.current=!0)},t=()=>j.current=!1;return document.addEventListener("keydown",c),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",t)}},[]),e.jsx(Se,{asChild:!0,...f,focusable:!m,active:n,children:e.jsx(B,{disabled:m,required:l.required,checked:n,...b,...o,name:l.name,ref:v,onCheck:()=>l.onValueChange(o.value),onKeyDown:A(c=>{c.key==="Enter"&&c.preventDefault()}),onFocus:A(o.onFocus,()=>{var c;j.current&&((c=g.current)==null||c.click())})})})});Z.displayName=Q;var ss="RadioGroupIndicator",K=i.forwardRef((r,d)=>{const{__scopeRadioGroup:a,...h}=r,o=X(a);return e.jsx(q,{...o,...h,ref:d})});K.displayName=ss;var ee=J,se=Z,ts=K;const te=i.forwardRef(({className:r,...d},a)=>e.jsx(ee,{className:V("grid gap-2",r),...d,ref:a}));te.displayName=ee.displayName;const F=i.forwardRef(({className:r,...d},a)=>e.jsx(se,{ref:a,className:V("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...d,children:e.jsx(ts,{className:"flex items-center justify-center",children:e.jsx(ze,{className:"h-2.5 w-2.5 fill-current text-current"})})}));F.displayName=se.displayName;const rs={youtube:{name:"YouTube",icon:Be,color:"text-red-600"},instagram:{name:"Instagram",icon:Le,color:"text-pink-600"},tiktok:{name:"TikTok",icon:$e,color:"text-black"},facebook:{name:"Facebook",icon:Ue,color:"text-blue-600"},snapchat:{name:"Snapchat",icon:Ve,color:"text-yellow-500"},pinterest:{name:"Pinterest",icon:Oe,color:"text-red-500"},twitter:{name:"Twitter",icon:Me,color:"text-blue-400"}};function ws({channel:r,availablePlatforms:d,defaultPlatforms:a,connectedPlatforms:h,allowedPlatforms:o}){const[l,m]=i.useState(a),[f,b]=i.useState("now"),[g,v]=i.useState(!1),[n,j]=i.useState({}),c=[{title:"Dashboard",href:"/dashboard"},{title:r.name,href:`/channels/${r.slug}`},{title:"Upload Video",href:`/channels/${r.slug}/videos/create`}],{data:t,setData:p,post:w,processing:O,errors:y,progress:P}=xe({video:null,title:"",description:"",platforms:a,publish_type:"now",publish_at:""}),re=(s,u)=>{let x;u?x=[...l,s]:x=l.filter(k=>k!==s),m(x),p("platforms",x)},ae=s=>{b(s),p("publish_type",s),s==="now"&&p("publish_at","")},oe=s=>{s.preventDefault(),j({}),ue()&&w(`/channels/${r.slug}/videos`)},ie=s=>{var x;const u=(x=s.target.files)==null?void 0:x[0];u&&p("video",u)},le=i.useCallback(s=>{s.preventDefault(),v(!1);const u=s.dataTransfer.files;if(u&&u[0]){const x=u[0];x.type.startsWith("video/")?p("video",x):alert("Please select a valid video file")}},[p]),ne=i.useCallback(s=>{s.preventDefault(),v(!0)},[]),de=i.useCallback(s=>{s.preventDefault(),v(!1)},[]),ce=s=>s.size>100*1024*1024?"File size must be less than 100MB":s.type.startsWith("video/")?null:"Please select a valid video file",ue=()=>{const s={};if(t.title.trim()?t.title.length>255&&(s.title="Title must be less than 255 characters"):s.title="Title is required",t.description&&t.description.length>1e3&&(s.description="Description must be less than 1000 characters"),l.length===0&&(s.platforms="Please select at least one platform"),f==="scheduled")if(!t.publish_at)s.publish_at="Please select a publish date and time";else{const u=new Date(t.publish_at),x=new Date,k=new Date(x.getTime()+5*6e4);u<=k&&(s.publish_at="Publish date must be at least 5 minutes from now")}if(!t.video)s.video="Please select a video file";else{const u=ce(t.video);u&&(s.video=u)}return j(s),Object.keys(s).length===0};return e.jsxs(Ee,{breadcrumbs:c,children:[e.jsx(fe,{title:"Upload Video"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Upload Video to ",r.name]}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a video to publish across your connected social media platforms"})]}),e.jsx(D,{href:`/channels/${r.slug}`,children:e.jsxs(I,{variant:"outline",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),"Back to Channel"]})})]}),d.length===0&&e.jsxs(E,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-950 dark:border-yellow-800",children:[e.jsx(Ae,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(T,{className:"text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"No connected platforms:"})," You need to connect at least one social media platform to this channel before uploading videos.",e.jsx(D,{href:`/channels/${r.slug}`,className:"ml-1 underline",children:"Connect platforms now"})]})]}),o.length===1&&e.jsx(E,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:e.jsxs(T,{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Free Plan:"})," You currently have access to YouTube only. Upgrade to Pro to unlock Instagram and TikTok publishing."]})}),e.jsxs(ge,{className:"max-w-2xl",children:[e.jsxs(ve,{children:[e.jsx(je,{children:"Video Details"}),e.jsx(ye,{children:"Upload your video file and provide details for publishing"})]}),e.jsx(Ne,{children:e.jsxs("form",{onSubmit:oe,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"video",children:"Video File"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${g?"border-blue-400 bg-blue-50 dark:border-blue-500 dark:bg-blue-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}`,onDrop:le,onDragOver:ne,onDragLeave:de,children:[e.jsx(Fe,{className:`mx-auto h-12 w-12 ${g?"text-blue-500":"text-gray-400 dark:text-gray-500"}`}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(N,{htmlFor:"video",className:"cursor-pointer",children:[e.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:g?"Drop your video here":"Click to upload or drag and drop"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500 dark:text-gray-400",children:"MP4, MOV, AVI, WMV, WebM up to 100MB (max 60 seconds)"})]}),e.jsx(S,{id:"video",type:"file",accept:"video/*",onChange:ie,className:"hidden"})]})]}),t.video&&e.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded border border-green-200 dark:text-green-400 dark:bg-green-900/20 dark:border-green-800",children:[e.jsx("strong",{children:"Selected:"})," ",t.video.name," (",(t.video.size/(1024*1024)).toFixed(2)," MB)"]}),(y.video||n.video)&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:y.video||n.video}),P&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm dark:text-gray-300",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[P.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${P.percentage}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"title",children:"Title"}),e.jsx(S,{id:"title",value:t.title,onChange:s=>p("title",s.target.value),placeholder:"Enter video title"}),(y.title||n.title)&&e.jsx("p",{className:"text-sm text-red-600",children:y.title||n.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(we,{id:"description",value:t.description,onChange:s=>p("description",s.target.value),placeholder:"Enter video description",rows:4}),(y.description||n.description)&&e.jsx("p",{className:"text-sm text-red-600",children:y.description||n.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Select Platforms"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which platforms to publish this video to"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(rs).map(([s,u])=>{const x=u.icon,k=d.includes(s),pe=h.includes(s),_=o.includes(s),me=l.includes(s);return e.jsxs("div",{className:`flex items-center space-x-3 p-3 border rounded-lg ${k?"border-gray-300 dark:border-gray-600":"bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[e.jsx(Ce,{id:s,checked:me,disabled:!k,onCheckedChange:he=>re(s,he)}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(x,{className:`h-5 w-5 ${u.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{htmlFor:s,className:`font-medium cursor-pointer ${k?"":"text-gray-400 dark:text-gray-500"}`,children:u.name}),!_&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded dark:bg-blue-900/30 dark:text-blue-300",children:"Pro Only"}),_&&!pe&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded dark:bg-yellow-900/30 dark:text-yellow-300",children:"Not Connected"})]}),!k&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:_?"Connect this platform to your channel":"Upgrade to access this platform"})]})]})]},s)})}),(y.platforms||n.platforms)&&e.jsx("p",{className:"text-sm text-red-600",children:y.platforms||n.platforms}),d.length===0&&e.jsx(E,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800",children:e.jsx(T,{className:"text-yellow-800 dark:text-yellow-200",children:"No platforms available for upload. Please connect at least one platform to this channel."})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Publishing Options"}),e.jsxs(te,{value:f,onValueChange:ae,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"now",id:"now"}),e.jsxs(N,{htmlFor:"now",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Ye,{className:"h-4 w-4"}),e.jsx("span",{children:"Publish now"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"scheduled",id:"scheduled"}),e.jsxs(N,{htmlFor:"scheduled",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule for later"})]})]})]}),f==="scheduled"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"publish_at",children:"Publish Date & Time (Your Local Time)"}),e.jsx(S,{id:"publish_at",type:"datetime-local",value:t.publish_at,onChange:s=>p("publish_at",s.target.value),min:(()=>{const s=new Date;return s.setMinutes(s.getMinutes()+5),s.toISOString().slice(0,16)})()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time will be converted to your local timezone. Minimum: 5 minutes from now."}),(y.publish_at||n.publish_at)&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:y.publish_at||n.publish_at})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(D,{href:`/channels/${r.slug}`,children:e.jsx(I,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(I,{type:"submit",disabled:O||!t.video||l.length===0||d.length===0,children:O?"Uploading...":"Upload Video"})]})]})})]})]})]})}export{ws as default};
