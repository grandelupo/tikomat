import{r as u,j as e,$ as Y,Y as f,m as x}from"./app-CazqFCNW.js";import{B as i}from"./button-DWSYL8H9.js";import{C as h,b as L,c as V,d as z,a as p}from"./card-8ffDoJ2k.js";import{B}from"./badge-C8B-LotX.js";import{S as g,a as v,b as N,c as y,d as w}from"./select-BUiyq2NS.js";import{I as b}from"./input-B_h9maKP.js";import{L as c}from"./label-DIBHEDji.js";import{S as $}from"./switch-DpT9UWJV.js";import{A as C,a as _}from"./alert-BWFW3NXz.js";import{A as E,I as k}from"./app-layout-DnP_KJBl.js";import{X as R}from"./x-YWXBVkk3.js";import{P as S}from"./plus-rS2P03o6.js";import{P as U,C as X}from"./palette-BYrpBpIg.js";import{F as Z}from"./facebook-CFo9FVWS.js";import{V as G}from"./video-JCcQareg.js";import{I as H}from"./instagram-DR1Q_WAI.js";import{Y as M}from"./youtube-DGnpHUp-.js";import{Z as q}from"./zap-C4hTKdHH.js";import{D as J}from"./download-LCJ812-E.js";import{A as K}from"./arrow-right-gcriuApo.js";import{U as O}from"./upload-C0XfOzSh.js";import{P as Q}from"./pause-oLvNsLAC.js";import{P as ee}from"./play-Dd73qjHl.js";import{S as se}from"./workflow-02_DswOZ.js";import{T as ae}from"./trash-2-AcGw_lP5.js";import"./index-B_4TN5tM.js";import"./index-DVmV36_7.js";import"./index-DvOWqNFr.js";import"./chevron-down-DslOQaT3.js";import"./circle-check-big-CejX_wEL.js";import"./calendar-DLVdYJ8l.js";const te=[{title:"My channels",href:"/dashboard"},{title:"Workflow",href:"/workflow"}],m={youtube:M,instagram:H,tiktok:G,facebook:Z,x:R,snapchat:X,pinterest:U};function Ye({workflows:j,channels:I,platforms:A}){const[F,n]=u.useState(!1),[a,t]=u.useState({name:"",description:"",channel_id:"",source_platform:"",target_platforms:[],is_active:!0}),W=()=>{x.post("/workflow",a,{onSuccess:()=>{n(!1),t({name:"",description:"",channel_id:"",source_platform:"",target_platforms:[],is_active:!0})}})},D=(s,r)=>{x.patch(`/workflow/${s}`,{is_active:r})},P=s=>{confirm("Are you sure you want to delete this workflow?")&&x.delete(`/workflow/${s}`)},o=A.filter(s=>s.connected);return e.jsxs(E,{breadcrumbs:te,children:[e.jsx(Y,{title:"Workflow Automation"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflow Automation"}),e.jsx("p",{className:"text-muted-foreground",children:"Automatically sync videos between your social media platforms"})]}),e.jsxs(i,{onClick:()=>n(!0),children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]}),e.jsxs(C,{children:[e.jsx(k,{className:"h-4 w-4"}),e.jsx(_,{children:"Workflows automatically detect when you upload a video to one platform and sync it to your other connected accounts. This helps you maintain consistent content across all your social media channels."})]}),o.length<2&&e.jsxs(C,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(k,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(_,{className:"text-yellow-800",children:["You need to first connect other social media accounts to use them in workflows."," ",e.jsx(f,{href:"/connections",className:"font-medium underline hover:no-underline",children:"Go to Connections"})]})]}),F&&o.length>=2&&e.jsxs(h,{children:[e.jsxs(L,{children:[e.jsx(V,{children:"Create New Workflow"}),e.jsx(z,{children:"Set up automatic video syncing between platforms for a specific channel"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Workflow Name"}),e.jsx(b,{id:"name",placeholder:"e.g., YouTube to Instagram",value:a.name,onChange:s=>t({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"channel",children:"Channel"}),e.jsxs(g,{value:a.channel_id,onValueChange:s=>t({...a,channel_id:s}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select channel"})}),e.jsx(y,{children:I.map(s=>e.jsx(w,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(b,{id:"description",placeholder:"Brief description of this workflow",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"source",children:"Source Platform"}),e.jsxs(g,{value:a.source_platform,onValueChange:s=>t({...a,source_platform:s}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select source platform"})}),e.jsx(y,{children:o.map(s=>{const r=m[s.name];return e.jsx(w,{value:s.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),s.label]})},s.name)})})]})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Target Platforms"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:o.filter(s=>s.name!==a.source_platform).map(s=>{const r=m[s.name],l=a.target_platforms.includes(s.name);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:s.name,checked:l,onChange:d=>{d.target.checked?t({...a,target_platforms:[...a.target_platforms,s.name]}):t({...a,target_platforms:a.target_platforms.filter(T=>T!==s.name)})},className:"rounded"}),e.jsxs("label",{htmlFor:s.name,className:"flex items-center text-sm",children:[e.jsx(r,{className:"w-4 h-4 mr-1"}),s.label]})]},s.name)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"active",checked:a.is_active,onCheckedChange:s=>t({...a,is_active:s})}),e.jsx(c,{htmlFor:"active",children:"Activate workflow immediately"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(i,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(i,{onClick:W,children:"Create Workflow"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Workflows"}),j.length===0?e.jsx(h,{children:e.jsxs(p,{className:"text-center py-12",children:[e.jsx(q,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workflows yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workflow to start automating video distribution across platforms."}),e.jsxs(i,{onClick:()=>n(!0),children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),"Create Your First Workflow"]})]})}):e.jsx("div",{className:"grid gap-4",children:j.map(s=>{const r=m[s.source_platform];return e.jsx(h,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx(B,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-1 rounded-lg",children:[e.jsx(J,{className:"w-4 h-4 text-blue-600"}),e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:s.source_platform})]}),e.jsx(K,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"flex items-center space-x-1",children:s.target_platforms.map(l=>{const d=m[l];return e.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-2 py-1 rounded",children:[e.jsx(O,{className:"w-3 h-3 text-green-600"}),e.jsx(d,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs capitalize",children:l})]},l)})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Created: ",new Date(s.created_at).toLocaleDateString()]}),s.last_run_at&&e.jsxs("span",{children:["Last run: ",new Date(s.last_run_at).toLocaleDateString()]}),e.jsxs("span",{children:["Videos processed: ",s.videos_processed]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>D(s.id,!s.is_active),children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),"Activate"]})}),e.jsx(f,{href:`/workflow/${s.id}/edit`,children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Edit"]})}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>P(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})})},s.id)})})]})]})]})}export{Ye as default};
