import{r as i,j as e,v as pe,$ as me,Y as _}from"./app-DGswcp_G.js";import{c as V,u as G,a as M,B as D}from"./button-CwZdtYtg.js";import{C as he,a as xe,b as fe,d as ve,c as be}from"./card-DNYGgm9k.js";import{L as y,I as P}from"./label-x9NwAcuX.js";import{T as ge}from"./textarea-Ch5uL94I.js";import{u as je,C as ye}from"./checkbox-752YAJQN.js";import{u as Ne,c as O,a as E,P as Ce,b as Re}from"./index-BfdbNgSz.js";import{P as R}from"./index-C5vS8yi1.js";import{c as U,u as we,R as ke,I as Ie,A as _e}from"./app-layout-CsNiOwCl.js";import{A as S,a as A}from"./alert-0yZw7IVn.js";import{A as De}from"./arrow-left-CQ5wWY3E.js";import{U as Pe,C as Se}from"./upload-Bmq3UzMm.js";import{V as Ae,I as Ee,Y as Fe}from"./youtube-BtBuqx3P.js";import{C as Ge}from"./clock-CnN-8-eR.js";import"./check-CVZiHNPl.js";import"./app-logo-icon-C3_X4wxS.js";import"./chart-column-oWGzqR77.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ve=V("Circle",Te);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Oe=V("Info",Me);var T="Radio",[Ue,$]=O(T),[$e,Le]=Ue(T),L=i.forwardRef((t,n)=>{const{__scopeRadio:r,name:p,checked:o=!1,required:l,disabled:u,value:v="on",onCheck:m,form:h,...x}=t,[b,d]=i.useState(null),a=G(n,c=>d(c)),f=i.useRef(!1),N=b?h||!!b.closest("form"):!0;return e.jsxs($e,{scope:r,checked:o,disabled:u,children:[e.jsx(R.button,{type:"button",role:"radio","aria-checked":o,"data-state":W(o),"data-disabled":u?"":void 0,disabled:u,value:v,...x,ref:a,onClick:E(t.onClick,c=>{o||m==null||m(),N&&(f.current=c.isPropagationStopped(),f.current||c.stopPropagation())})}),N&&e.jsx(q,{control:b,bubbles:!f.current,name:p,value:v,checked:o,required:l,disabled:u,form:h,style:{transform:"translateX(-100%)"}})]})});L.displayName=T;var B="RadioIndicator",Y=i.forwardRef((t,n)=>{const{__scopeRadio:r,forceMount:p,...o}=t,l=Le(B,r);return e.jsx(Ce,{present:p||l.checked,children:e.jsx(R.span,{"data-state":W(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:n})})});Y.displayName=B;var Be="RadioBubbleInput",q=i.forwardRef(({__scopeRadio:t,control:n,checked:r,bubbles:p=!0,...o},l)=>{const u=i.useRef(null),v=G(u,l),m=je(r),h=Re(n);return i.useEffect(()=>{const x=u.current;if(!x)return;const b=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(b,"checked").set;if(m!==r&&a){const f=new Event("click",{bubbles:p});a.call(x,r),x.dispatchEvent(f)}},[m,r,p]),e.jsx(R.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:v,style:{...o.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});q.displayName=Be;function W(t){return t?"checked":"unchecked"}var Ye=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],w="RadioGroup",[qe,hs]=O(w,[U,$]),z=U(),H=$(),[We,ze]=qe(w),X=i.forwardRef((t,n)=>{const{__scopeRadioGroup:r,name:p,defaultValue:o,value:l,required:u=!1,disabled:v=!1,orientation:m,dir:h,loop:x=!0,onValueChange:b,...d}=t,a=z(r),f=we(h),[N,c]=Ne({prop:l,defaultProp:o??null,onChange:b,caller:w});return e.jsx(We,{scope:r,name:p,required:u,disabled:v,value:N,onValueChange:c,children:e.jsx(ke,{asChild:!0,...a,orientation:m,dir:f,loop:x,children:e.jsx(R.div,{role:"radiogroup","aria-required":u,"aria-orientation":m,"data-disabled":v?"":void 0,dir:f,...d,ref:n})})})});X.displayName=w;var J="RadioGroupItem",Q=i.forwardRef((t,n)=>{const{__scopeRadioGroup:r,disabled:p,...o}=t,l=ze(J,r),u=l.disabled||p,v=z(r),m=H(r),h=i.useRef(null),x=G(n,h),b=l.value===o.value,d=i.useRef(!1);return i.useEffect(()=>{const a=N=>{Ye.includes(N.key)&&(d.current=!0)},f=()=>d.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",f),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",f)}},[]),e.jsx(Ie,{asChild:!0,...v,focusable:!u,active:b,children:e.jsx(L,{disabled:u,required:l.required,checked:b,...m,...o,name:l.name,ref:x,onCheck:()=>l.onValueChange(o.value),onKeyDown:E(a=>{a.key==="Enter"&&a.preventDefault()}),onFocus:E(o.onFocus,()=>{var a;d.current&&((a=h.current)==null||a.click())})})})});Q.displayName=J;var He="RadioGroupIndicator",Z=i.forwardRef((t,n)=>{const{__scopeRadioGroup:r,...p}=t,o=H(r);return e.jsx(Y,{...o,...p,ref:n})});Z.displayName=He;var K=X,ee=Q,Xe=Z;const se=i.forwardRef(({className:t,...n},r)=>e.jsx(K,{className:M("grid gap-2",t),...n,ref:r}));se.displayName=K.displayName;const F=i.forwardRef(({className:t,...n},r)=>e.jsx(ee,{ref:r,className:M("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...n,children:e.jsx(Xe,{className:"flex items-center justify-center",children:e.jsx(Ve,{className:"h-2.5 w-2.5 fill-current text-current"})})}));F.displayName=ee.displayName;const Je={youtube:{name:"YouTube",icon:Fe,color:"text-red-600"},instagram:{name:"Instagram",icon:Ee,color:"text-pink-600"},tiktok:{name:"TikTok",icon:Ae,color:"text-black"}};function xs({channel:t,availablePlatforms:n,defaultPlatforms:r,connectedPlatforms:p,allowedPlatforms:o}){const[l,u]=i.useState(r),[v,m]=i.useState("now"),[h,x]=i.useState(!1),b=[{title:"Dashboard",href:"/dashboard"},{title:t.name,href:`/channels/${t.slug}`},{title:"Upload Video",href:`/channels/${t.slug}/videos/create`}],{data:d,setData:a,post:f,processing:N,errors:c,progress:k}=pe({video:null,title:"",description:"",platforms:r,publish_type:"now",publish_at:""}),te=(s,g)=>{let j;g?j=[...l,s]:j=l.filter(C=>C!==s),u(j),a("platforms",j)},re=s=>{m(s),a("publish_type",s),s==="now"&&a("publish_at","")},ae=s=>{s.preventDefault(),f(`/channels/${t.slug}/videos`)},oe=s=>{var j;const g=(j=s.target.files)==null?void 0:j[0];g&&a("video",g)},ie=i.useCallback(s=>{s.preventDefault(),x(!1);const g=s.dataTransfer.files;if(g&&g[0]){const j=g[0];j.type.startsWith("video/")?a("video",j):alert("Please select a valid video file")}},[a]),ne=i.useCallback(s=>{s.preventDefault(),x(!0)},[]),le=i.useCallback(s=>{s.preventDefault(),x(!1)},[]);return e.jsxs(_e,{breadcrumbs:b,children:[e.jsx(me,{title:"Upload Video"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Upload Video to ",t.name]}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a video to publish across your connected social media platforms"})]}),e.jsx(_,{href:`/channels/${t.slug}`,children:e.jsxs(D,{variant:"outline",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Back to Channel"]})})]}),n.length===0&&e.jsxs(S,{className:"bg-yellow-50 border-yellow-200",children:[e.jsx(Oe,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(A,{className:"text-yellow-800",children:[e.jsx("strong",{children:"No connected platforms:"})," You need to connect at least one social media platform to this channel before uploading videos.",e.jsx(_,{href:`/channels/${t.slug}`,className:"ml-1 underline",children:"Connect platforms now"})]})]}),o.length===1&&e.jsx(S,{className:"bg-blue-50 border-blue-200",children:e.jsxs(A,{className:"text-blue-800",children:[e.jsx("strong",{children:"Free Plan:"})," You currently have access to YouTube only. Upgrade to Pro to unlock Instagram and TikTok publishing."]})}),e.jsxs(he,{className:"max-w-2xl",children:[e.jsxs(xe,{children:[e.jsx(fe,{children:"Video Details"}),e.jsx(ve,{children:"Upload your video file and provide details for publishing"})]}),e.jsx(be,{children:e.jsxs("form",{onSubmit:ae,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"video",children:"Video File"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${h?"border-blue-400 bg-blue-50":"border-gray-300 hover:border-gray-400"}`,onDrop:ie,onDragOver:ne,onDragLeave:le,children:[e.jsx(Pe,{className:`mx-auto h-12 w-12 ${h?"text-blue-500":"text-gray-400"}`}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(y,{htmlFor:"video",className:"cursor-pointer",children:[e.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900",children:h?"Drop your video here":"Click to upload or drag and drop"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500",children:"MP4, MOV, AVI, WMV, WebM up to 100MB (max 60 seconds)"})]}),e.jsx(P,{id:"video",type:"file",accept:"video/*",onChange:oe,className:"hidden"})]})]}),d.video&&e.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded border border-green-200",children:[e.jsx("strong",{children:"Selected:"})," ",d.video.name," (",(d.video.size/(1024*1024)).toFixed(2)," MB)"]}),c.video&&e.jsx("p",{className:"text-sm text-red-600",children:c.video}),k&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[k.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${k.percentage}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"title",children:"Title"}),e.jsx(P,{id:"title",value:d.title,onChange:s=>a("title",s.target.value),placeholder:"Enter video title"}),c.title&&e.jsx("p",{className:"text-sm text-red-600",children:c.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"description",children:"Description"}),e.jsx(ge,{id:"description",value:d.description,onChange:s=>a("description",s.target.value),placeholder:"Enter video description",rows:4}),c.description&&e.jsx("p",{className:"text-sm text-red-600",children:c.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{children:"Select Platforms"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which platforms to publish this video to"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(Je).map(([s,g])=>{const j=g.icon,C=n.includes(s),ce=p.includes(s),I=o.includes(s),de=l.includes(s);return e.jsxs("div",{className:`flex items-center space-x-3 p-3 border rounded-lg ${C?"border-gray-300":"bg-gray-50 border-gray-200"}`,children:[e.jsx(ye,{id:s,checked:de,disabled:!C,onCheckedChange:ue=>te(s,ue)}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(j,{className:`h-5 w-5 ${g.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{htmlFor:s,className:`font-medium cursor-pointer ${C?"":"text-gray-400"}`,children:g.name}),!I&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:"Pro Only"}),I&&!ce&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded",children:"Not Connected"})]}),!C&&e.jsx("p",{className:"text-xs text-gray-400",children:I?"Connect this platform to your channel":"Upgrade to access this platform"})]})]})]},s)})}),c.platforms&&e.jsx("p",{className:"text-sm text-red-600",children:c.platforms}),n.length===0&&e.jsx(S,{className:"bg-yellow-50 border-yellow-200",children:e.jsx(A,{className:"text-yellow-800",children:"No platforms available for upload. Please connect at least one platform to this channel."})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(y,{children:"Publishing Options"}),e.jsxs(se,{value:v,onValueChange:re,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"now",id:"now"}),e.jsxs(y,{htmlFor:"now",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Ge,{className:"h-4 w-4"}),e.jsx("span",{children:"Publish now"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"scheduled",id:"scheduled"}),e.jsxs(y,{htmlFor:"scheduled",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule for later"})]})]})]}),v==="scheduled"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(y,{htmlFor:"publish_at",children:"Publish Date & Time"}),e.jsx(P,{id:"publish_at",type:"datetime-local",value:d.publish_at,onChange:s=>a("publish_at",s.target.value),min:new Date().toISOString().slice(0,16)}),c.publish_at&&e.jsx("p",{className:"text-sm text-red-600",children:c.publish_at})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(_,{href:`/channels/${t.slug}`,children:e.jsx(D,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(D,{type:"submit",disabled:N||!d.video||l.length===0||n.length===0,children:N?"Uploading...":"Upload Video"})]})]})})]})]})]})}export{xs as default};
