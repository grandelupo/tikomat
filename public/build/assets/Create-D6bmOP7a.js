import{r as i,j as e,v as fe,$ as be,Y as P}from"./app-CdHooW1n.js";import{c as V,u as M,a as U,B as I}from"./button-B9HkQXrw.js";import{C as ge,a as ve,b as je,d as ye,c as Ne}from"./card-BZcMaJSY.js";import{L as N,I as S}from"./label-BI8Xq25X.js";import{T as ke}from"./textarea-C4YOBTVD.js";import{u as we,C as Ce}from"./checkbox-BJerCgzF.js";import{u as Re,c as $,a as T,P as _e,b as De}from"./index-CJrxYHem.js";import{P as C}from"./index-ZGCAbxzC.js";import{c as L,u as Pe,R as Ie,I as Se,A as Ee}from"./app-layout-DN5GNIX2.js";import{A as E,a as A}from"./alert-CSKJBJf2.js";import{A as Ae}from"./arrow-left-f0bkauOD.js";import{U as Te,C as Fe}from"./upload-CGZ3b7sM.js";import{V as Me,I as Ge,Y as Oe}from"./youtube-CCdKr7DD.js";import{C as Ve}from"./clock-C_R4fZXa.js";import"./check-B4zyQFxl.js";import"./chart-column-BK2_OVw8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ue=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$e=V("Circle",Ue);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Be=V("Info",Le);var G="Radio",[Ye,B]=$(G),[qe,ze]=Ye(G),Y=i.forwardRef((r,d)=>{const{__scopeRadio:a,name:h,checked:o=!1,required:l,disabled:m,value:f="on",onCheck:b,form:g,...v}=r,[n,j]=i.useState(null),c=M(d,k=>j(k)),t=i.useRef(!1),p=n?g||!!n.closest("form"):!0;return e.jsxs(qe,{scope:a,checked:o,disabled:m,children:[e.jsx(C.button,{type:"button",role:"radio","aria-checked":o,"data-state":H(o),"data-disabled":m?"":void 0,disabled:m,value:f,...v,ref:c,onClick:T(r.onClick,k=>{o||b==null||b(),p&&(t.current=k.isPropagationStopped(),t.current||k.stopPropagation())})}),p&&e.jsx(W,{control:n,bubbles:!t.current,name:h,value:f,checked:o,required:l,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});Y.displayName=G;var q="RadioIndicator",z=i.forwardRef((r,d)=>{const{__scopeRadio:a,forceMount:h,...o}=r,l=ze(q,a);return e.jsx(_e,{present:h||l.checked,children:e.jsx(C.span,{"data-state":H(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:d})})});z.displayName=q;var We="RadioBubbleInput",W=i.forwardRef(({__scopeRadio:r,control:d,checked:a,bubbles:h=!0,...o},l)=>{const m=i.useRef(null),f=M(m,l),b=we(a),g=De(d);return i.useEffect(()=>{const v=m.current;if(!v)return;const n=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(n,"checked").set;if(b!==a&&c){const t=new Event("click",{bubbles:h});c.call(v,a),v.dispatchEvent(t)}},[b,a,h]),e.jsx(C.input,{type:"radio","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:f,style:{...o.style,...g,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});W.displayName=We;function H(r){return r?"checked":"unchecked"}var He=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],R="RadioGroup",[Xe,bs]=$(R,[L,B]),X=L(),J=B(),[Je,Qe]=Xe(R),Q=i.forwardRef((r,d)=>{const{__scopeRadioGroup:a,name:h,defaultValue:o,value:l,required:m=!1,disabled:f=!1,orientation:b,dir:g,loop:v=!0,onValueChange:n,...j}=r,c=X(a),t=Pe(g),[p,k]=Re({prop:l,defaultProp:o??null,onChange:n,caller:R});return e.jsx(Je,{scope:a,name:h,required:m,disabled:f,value:p,onValueChange:k,children:e.jsx(Ie,{asChild:!0,...c,orientation:b,dir:t,loop:v,children:e.jsx(C.div,{role:"radiogroup","aria-required":m,"aria-orientation":b,"data-disabled":f?"":void 0,dir:t,...j,ref:d})})})});Q.displayName=R;var Z="RadioGroupItem",K=i.forwardRef((r,d)=>{const{__scopeRadioGroup:a,disabled:h,...o}=r,l=Qe(Z,a),m=l.disabled||h,f=X(a),b=J(a),g=i.useRef(null),v=M(d,g),n=l.value===o.value,j=i.useRef(!1);return i.useEffect(()=>{const c=p=>{He.includes(p.key)&&(j.current=!0)},t=()=>j.current=!1;return document.addEventListener("keydown",c),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",t)}},[]),e.jsx(Se,{asChild:!0,...f,focusable:!m,active:n,children:e.jsx(Y,{disabled:m,required:l.required,checked:n,...b,...o,name:l.name,ref:v,onCheck:()=>l.onValueChange(o.value),onKeyDown:T(c=>{c.key==="Enter"&&c.preventDefault()}),onFocus:T(o.onFocus,()=>{var c;j.current&&((c=g.current)==null||c.click())})})})});K.displayName=Z;var Ze="RadioGroupIndicator",ee=i.forwardRef((r,d)=>{const{__scopeRadioGroup:a,...h}=r,o=J(a);return e.jsx(z,{...o,...h,ref:d})});ee.displayName=Ze;var se=Q,te=K,Ke=ee;const re=i.forwardRef(({className:r,...d},a)=>e.jsx(se,{className:U("grid gap-2",r),...d,ref:a}));re.displayName=se.displayName;const F=i.forwardRef(({className:r,...d},a)=>e.jsx(te,{ref:a,className:U("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...d,children:e.jsx(Ke,{className:"flex items-center justify-center",children:e.jsx($e,{className:"h-2.5 w-2.5 fill-current text-current"})})}));F.displayName=te.displayName;const es={youtube:{name:"YouTube",icon:Oe,color:"text-red-600"},instagram:{name:"Instagram",icon:Ge,color:"text-pink-600"},tiktok:{name:"TikTok",icon:Me,color:"text-black"}};function gs({channel:r,availablePlatforms:d,defaultPlatforms:a,connectedPlatforms:h,allowedPlatforms:o}){const[l,m]=i.useState(a),[f,b]=i.useState("now"),[g,v]=i.useState(!1),[n,j]=i.useState({}),c=[{title:"Dashboard",href:"/dashboard"},{title:r.name,href:`/channels/${r.slug}`},{title:"Upload Video",href:`/channels/${r.slug}/videos/create`}],{data:t,setData:p,post:k,processing:O,errors:y,progress:_}=fe({video:null,title:"",description:"",platforms:a,publish_type:"now",publish_at:""}),ae=(s,u)=>{let x;u?x=[...l,s]:x=l.filter(w=>w!==s),m(x),p("platforms",x)},oe=s=>{b(s),p("publish_type",s),s==="now"&&p("publish_at","")},ie=s=>{s.preventDefault(),j({}),pe()&&k(`/channels/${r.slug}/videos`)},le=s=>{var x;const u=(x=s.target.files)==null?void 0:x[0];u&&p("video",u)},ne=i.useCallback(s=>{s.preventDefault(),v(!1);const u=s.dataTransfer.files;if(u&&u[0]){const x=u[0];x.type.startsWith("video/")?p("video",x):alert("Please select a valid video file")}},[p]),de=i.useCallback(s=>{s.preventDefault(),v(!0)},[]),ce=i.useCallback(s=>{s.preventDefault(),v(!1)},[]),ue=s=>s.size>100*1024*1024?"File size must be less than 100MB":s.type.startsWith("video/")?null:"Please select a valid video file",pe=()=>{const s={};if(t.title.trim()?t.title.length>255&&(s.title="Title must be less than 255 characters"):s.title="Title is required",t.description&&t.description.length>1e3&&(s.description="Description must be less than 1000 characters"),l.length===0&&(s.platforms="Please select at least one platform"),f==="scheduled")if(!t.publish_at)s.publish_at="Please select a publish date and time";else{const u=new Date(t.publish_at),x=new Date,w=new Date(x.getTime()+5*6e4);u<=w&&(s.publish_at="Publish date must be at least 5 minutes from now")}if(!t.video)s.video="Please select a video file";else{const u=ue(t.video);u&&(s.video=u)}return j(s),Object.keys(s).length===0};return e.jsxs(Ee,{breadcrumbs:c,children:[e.jsx(be,{title:"Upload Video"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Upload Video to ",r.name]}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a video to publish across your connected social media platforms"})]}),e.jsx(P,{href:`/channels/${r.slug}`,children:e.jsxs(I,{variant:"outline",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Back to Channel"]})})]}),d.length===0&&e.jsxs(E,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-950 dark:border-yellow-800",children:[e.jsx(Be,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(A,{className:"text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"No connected platforms:"})," You need to connect at least one social media platform to this channel before uploading videos.",e.jsx(P,{href:`/channels/${r.slug}`,className:"ml-1 underline",children:"Connect platforms now"})]})]}),o.length===1&&e.jsx(E,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:e.jsxs(A,{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Free Plan:"})," You currently have access to YouTube only. Upgrade to Pro to unlock Instagram and TikTok publishing."]})}),e.jsxs(ge,{className:"max-w-2xl",children:[e.jsxs(ve,{children:[e.jsx(je,{children:"Video Details"}),e.jsx(ye,{children:"Upload your video file and provide details for publishing"})]}),e.jsx(Ne,{children:e.jsxs("form",{onSubmit:ie,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"video",children:"Video File"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${g?"border-blue-400 bg-blue-50 dark:border-blue-500 dark:bg-blue-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}`,onDrop:ne,onDragOver:de,onDragLeave:ce,children:[e.jsx(Te,{className:`mx-auto h-12 w-12 ${g?"text-blue-500":"text-gray-400 dark:text-gray-500"}`}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(N,{htmlFor:"video",className:"cursor-pointer",children:[e.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:g?"Drop your video here":"Click to upload or drag and drop"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500 dark:text-gray-400",children:"MP4, MOV, AVI, WMV, WebM up to 100MB (max 60 seconds)"})]}),e.jsx(S,{id:"video",type:"file",accept:"video/*",onChange:le,className:"hidden"})]})]}),t.video&&e.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded border border-green-200 dark:text-green-400 dark:bg-green-900/20 dark:border-green-800",children:[e.jsx("strong",{children:"Selected:"})," ",t.video.name," (",(t.video.size/(1024*1024)).toFixed(2)," MB)"]}),(y.video||n.video)&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:y.video||n.video}),_&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm dark:text-gray-300",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[_.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${_.percentage}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"title",children:"Title"}),e.jsx(S,{id:"title",value:t.title,onChange:s=>p("title",s.target.value),placeholder:"Enter video title"}),(y.title||n.title)&&e.jsx("p",{className:"text-sm text-red-600",children:y.title||n.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(ke,{id:"description",value:t.description,onChange:s=>p("description",s.target.value),placeholder:"Enter video description",rows:4}),(y.description||n.description)&&e.jsx("p",{className:"text-sm text-red-600",children:y.description||n.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Select Platforms"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which platforms to publish this video to"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(es).map(([s,u])=>{const x=u.icon,w=d.includes(s),me=h.includes(s),D=o.includes(s),he=l.includes(s);return e.jsxs("div",{className:`flex items-center space-x-3 p-3 border rounded-lg ${w?"border-gray-300 dark:border-gray-600":"bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[e.jsx(Ce,{id:s,checked:he,disabled:!w,onCheckedChange:xe=>ae(s,xe)}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(x,{className:`h-5 w-5 ${u.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{htmlFor:s,className:`font-medium cursor-pointer ${w?"":"text-gray-400 dark:text-gray-500"}`,children:u.name}),!D&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded dark:bg-blue-900/30 dark:text-blue-300",children:"Pro Only"}),D&&!me&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded dark:bg-yellow-900/30 dark:text-yellow-300",children:"Not Connected"})]}),!w&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:D?"Connect this platform to your channel":"Upgrade to access this platform"})]})]})]},s)})}),(y.platforms||n.platforms)&&e.jsx("p",{className:"text-sm text-red-600",children:y.platforms||n.platforms}),d.length===0&&e.jsx(E,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800",children:e.jsx(A,{className:"text-yellow-800 dark:text-yellow-200",children:"No platforms available for upload. Please connect at least one platform to this channel."})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(N,{children:"Publishing Options"}),e.jsxs(re,{value:f,onValueChange:oe,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"now",id:"now"}),e.jsxs(N,{htmlFor:"now",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{children:"Publish now"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{value:"scheduled",id:"scheduled"}),e.jsxs(N,{htmlFor:"scheduled",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Fe,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule for later"})]})]})]}),f==="scheduled"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(N,{htmlFor:"publish_at",children:"Publish Date & Time (Your Local Time)"}),e.jsx(S,{id:"publish_at",type:"datetime-local",value:t.publish_at,onChange:s=>p("publish_at",s.target.value),min:(()=>{const s=new Date;return s.setMinutes(s.getMinutes()+5),s.toISOString().slice(0,16)})()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time will be converted to your local timezone. Minimum: 5 minutes from now."}),(y.publish_at||n.publish_at)&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:y.publish_at||n.publish_at})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(P,{href:`/channels/${r.slug}`,children:e.jsx(I,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(I,{type:"submit",disabled:O||!t.video||l.length===0||d.length===0,children:O?"Uploading...":"Upload Video"})]})]})})]})]})]})}export{gs as default};
