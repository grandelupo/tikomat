import{r,j as e,$ as K,Y as m,m as g}from"./app-DUsOoLcB.js";import{B as a}from"./button-Bi9frjTx.js";import{C as E,b as U,c as B,a as O,d as J}from"./card-D-yWmt0p.js";import{B as Q}from"./badge-Ca6ErgLP.js";import{S as N,a as C,b as k,c as y,d as l}from"./select-Bxcm-hIc.js";import{D as W,b as Z,c as ee,d as se,e as le,f as ae}from"./dialog-BUc4eG4Y.js";import{I as te}from"./input-Bn3d6jm4.js";import{T as re,a as ie,b as Y,c as i,d as ne,e as n,V as oe,S as ce}from"./VideoThumbnail-PjTmmFWW.js";import{A as de}from"./app-layout-CLwD6sIU.js";import{P as _}from"./plus-dWMLU9j4.js";import{F as me}from"./filter-MHuemeVL.js";import{S as he}from"./search-Bz_lusEQ.js";import{V as c}from"./video-D3UXl7Xw.js";import{C as xe}from"./circle-x-4In4irHU.js";import{C as ue}from"./circle-check-big-CWIwRuGp.js";import{C as je}from"./circle-alert--BABerp7.js";import{C as pe}from"./clock-BuqPqxeW.js";import{I as fe}from"./instagram-a7J3T_KS.js";import{Y as ge}from"./youtube-hfzczlLN.js";import{E as ve}from"./eye-COq9J9Yt.js";import{T as be}from"./trash-2-D21E654S.js";import"./index-CUF4B9Uv.js";import"./index-D8LsEh_L.js";import"./index-wMZUiMBe.js";import"./chevron-down-CWphBsVF.js";import"./check-CYlpnepX.js";import"./workflow-CtamUz8V.js";import"./calendar-CZVBnsPk.js";const Ne=[{title:"My channels",href:"/dashboard"},{title:"All videos",href:"/videos"}],Ce={youtube:ge,instagram:fe,tiktok:c,facebook:c,x:c,snapchat:c,pinterest:c},ke={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},ye={pending:pe,processing:je,success:ue,failed:xe};function Ze({videos:v,channels:d,filters:o}){var F,$,R;const[b,S]=r.useState(o.search||""),[h,w]=r.useState(o.channel||""),[x,T]=r.useState(o.platform||""),[u,D]=r.useState(o.status||""),[z,j]=r.useState(!1),[V,A]=r.useState(null),[p,f]=r.useState("tikomat"),I=()=>{const s=new URLSearchParams;b&&s.set("search",b),h&&h!=="all"&&s.set("channel",h),x&&x!=="all"&&s.set("platform",x),u&&u!=="all"&&s.set("status",u),g.get("/videos",Object.fromEntries(s),{preserveState:!0})},H=()=>{S(""),w(""),T(""),D(""),g.get("/videos",{},{preserveState:!0})},L=s=>{g.post(`/video-targets/${s}/retry`)},M=s=>{A(s),j(!0)},X=()=>{V&&g.delete(`/videos/${V}`,{data:{delete_option:p},onSuccess:()=>{j(!1),A(null)}})},P=()=>d.find(s=>s.name.toLowerCase().includes("default"))||d[0];return e.jsxs(de,{breadcrumbs:Ne,children:[e.jsx(K,{title:"Recently Uploaded Videos"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recently Uploaded"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all your uploaded videos and their publishing status"})]}),d.length>0&&e.jsx(m,{href:`/channels/${(F=P())==null?void 0:F.slug}/videos/create`,children:e.jsxs(a,{size:"lg",children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})]}),e.jsxs(E,{children:[e.jsx(U,{children:e.jsxs(B,{className:"flex items-center",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsx(O,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(te,{placeholder:"Search videos...",value:b,onChange:s=>S(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&I()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Channel"}),e.jsxs(N,{value:h||"all",onValueChange:s=>w(s==="all"?"":s),children:[e.jsx(C,{children:e.jsx(k,{placeholder:"All channels"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All channels"}),d.map(s=>e.jsx(l,{value:s.slug,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Platform"}),e.jsxs(N,{value:x||"all",onValueChange:s=>T(s==="all"?"":s),children:[e.jsx(C,{children:e.jsx(k,{placeholder:"All platforms"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All platforms"}),e.jsx(l,{value:"youtube",children:"YouTube"}),e.jsx(l,{value:"instagram",children:"Instagram"}),e.jsx(l,{value:"tiktok",children:"TikTok"}),e.jsx(l,{value:"facebook",children:"Facebook"}),e.jsx(l,{value:"x",children:"X"}),e.jsx(l,{value:"snapchat",children:"Snapchat"}),e.jsx(l,{value:"pinterest",children:"Pinterest"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(N,{value:u||"all",onValueChange:s=>D(s==="all"?"":s),children:[e.jsx(C,{children:e.jsx(k,{placeholder:"All statuses"})}),e.jsxs(y,{children:[e.jsx(l,{value:"all",children:"All statuses"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"processing",children:"Processing"}),e.jsx(l,{value:"success",children:"Success"}),e.jsx(l,{value:"failed",children:"Failed"})]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(a,{onClick:I,className:"flex-1",children:"Apply Filters"}),e.jsx(a,{variant:"outline",onClick:H,children:"Clear"})]})]})})]}),e.jsxs(E,{children:[e.jsxs(U,{children:[e.jsxs(B,{children:["Videos (",(($=v.meta)==null?void 0:$.total)||0,")"]}),e.jsx(J,{children:"Your uploaded videos and their publishing status across platforms"})]}),e.jsx(O,{children:v.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(c,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No videos found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:Object.values(o).some(s=>s)?"Try adjusting your filters.":"Get started by uploading your first video."}),!Object.values(o).some(s=>s)&&d.length>0&&e.jsx("div",{className:"mt-6",children:e.jsx(m,{href:`/channels/${(R=P())==null?void 0:R.slug}/videos/create`,children:e.jsxs(a,{children:[e.jsx(_,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})})]}):e.jsxs(re,{children:[e.jsx(ie,{children:e.jsxs(Y,{children:[e.jsx(i,{className:"w-20",children:"Thumbnail"}),e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Channel"}),e.jsx(i,{children:"Duration"}),e.jsx(i,{children:"Platforms"}),e.jsx(i,{children:"Upload Date"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(ne,{children:v.data.map(s=>e.jsxs(Y,{children:[e.jsx(n,{children:e.jsx(oe,{src:s.thumbnail_path,alt:s.title,width:s.video_width??void 0,height:s.video_height??void 0,className:"w-16 h-12"})}),e.jsx(n,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(n,{children:e.jsx(m,{href:`/channels/${s.channel.slug}`,className:"text-blue-600 hover:text-blue-700",children:s.channel.name})}),e.jsx(n,{children:s.formatted_duration}),e.jsx(n,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.targets.map(t=>{const q=ye[t.status],G=Ce[t.platform];return e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Q,{variant:"secondary",className:`${ke[t.status]} flex items-center gap-1 text-xs`,children:[e.jsx(G,{className:"h-3 w-3"}),e.jsx(q,{className:"h-3 w-3"}),t.platform.charAt(0).toUpperCase()+t.platform.slice(1)]}),t.status==="failed"&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>L(t.id),className:"text-xs px-1 py-0 h-auto ml-1 text-red-600",children:"Retry"})]},t.id)})})}),e.jsx(n,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(n,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(m,{href:`/videos/${s.id}/edit`,children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(ve,{className:"mr-1 h-3 w-3"}),"View"]})}),e.jsx(m,{href:`/videos/${s.id}/edit`,children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(ce,{className:"mr-1 h-3 w-3"}),"Edit"]})}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>M(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(be,{className:"mr-1 h-3 w-3"}),"Delete"]})]})})]},s.id))})]})})]}),e.jsx(W,{open:z,onOpenChange:j,children:e.jsxs(Z,{className:"sm:max-w-md",children:[e.jsxs(ee,{children:[e.jsx(se,{children:"Delete Video"}),e.jsx(le,{children:"Choose how you want to handle this video deletion. This action cannot be undone."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>f("tikomat"),children:[e.jsx("input",{type:"radio",id:"delete-tikomat-videos",name:"delete-option",value:"tikomat",checked:p==="tikomat",onChange:s=>f(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-tikomat-videos",className:"text-sm font-medium cursor-pointer",children:"Remove only from Tikomat"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will remain published on all platforms but removed from Tikomat's tracking"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>f("all"),children:[e.jsx("input",{type:"radio",id:"delete-all-videos",name:"delete-option",value:"all",checked:p==="all",onChange:s=>f(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-all-videos",className:"text-sm font-medium cursor-pointer",children:"Take down from all platforms"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will be completely removed from all platforms and Tikomat"})]})]})]})}),e.jsxs(ae,{children:[e.jsx(a,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:X,children:p==="all"?"Take Down Video":"Remove from Tikomat"})]})]})})]})]})}export{Ze as default};
