import{r as h,j as e,$ as k,Y as x,m as p}from"./app-ozfEpo_I.js";import{c as w,B as a}from"./button-CsYLtmsg.js";import{C as i,b as r,c as o,a as c,d as D}from"./card-QOP9n2Sn.js";import{B as C}from"./badge-NJ_G1r72.js";import{D as _,a as y,b as S,c as V,d as L,e as $}from"./dialog-Dp5o4KcK.js";import{A as E}from"./app-layout-s3LkRgpS.js";import{A as I}from"./arrow-left-zKIODrRS.js";import{S as T}from"./square-pen-BiJXmwYo.js";import{T as A}from"./trash-2-q6ILX8cB.js";import{C as u}from"./circle-x-DJXCcZoq.js";import{C as B}from"./circle-check-big-DI0dRkbP.js";import{C as P}from"./circle-alert-BNnJHDS2.js";import{C as q}from"./clock-C9xbf533.js";import{V as F,I as U,Y}from"./youtube-CdNSo5sW.js";import"./index-CGxPRdp5.js";import"./index-BapqW0YF.js";import"./chart-column-CG83j-w0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],H=w("ExternalLink",z),M={youtube:Y,instagram:U,tiktok:F},O={pending:q,processing:P,success:B,failed:u},R={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},X=[{title:"Videos",href:"/videos"},{title:"Video Details",href:"#"}];function me({video:t}){const[f,d]=h.useState(!1),[l,n]=h.useState("tikomat"),j=()=>{d(!0)},v=()=>{p.delete(`/videos/${t.id}`,{data:{delete_option:l},onSuccess:()=>{p.visit("/videos")}})},N=s=>{if(s.platform_url)return s.platform_url;switch(s.platform){case"youtube":return s.platform_video_id?`https://youtube.com/watch?v=${s.platform_video_id}`:null;case"instagram":return s.platform_video_id?`https://instagram.com/p/${s.platform_video_id}`:null;case"tiktok":return s.platform_video_id?`https://tiktok.com/@username/video/${s.platform_video_id}`:null;default:return null}};return e.jsxs(E,{breadcrumbs:X,children:[e.jsx(k,{title:`Video: ${t.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(x,{href:"/videos",children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.title}),e.jsxs("p",{className:"text-muted-foreground",children:["Uploaded ",new Date(t.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{href:`/videos/${t.id}/edit`,children:e.jsxs(a,{variant:"outline",children:[e.jsx(T,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsxs(a,{variant:"outline",onClick:j,className:"text-red-600 hover:text-red-700",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(r,{children:e.jsx(o,{children:"Video Preview"})}),e.jsx(c,{children:e.jsx("div",{className:"aspect-video w-full bg-black rounded-lg overflow-hidden",children:e.jsx("video",{src:t.video_path,controls:!0,className:"w-full h-full"})})})]}),e.jsxs(i,{children:[e.jsx(r,{children:e.jsx(o,{children:"Video Details"})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Title"}),e.jsx("p",{className:"mt-1",children:t.title})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"mt-1",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"mt-1",children:t.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"mt-1",children:new Date(t.created_at).toLocaleString()})]})]})]}),e.jsxs(i,{className:"md:col-span-2",children:[e.jsxs(r,{children:[e.jsx(o,{children:"Publishing Status"}),e.jsx(D,{children:"Status for each platform"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:t.targets.map(s=>{const g=O[s.status],b=M[s.platform],m=N(s);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(b,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:s.platform}),s.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(s.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(C,{className:R[s.status],children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),s.status]}),m&&s.status==="success"&&e.jsx("a",{href:m,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx(H,{className:"w-4 h-4"})})]})]},s.id)})})})]})]}),t.targets.some(s=>s.status==="failed"&&s.error_message)&&e.jsxs(i,{children:[e.jsx(r,{children:e.jsx(o,{className:"text-red-600",children:"Error Details"})}),e.jsx(c,{children:e.jsx("div",{className:"space-y-3",children:t.targets.filter(s=>s.status==="failed"&&s.error_message).map(s=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(u,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"font-medium capitalize text-red-600",children:[s.platform," Error"]})]}),e.jsx("p",{className:"text-sm text-red-700",children:s.error_message})]},s.id))})})]}),e.jsx(_,{open:f,onOpenChange:d,children:e.jsxs(y,{children:[e.jsxs(S,{children:[e.jsx(V,{children:"Delete Video"}),e.jsx(L,{children:"Choose how you want to handle this video deletion:"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:l==="all",onChange:s=>n(s.target.value),className:"h-4 w-4"}),e.jsx("label",{htmlFor:"delete-all",className:"text-sm font-medium",children:"Delete from all platforms and Tikomat"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:l==="tikomat",onChange:s=>n(s.target.value),className:"h-4 w-4"}),e.jsx("label",{htmlFor:"delete-tikomat",className:"text-sm font-medium",children:"Remove only from Tikomat (keep on platforms)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"archive",name:"delete-option",value:"archive",checked:l==="archive",onChange:s=>n(s.target.value),className:"h-4 w-4"}),e.jsx("label",{htmlFor:"archive",className:"text-sm font-medium",children:"Archive on all platforms (make private/unlisted)"})]})]}),e.jsxs($,{children:[e.jsx(a,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:v,children:"Delete"})]})]})})]})]})}export{me as default};
