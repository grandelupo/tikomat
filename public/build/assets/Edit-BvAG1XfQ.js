import{r as c,j as e,v as ot,$ as dt,Y as mt,m as qe}from"./app-BKDgtsOL.js";import{c as ee,u as Pe,a as U,B as H}from"./button-Cs23Ldw7.js";import{C as S,a as P,b as R,c as k,d as Ue}from"./card-D-J_O7wT.js";import{I as xt}from"./input-C8bdQ77l.js";import{L as He}from"./label-gOZsKbeQ.js";import{T as ht}from"./textarea-BJIVfncV.js";import{T as $e,a as Be,b as de,c as me}from"./tabs-BMHyqdXb.js";import{B as D}from"./badge-HDYOpFie.js";import{D as Ms,b as Fs,c as Vs,d as Is,e as Os,f as ut}from"./dialog-BeVQAcOK.js";import{e as Ds,S as pt,a as gt,b as jt,c as ft,d as Fe}from"./select-Ca6OWNyx.js";import{u as bt,c as Nt,a as ke,b as yt}from"./index-F2H_rb8F.js";import{d as vt,u as wt,B as ve,A as _t,X as St}from"./app-layout-CSQgW9_r.js";import{u as kt}from"./index-DrjihaMA.js";import{P as Me}from"./index-BWgdCkjI.js";import{P as _e}from"./progress-0jwAjFxq.js";import{u as Ze}from"./use-toast-DG6uur9s.js";import{V as we}from"./video-DX3fiLTt.js";import{F as Ct}from"./file-text-C_YC9-Ag.js";import{I as Te}from"./image-DaPp3ERy.js";import{a as be,C as Ce,T as Ae}from"./workflow-R8ZM5xfN.js";import{R as xe,E as Ve}from"./ErrorBoundary-SHU94BDF.js";import{C as Ge}from"./circle-x-X_uUCl2Y.js";import{C as $s}from"./circle-check-big-CEpWA4_Y.js";import{E as ze}from"./eye-L2-j3VHe.js";import{H as es}from"./heart-s3cKdbYB.js";import{S as Tt,A as Ps}from"./share-2-DETsKkpg.js";import{C as Xe}from"./clock-D8Uvsh4d.js";import{C as Ye}from"./circle-alert-gUJT0zup.js";import{C as At}from"./checkbox-DpGDZ-ff.js";import{C as Pt}from"./calendar-CGQVCRqe.js";import{T as Rs}from"./triangle-alert-D2xPfRto.js";import{A as Ke}from"./activity-By58erNV.js";import{L as Rt}from"./lightbulb-DW6cregG.js";import{U as Et}from"./user-BeqRMz80.js";import{P as Bs,C as zt}from"./palette-39pImtNH.js";import{S as Mt}from"./sparkles-JmISSWE-.js";import{P as De}from"./play-IYsuRSrV.js";import{S as Ls}from"./star-CDiGRA1Q.js";import{P as Ft}from"./pause-CxXhOfYf.js";import{D as Es}from"./download-DXRaNTeB.js";import{A as Vt}from"./arrow-left-6ERnWau-.js";import{T as It}from"./trash-2-DH3r4GS1.js";import{I as Ot,Y as Dt}from"./youtube-CPqClWy5.js";import{U as $t}from"./upload-DAcIPZok.js";import{Z as Bt}from"./zap-gzuGwEN8.js";import"./chevron-down-CCgis0R3.js";import"./check-CCqP-Crj.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],qt=ee("AlignCenter",Lt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Ht=ee("AlignLeft",Ut);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Gt=ee("AlignRight",Kt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],zs=ee("ArrowDown",Xt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Jt=ee("Bold",Yt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Wt=ee("ExternalLink",Qt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],ea=ee("Film",Zt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ta=ee("Italic",sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],ra=ee("Languages",aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],Ie=ee("Mic",na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],la=ee("Save",ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],oa=ee("Share",ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Oe=ee("TestTube",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],xa=ee("TrendingDown",ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],ua=ee("Trophy",ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],ss=ee("Type",pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],ja=ee("Underline",ga);var qs=["PageUp","PageDown"],Us=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Hs={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Re="Slider",[Je,fa,ba]=vt(Re),[Ks,Ir]=Nt(Re,[ba]),[Na,Le]=Ks(Re),Gs=c.forwardRef((t,o)=>{const{name:n,min:s=0,max:r=100,step:b=1,orientation:u="horizontal",disabled:g=!1,minStepsBetweenThumbs:A=0,defaultValue:M=[s],value:j,onValueChange:p=()=>{},onValueCommit:N=()=>{},inverted:E=!1,form:B,...l}=t,y=c.useRef(new Set),f=c.useRef(0),T=u==="horizontal"?ya:va,[F=[],se]=bt({prop:j,defaultProp:M,onChange:$=>{var K;(K=[...y.current][f.current])==null||K.focus(),p($)}}),ae=c.useRef(F);function L($){const G=Ca(F,$);le($,G)}function ue($){le($,f.current)}function pe(){const $=ae.current[f.current];F[f.current]!==$&&N(F)}function le($,G,{commit:K}={commit:!1}){const ce=Ra(b),re=Ea(Math.round(($-s)/b)*b+s,ce),X=Ds(re,[s,r]);se((W=[])=>{const Y=Sa(W,X,G);if(Pa(Y,A*b)){f.current=Y.indexOf(X);const he=String(Y)!==String(W);return he&&K&&N(Y),he?Y:W}else return W})}return e.jsx(Na,{scope:t.__scopeSlider,name:n,disabled:g,min:s,max:r,valueIndexToChangeRef:f,thumbs:y.current,values:F,orientation:u,form:B,children:e.jsx(Je.Provider,{scope:t.__scopeSlider,children:e.jsx(Je.Slot,{scope:t.__scopeSlider,children:e.jsx(T,{"aria-disabled":g,"data-disabled":g?"":void 0,...l,ref:o,onPointerDown:ke(l.onPointerDown,()=>{g||(ae.current=F)}),min:s,max:r,inverted:E,onSlideStart:g?void 0:L,onSlideMove:g?void 0:ue,onSlideEnd:g?void 0:pe,onHomeKeyDown:()=>!g&&le(s,0,{commit:!0}),onEndKeyDown:()=>!g&&le(r,F.length-1,{commit:!0}),onStepKeyDown:({event:$,direction:G})=>{if(!g){const re=qs.includes($.key)||$.shiftKey&&Us.includes($.key)?10:1,X=f.current,W=F[X],Y=b*re*G;le(W+Y,X,{commit:!0})}}})})})})});Gs.displayName=Re;var[Xs,Ys]=Ks(Re,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ya=c.forwardRef((t,o)=>{const{min:n,max:s,dir:r,inverted:b,onSlideStart:u,onSlideMove:g,onSlideEnd:A,onStepKeyDown:M,...j}=t,[p,N]=c.useState(null),E=Pe(o,T=>N(T)),B=c.useRef(void 0),l=wt(r),y=l==="ltr",f=y&&!b||!y&&b;function C(T){const F=B.current||p.getBoundingClientRect(),se=[0,F.width],L=ts(se,f?[n,s]:[s,n]);return B.current=F,L(T-F.left)}return e.jsx(Xs,{scope:t.__scopeSlider,startEdge:f?"left":"right",endEdge:f?"right":"left",direction:f?1:-1,size:"width",children:e.jsx(Js,{dir:l,"data-orientation":"horizontal",...j,ref:E,style:{...j.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:T=>{const F=C(T.clientX);u==null||u(F)},onSlideMove:T=>{const F=C(T.clientX);g==null||g(F)},onSlideEnd:()=>{B.current=void 0,A==null||A()},onStepKeyDown:T=>{const se=Hs[f?"from-left":"from-right"].includes(T.key);M==null||M({event:T,direction:se?-1:1})}})})}),va=c.forwardRef((t,o)=>{const{min:n,max:s,inverted:r,onSlideStart:b,onSlideMove:u,onSlideEnd:g,onStepKeyDown:A,...M}=t,j=c.useRef(null),p=Pe(o,j),N=c.useRef(void 0),E=!r;function B(l){const y=N.current||j.current.getBoundingClientRect(),f=[0,y.height],T=ts(f,E?[s,n]:[n,s]);return N.current=y,T(l-y.top)}return e.jsx(Xs,{scope:t.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:e.jsx(Js,{"data-orientation":"vertical",...M,ref:p,style:{...M.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:l=>{const y=B(l.clientY);b==null||b(y)},onSlideMove:l=>{const y=B(l.clientY);u==null||u(y)},onSlideEnd:()=>{N.current=void 0,g==null||g()},onStepKeyDown:l=>{const f=Hs[E?"from-bottom":"from-top"].includes(l.key);A==null||A({event:l,direction:f?-1:1})}})})}),Js=c.forwardRef((t,o)=>{const{__scopeSlider:n,onSlideStart:s,onSlideMove:r,onSlideEnd:b,onHomeKeyDown:u,onEndKeyDown:g,onStepKeyDown:A,...M}=t,j=Le(Re,n);return e.jsx(Me.span,{...M,ref:o,onKeyDown:ke(t.onKeyDown,p=>{p.key==="Home"?(u(p),p.preventDefault()):p.key==="End"?(g(p),p.preventDefault()):qs.concat(Us).includes(p.key)&&(A(p),p.preventDefault())}),onPointerDown:ke(t.onPointerDown,p=>{const N=p.target;N.setPointerCapture(p.pointerId),p.preventDefault(),j.thumbs.has(N)?N.focus():s(p)}),onPointerMove:ke(t.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&r(p)}),onPointerUp:ke(t.onPointerUp,p=>{const N=p.target;N.hasPointerCapture(p.pointerId)&&(N.releasePointerCapture(p.pointerId),b(p))})})}),Qs="SliderTrack",Ws=c.forwardRef((t,o)=>{const{__scopeSlider:n,...s}=t,r=Le(Qs,n);return e.jsx(Me.span,{"data-disabled":r.disabled?"":void 0,"data-orientation":r.orientation,...s,ref:o})});Ws.displayName=Qs;var Qe="SliderRange",Zs=c.forwardRef((t,o)=>{const{__scopeSlider:n,...s}=t,r=Le(Qe,n),b=Ys(Qe,n),u=c.useRef(null),g=Pe(o,u),A=r.values.length,M=r.values.map(N=>tt(N,r.min,r.max)),j=A>1?Math.min(...M):0,p=100-Math.max(...M);return e.jsx(Me.span,{"data-orientation":r.orientation,"data-disabled":r.disabled?"":void 0,...s,ref:g,style:{...t.style,[b.startEdge]:j+"%",[b.endEdge]:p+"%"}})});Zs.displayName=Qe;var We="SliderThumb",et=c.forwardRef((t,o)=>{const n=fa(t.__scopeSlider),[s,r]=c.useState(null),b=Pe(o,g=>r(g)),u=c.useMemo(()=>s?n().findIndex(g=>g.ref.current===s):-1,[n,s]);return e.jsx(wa,{...t,ref:b,index:u})}),wa=c.forwardRef((t,o)=>{const{__scopeSlider:n,index:s,name:r,...b}=t,u=Le(We,n),g=Ys(We,n),[A,M]=c.useState(null),j=Pe(o,C=>M(C)),p=A?u.form||!!A.closest("form"):!0,N=yt(A),E=u.values[s],B=E===void 0?0:tt(E,u.min,u.max),l=ka(s,u.values.length),y=N==null?void 0:N[g.size],f=y?Ta(y,B,g.direction):0;return c.useEffect(()=>{if(A)return u.thumbs.add(A),()=>{u.thumbs.delete(A)}},[A,u.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[g.startEdge]:`calc(${B}% + ${f}px)`},children:[e.jsx(Je.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Me.span,{role:"slider","aria-label":t["aria-label"]||l,"aria-valuemin":u.min,"aria-valuenow":E,"aria-valuemax":u.max,"aria-orientation":u.orientation,"data-orientation":u.orientation,"data-disabled":u.disabled?"":void 0,tabIndex:u.disabled?void 0:0,...b,ref:j,style:E===void 0?{display:"none"}:t.style,onFocus:ke(t.onFocus,()=>{u.valueIndexToChangeRef.current=s})})}),p&&e.jsx(st,{name:r??(u.name?u.name+(u.values.length>1?"[]":""):void 0),form:u.form,value:E},s)]})});et.displayName=We;var _a="RadioBubbleInput",st=c.forwardRef(({__scopeSlider:t,value:o,...n},s)=>{const r=c.useRef(null),b=Pe(r,s),u=kt(o);return c.useEffect(()=>{const g=r.current;if(!g)return;const A=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(A,"value").set;if(u!==o&&j){const p=new Event("input",{bubbles:!0});j.call(g,o),g.dispatchEvent(p)}},[u,o]),e.jsx(Me.input,{style:{display:"none"},...n,ref:b,defaultValue:o})});st.displayName=_a;function Sa(t=[],o,n){const s=[...t];return s[n]=o,s.sort((r,b)=>r-b)}function tt(t,o,n){const b=100/(n-o)*(t-o);return Ds(b,[0,100])}function ka(t,o){return o>2?`Value ${t+1} of ${o}`:o===2?["Minimum","Maximum"][t]:void 0}function Ca(t,o){if(t.length===1)return 0;const n=t.map(r=>Math.abs(r-o)),s=Math.min(...n);return n.indexOf(s)}function Ta(t,o,n){const s=t/2,b=ts([0,50],[0,s]);return(s-b(o)*n)*n}function Aa(t){return t.slice(0,-1).map((o,n)=>t[n+1]-o)}function Pa(t,o){if(o>0){const n=Aa(t);return Math.min(...n)>=o}return!0}function ts(t,o){return n=>{if(t[0]===t[1]||o[0]===o[1])return o[0];const s=(o[1]-o[0])/(t[1]-t[0]);return o[0]+s*(n-t[0])}}function Ra(t){return(String(t).split(".")[1]||"").length}function Ea(t,o){const n=Math.pow(10,o);return Math.round(t*n)/n}var at=Gs,za=Ws,Ma=Zs,Fa=et;const rt=c.forwardRef(({className:t,...o},n)=>e.jsxs(at,{ref:n,className:U("relative flex w-full touch-none select-none items-center",t),...o,children:[e.jsx(za,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx(Ma,{className:"absolute h-full bg-primary"})}),e.jsx(Fa,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));rt.displayName=at.displayName;function Va({videoId:t,videoPath:o,onAnalysisComplete:n,className:s}){var T,F,se,ae,L,ue,pe,le,$,G,K,ce,re,X,W,Y,he,je,ne,J,Z,h,_,z,V,ie,q,Ne,ye,m,i,v;const[r,b]=c.useState(null),[u,g]=c.useState(!1),[A,M]=c.useState("overview"),{toast:j}=Ze(),p=async()=>{var x;if(!t){j({title:"No Video Selected",description:"Please select a video first before analyzing.",variant:"destructive"});return}g(!0);try{const I=await fetch("/ai/analyze-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({video_id:t})}),te=await I.json();te.success?(b(te.data),n==null||n(te.data),j({title:"Analysis Complete! 🎬",description:"AI has analyzed your video and extracted valuable insights."})):I.status===404?j({title:"Video File Not Found",description:"The video file associated with this record could not be found. Please re-upload the video.",variant:"destructive"}):j({title:"Analysis Failed",description:te.message||"Failed to analyze video. Please try again.",variant:"destructive"})}catch(I){console.error("Video analysis error:",I),j({title:"Analysis Failed",description:"Failed to analyze video. Please try again.",variant:"destructive"})}finally{g(!1)}},N=x=>{const I=Math.floor(x/60),te=Math.floor(x%60);return`${I}:${te.toString().padStart(2,"0")}`},E=x=>`${(x/1048576).toFixed(1)} MB`,B=x=>x>=80?"text-green-600 bg-green-100":x>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",l=x=>({positive:"😊",energetic:"⚡",calm:"😌",professional:"💼",casual:"😎",inspirational:"✨",neutral:"😐"})[x]||"😐",y=x=>({educational:"📚",entertainment:"🎭",gaming:"🎮",lifestyle:"🏠",fitness:"💪",food:"🍳",travel:"✈️",tech:"💻",music:"🎵",fashion:"👗",business:"💼",diy:"🔨",general:"📹"})[x]||"📹",f=()=>{if(!(r!=null&&r.quality_score))return!1;const x=r.quality_score.resolution_score||0,I=r.quality_score.audio_score||0,te=r.quality_score.bitrate_score||0;return x<70||I<70||te<70},C=()=>{if(!(r!=null&&r.quality_score))return[];const x=[],I=r.quality_score.resolution_score||0,te=r.quality_score.audio_score||0,Ee=r.quality_score.bitrate_score||0;return I<70&&x.push({type:"Resolution",score:I,severity:I<40?"high":"medium"}),te<70&&x.push({type:"Audio Quality",score:te,severity:te<40?"high":"medium"}),Ee<70&&x.push({type:"Bitrate",score:Ee,severity:Ee<40?"high":"medium"}),x};return!r&&!u?e.jsxs(S,{className:U("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",s),children:[e.jsxs(P,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit",children:e.jsx(ve,{className:"w-8 h-8 text-white"})}),e.jsx(R,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analyzer"}),e.jsx("p",{className:"text-gray-600",children:"Get comprehensive insights about your video content using advanced AI analysis"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(we,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Video Quality"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ct,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Transcription"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Te,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Scene Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(be,{className:"w-6 h-6 text-pink-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Engagement Prediction"})]})]}),e.jsxs(H,{onClick:p,disabled:!o,size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(ve,{className:"w-5 h-5 mr-2"}),"Start AI Analysis"]}),!o&&e.jsx("p",{className:"text-sm text-gray-500",children:"Upload a video first to enable AI analysis"})]})]}):u?e.jsx(S,{className:U("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",s),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit animate-pulse",children:e.jsx(ve,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Your Video..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Our AI is processing your video to extract valuable insights"}),e.jsx(_e,{value:75,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Extracting audio..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing scenes..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Predicting engagement..."})]})]})]})}):!r||!r.basic_info?e.jsx(S,{className:U("border-2 border-red-200 bg-red-50",s),children:e.jsxs(k,{className:"p-8 text-center",children:[e.jsx(Ge,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Analysis Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The video analysis data is incomplete or corrupted."}),e.jsxs(H,{onClick:p,variant:"outline",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs(S,{className:U("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",s),children:[e.jsx(P,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:e.jsx(ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive insights powered by artificial intelligence"})]})]}),e.jsxs(H,{onClick:p,disabled:u,size:"sm",variant:"outline",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(k,{children:[e.jsxs($e,{value:A,onValueChange:M,className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"engagement",children:"Engagement"}),e.jsx(de,{value:"chapters",children:"Chapters"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(we,{className:"w-5 h-5"}),"Video Information"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:N(((T=r.basic_info)==null?void 0:T.duration)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Resolution:"}),e.jsxs("span",{className:"font-medium",children:[((F=r.basic_info)==null?void 0:F.width)||0,"×",((se=r.basic_info)==null?void 0:se.height)||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"File Size:"}),e.jsx("span",{className:"font-medium",children:E(((ae=r.basic_info)==null?void 0:ae.file_size)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Audio:"}),e.jsx(D,{variant:(L=r.basic_info)!=null&&L.has_audio?"default":"destructive",children:(ue=r.basic_info)!=null&&ue.has_audio?"Present":"Missing"})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5"}),"Content Analysis"]})}),e.jsxs(k,{className:"space-y-3",children:[r.content_category&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsxs(D,{className:"bg-blue-100 text-blue-800",children:[y(r.content_category.primary_category)," ",r.content_category.primary_category]})]}),r.mood_analysis&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Mood:"}),e.jsxs(D,{className:"bg-green-100 text-green-800",children:[l(r.mood_analysis.dominant_mood)," ",r.mood_analysis.dominant_mood]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Transcript:"}),e.jsx(D,{variant:(pe=r.transcript)!=null&&pe.success?"default":"destructive",children:(le=r.transcript)!=null&&le.success?e.jsxs(e.Fragment,{children:[e.jsx($s,{className:"w-3 h-3 mr-1"}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-3 h-3 mr-1"}),"Failed"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Content Tags:"}),e.jsxs("span",{className:"font-medium",children:[(($=r.content_tags)==null?void 0:$.length)||0," tags"]})]})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Overall Scores"]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:U("text-3xl font-bold p-4 rounded-lg mb-2",B(((G=r.quality_score)==null?void 0:G.overall_score)||0)),children:[((K=r.quality_score)==null?void 0:K.overall_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Video Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:U("text-3xl font-bold p-4 rounded-lg mb-2",B(((ce=r.engagement_predictions)==null?void 0:ce.engagement_score)||0)),children:[((re=r.engagement_predictions)==null?void 0:re.engagement_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Engagement Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold p-4 bg-purple-100 text-purple-800 rounded-lg mb-2",children:((X=r.engagement_predictions)==null?void 0:X.virality_potential)||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Virality Potential"})]})]})})]})]}),e.jsx(me,{value:"engagement",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Engagement Predictions"]})}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(ze,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:(((Y=(W=r.engagement_predictions)==null?void 0:W.predicted_views)==null?void 0:Y.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-blue-600",children:"Expected Views"})]}),e.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[e.jsx(es,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-pink-800",children:(((je=(he=r.engagement_predictions)==null?void 0:he.predicted_likes)==null?void 0:je.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-pink-600",children:"Expected Likes"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(Tt,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:(((J=(ne=r.engagement_predictions)==null?void 0:ne.predicted_shares)==null?void 0:J.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"Expected Shares"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Prediction Ranges"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Views"}),e.jsxs("span",{children:[(((h=(Z=r.engagement_predictions)==null?void 0:Z.predicted_views)==null?void 0:h.conservative)||0).toLocaleString()," - ",(((z=(_=r.engagement_predictions)==null?void 0:_.predicted_views)==null?void 0:z.optimistic)||0).toLocaleString()]})]}),e.jsx(_e,{value:60,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Likes"}),e.jsxs("span",{children:[(((ie=(V=r.engagement_predictions)==null?void 0:V.predicted_likes)==null?void 0:ie.conservative)||0).toLocaleString()," - ",(((Ne=(q=r.engagement_predictions)==null?void 0:q.predicted_likes)==null?void 0:Ne.optimistic)||0).toLocaleString()]})]}),e.jsx(_e,{value:60,className:"h-2"})]})]})]})]})]})}),e.jsx(me,{value:"chapters",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Auto-Generated Chapters"]})}),e.jsx(k,{children:(((ye=r.auto_chapters)==null?void 0:ye.length)||0)===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Xe,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No chapters detected"}),e.jsx("p",{className:"text-sm",children:"Video may be too short or lack clear segment divisions"})]}):e.jsx("div",{className:"space-y-3",children:(r.auto_chapters||[]).map((x,I)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(D,{variant:"outline",className:"mt-1",children:N(x.start_time)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600",children:x.description})]})]},I))})})]})})]}),f()&&e.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Ye,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-800",children:"Video Quality Suggestions"})]}),e.jsxs("div",{className:"space-y-3",children:[C().map((x,I)=>e.jsxs("div",{className:U("flex items-center justify-between p-3 rounded-lg",x.severity==="high"?"bg-red-100 border border-red-200":"bg-yellow-100 border border-yellow-200"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:U("w-2 h-2 rounded-full",x.severity==="high"?"bg-red-500":"bg-yellow-500")}),e.jsxs("span",{className:U("font-medium",x.severity==="high"?"text-red-800":"text-yellow-800"),children:[x.type," needs improvement"]})]}),e.jsxs(D,{variant:"outline",className:U(x.severity==="high"?"border-red-300 text-red-700":"border-yellow-300 text-yellow-700"),children:["Score: ",x.score,"/100"]})]},I)),(((m=r.quality_score)==null?void 0:m.suggestions)||[]).length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-orange-200",children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-2",children:"Recommendations:"}),e.jsx("div",{className:"space-y-2",children:(((i=r.quality_score)==null?void 0:i.suggestions)||[]).map((x,I)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-orange-700",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:x})]},I))})]})]})]}),r.status==="partial_analysis"&&((v=r.errors)==null?void 0:v.length)&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ye,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-800",children:"Partial Analysis"})]}),e.jsx("div",{className:"space-y-1",children:(r.errors||[]).map((x,I)=>e.jsx("p",{className:"text-sm text-yellow-700",children:x},I))})]})]})]})}function Ia({videoId:t,className:o}){var F,se,ae,L,ue,pe,le,$,G,K,ce,re,X,W,Y,he,je,ne,J,Z,h,_,z,V,ie,q,Ne,ye;const[n,s]=c.useState(null),[r,b]=c.useState(!1),[u,g]=c.useState("overview"),[A,M]=c.useState(!1),[j,p]=c.useState(null),{toast:N}=Ze(),E=async()=>{var m;if(!t){N({title:"No Video Selected",description:"Please select a video to analyze performance.",variant:"destructive"});return}b(!0);try{const v=await(await fetch("/ai/analyze-video-performance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||""},body:JSON.stringify({video_id:t})})).json();if(v.success)s(v.data),N({title:"Performance Analysis Complete! 📊",description:"AI has analyzed your video performance across all platforms."});else throw new Error(v.message||"Failed to analyze performance")}catch(i){console.error("Performance analysis error:",i),N({title:"Analysis Failed",description:"Failed to analyze video performance. Please try again.",variant:"destructive"})}finally{b(!1)}},B=async m=>{var i;try{const x=await(await fetch("/ai/create-ab-test",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_id:t,...m})})).json();if(x.success)N({title:"A/B Test Created! 🧪",description:"Your A/B test has been set up and will start collecting data."}),M(!1);else throw new Error(x.message||"Failed to create A/B test")}catch(v){console.error("A/B test creation error:",v),N({title:"A/B Test Failed",description:"Failed to create A/B test. Please try again.",variant:"destructive"})}},l=m=>m>=1e6?`${(m/1e6).toFixed(1)}M`:m>=1e3?`${(m/1e3).toFixed(1)}K`:m.toString(),y=m=>{switch(m){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"average":return"text-yellow-600 bg-yellow-100";case"needs_improvement":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},f=m=>{switch(m){case"increasing":return e.jsx(be,{className:"w-4 h-4 text-green-600"});case"decreasing":return e.jsx(xa,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Ke,{className:"w-4 h-4 text-blue-600"})}},C=m=>({youtube:"📺",instagram:"📷",tiktok:"🎵",twitter:"🐦",facebook:"👥"})[m]||"📱",T=m=>{switch(m){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return!n&&!r?e.jsxs(S,{className:U("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",o),children:[e.jsxs(P,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit",children:e.jsx(Ce,{className:"w-8 h-8 text-white"})}),e.jsx(R,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Performance Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Analyze your video performance and get AI-powered optimization recommendations"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(be,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Performance Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ae,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Optimization Tips"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Oe,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"A/B Testing"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Pt,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Timing Optimization"})]})]}),e.jsxs(H,{onClick:E,disabled:!t,size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(Ce,{className:"w-5 h-5 mr-2"}),"Start Performance Analysis"]}),!t&&e.jsx("p",{className:"text-sm text-gray-500",children:"Select a video first to enable performance analysis"})]})]}):r?e.jsx(S,{className:U("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",o),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit animate-pulse",children:e.jsx(Ce,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Performance..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing your video performance across all platforms"}),e.jsx(_e,{value:85,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing metrics..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Finding opportunities..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Generating recommendations..."})]})]})]})}):!n||!n.overall_performance||!n.comparative_analysis||!n.platform_breakdown||!n.trend_analysis?e.jsx(S,{className:U("border-2 border-red-200 bg-gradient-to-br from-red-50 to-orange-50",o),children:e.jsxs(k,{className:"p-8 text-center space-y-4",children:[e.jsx(Rs,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Analysis Data Incomplete"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The performance analysis data is incomplete or missing."}),e.jsxs(H,{onClick:E,variant:"outline",className:"border-red-300 text-red-700",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})}):e.jsxs(S,{className:U("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",o),children:[e.jsx(P,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg",children:e.jsx(Ce,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Performance Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered performance insights and optimization recommendations"})]})]}),e.jsxs(H,{onClick:E,disabled:r,size:"sm",variant:"outline",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(k,{children:[e.jsxs($e,{value:u,onValueChange:g,className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-6",children:[e.jsx(de,{value:"overview",children:"Overview"}),e.jsx(de,{value:"platforms",children:"Platforms"}),e.jsx(de,{value:"opportunities",children:"Opportunities"}),e.jsx(de,{value:"trends",children:"Trends"}),e.jsx(de,{value:"timing",children:"Timing"}),e.jsx(de,{value:"testing",children:"A/B Testing"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Total Performance"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[n.performance_score,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Views:"}),e.jsx("span",{className:"font-medium",children:l(((F=n.overall_performance)==null?void 0:F.total_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Engagement Rate:"}),e.jsxs("span",{className:"font-medium",children:[((se=n.overall_performance)==null?void 0:se.engagement_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Performance Tier:"}),e.jsx(D,{className:y(((ae=n.overall_performance)==null?void 0:ae.performance_tier)||"unknown"),children:(((L=n.overall_performance)==null?void 0:L.performance_tier)||"unknown").replace("_"," ")})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Industry Comparison"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Views vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((pe=(ue=n.comparative_analysis)==null?void 0:ue.views_vs_industry)==null?void 0:pe.performance)||"below_average")==="above_average"?e.jsx(Ps,{className:"w-3 h-3 text-green-600"}):e.jsx(zs,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:U("text-sm font-medium",((($=(le=n.comparative_analysis)==null?void 0:le.views_vs_industry)==null?void 0:$.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((K=(G=n.comparative_analysis)==null?void 0:G.views_vs_industry)==null?void 0:K.difference_percentage)||0),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((re=(ce=n.comparative_analysis)==null?void 0:ce.engagement_vs_industry)==null?void 0:re.performance)||"below_average")==="above_average"?e.jsx(Ps,{className:"w-3 h-3 text-green-600"}):e.jsx(zs,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:U("text-sm font-medium",(((W=(X=n.comparative_analysis)==null?void 0:X.engagement_vs_industry)==null?void 0:W.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((he=(Y=n.comparative_analysis)==null?void 0:Y.engagement_vs_industry)==null?void 0:he.difference_percentage)||0),"%"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Growth Potential:"}),e.jsxs("div",{className:"text-lg font-medium text-purple-600",children:[l(((ne=(je=n.comparative_analysis)==null?void 0:je.growth_potential)==null?void 0:ne.views_growth_potential)||0)," more views"]})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"Improvement Potential"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[n.improvement_potential,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Potential"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Platforms:"}),e.jsx("span",{className:"font-medium",children:((J=n.overall_performance)==null?void 0:J.platform_count)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Days Since Upload:"}),e.jsx("span",{className:"font-medium",children:((Z=n.overall_performance)==null?void 0:Z.days_since_upload)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(D,{variant:"outline",children:((h=n.trend_analysis)==null?void 0:h.lifecycle_stage)||"unknown"})]})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Platform Performance Overview"]})}),e.jsx(k,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(n.platform_breakdown||{}).map(([m,i])=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:C(m)}),e.jsx("div",{className:"font-medium capitalize mb-1",children:m}),e.jsxs("div",{className:"text-sm text-gray-600",children:["#",(i==null?void 0:i.ranking)||0]}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[(i==null?void 0:i.performance_score)||0,"/100"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l((i==null?void 0:i.views)||0)," views"]})]},m))})})]})]}),e.jsx(me,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(n.platform_breakdown||{}).map(([m,i])=>e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:C(m)}),e.jsx("span",{className:"capitalize",children:m}),e.jsxs(D,{className:"ml-2",children:["#",(i==null?void 0:i.ranking)||0]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(i==null?void 0:i.performance_score)||0,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(ze,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:l((i==null?void 0:i.views)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Views"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(es,{className:"w-6 h-6 text-green-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:l((i==null?void 0:i.engagement)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Engagement"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx(be,{className:"w-6 h-6 text-purple-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[(i==null?void 0:i.engagement_rate)||0,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Engagement Rate"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[((i==null?void 0:i.strengths)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(ua,{className:"w-4 h-4"}),"Strengths"]}),e.jsx("ul",{className:"space-y-1",children:((i==null?void 0:i.strengths)||[]).map((v,x)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mt-2 flex-shrink-0"}),v]},x))})]}),((i==null?void 0:i.weaknesses)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(Rs,{className:"w-4 h-4"}),"Areas for Improvement"]}),e.jsx("ul",{className:"space-y-1",children:((i==null?void 0:i.weaknesses)||[]).map((v,x)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full mt-2 flex-shrink-0"}),v]},x))})]})]}),((i==null?void 0:i.recommendations)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx(Rt,{className:"w-4 h-4"}),"Recommendations"]}),e.jsx("div",{className:"space-y-2",children:((i==null?void 0:i.recommendations)||[]).map((v,x)=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("span",{className:"text-sm text-blue-800",children:v})},x))})]})]})]},m))})}),e.jsx(me,{value:"opportunities",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(n.optimization_opportunities||{}).map(([m,i])=>e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:C(m)}),e.jsxs("span",{className:"capitalize",children:[m," Opportunities"]})]})}),e.jsx(k,{className:"space-y-4",children:(i||[]).map((v,x)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ae,{className:"w-4 h-4"}),(v==null?void 0:v.title)||"Untitled"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(v==null?void 0:v.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{className:T((v==null?void 0:v.priority)||"low"),children:(v==null?void 0:v.priority)||"low"}),e.jsxs(D,{variant:"outline",children:[(v==null?void 0:v.potential_impact)||"unknown"," impact"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Action Steps:"}),e.jsx("div",{className:"space-y-1",children:((v==null?void 0:v.actions)||[]).map((I,te)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),I]},te))})]})]},x))})]},m))})}),e.jsx(me,{value:"trends",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Trend Analysis"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trend Direction:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[f(((_=n.trend_analysis)==null?void 0:_.trend_direction)||"stable"),e.jsx("span",{className:"font-medium capitalize",children:((z=n.trend_analysis)==null?void 0:z.trend_direction)||"stable"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Avg Views:"}),e.jsx("span",{className:"font-medium",children:l(((V=n.trend_analysis)==null?void 0:V.daily_average_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Momentum Score:"}),e.jsxs("span",{className:"font-medium",children:[((ie=n.trend_analysis)==null?void 0:ie.momentum_score)||0,"/100"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(D,{variant:"outline",children:((q=n.trend_analysis)==null?void 0:q.lifecycle_stage)||"unknown"})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5"}),"Performance Projections"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:l(((Ne=n.trend_analysis)==null?void 0:Ne.projected_30_day_views)||0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Projected 30-Day Views"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Peak Performance Day:"}),e.jsxs("span",{className:"font-medium",children:["Day ",((ye=n.trend_analysis)==null?void 0:ye.peak_performance_day)||0]})]})]})]})]})}),e.jsx(me,{value:"timing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(n.posting_time_optimization||{}).map(([m,i])=>e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:C(m)}),e.jsxs("span",{className:"capitalize",children:[m," Timing Optimization"]})]})}),e.jsx(k,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Current Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted at:"}),e.jsx("span",{className:"font-medium",children:(i==null?void 0:i.current_posting_time)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Day type:"}),e.jsx("span",{className:"font-medium",children:(i==null?void 0:i.current_day_type)||"unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Improvement potential:"}),e.jsx(D,{className:T((i==null?void 0:i.improvement_potential)||"low"),children:(i==null?void 0:i.improvement_potential)||"low"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimal Times"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Best time:"}),e.jsx("span",{className:"font-medium text-green-600",children:(i==null?void 0:i.best_time)||"unknown"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"All optimal times:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:((i==null?void 0:i.optimal_times)||[]).map((v,x)=>e.jsx(D,{variant:"outline",className:"text-xs",children:v},x))})]})]})]})})]},m))})}),e.jsx(me,{value:"testing",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),"A/B Testing Suggestions"]})}),e.jsx(k,{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:(n.ab_test_suggestions||[]).map((m,i)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),(m==null?void 0:m.title)||"Untitled Test"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(m==null?void 0:m.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(D,{className:T((m==null?void 0:m.priority)||"low"),children:(m==null?void 0:m.priority)||"low"}),e.jsx(H,{size:"sm",onClick:()=>{p(m),M(!0)},children:"Start Test"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Test Variations:"}),e.jsx("div",{className:"space-y-1",children:((m==null?void 0:m.test_variations)||[]).map((v,x)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),v]},x))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Success Metrics:"}),e.jsx("div",{className:"space-y-1",children:((m==null?void 0:m.success_metrics)||[]).map((v,x)=>e.jsx(D,{variant:"outline",className:"text-xs mr-1",children:v.replace("_"," ")},x))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Duration: ",(m==null?void 0:m.duration)||"Unknown"]})]})]})]},i))})})]})})]}),e.jsx(Ms,{open:A,onOpenChange:M,children:e.jsxs(Fs,{className:"max-w-md",children:[e.jsxs(Vs,{children:[e.jsx(Is,{children:"Create A/B Test"}),e.jsxs(Os,{children:['Set up an A/B test for "',j==null?void 0:j.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Test Duration (days)"}),e.jsxs(pt,{defaultValue:"14",children:[e.jsx(gt,{children:e.jsx(jt,{})}),e.jsxs(ft,{children:[e.jsx(Fe,{value:"7",children:"7 days"}),e.jsx(Fe,{value:"14",children:"14 days"}),e.jsx(Fe,{value:"21",children:"21 days"}),e.jsx(Fe,{value:"30",children:"30 days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Success Metrics"}),e.jsx("div",{className:"space-y-2",children:((j==null?void 0:j.success_metrics)||[]).map((m,i)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(At,{id:`metric-${i}`,defaultChecked:!0}),e.jsx("label",{htmlFor:`metric-${i}`,className:"text-sm",children:m.replace("_"," ")})]},i))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(H,{variant:"outline",onClick:()=>M(!1),children:"Cancel"}),e.jsx(H,{onClick:()=>B({test_type:j==null?void 0:j.test_type,test_variations:j==null?void 0:j.test_variations,success_metrics:j==null?void 0:j.success_metrics,test_duration_days:14}),children:"Create Test"})]})]})]})})]})]})}function Oa({videoId:t,videoPath:o,title:n,className:s}){const[r,b]=c.useState(null),[u,g]=c.useState(!1),[A,M]=c.useState(null),[j,p]=c.useState("suggestions"),{toast:N}=Ze(),E=async()=>{var l,y;if(!t){N({title:"No Video ID",description:"Please provide a video ID to optimize thumbnails.",variant:"destructive"});return}g(!0);try{const C=await(await fetch("/ai/optimize-thumbnails",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_id:t,title:n||"Amazing Video",platforms:["youtube","instagram","tiktok"]})})).json();if(C.success)b(C.data),N({title:"Thumbnail Optimization Complete! 🎨",description:`AI has analyzed your video and extracted ${((y=C.data.extracted_frames)==null?void 0:y.length)||0} thumbnail frames.`});else throw new Error(C.message||"Failed to optimize thumbnails")}catch(f){console.error("Thumbnail optimization error:",f),N({title:"Optimization Failed",description:"Failed to optimize thumbnails. Please try again.",variant:"destructive"})}finally{g(!1)}},B=async(l,y)=>{var f;if(!t){N({title:"Error",description:"Video ID is required to set thumbnail.",variant:"destructive"});return}try{const T=await(await fetch("/ai/set-video-thumbnail",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((f=document.querySelector('meta[name="csrf-token"]'))==null?void 0:f.getAttribute("content"))||""},body:JSON.stringify({video_id:t,frame_id:l,thumbnail_path:y})})).json();if(T.success)N({title:"Thumbnail Set Successfully! 🎯",description:"This thumbnail has been set for all platforms."});else throw new Error(T.message||"Failed to set thumbnail")}catch(C){console.error("Set thumbnail error:",C),N({title:"Setting Failed",description:"Failed to set thumbnail. Please try again.",variant:"destructive"})}};return!r&&!u?e.jsxs(S,{className:U("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",s),children:[e.jsxs(P,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit",children:e.jsx(Te,{className:"w-8 h-8 text-white"})}),e.jsx(R,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Generate eye-catching thumbnails with AI-powered optimization and CTR predictions"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(ze,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"CTR Prediction"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Et,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Face Detection"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Bs,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Color Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(ss,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Text Optimization"})]})]}),e.jsxs(H,{onClick:E,disabled:!t,size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(Mt,{className:"w-5 h-5 mr-2"}),"Analyze Video & Extract Thumbnails"]}),!t&&e.jsx("p",{className:"text-sm text-gray-500",children:"Video ID required for thumbnail analysis"})]})]}):u?e.jsx(S,{className:U("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",s),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit animate-pulse",children:e.jsx(Te,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Optimizing Thumbnails..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing frames, detecting faces, and predicting CTR"}),e.jsx("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Extracting frames..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing faces..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(xe,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Predicting CTR..."})]})]})]})}):e.jsxs(S,{className:U("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",s),children:[e.jsx(P,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg",children:e.jsx(Te,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(R,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Thumbnail Optimization Results"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Score: ",r.overall_score,"/100 • ",r.extracted_frames.length," frames analyzed"]})]})]}),e.jsxs(H,{onClick:E,disabled:u,size:"sm",variant:"outline",children:[e.jsx(xe,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsx(k,{children:e.jsxs($e,{value:j,onValueChange:p,className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-3",children:[e.jsx(de,{value:"suggestions",children:"Suggestions"}),e.jsx(de,{value:"platforms",children:"Platform Thumbnail Specifications"}),e.jsx(de,{value:"testing",children:"A/B Testing"})]}),e.jsx(me,{value:"suggestions",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:r.thumbnail_suggestions.slice(0,3).map((l,y)=>e.jsx(S,{className:y===0?"border-2 border-gold":"",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:l.preview_url,alt:`Thumbnail at ${l.timestamp}s`,className:"w-32 h-18 object-cover rounded-lg border-2 border-gray-200",onError:f=>{var T;const C=f.target;C.style.display="none",(T=C.nextElementSibling)==null||T.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-18 bg-gray-200 rounded-lg flex items-center justify-center hidden",children:e.jsx(De,{className:"w-6 h-6 text-gray-400"})}),y===0&&e.jsxs(D,{className:"absolute -top-2 -right-2 bg-yellow-500 text-black",children:[e.jsx(Ls,{className:"w-3 h-3 mr-1"}),"Best"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:["Frame at ",l.timestamp,"s"]}),e.jsxs(D,{variant:"outline",children:[l.predicted_ctr,"% CTR"]}),e.jsxs(D,{variant:"outline",children:[l.confidence_score,"% confidence"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Why this frame:"}),e.jsx("ul",{className:"text-sm text-gray-600",children:l.reasons.map((f,C)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),f]},C))})]}),l.design_scores&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Design Feature Scores:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(l.design_scores).map(([f,C])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[f.replace("_"," "),":"]}),e.jsx(D,{variant:"outline",className:U("text-xs px-1.5 py-0.5",C>=80?"border-green-500 text-green-700 bg-green-50":C>=60?"border-yellow-500 text-yellow-700 bg-yellow-50":"border-red-500 text-red-700 bg-red-50"),children:C})]},f))})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(H,{size:"sm",onClick:()=>B(l.frame_id,l.path),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Set as Thumbnail"]})})]})})},l.frame_id))})}),e.jsx(me,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(r.platform_optimizations).map(([l,y])=>e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs(R,{className:"text-lg capitalize flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),l]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specifications"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Dimensions: ",y.specifications.width,"×",y.specifications.height]}),e.jsxs("div",{children:["Aspect Ratio: ",y.specifications.aspect_ratio]}),e.jsxs("div",{children:["Max Size: ",y.specifications.max_file_size,"KB"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimization Focus"}),e.jsx("div",{className:"text-sm space-y-1",children:y.design_adjustments.map((f,C)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),f]},C))})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected Improvement:"}),e.jsxs(D,{className:"bg-green-100 text-green-800",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),y.expected_improvement]})]})]})]},l))})}),e.jsx(me,{value:"testing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:r.ab_test_variants.map(l=>e.jsxs(S,{children:[e.jsx(P,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(R,{className:"text-lg flex items-center gap-2",children:[e.jsx(Oe,{className:"w-5 h-5"}),l.variant_id.replace("_"," ").toUpperCase()]}),e.jsxs(D,{variant:"outline",children:[l.confidence_level,"% confidence"]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Hypothesis"}),e.jsx("p",{className:"text-sm text-gray-600",children:l.test_hypothesis})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Planned Modifications"}),e.jsx("div",{className:"space-y-1",children:l.modifications.map((y,f)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),y]},f))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected CTR Increase:"}),e.jsxs(D,{className:"bg-blue-100 text-blue-800",children:["+",l.expected_outcome.expected_ctr_increase]})]})]})]},l.variant_id))})})]})})]})}const Da=({videoPath:t,videoId:o,videoTitle:n})=>{var rs,ns,is,ls,cs,os,ds,ms,xs,hs,us,ps,gs,js,fs,bs,Ns,ys,vs,ws,_s,Ss,ks,Cs;const[s,r]=c.useState(null),[b,u]=c.useState(!1),[g,A]=c.useState(!1),[M,j]=c.useState(!1),[p,N]=c.useState({}),[E,B]=c.useState("en"),[l,y]=c.useState(null),[f,C]=c.useState(null),[T,F]=c.useState(null),[se,ae]=c.useState(!1),[L,ue]=c.useState(0),[pe,le]=c.useState(0),[$,G]=c.useState(!1),[K,ce]=c.useState(null),[re,X]=c.useState(""),[W,Y]=c.useState(null),[he,je]=c.useState({x:0,y:0}),ne=c.useRef(null),J=c.useRef(null),Z=c.useRef(null),h=c.useRef(null),_={fontFamily:"Arial, sans-serif",fontSize:24,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.7)",textAlign:"center",borderRadius:4,padding:8,textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)"};c.useEffect(()=>(z(),()=>{f&&clearInterval(f)}),[]),c.useEffect(()=>{if(s&&s.processing_status==="processing"){const a=setInterval(()=>{ie()},2e3);return C(a),()=>clearInterval(a)}else f&&(clearInterval(f),C(null))},[s==null?void 0:s.processing_status]),c.useEffect(()=>{const a=ne.current;if(!a)return;const d=()=>{ue(a.currentTime)},w=()=>{le(a.duration)};return a.addEventListener("timeupdate",d),a.addEventListener("loadedmetadata",w),()=>{a.removeEventListener("timeupdate",d),a.removeEventListener("loadedmetadata",w)}},[]);const z=async()=>{try{const d=await(await fetch("/ai/subtitle-languages")).json();d.success&&N(d.data)}catch(a){console.error("Error loading languages:",a)}},V=async()=>{var a;if(!t||t.trim()===""){alert("No video file available for subtitle generation. Please ensure the video is properly uploaded.");return}u(!0);try{const w=await(await fetch("/ai/subtitle-generate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({video_path:t,video_id:o,video_title:n,language:E})})).json();w.success?r({...w.data,original_video_path:t}):(console.error("Generation failed:",w.message),alert(`Subtitle generation failed: ${w.message}`))}catch(d){console.error("Error starting generation:",d)}finally{u(!1)}},ie=async()=>{var a;if(s!=null&&s.generation_id)try{const w=await(await fetch("/ai/subtitle-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({generation_id:s.generation_id})})).json();w.success&&r(O=>({...O,...w.data,original_video_path:(O==null?void 0:O.original_video_path)||t}))}catch(d){console.error("Error polling progress:",d)}},q=()=>{const a=ne.current;a&&(se?a.pause():a.play(),ae(!se))},Ne=a=>{const d=ne.current,w=J.current;if(!d||!w)return;const O=w.getBoundingClientRect(),oe=(a.clientX-O.left)/O.width*pe;d.currentTime=oe,ue(oe)},ye=()=>s!=null&&s.subtitles&&s.subtitles.find(a=>L>=a.start_time&&L<=a.end_time)||null,m=async()=>{var w;const a=ne.current,d=h.current;if(!a||!d||!o){alert("Unable to capture frame. Please ensure video is loaded.");return}j(!0);try{d.width=a.videoWidth,d.height=a.videoHeight;const O=d.getContext("2d");if(!O)throw new Error("Unable to get canvas context");O.drawImage(a,0,0,d.width,d.height);const ge=await new Promise((lt,ct)=>{d.toBlob(As=>{As?lt(As):ct(new Error("Failed to create blob from canvas"))},"image/jpeg",.8)}),oe=new FormData;oe.append("video_id",o.toString()),oe.append("frame_id",`frame_${Date.now()}`),oe.append("thumbnail",ge,"thumbnail.jpg"),oe.append("current_time",L.toString());const Ts=await(await fetch("/ai/set-video-thumbnail-from-frame",{method:"POST",headers:{"X-CSRF-TOKEN":((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))||""},body:oe})).json();Ts.success?alert("Thumbnail set successfully!"):alert(`Failed to set thumbnail: ${Ts.message}`)}catch(O){console.error("Error setting thumbnail:",O),alert("Failed to capture and set thumbnail. Please try again.")}finally{j(!1)}},i=a=>{const d=s==null?void 0:s.subtitles.find(w=>w.id===a);d&&(ce(a),X(d.text))},v=async()=>{var a;if(!(!K||!s))try{if((await(await fetch("/ai/subtitle-update-text",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({generation_id:s.generation_id,subtitle_id:K,text:re})})).json()).success){const O=s.subtitles.map(ge=>ge.id===K?{...ge,text:re}:ge);r({...s,subtitles:O}),ce(null),X("")}}catch(d){console.error("Error updating subtitle:",d)}},x=async(a,d)=>{var w;if(s)try{if((await(await fetch("/ai/subtitle-update-style",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))||""},body:JSON.stringify({generation_id:s.generation_id,subtitle_id:a,style:d})})).json()).success){const oe=s.subtitles.map(fe=>fe.id===a?{...fe,style:{...fe.style,...d}}:fe);r({...s,subtitles:oe})}}catch(O){console.error("Error updating subtitle style:",O)}},I=async(a,d)=>{var w;if(s)try{if((await(await fetch("/ai/subtitle-update-position",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((w=document.querySelector('meta[name="csrf-token"]'))==null?void 0:w.getAttribute("content"))||""},body:JSON.stringify({generation_id:s.generation_id,subtitle_id:a,position:d})})).json()).success){const oe=s.subtitles.map(fe=>fe.id===a?{...fe,position:d}:fe);r({...s,subtitles:oe})}}catch(O){console.error("Error updating subtitle position:",O)}},te=(a,d)=>{if(a.preventDefault(),!(s==null?void 0:s.subtitles.find(ge=>ge.id===d)))return;Y(d);const O=a.target.getBoundingClientRect();je({x:a.clientX-O.left,y:a.clientY-O.top})},Ee=a=>{if(!W||!Z.current)return;const d=Z.current.getBoundingClientRect(),w=(a.clientX-d.left-he.x)/d.width*100,O=(a.clientY-d.top-he.y)/d.height*100,ge=Math.max(0,Math.min(100,w)),oe=Math.max(0,Math.min(100,O));I(W,{x:ge,y:oe})},as=()=>{Y(null),je({x:0,y:0})},nt=async()=>{var a;if(s!=null&&s.generation_id)try{const w=await(await fetch("/ai/subtitle-export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({generation_id:s.generation_id,format:"srt"})})).json();w.success&&window.open(w.data.file_url,"_blank")}catch(d){console.error("Error exporting transcript:",d)}},it=async()=>{var a;if(s!=null&&s.generation_id){A(!0);try{const w=await(await fetch("/ai/subtitle-render-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({generation_id:s.generation_id,video_id:o})})).json();w.success?(F(w.data),alert("Video rendered successfully! The video with subtitles has been uploaded to all platforms.")):alert(`Failed to render video: ${w.message}`)}catch(d){console.error("Error rendering video:",d),alert("An error occurred while rendering the video. Please try again.")}finally{A(!1)}}},Se=a=>{const d=Math.floor(a/60),w=Math.floor(a%60);return`${d}:${w.toString().padStart(2,"0")}`},Q=ye();return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[e.jsx("canvas",{ref:h,style:{display:"none"}}),e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx(Ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Subtitle Generator"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate and edit subtitles with real-time preview"})]})]}),!s&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ra,{className:"w-4 h-4 inline mr-2"}),"Language"]}),e.jsx("select",{value:E,onChange:a=>B(a.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:b,children:Object.entries(p).map(([a,d])=>e.jsxs("option",{value:a,children:[d.name," (",d.accuracy,"% accuracy)"]},a))})]}),e.jsx("button",{onClick:V,disabled:b||!t,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4"}),"Generate Subtitles"]})})]})]})}),e.jsxs("div",{className:"p-6",children:[(s==null?void 0:s.processing_status)==="processing"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),e.jsxs("span",{className:"font-medium text-blue-900",children:["Processing: ",s.progress.current_step]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress.percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[e.jsxs("span",{children:[s.progress.percentage,"% complete"]}),e.jsxs("span",{children:[Se(s.progress.processed_duration)," / ",Se(s.progress.total_duration)]})]})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{ref:Z,className:"relative bg-black rounded-lg overflow-hidden",onMouseMove:Ee,onMouseUp:as,onMouseLeave:as,children:[e.jsx("video",{ref:ne,src:(s==null?void 0:s.original_video_path)||t,className:"w-full h-auto max-h-96",controls:!1,onPlay:()=>ae(!0),onPause:()=>ae(!1)}),Q&&e.jsx("div",{className:"absolute cursor-move select-none",style:{left:`${Q.position.x}%`,top:`${Q.position.y}%`,transform:"translate(-50%, -50%)",fontFamily:((rs=Q.style)==null?void 0:rs.fontFamily)||_.fontFamily,fontSize:`${((ns=Q.style)==null?void 0:ns.fontSize)||_.fontSize}px`,fontWeight:((is=Q.style)==null?void 0:is.fontWeight)||_.fontWeight,color:((ls=Q.style)==null?void 0:ls.color)||_.color,backgroundColor:((cs=Q.style)==null?void 0:cs.backgroundColor)||_.backgroundColor,textAlign:((os=Q.style)==null?void 0:os.textAlign)||_.textAlign,borderRadius:`${((ds=Q.style)==null?void 0:ds.borderRadius)||_.borderRadius}px`,padding:`${((ms=Q.style)==null?void 0:ms.padding)||_.padding}px`,textShadow:((xs=Q.style)==null?void 0:xs.textShadow)||_.textShadow,fontStyle:(hs=Q.style)!=null&&hs.italic?"italic":"normal",textDecoration:(us=Q.style)!=null&&us.underline?"underline":"none"},onMouseDown:a=>te(a,Q.id),onDoubleClick:()=>i(Q.id),children:K===Q.id?e.jsx("input",{type:"text",value:re,onChange:a=>X(a.target.value),onKeyDown:a=>{a.key==="Enter"?v():a.key==="Escape"&&(ce(null),X(""))},onBlur:v,className:"bg-transparent border-none outline-none text-center",style:{color:"inherit",fontSize:"inherit",fontFamily:"inherit"},autoFocus:!0}):Q.text})]}),e.jsx("div",{className:"mt-4 space-y-3",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:q,className:"flex items-center justify-center w-10 h-10 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors",children:se?e.jsx(Ft,{className:"w-5 h-5"}):e.jsx(De,{className:"w-5 h-5 ml-0.5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{ref:J,className:"h-2 bg-gray-200 rounded-full cursor-pointer",onClick:Ne,children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full transition-all",style:{width:`${L/pe*100}%`}})})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-0",children:[Se(L)," / ",Se(pe)]}),e.jsx("button",{onClick:m,disabled:M||!o,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",title:"Set current frame as thumbnail",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Setting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zt,{className:"w-4 h-4"}),"Set Thumbnail"]})})]})})]}),(s==null?void 0:s.processing_status)==="completed"&&s.subtitles&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subtitle Timeline"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:s.subtitles.map(a=>e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-lg hover:bg-white transition-colors cursor-pointer ${L>=a.start_time&&L<=a.end_time?"border-purple-300 bg-purple-50":"border-gray-200 bg-white"}`,onClick:()=>{ne.current&&(ne.current.currentTime=a.start_time)},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"text-sm font-mono text-gray-500",children:[Se(a.start_time)," → ",Se(a.end_time)]})}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"text-gray-900",children:a.text})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("button",{onClick:d=>{d.stopPropagation(),i(a.id)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Edit subtitle",children:e.jsx(ss,{className:"w-4 h-4"})}),e.jsx("button",{onClick:d=>{d.stopPropagation(),y(a.id)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Style subtitle",children:e.jsx(Bs,{className:"w-4 h-4"})})]})]},a.id))})]}),l&&(s==null?void 0:s.subtitles)&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subtitle Style"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),e.jsx("input",{type:"range",min:"12",max:"48",value:((gs=(ps=s.subtitles.find(a=>a.id===l))==null?void 0:ps.style)==null?void 0:gs.fontSize)||_.fontSize,onChange:a=>x(l,{fontSize:parseInt(a.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),e.jsx("input",{type:"color",value:((fs=(js=s.subtitles.find(a=>a.id===l))==null?void 0:js.style)==null?void 0:fs.color)||_.color,onChange:a=>x(l,{color:a.target.value}),className:"w-full h-8 rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background"}),e.jsx("input",{type:"color",value:((ys=(Ns=(bs=s.subtitles.find(a=>a.id===l))==null?void 0:bs.style)==null?void 0:Ns.backgroundColor)==null?void 0:ys.replace("rgba(0, 0, 0, 0.7)","#000000"))||"#000000",onChange:a=>x(l,{backgroundColor:a.target.value}),className:"w-full h-8 rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alignment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>x(l,{textAlign:"left"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(Ht,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(l,{textAlign:"center"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>x(l,{textAlign:"right"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(Gt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{var a,d;return x(l,{bold:!((d=(a=s.subtitles.find(w=>w.id===l))==null?void 0:a.style)!=null&&d.bold)})},className:`p-2 border rounded hover:bg-gray-100 ${(ws=(vs=s.subtitles.find(a=>a.id===l))==null?void 0:vs.style)!=null&&ws.bold?"bg-purple-100 border-purple-300":""}`,children:e.jsx(Jt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var a,d;return x(l,{italic:!((d=(a=s.subtitles.find(w=>w.id===l))==null?void 0:a.style)!=null&&d.italic)})},className:`p-2 border rounded hover:bg-gray-100 ${(Ss=(_s=s.subtitles.find(a=>a.id===l))==null?void 0:_s.style)!=null&&Ss.italic?"bg-purple-100 border-purple-300":""}`,children:e.jsx(ta,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var a,d;return x(l,{underline:!((d=(a=s.subtitles.find(w=>w.id===l))==null?void 0:a.style)!=null&&d.underline)})},className:`p-2 border rounded hover:bg-gray-100 ${(Cs=(ks=s.subtitles.find(a=>a.id===l))==null?void 0:ks.style)!=null&&Cs.underline?"bg-purple-100 border-purple-300":""}`,children:e.jsx(ja,{className:"w-4 h-4"})})]})]}),(s==null?void 0:s.processing_status)==="completed"&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Es,{className:"w-4 h-4"}),"Export Transcript"]}),e.jsx("button",{onClick:it,disabled:g,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Rendering Video..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ea,{className:"w-5 h-5"}),"Render & Upload to All Platforms"]})})]}),T&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-green-900 mb-2",children:"Video Rendered Successfully!"}),e.jsx("p",{className:"text-green-800 mb-3",children:"Your video with subtitles has been processed and uploaded to all platforms."}),T.rendered_video_url&&e.jsxs("a",{href:T.rendered_video_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(Es,{className:"w-4 h-4"}),"Download Rendered Video"]})]}),(s==null?void 0:s.quality_metrics)&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-2",children:"Quality Metrics"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[s.quality_metrics.accuracy_score,"%"]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Accuracy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[s.quality_metrics.timing_precision,"%"]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Timing"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[s.quality_metrics.word_recognition,"%"]}),e.jsx("div",{className:"text-sm text-blue-600",children:"Recognition"})]})]})]})]}),!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ie,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Video Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a video to start using the subtitle generator."})]}),t&&!s&&e.jsxs("div",{className:"mt-6 text-center py-8",children:[e.jsx(Ie,{className:"w-8 h-8 text-gray-400 mx-auto mb-3"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"Ready to Generate Subtitles"}),e.jsx("p",{className:"text-gray-600 mb-4",children:'Click "Generate Subtitles" above to start the AI-powered subtitle generation process.'})]})]})]})},$a={youtube:Dt,instagram:Ot,tiktok:we,facebook:we,snapchat:we,pinterest:we,twitter:we},Ba={pending:Xe,processing:Ye,success:$s,failed:Ge},La={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},qa=(t,o)=>{if(!t||!o)return{status:"unknown",color:"text-gray-500",label:"Unknown"};const n=t*o;return n>=1920*1080?{status:"great",color:"text-green-600",label:"1080p+"}:n>=1280*720?{status:"good",color:"text-orange-500",label:"720p"}:{status:"poor",color:"text-red-600",label:"Low Quality"}};function Or({video:t}){const o=[{title:"My channels",href:"/dashboard"},{title:"Videos",href:"/videos"},{title:t.title,href:`/videos/${t.id}/edit`}],{data:n,setData:s,put:r,processing:b,errors:u}=ot({title:t.title||"",description:t.description||"",tags:t.tags||[],thumbnail:null}),[g,A]=c.useState("overview"),[M,j]=c.useState(!1),[p,N]=c.useState("tikomat"),[E,B]=c.useState(!1),[l,y]=c.useState(!1),[f,C]=c.useState(t.thumbnail||null),[T,F]=c.useState([0]),[se,ae]=c.useState(null),[L,ue]=c.useState(null),[pe,le]=c.useState([]),$=c.useRef(null),G=qa(t.width,t.height),K=h=>{h.preventDefault(),r(`/videos/${t.id}`)},ce=()=>{j(!0)},re=()=>{qe.delete(`/videos/${t.id}`,{data:{delete_option:p},onSuccess:()=>{qe.visit("/videos")}})},X=(h,_)=>{confirm(`Are you sure you want to remove this video from ${_}?`)&&qe.delete(`/video-targets/${h}`,{preserveScroll:!0,onSuccess:()=>{},onError:z=>{console.error("Failed to remove video from platform:",z),alert("Failed to remove video from platform. Please try again.")}})},W=h=>{if(h.platform_url)return h.platform_url;switch(h.platform){case"youtube":return h.platform_video_id?`https://youtube.com/watch?v=${h.platform_video_id}`:null;case"instagram":return h.platform_video_id?`https://instagram.com/p/${h.platform_video_id}`:null;case"tiktok":return h.platform_video_id?`https://tiktok.com/@username/video/${h.platform_video_id}`:null;default:return null}},Y=async()=>{var h;B(!0);try{const _=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||""},body:JSON.stringify({video_id:t.id,content_type:"title",current_title:n.title})});if(_.ok){const z=await _.json();if(z.success&&z.data.optimized_title){s("title",z.data.optimized_title);const V=z.data.analysis_summary;let ie="Title generated based on video content analysis";if(V){const q=[];V.has_transcript&&q.push("audio transcription"),V.scenes_detected>0&&q.push(`${V.scenes_detected} visual scenes`),V.content_category!=="unknown"&&q.push(`${V.content_category} content`),q.length>0&&(ie+=`. Analyzed: ${q.join(", ")}.`)}alert(`✅ AI Title Generated!

${ie}`)}}else{const z=await _.json();console.error("Failed to generate AI title:",z),alert(`Failed to generate title: ${z.message||"Unknown error"}`)}}catch(_){console.error("Failed to generate AI title:",_),alert("An error occurred while generating the title. Please try again.")}finally{B(!1)}},he=async()=>{var h;y(!0);try{const _=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||""},body:JSON.stringify({video_id:t.id,content_type:"description",current_description:n.description})});if(_.ok){const z=await _.json();if(z.success&&z.data.optimized_description){s("description",z.data.optimized_description);const V=z.data.analysis_summary;let ie="Description generated based on video content analysis";if(V){const q=[];V.has_transcript&&q.push("audio transcription"),V.scenes_detected>0&&q.push(`${V.scenes_detected} visual scenes`),V.content_category!=="unknown"&&q.push(`${V.content_category} content`),q.length>0&&(ie+=`. Analyzed: ${q.join(", ")}.`)}alert(`✅ AI Description Generated!

${ie}`)}}else{const z=await _.json();console.error("Failed to generate AI description:",z),alert(`Failed to generate description: ${z.message||"Unknown error"}`)}}catch(_){console.error("Failed to generate AI description:",_),alert("An error occurred while generating the description. Please try again.")}finally{y(!1)}},je=h=>{var z;const _=(z=h.target.files)==null?void 0:z[0];if(_){ae(_);const V=new FileReader;V.onload=ie=>{var q;C((q=ie.target)==null?void 0:q.result)},V.readAsDataURL(_)}},ne=h=>{ue(h)},J={videoQuality:8.5,engagementScore:7.2,viralityPotential:6.8,expectedViews:"12.5K",expectedLikes:"850",expectedShares:"120"},Z={contrast:8.2,faceVisibility:9.1,textReadability:7.5,emotionalAppeal:8.7,visualHierarchy:7.8,brandConsistency:8,predictedCTR:6.9};return e.jsxs(_t,{breadcrumbs:o,children:[e.jsx(dt,{title:`Edit: ${t.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(mt,{href:"/videos",children:e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(Vt,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.title}),e.jsx("p",{className:"text-muted-foreground",children:"Edit and optimize your video with AI-powered tools"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(H,{variant:"outline",onClick:ce,className:"text-red-600 hover:text-red-700",children:[e.jsx(It,{className:"mr-2 h-4 w-4"}),"Delete"]})})]}),e.jsxs($e,{value:g,onValueChange:A,className:"w-full",children:[e.jsxs(Be,{className:"grid w-full grid-cols-2",children:[e.jsx(de,{value:"overview",children:"Overview/Edit"}),e.jsx(de,{value:"performance",children:"Performance"})]}),e.jsxs(me,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Video Preview"]})}),e.jsx(k,{children:e.jsx("div",{className:"aspect-video w-full bg-black rounded-lg overflow-hidden",children:t.video_path||t.file_path?e.jsx("video",{src:t.video_path||t.file_path,controls:!0,className:"w-full h-full"}):e.jsx("div",{className:"flex items-center justify-center h-full text-white",children:e.jsxs("div",{className:"text-center",children:[e.jsx(De,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No video file available"})]})})})})]}),e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"Subtitles"]})}),e.jsx(k,{children:e.jsx(Ve,{children:e.jsx(Da,{videoPath:t.video_path||t.file_path||"",videoId:t.id,videoTitle:t.title})})})]}),t.targets&&t.targets.length>0&&e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsx(R,{children:"Publishing Status"}),e.jsx(Ue,{children:"Current status for each platform"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:t.targets.map(h=>{const _=Ba[h.status],z=$a[h.platform],V=W(h);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(z,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:h.platform}),h.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(h.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(D,{className:La[h.status],children:[e.jsx(_,{className:"w-3 h-3 mr-1"}),h.status]}),V&&h.status==="success"&&e.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx(Wt,{className:"w-4 h-4"})}),h.status==="success"&&e.jsxs(H,{size:"sm",variant:"outline",onClick:()=>X(h.id,h.platform),className:"text-red-600 hover:text-red-700",children:[e.jsx(St,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},h.id)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:K,className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(P,{children:e.jsx(R,{children:"Title"})}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(xt,{value:n.title,onChange:h=>s("title",h.target.value),placeholder:"Enter video title",className:"flex-1"}),e.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:Y,disabled:E,children:E?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(ve,{className:"w-4 h-4"})})]}),u.title&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:u.title})]})]}),e.jsxs(S,{children:[e.jsx(P,{children:e.jsx(R,{children:"Description"})}),e.jsxs(k,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ht,{value:n.description,onChange:h=>s("description",h.target.value),placeholder:"Enter video description",rows:4}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:he,disabled:l,children:[l?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(ve,{className:"w-4 h-4 mr-2"}),"AI Generate"]})})]}),u.description&&e.jsx("p",{className:"text-sm text-red-600",children:u.description})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(H,{type:"submit",disabled:b,children:[b?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(la,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),e.jsxs(S,{children:[e.jsx(P,{children:e.jsx(R,{children:"Video Details"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-lg",children:t.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Resolution"}),e.jsx("p",{className:`text-lg ${G.color}`,children:t.width&&t.height?`${t.width}x${t.height}`:"Unknown"}),e.jsx("p",{className:`text-sm ${G.color}`,children:G.label})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"text-lg",children:new Date(t.created_at).toLocaleString()})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Ae,{className:"w-5 h-5"}),"AI Analysis"]})}),e.jsxs(k,{children:[e.jsx(Ve,{children:e.jsx(Va,{videoId:t.id,videoPath:t.video_path||t.file_path,onAnalysisComplete:ne})}),L&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg",children:L.category||"Entertainment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Mood"}),e.jsx("p",{className:"text-lg",children:L.mood||"Positive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(L.tags||["creative","engaging","trending"]).map((h,_)=>e.jsx(D,{variant:"secondary",className:"text-xs",children:h},_))})]})]})]})]}),e.jsxs(S,{children:[e.jsx(P,{children:e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Ce,{className:"w-5 h-5"}),"Video Scores"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Video Quality"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[J.videoQuality,"/10"]})]}),e.jsx(_e,{value:J.videoQuality*10,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Engagement"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[J.engagementScore,"/10"]})]}),e.jsx(_e,{value:J.engagementScore*10,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:"Virality"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[J.viralityPotential,"/10"]})]}),e.jsx(_e,{value:J.viralityPotential*10,className:"h-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(ze,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Views"})]}),e.jsx("p",{className:"text-lg font-bold text-blue-600",children:J.expectedViews})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(es,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Likes"})]}),e.jsx("p",{className:"text-lg font-bold text-red-600",children:J.expectedLikes})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"flex items-center justify-center gap-1 mb-1",children:[e.jsx(oa,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Shares"})]}),e.jsx("p",{className:"text-lg font-bold text-green-600",children:J.expectedShares})]})]})]})]})]})]}),e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Te,{className:"w-5 h-5"}),"Thumbnail Optimization"]}),e.jsx(Ue,{children:"Choose or upload a thumbnail for your video"})]}),e.jsxs(k,{children:[e.jsx(Ve,{children:e.jsx(Oa,{videoId:t.id,videoPath:t.video_path||t.file_path,title:n.title})}),e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{type:"button",variant:"outline",onClick:()=>{var h;return(h=$.current)==null?void 0:h.click()},children:[e.jsx($t,{className:"w-4 h-4 mr-2"}),"Upload Custom"]}),e.jsx("input",{ref:$,type:"file",accept:"image/*",onChange:je,className:"hidden"})]}),e.jsxs("div",{children:[e.jsx(He,{className:"text-sm font-medium",children:"Select Frame from Video"}),e.jsxs("div",{className:"mt-2 space-y-2",children:[e.jsx(rt,{value:T,onValueChange:F,max:t.duration||100,step:1,className:"w-full"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Frame at ",T[0],"s"]})]})]})]}),f&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg dark:bg-gray-800",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Thumbnail Analysis"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Contrast:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[Z.contrast,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Face Visibility:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[Z.faceVisibility,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Text Readability:"}),e.jsxs("span",{className:"font-medium text-orange-500",children:[Z.textReadability,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Emotional Appeal:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[Z.emotionalAppeal,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Visual Hierarchy:"}),e.jsxs("span",{className:"font-medium text-orange-500",children:[Z.visualHierarchy,"/10"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Brand Consistency:"}),e.jsxs("span",{className:"font-medium text-green-600",children:[Z.brandConsistency,"/10"]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:"Predicted CTR:"}),e.jsxs("span",{className:"font-bold text-lg text-blue-600",children:[Z.predictedCTR,"%"]})]})})]})]})]}),e.jsxs(S,{children:[e.jsxs(P,{children:[e.jsxs(R,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"w-5 h-5"}),"AI Suggestions"]}),e.jsx(Ue,{children:"Most important optimization recommendations"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-blue-50 border-l-4 border-blue-500 rounded dark:bg-blue-950",children:[e.jsx(Ls,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900 dark:text-blue-100",children:"Optimize Title"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200",children:'Consider adding trending keywords like "2024" or "Ultimate Guide" to increase discoverability.'})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 border-l-4 border-green-500 rounded dark:bg-green-950",children:[e.jsx(be,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900 dark:text-green-100",children:"Perfect Upload Time"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-200",children:"Your audience is most active between 7-9 PM. Consider scheduling posts during this window."})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 border-l-4 border-orange-500 rounded dark:bg-orange-950",children:[e.jsx(Te,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-orange-900 dark:text-orange-100",children:"Thumbnail Enhancement"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-200",children:"Adding bright colors and clear text could improve your CTR by up to 15%."})]})]})]})})]})]}),e.jsx(me,{value:"performance",className:"space-y-6",children:e.jsx(Ve,{children:e.jsx(Ia,{videoId:t.id})})})]}),e.jsx(Ms,{open:M,onOpenChange:j,children:e.jsxs(Fs,{children:[e.jsxs(Vs,{children:[e.jsx(Is,{children:"Delete Video"}),e.jsx(Os,{children:"This action cannot be undone. Choose what you want to delete:"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:p==="tikomat",onChange:h=>N(h.target.value)}),e.jsx(He,{htmlFor:"delete-tikomat",children:"Delete only from Tikomat (keep on social platforms)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:p==="all",onChange:h=>N(h.target.value)}),e.jsx(He,{htmlFor:"delete-all",children:"Delete from everywhere (Tikomat + all social platforms)"})]})]}),e.jsxs(ut,{children:[e.jsx(H,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(H,{variant:"destructive",onClick:re,children:"Delete Video"})]})]})})]})]})}export{Or as default};
