import{r as i,j as e,v as je,$ as ye,Y as S}from"./app-DQ7SsIHe.js";import{c as L,u as M,a as Y,B as E}from"./button-B_UVl-Fu.js";import{C as Ne,b as ke,c as we,d as Ce,a as Re}from"./card-7KkcNgCS.js";import{I as T}from"./input-BUwDNlt1.js";import{L as j}from"./label-BlFdDvim.js";import{T as _e}from"./textarea-CaisPfk4.js";import{u as Pe,C as A}from"./checkbox-CAyOQ1YX.js";import{b as De,c as q,a as F,P as Ie,d as Se}from"./index-Cg43XVAr.js";import{P as _}from"./index-Cq52F9W3.js";import{c as z,u as Ee,R as Te,I as Ae,A as Fe}from"./app-layout-B_H0Hv19.js";import{A as C,a as R}from"./alert-BffFoR3U.js";import{A as Ge}from"./arrow-left-B6qxO7N8.js";import{I as Me}from"./info-Y7QzFVN6.js";import{U as Oe,C as Ve}from"./upload-CxzGnvRE.js";import{T as Ue,P as $e,C as Be,F as Le}from"./twitter-BwF8l7pY.js";import{V as Ye,I as qe,Y as ze}from"./youtube-Cio8xzRK.js";import{C as We}from"./clock-C895rc_T.js";import"./check-HqoOKldq.js";import"./chart-column-C8W_YdFd.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Xe=L("Circle",He);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],B=L("Cloud",Ze);var O="Radio",[Je,W]=q(O),[Qe,Ke]=Je(O),H=i.forwardRef((t,c)=>{const{__scopeRadio:o,name:h,checked:l=!1,required:d,disabled:x,value:f="on",onCheck:b,form:v,...g}=t,[n,y]=i.useState(null),m=M(c,k=>y(k)),r=i.useRef(!1),u=n?v||!!n.closest("form"):!0;return e.jsxs(Qe,{scope:o,checked:l,disabled:x,children:[e.jsx(_.button,{type:"button",role:"radio","aria-checked":l,"data-state":Q(l),"data-disabled":x?"":void 0,disabled:x,value:f,...g,ref:m,onClick:F(t.onClick,k=>{l||b==null||b(),u&&(r.current=k.isPropagationStopped(),r.current||k.stopPropagation())})}),u&&e.jsx(J,{control:n,bubbles:!r.current,name:h,value:f,checked:l,required:d,disabled:x,form:v,style:{transform:"translateX(-100%)"}})]})});H.displayName=O;var X="RadioIndicator",Z=i.forwardRef((t,c)=>{const{__scopeRadio:o,forceMount:h,...l}=t,d=Ke(X,o);return e.jsx(Ie,{present:h||d.checked,children:e.jsx(_.span,{"data-state":Q(d.checked),"data-disabled":d.disabled?"":void 0,...l,ref:c})})});Z.displayName=X;var es="RadioBubbleInput",J=i.forwardRef(({__scopeRadio:t,control:c,checked:o,bubbles:h=!0,...l},d)=>{const x=i.useRef(null),f=M(x,d),b=Pe(o),v=Se(c);return i.useEffect(()=>{const g=x.current;if(!g)return;const n=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(n,"checked").set;if(b!==o&&m){const r=new Event("click",{bubbles:h});m.call(g,o),g.dispatchEvent(r)}},[b,o,h]),e.jsx(_.input,{type:"radio","aria-hidden":!0,defaultChecked:o,...l,tabIndex:-1,ref:f,style:{...l.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});J.displayName=es;function Q(t){return t?"checked":"unchecked"}var ss=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],P="RadioGroup",[rs,_s]=q(P,[z,W]),K=z(),ee=W(),[ts,os]=rs(P),se=i.forwardRef((t,c)=>{const{__scopeRadioGroup:o,name:h,defaultValue:l,value:d,required:x=!1,disabled:f=!1,orientation:b,dir:v,loop:g=!0,onValueChange:n,...y}=t,m=K(o),r=Ee(v),[u,k]=De({prop:d,defaultProp:l??null,onChange:n,caller:P});return e.jsx(ts,{scope:o,name:h,required:x,disabled:f,value:u,onValueChange:k,children:e.jsx(Te,{asChild:!0,...m,orientation:b,dir:r,loop:g,children:e.jsx(_.div,{role:"radiogroup","aria-required":x,"aria-orientation":b,"data-disabled":f?"":void 0,dir:r,...y,ref:c})})})});se.displayName=P;var re="RadioGroupItem",te=i.forwardRef((t,c)=>{const{__scopeRadioGroup:o,disabled:h,...l}=t,d=os(re,o),x=d.disabled||h,f=K(o),b=ee(o),v=i.useRef(null),g=M(c,v),n=d.value===l.value,y=i.useRef(!1);return i.useEffect(()=>{const m=u=>{ss.includes(u.key)&&(y.current=!0)},r=()=>y.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",r)}},[]),e.jsx(Ae,{asChild:!0,...f,focusable:!x,active:n,children:e.jsx(H,{disabled:x,required:d.required,checked:n,...b,...l,name:d.name,ref:g,onCheck:()=>d.onValueChange(l.value),onKeyDown:F(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:F(l.onFocus,()=>{var m;y.current&&((m=v.current)==null||m.click())})})})});te.displayName=re;var as="RadioGroupIndicator",oe=i.forwardRef((t,c)=>{const{__scopeRadioGroup:o,...h}=t,l=ee(o);return e.jsx(Z,{...l,...h,ref:c})});oe.displayName=as;var ae=se,le=te,ls=oe;const ie=i.forwardRef(({className:t,...c},o)=>e.jsx(ae,{className:Y("grid gap-2",t),...c,ref:o}));ie.displayName=ae.displayName;const G=i.forwardRef(({className:t,...c},o)=>e.jsx(le,{ref:o,className:Y("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...c,children:e.jsx(ls,{className:"flex items-center justify-center",children:e.jsx(Xe,{className:"h-2.5 w-2.5 fill-current text-current"})})}));G.displayName=le.displayName;const is={youtube:{name:"YouTube",icon:ze,color:"text-red-600"},instagram:{name:"Instagram",icon:qe,color:"text-pink-600"},tiktok:{name:"TikTok",icon:Ye,color:"text-black"},facebook:{name:"Facebook",icon:Le,color:"text-blue-600"},snapchat:{name:"Snapchat",icon:Be,color:"text-yellow-500"},pinterest:{name:"Pinterest",icon:$e,color:"text-red-500"},twitter:{name:"Twitter",icon:Ue,color:"text-blue-400"}};function Ps({channel:t,availablePlatforms:c,defaultPlatforms:o,connectedPlatforms:h,allowedPlatforms:l}){var U,$;const[d,x]=i.useState(o),[f,b]=i.useState("now"),[v,g]=i.useState(!1),[n,y]=i.useState({}),m=[{title:"Dashboard",href:"/dashboard"},{title:t.name,href:`/channels/${t.slug}`},{title:"Upload Video",href:`/channels/${t.slug}/videos/create`}],{data:r,setData:u,post:k,processing:V,errors:N,progress:D}=je({video:null,title:"",description:"",platforms:o,publish_type:"now",publish_at:"",cloud_providers:[]}),de=(s,a)=>{let p;a?p=[...d,s]:p=d.filter(w=>w!==s),x(p),u("platforms",p)},ne=s=>{b(s),u("publish_type",s),s==="now"&&u("publish_at","")},ce=s=>{s.preventDefault(),y({}),fe()&&k(`/channels/${t.slug}/videos`)},ue=s=>{var p;const a=(p=s.target.files)==null?void 0:p[0];a&&u("video",a)},pe=i.useCallback(s=>{s.preventDefault(),g(!1);const a=s.dataTransfer.files;if(a&&a[0]){const p=a[0];p.type.startsWith("video/")?u("video",p):alert("Please select a valid video file")}},[u]),me=i.useCallback(s=>{s.preventDefault(),g(!0)},[]),xe=i.useCallback(s=>{s.preventDefault(),g(!1)},[]),he=s=>s.size>100*1024*1024?"File size must be less than 100MB":s.type.startsWith("video/")?null:"Please select a valid video file",fe=()=>{const s={};if(r.title.trim()?r.title.length>255&&(s.title="Title must be less than 255 characters"):s.title="Title is required",r.description&&r.description.length>1e3&&(s.description="Description must be less than 1000 characters"),d.length===0&&(s.platforms="Please select at least one platform"),f==="scheduled")if(!r.publish_at)s.publish_at="Please select a publish date and time";else{const a=new Date(r.publish_at),p=new Date,w=new Date(p.getTime()+5*6e4);a<=w&&(s.publish_at="Publish date must be at least 5 minutes from now")}if(!r.video)s.video="Please select a video file";else{const a=he(r.video);a&&(s.video=a)}return y(s),Object.keys(s).length===0};return e.jsxs(Fe,{breadcrumbs:m,children:[e.jsx(ye,{title:"Upload Video"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:["Upload Video to ",t.name]}),e.jsx("p",{className:"text-muted-foreground",children:"Upload a video to publish across your connected social media platforms"})]}),e.jsx(S,{href:`/channels/${t.slug}`,children:e.jsxs(E,{variant:"outline",children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Back to Channel"]})})]}),c.length===0&&e.jsxs(C,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-950 dark:border-yellow-800",children:[e.jsx(Me,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(R,{className:"text-yellow-800 dark:text-yellow-200",children:[e.jsx("strong",{children:"No connected platforms:"})," You need to connect at least one social media platform to this channel before uploading videos.",e.jsx(S,{href:`/channels/${t.slug}`,className:"ml-1 underline",children:"Connect platforms now"})]})]}),l.length===1&&e.jsx(C,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:e.jsxs(R,{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Free Plan:"})," You currently have access to YouTube only. Upgrade to Pro to unlock Instagram and TikTok publishing."]})}),e.jsxs(Ne,{className:"max-w-2xl",children:[e.jsxs(ke,{children:[e.jsx(we,{children:"Video Details"}),e.jsx(Ce,{children:"Upload your video file and provide details for publishing"})]}),e.jsx(Re,{children:e.jsxs("form",{onSubmit:ce,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"video",children:"Video File"}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${v?"border-blue-400 bg-blue-50 dark:border-blue-500 dark:bg-blue-900/20":"border-gray-300 hover:border-gray-400 dark:border-gray-600 dark:hover:border-gray-500"}`,onDrop:pe,onDragOver:me,onDragLeave:xe,children:[e.jsx(Oe,{className:`mx-auto h-12 w-12 ${v?"text-blue-500":"text-gray-400 dark:text-gray-500"}`}),e.jsxs("div",{className:"mt-4",children:[e.jsxs(j,{htmlFor:"video",className:"cursor-pointer",children:[e.jsx("span",{className:"mt-2 block text-sm font-medium text-gray-900 dark:text-gray-100",children:v?"Drop your video here":"Click to upload or drag and drop"}),e.jsx("span",{className:"mt-1 block text-xs text-gray-500 dark:text-gray-400",children:"MP4, MOV, AVI, WMV, WebM up to 100MB (max 60 seconds)"})]}),e.jsx(T,{id:"video",type:"file",accept:"video/*",onChange:ue,className:"hidden"})]})]}),r.video&&e.jsxs("div",{className:"text-sm text-green-600 bg-green-50 p-2 rounded border border-green-200 dark:text-green-400 dark:bg-green-900/20 dark:border-green-800",children:[e.jsx("strong",{children:"Selected:"})," ",r.video.name," (",(r.video.size/(1024*1024)).toFixed(2)," MB)"]}),(N.video||n.video)&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N.video||n.video}),D&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm dark:text-gray-300",children:[e.jsx("span",{children:"Uploading..."}),e.jsxs("span",{children:[D.percentage,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 dark:bg-gray-700",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${D.percentage}%`}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"title",children:"Title"}),e.jsx(T,{id:"title",value:r.title,onChange:s=>u("title",s.target.value),placeholder:"Enter video title"}),(N.title||n.title)&&e.jsx("p",{className:"text-sm text-red-600",children:N.title||n.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(_e,{id:"description",value:r.description,onChange:s=>u("description",s.target.value),placeholder:"Enter video description",rows:4}),(N.description||n.description)&&e.jsx("p",{className:"text-sm text-red-600",children:N.description||n.description})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{children:"Select Platforms"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Choose which platforms to publish this video to"}),e.jsx("div",{className:"grid grid-cols-1 gap-3",children:Object.entries(is).map(([s,a])=>{const p=a.icon,w=c.includes(s),be=h.includes(s),I=l.includes(s),ve=d.includes(s);return e.jsxs("div",{className:`flex items-center space-x-3 p-3 border rounded-lg ${w?"border-gray-300 dark:border-gray-600":"bg-gray-50 border-gray-200 dark:bg-gray-800 dark:border-gray-700"}`,children:[e.jsx(A,{id:s,checked:ve,disabled:!w,onCheckedChange:ge=>de(s,ge)}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx(p,{className:`h-5 w-5 ${a.color}`}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(j,{htmlFor:s,className:`font-medium cursor-pointer ${w?"":"text-gray-400 dark:text-gray-500"}`,children:a.name}),!I&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded dark:bg-blue-900/30 dark:text-blue-300",children:"Pro Only"}),I&&!be&&e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-600 px-2 py-1 rounded dark:bg-yellow-900/30 dark:text-yellow-300",children:"Not Connected"})]}),!w&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:I?"Connect this platform to your channel":"Upgrade to access this platform"})]})]})]},s)})}),(N.platforms||n.platforms)&&e.jsx("p",{className:"text-sm text-red-600",children:N.platforms||n.platforms}),c.length===0&&e.jsx(C,{className:"bg-yellow-50 border-yellow-200 dark:bg-yellow-900/20 dark:border-yellow-800",children:e.jsx(R,{className:"text-yellow-800 dark:text-yellow-200",children:"No platforms available for upload. Please connect at least one platform to this channel."})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(j,{children:"Publishing Options"}),e.jsxs(ie,{value:f,onValueChange:ne,children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{value:"now",id:"now"}),e.jsxs(j,{htmlFor:"now",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx("span",{children:"Publish now"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G,{value:"scheduled",id:"scheduled"}),e.jsxs(j,{htmlFor:"scheduled",className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{children:"Schedule for later"})]})]})]}),f==="scheduled"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(j,{htmlFor:"publish_at",children:"Publish Date & Time (Your Local Time)"}),e.jsx(T,{id:"publish_at",type:"datetime-local",value:r.publish_at,onChange:s=>u("publish_at",s.target.value),min:(()=>{const s=new Date;return s.setMinutes(s.getMinutes()+5),s.toISOString().slice(0,16)})()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Time will be converted to your local timezone. Minimum: 5 minutes from now."}),(N.publish_at||n.publish_at)&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N.publish_at||n.publish_at})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(j,{children:"Cloud Storage Backup (Optional)"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically backup your video to cloud storage services"})]}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx(A,{id:"google_drive",checked:((U=r.cloud_providers)==null?void 0:U.includes("google_drive"))||!1,onCheckedChange:s=>{const a=r.cloud_providers||[];s?u("cloud_providers",[...a,"google_drive"]):u("cloud_providers",a.filter(p=>p!=="google_drive"))}}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded flex items-center justify-center",children:e.jsx(B,{className:"w-4 h-4 text-blue-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{htmlFor:"google_drive",className:"font-medium",children:"Google Drive"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Backup to your Google Drive account"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx(A,{id:"dropbox",checked:(($=r.cloud_providers)==null?void 0:$.includes("dropbox"))||!1,onCheckedChange:s=>{const a=r.cloud_providers||[];s?u("cloud_providers",[...a,"dropbox"]):u("cloud_providers",a.filter(p=>p!=="dropbox"))}}),e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded flex items-center justify-center",children:e.jsx(B,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx(j,{htmlFor:"dropbox",className:"font-medium",children:"Dropbox"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Backup to your Dropbox account"})]})]})]})]}),e.jsx(C,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950 dark:border-blue-800",children:e.jsxs(R,{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Note:"})," Cloud storage backup requires API configuration. Videos will be stored locally and cloud backup will be simulated for now."]})})]}),e.jsxs("div",{className:"flex justify-end space-x-4",children:[e.jsx(S,{href:`/channels/${t.slug}`,children:e.jsx(E,{type:"button",variant:"outline",children:"Cancel"})}),e.jsx(E,{type:"submit",disabled:V||!r.video||d.length===0||c.length===0,children:V?"Uploading...":"Upload Video"})]})]})})]})]})]})}export{Ps as default};
