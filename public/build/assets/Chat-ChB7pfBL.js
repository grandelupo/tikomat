import{r as i,v as u,j as e,$ as f,m as j}from"./app-ozfEpo_I.js";import{A as g}from"./app-layout-s3LkRgpS.js";import{c as N,B as y}from"./button-CsYLtmsg.js";import{C as b,b as v,c as C,a as S}from"./card-QOP9n2Sn.js";import{I as k}from"./input-opMDpsZg.js";import{M as m,S as _}from"./scroll-area-BUMLrYq1.js";import{U as w}from"./user-BtYEss9I.js";import{S as T}from"./send-BfueJSwl.js";import"./index-CGxPRdp5.js";import"./index-BapqW0YF.js";import"./chart-column-CG83j-w0.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],U=N("UserCheck",D);function z({messages:t,user:o}){const a=i.useRef(null),{data:r,setData:n,post:d,processing:l,reset:x}=u({message:""}),p=[{title:"Dashboard",href:"/dashboard"},{title:"Chat Support",href:"/chat"}];i.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t]);const h=s=>{s.preventDefault(),r.message.trim()&&d("/chat",{onSuccess:()=>{x("message"),j.reload()}})};return e.jsxs(g,{breadcrumbs:p,children:[e.jsx(f,{title:"Chat Support"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Chat Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get help from our support team or ask questions about Tikomat"})]}),e.jsxs(b,{className:"flex-1 flex flex-col",children:[e.jsx(v,{children:e.jsxs(C,{className:"flex items-center",children:[e.jsx(m,{className:"w-5 h-5 mr-2"}),"Support Chat"]})}),e.jsxs(S,{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"flex-1 h-96 mb-4 border rounded-lg",children:e.jsx(_,{className:"h-full p-4",ref:a,children:e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(s=>{var c;return e.jsx("div",{className:`flex ${s.is_admin_message?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.is_admin_message?"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-100":"bg-blue-600 text-white"}`,children:[e.jsxs("div",{className:"flex items-center mb-1",children:[s.is_admin_message?e.jsx(U,{className:"w-4 h-4 mr-1"}):e.jsx(w,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-xs font-medium",children:s.is_admin_message?((c=s.admin_user)==null?void 0:c.name)||"Support":o.name})]}),e.jsx("p",{className:"text-sm",children:s.message}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(s.created_at).toLocaleTimeString()})]})},s.id)}):e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[e.jsx(m,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No messages yet. Start a conversation!"})]})})})}),e.jsxs("form",{onSubmit:h,className:"flex space-x-2",children:[e.jsx(k,{value:r.message,onChange:s=>n("message",s.target.value),placeholder:"Type your message...",className:"flex-1",disabled:l}),e.jsx(y,{type:"submit",disabled:l||!r.message.trim(),children:e.jsx(T,{className:"w-4 h-4"})})]})]})]})]})]})}export{z as default};
