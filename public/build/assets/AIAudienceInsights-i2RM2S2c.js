import{r as n,j as e}from"./app-gHsCjp2q.js";import{R as v}from"./refresh-cw-Dryhke0n.js";import{S as D,U as N,a as y,T as E}from"./workflow-omBnQ8O9.js";import{G as w}from"./globe-DfRgamE8.js";import{E as L}from"./eye-RSaIS16Q.js";import{U as O}from"./user-Cq76VNNr.js";import{C as U}from"./circle-check-big-BaOqI-OI.js";import{A as G}from"./arrow-up-ClRkRYOZ.js";import{H as $}from"./heart-BIga7OEn.js";import{T as B}from"./triangle-alert-Do62Kjb0.js";import{Z as H}from"./zap-D5JaMJWD.js";import{C as q}from"./clock-DzBdRsqN.js";import{P as F}from"./plus-gzLpVf8W.js";import{C as M}from"./circle-alert-BlVNWB4L.js";const de=({videoId:Z,onClose:h})=>{const[m,_]=n.useState("overview"),[o,u]=n.useState(!1),[s,A]=n.useState(null),[i,S]=n.useState({platforms:["youtube","instagram","tiktok"],timeframe:"30d",includeSegmentation:!0}),T=[{id:"overview",label:"Overview",icon:N},{id:"demographics",label:"Demographics",icon:w},{id:"segments",label:"Segments",icon:y},{id:"behavior",label:"Behavior",icon:L},{id:"growth",label:"Growth",icon:E},{id:"personalization",label:"Personalization",icon:O}],g={youtube:"ðŸŽ¬",instagram:"ðŸ“¸",tiktok:"ðŸŽµ",facebook:"ðŸ‘¥",twitter:"ðŸ¦",snapchat:"ðŸ‘»"},b=async()=>{var a;u(!0);try{const r=await(await fetch("/ai/audience-insights",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({platforms:i.platforms,timeframe:i.timeframe,include_segmentation:i.includeSegmentation})})).json();r.success?A(r.data):console.error("Failed to analyze audience insights:",r.error)}catch(t){console.error("Error analyzing audience insights:",t)}finally{u(!1)}};n.useEffect(()=>{b()},[i]);const l=()=>!s||s.status!=="insufficient_data"?null:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(B,{className:"w-6 h-6 text-amber-600 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-amber-800",children:"Not Enough Data for Analysis"})]}),e.jsx("p",{className:"text-amber-700 mb-4",children:s.message}),s.data_sufficiency&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Videos Created"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:s.data_sufficiency.metrics.video_count}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Need ",s.data_sufficiency.requirements.min_videos,"+"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Connected Platforms"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:s.data_sufficiency.metrics.connected_platforms}),e.jsxs("div",{className:"text-sm text-gray-500",children:["Need ",s.data_sufficiency.requirements.min_platforms,"+"]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-amber-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Publishing History"}),e.jsx("div",{className:"text-2xl font-bold text-amber-800",children:s.data_sufficiency.metrics.publishing_history}),e.jsx("div",{className:"text-sm text-gray-500",children:"Need 1+ successful publish"})]})]})]}),s.recommendations&&s.recommendations.length>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Recommended Actions"]}),e.jsx("div",{className:"space-y-4",children:s.recommendations.map((a,t)=>e.jsx("div",{className:"bg-white rounded-lg p-4 border border-blue-200",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-1",children:a.action}),e.jsx("p",{className:"text-blue-700 text-sm mb-2",children:a.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-blue-600",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full ${a.priority==="critical"?"bg-red-100 text-red-800":a.priority==="high"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:[a.priority," priority"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),a.estimated_time]})]})]}),e.jsx(F,{className:"w-5 h-5 text-blue-500 ml-4"})]})},t))})]})]}),d=(a,t)=>a&&(a.status==="insufficient_data"||a.status==="no_data"||a.status==="error")?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-5 h-5 text-yellow-600 mr-2"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-yellow-800",children:["Limited ",t," Data"]}),e.jsx("div",{className:"text-sm text-yellow-700",children:a.message})]})]})}):null,f=()=>{var a,t,r,c,p,j;return(s==null?void 0:s.status)==="insufficient_data"?l():e.jsxs("div",{className:"space-y-6",children:[(s==null?void 0:s.data_sufficiency)&&e.jsx("div",{className:`rounded-lg p-4 ${s.data_sufficiency.confidence==="high"?"bg-green-50 border border-green-200":s.data_sufficiency.confidence==="medium"?"bg-yellow-50 border border-yellow-200":"bg-red-50 border border-red-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium ${s.data_sufficiency.confidence==="high"?"text-green-800":s.data_sufficiency.confidence==="medium"?"text-yellow-800":"text-red-800"}`,children:["Data Quality: ",s.data_sufficiency.confidence.charAt(0).toUpperCase()+s.data_sufficiency.confidence.slice(1)," Confidence"]}),e.jsxs("p",{className:`text-sm ${s.data_sufficiency.confidence==="high"?"text-green-600":s.data_sufficiency.confidence==="medium"?"text-yellow-600":"text-red-600"}`,children:["Based on ",s.data_sufficiency.metrics.video_count," videos and ",s.data_sufficiency.metrics.publishing_history," publications"]})]}),e.jsx(U,{className:`w-6 h-6 ${s.data_sufficiency.confidence==="high"?"text-green-500":s.data_sufficiency.confidence==="medium"?"text-yellow-500":"text-red-500"}`})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Audience Health Score"}),e.jsxs("div",{className:"text-3xl font-bold",children:[(s==null?void 0:s.audience_health_score)||0,"/100"]}),e.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:[(s==null?void 0:s.insights_confidence)==="high"?"High Confidence":(s==null?void 0:s.insights_confidence)==="medium"?"Medium Confidence":"Limited Data"," Analysis"]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(N,{})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((t=(a=s==null?void 0:s.engagement_insights)==null?void 0:a.overall_metrics)==null?void 0:t.success_rate)||0,"%"]}),e.jsxs("p",{className:"text-sm text-green-600 flex items-center mt-1",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Publishing success"]})]}),e.jsx($,{className:"w-8 h-8 text-red-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Publications"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((c=(r=s==null?void 0:s.engagement_insights)==null?void 0:r.overall_metrics)==null?void 0:c.total_publications)||0}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Across platforms"})]}),e.jsx(y,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Platform Coverage"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((j=(p=s==null?void 0:s.engagement_insights)==null?void 0:p.overall_metrics)==null?void 0:j.platform_coverage)||i.platforms.length}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Platforms active"})]}),e.jsx(w,{className:"w-8 h-8 text-green-500"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Platform Distribution"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:i.platforms.map(x=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-2xl mr-3",children:g[x]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:x}),e.jsx("p",{className:"text-sm text-gray-600",children:"Active"})]})]},x))})]})]})},k=()=>{var a,t;return(s==null?void 0:s.status)==="insufficient_data"?l():e.jsxs("div",{className:"space-y-6",children:[d(s==null?void 0:s.demographic_breakdown,"Demographics"),(a=s==null?void 0:s.demographic_breakdown)!=null&&a.status?e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Demographics Analysis"}),e.jsx("p",{className:"text-gray-600",children:s.demographic_breakdown.message||"No demographic data available yet."}),e.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 text-sm",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Connect more social media accounts and publish videos to gather demographic insights."]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Platform Activity"}),e.jsx("div",{className:"space-y-4",children:Object.entries((s==null?void 0:s.demographic_breakdown)||{}).filter(([r])=>!["overall","analysis_period"].includes(r)).map(([r,c])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:g[r]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:r}),e.jsxs("div",{className:"text-sm text-gray-600",children:[c.publishing_count," publications"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-green-600",children:[c.success_rate,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Success rate"})]})]},r))})]}),((t=s==null?void 0:s.demographic_breakdown)==null?void 0:t.overall)&&e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overall Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.demographic_breakdown.overall.total_publications}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Publications"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[s.demographic_breakdown.overall.average_success_rate,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Success Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.demographic_breakdown.overall.platform_diversity}),e.jsx("div",{className:"text-sm text-gray-600",children:"Platforms Used"})]}),e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-orange-600 capitalize",children:s.demographic_breakdown.overall.most_active_platform}),e.jsx("div",{className:"text-sm text-gray-600",children:"Most Active"})]})]})]})]})]})},C=()=>(s==null?void 0:s.status)==="insufficient_data"?l():e.jsxs("div",{className:"space-y-6",children:[d(s==null?void 0:s.audience_segments,"Segmentation"),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Audience Segments"}),e.jsx("p",{className:"text-gray-600",children:"Segment analysis based on your content and publishing patterns."})]})]}),P=()=>(s==null?void 0:s.status)==="insufficient_data"?l():e.jsxs("div",{className:"space-y-6",children:[d(s==null?void 0:s.behavior_patterns,"Behavior"),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Behavior Patterns"}),e.jsx("p",{className:"text-gray-600",children:"Analysis of content creation and publishing behavior."})]})]}),z=()=>(s==null?void 0:s.status)==="insufficient_data"?l():e.jsxs("div",{className:"space-y-6",children:[d(s==null?void 0:s.growth_opportunities,"Growth"),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Growth Opportunities"}),e.jsx("p",{className:"text-gray-600",children:"Recommendations for expanding your audience reach."})]})]}),I=()=>(s==null?void 0:s.status)==="insufficient_data"?l():e.jsxs("div",{className:"space-y-6",children:[d(s==null?void 0:s.personalization_recommendations,"Personalization"),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Personalization Recommendations"}),e.jsx("p",{className:"text-gray-600",children:"Tailored strategies for your content and audience."})]})]}),R=()=>{switch(m){case"overview":return f();case"demographics":return k();case"segments":return C();case"behavior":return P();case"growth":return z();case"personalization":return I();default:return f()}};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Audience Insights"}),e.jsx("p",{className:"text-gray-600",children:(s==null?void 0:s.insights_confidence)==="insufficient"?"Gather more data for comprehensive insights":"Deep audience analysis and personalization recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:b,disabled:o,className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(v,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`}),o?"Analyzing...":"Refresh Analysis"]}),h&&e.jsx("button",{onClick:h,className:"p-2 text-gray-400 hover:text-gray-600",children:"âœ•"})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 mb-6 shadow-sm border border-gray-200",children:e.jsx("div",{className:"flex flex-wrap items-center gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Timeframe:"}),e.jsxs("select",{value:i.timeframe,onChange:a=>S({...i,timeframe:a.target.value}),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"180d",children:"Last 6 months"}),e.jsx("option",{value:"365d",children:"Last year"})]})]})})}),e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:T.map(a=>{const t=a.icon;return e.jsxs("button",{onClick:()=>_(a.id),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${m===a.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),a.label]},a.id)})}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-8 h-8 mx-auto mb-4 text-purple-600 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Analyzing audience insights..."})]}):R()},m)]})};export{de as A};
