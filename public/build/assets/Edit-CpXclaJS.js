import{r as c,j as e,v as ut,$ as pt,Y as gt,m as js}from"./app-0b_s86kb.js";import{a as se,c as re,B as H}from"./button-DWsOH8WQ.js";import{C as w,b as $,c as I,a as T,d as cs}from"./card-B4-scWX3.js";import{I as Vs}from"./input-DkFwj47K.js";import{L as Ws}from"./label-umJnqSaR.js";import{T as ft}from"./textarea-DL3UMkIQ.js";import{T as us,a as ps,b as fe,c as je}from"./tabs-DOaogG_9.js";import{B as M}from"./badge-Dh4r-AEU.js";import{D as Gs,b as Js,c as Ys,d as Qs,e as Zs,f as jt}from"./dialog-Cu4YWetM.js";import{B as Ie,d as Ns,C as es,X as Qe,A as bt}from"./app-layout-B3TK4YQX.js";import{P as Ze}from"./progress-B_nQ5TJE.js";import{u as ws}from"./use-toast-DNo7F9E6.js";import{V as De}from"./video-CyEIHeNe.js";import{F as et}from"./file-text-DejMI2io.js";import{I as $e,S as yt,T as bs}from"./tag-PZdKlKqO.js";import{T as Pe,C as qe,S as Nt}from"./workflow-ChGXuaJZ.js";import{R as me}from"./refresh-cw-BmcH5YGU.js";import{C as xs}from"./circle-check-big-Dg14WydD.js";import{E as Ve}from"./eye-tFjN8Xof.js";import{H as st}from"./heart-B0y5hMxD.js";import{C as hs}from"./clock-D_W5yXY8.js";import{S as vt,a as wt,b as _t,c as kt,d as os}from"./select-D48n1RNI.js";import{C as St}from"./checkbox-DvhL4UaG.js";import{T as Xe}from"./target-DnRurgKJ.js";import{C as Tt}from"./calendar-B3vFUfKI.js";import{T as Bs}from"./triangle-alert-FgvcQRW-.js";import{A as Us}from"./arrow-up-DhFZwPhl.js";import{A as ys}from"./activity-B_nX3vEY.js";import{L as Ct}from"./lightbulb-BUyM_HVd.js";import{P as At}from"./pause-CXfAg4zB.js";import{P as tt}from"./play-BNyfTF9F.js";import{C as Ft,P as at}from"./palette-CgO7nnbI.js";import{D as Et}from"./download-B8LFT5rh.js";import{T as Le}from"./trash-2-BVC1Ibn9.js";import{Z as rt}from"./zap-BPCaDu3J.js";import{E as ds}from"./ErrorBoundary-CsHQ81HW.js";import{U as Mt}from"./user-n25stOMb.js";import{S as vs}from"./sparkles-Cnt9Cia_.js";import{S as zt}from"./star-DDRJHDix.js";import{A as Rt}from"./arrow-left-BxB7iZQ3.js";import{U as Xs}from"./upload-DXth7kNg.js";import{I as Pt}from"./instagram-BTP8dlqV.js";import{Y as Ot}from"./youtube-CoeVoNyv.js";import{E as $t}from"./external-link-Do_6Q33U.js";import"./index-5W0JHpoI.js";import"./index-BpBtLRa4.js";import"./index-MlzTEEqS.js";import"./chevron-down-DY0fFSUZ.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Dt=se("AlignCenter",It);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Lt=se("AlignLeft",qt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Wt=se("AlignRight",Vt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Hs=se("ArrowDown",Bt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Xt=se("Bold",Ut);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],Kt=se("Captions",Ht);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Jt=se("Film",Gt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Qt=se("Italic",Yt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],ea=se("Languages",Zt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],ta=se("Layers",sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],ra=se("Maximize",aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],ia=se("Mic",na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const la=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],ca=se("Minimize",la);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Ye=se("Scan",oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],ma=se("Settings2",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],ms=se("TestTube",xa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],ua=se("TrendingDown",ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],ga=se("Trophy",pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],_s=se("Type",fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],ba=se("Underline",ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Na=se("WandSparkles",ya);function va({videoId:n,videoPath:v,onAnalysisComplete:o,className:C}){var f,Z,oe,ie,ce,xe,le,ye,be,Te,de,he,a,k,D,G,Y,Ce,te,Ne,Ae,ve,we,ue,ae,Ee,Fe,_e,q,h,l,y;const[t,_]=c.useState(null),[B,z]=c.useState(!1),[ne,R]=c.useState("overview"),{toast:E}=ws(),K=async()=>{var x;if(!n){E({title:"No Video Selected",description:"Please select a video first before analyzing.",variant:"destructive"});return}z(!0);try{const W=await fetch("/ai/analyze-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({video_id:n})}),F=await W.json();F.success?(_(F.data),o==null||o(F.data),E({title:"Analysis Complete! ðŸŽ¬",description:"AI has analyzed your video and extracted valuable insights."})):W.status===404?E({title:"Video File Not Found",description:"The video file associated with this record could not be found. Please re-upload the video.",variant:"destructive"}):E({title:"Analysis Failed",description:F.message||"Failed to analyze video. Please try again.",variant:"destructive"})}catch(W){console.error("Video analysis error:",W),E({title:"Analysis Failed",description:"Failed to analyze video. Please try again.",variant:"destructive"})}finally{z(!1)}},V=x=>{const W=Math.floor(x/60),F=Math.floor(x%60);return`${W}:${F.toString().padStart(2,"0")}`},ee=x=>`${(x/1048576).toFixed(1)} MB`,X=x=>x>=80?"text-green-600 bg-green-100":x>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",P=x=>({positive:"ðŸ˜Š",energetic:"âš¡",calm:"ðŸ˜Œ",professional:"ðŸ’¼",casual:"ðŸ˜Ž",inspirational:"âœ¨",neutral:"ðŸ˜"})[x]||"ðŸ˜",b=x=>({educational:"ðŸ“š",entertainment:"ðŸŽ­",gaming:"ðŸŽ®",lifestyle:"ðŸ ",fitness:"ðŸ’ª",food:"ðŸ³",travel:"âœˆï¸",tech:"ðŸ’»",music:"ðŸŽµ",fashion:"ðŸ‘—",business:"ðŸ’¼",diy:"ðŸ”¨",general:"ðŸ“¹"})[x]||"ðŸ“¹",p=()=>{if(!(t!=null&&t.quality_score))return!1;const x=t.quality_score.resolution_score||0,W=t.quality_score.audio_score||0,F=t.quality_score.bitrate_score||0;return x<70||W<70||F<70},S=()=>{if(!(t!=null&&t.quality_score))return[];const x=[],W=t.quality_score.resolution_score||0,F=t.quality_score.audio_score||0,Me=t.quality_score.bitrate_score||0;return W<70&&x.push({type:"Resolution",score:W,severity:W<40?"high":"medium"}),F<70&&x.push({type:"Audio Quality",score:F,severity:F<40?"high":"medium"}),Me<70&&x.push({type:"Bitrate",score:Me,severity:Me<40?"high":"medium"}),x};return!t&&!B?e.jsxs(w,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",C),children:[e.jsxs($,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit",children:e.jsx(Ie,{className:"w-8 h-8 text-white"})}),e.jsx(I,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analyzer"}),e.jsx("p",{className:"text-muted-foreground",children:"Get comprehensive insights about your video content using advanced AI analysis"})]}),e.jsxs(T,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(De,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Video Quality"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(et,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Transcription"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx($e,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Scene Analysis"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(Pe,{className:"w-6 h-6 text-pink-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Engagement Prediction"})]})]}),e.jsxs(H,{onClick:K,disabled:!v,size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"Start AI Analysis"]}),!v&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a video first to enable AI analysis"})]})]}):B?e.jsx(w,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",C),children:e.jsxs(T,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit animate-pulse",children:e.jsx(Ie,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Analyzing Your Video..."}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our AI is processing your video to extract valuable insights"}),e.jsx(Ze,{value:75,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{className:"text-foreground",children:"Extracting audio..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-foreground",children:"Analyzing scenes..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{className:"text-foreground",children:"Predicting engagement..."})]})]})]})}):!t||!t.basic_info?e.jsx(w,{className:re("border-2 border-red-200 bg-red-50",C),children:e.jsxs(T,{className:"p-8 text-center",children:[e.jsx(Ns,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Analysis Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The video analysis data is incomplete or corrupted."}),e.jsxs(H,{onClick:K,variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs(w,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",C),children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:e.jsx(Ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(I,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive insights powered by artificial intelligence"})]})]}),e.jsxs(H,{onClick:K,disabled:B,size:"sm",variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(T,{children:[e.jsxs(us,{value:ne,onValueChange:R,className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-3",children:[e.jsx(fe,{value:"overview",children:"Overview"}),e.jsx(fe,{value:"engagement",children:"Engagement"}),e.jsx(fe,{value:"chapters",children:"Chapters"})]}),e.jsxs(je,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Video Information"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:V(((f=t.basic_info)==null?void 0:f.duration)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Resolution:"}),e.jsxs("span",{className:"font-medium",children:[((Z=t.basic_info)==null?void 0:Z.width)||0,"Ã—",((oe=t.basic_info)==null?void 0:oe.height)||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"File Size:"}),e.jsx("span",{className:"font-medium",children:ee(((ie=t.basic_info)==null?void 0:ie.file_size)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Audio:"}),e.jsx(M,{variant:(ce=t.basic_info)!=null&&ce.has_audio?"default":"destructive",children:(xe=t.basic_info)!=null&&xe.has_audio?"Present":"Missing"})]})]})]}),e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Content Analysis"]})}),e.jsxs(T,{className:"space-y-3",children:[t.content_category&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsxs(M,{className:"bg-blue-100 text-blue-800",children:[b(t.content_category.primary_category)," ",t.content_category.primary_category]})]}),t.mood_analysis&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Mood:"}),e.jsxs(M,{className:"bg-green-100 text-green-800",children:[P(t.mood_analysis.dominant_mood)," ",t.mood_analysis.dominant_mood]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Transcript:"}),e.jsx(M,{variant:(le=t.transcript)!=null&&le.success?"default":"destructive",children:(ye=t.transcript)!=null&&ye.success?e.jsxs(e.Fragment,{children:[e.jsx(xs,{className:"w-3 h-3 mr-1"}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{className:"w-3 h-3 mr-1"}),"Failed"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Content Tags:"}),e.jsxs("span",{className:"font-medium",children:[((be=t.content_tags)==null?void 0:be.length)||0," tags"]})]})]})]})]}),e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"Overall Scores"]})}),e.jsx(T,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:re("text-3xl font-bold p-4 rounded-lg mb-2",X(((Te=t.quality_score)==null?void 0:Te.overall_score)||0)),children:[((de=t.quality_score)==null?void 0:de.overall_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Video Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:re("text-3xl font-bold p-4 rounded-lg mb-2",X(((he=t.engagement_predictions)==null?void 0:he.engagement_score)||0)),children:[((a=t.engagement_predictions)==null?void 0:a.engagement_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Engagement Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold p-4 bg-purple-100 text-purple-800 rounded-lg mb-2",children:((k=t.engagement_predictions)==null?void 0:k.virality_potential)||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Virality Potential"})]})]})})]})]}),e.jsx(je,{value:"engagement",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx($,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Engagement Predictions"]})}),e.jsxs(T,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(Ve,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:(((G=(D=t.engagement_predictions)==null?void 0:D.predicted_views)==null?void 0:G.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-blue-600",children:"Expected Views"})]}),e.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[e.jsx(st,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-pink-800",children:(((Ce=(Y=t.engagement_predictions)==null?void 0:Y.predicted_likes)==null?void 0:Ce.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-pink-600",children:"Expected Likes"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(yt,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:(((Ne=(te=t.engagement_predictions)==null?void 0:te.predicted_shares)==null?void 0:Ne.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"Expected Shares"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Prediction Ranges"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Views"}),e.jsxs("span",{children:[(((ve=(Ae=t.engagement_predictions)==null?void 0:Ae.predicted_views)==null?void 0:ve.conservative)||0).toLocaleString()," - ",(((ue=(we=t.engagement_predictions)==null?void 0:we.predicted_views)==null?void 0:ue.optimistic)||0).toLocaleString()]})]}),e.jsx(Ze,{value:60,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Likes"}),e.jsxs("span",{children:[(((Ee=(ae=t.engagement_predictions)==null?void 0:ae.predicted_likes)==null?void 0:Ee.conservative)||0).toLocaleString()," - ",(((_e=(Fe=t.engagement_predictions)==null?void 0:Fe.predicted_likes)==null?void 0:_e.optimistic)||0).toLocaleString()]})]}),e.jsx(Ze,{value:60,className:"h-2"})]})]})]})]})]})}),e.jsx(je,{value:"chapters",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx($,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(hs,{className:"w-5 h-5"}),"Auto-Generated Chapters"]})}),e.jsx(T,{children:(((q=t.auto_chapters)==null?void 0:q.length)||0)===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(hs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No chapters detected"}),e.jsx("p",{className:"text-sm",children:"Video may be too short or lack clear segment divisions"})]}):e.jsx("div",{className:"space-y-3",children:(t.auto_chapters||[]).map((x,W)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(M,{variant:"outline",className:"mt-1",children:V(x.start_time)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:x.title}),e.jsx("p",{className:"text-sm text-gray-600",children:x.description})]})]},W))})})]})})]}),p()&&e.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(es,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-800",children:"Video Quality Suggestions"})]}),e.jsxs("div",{className:"space-y-3",children:[S().map((x,W)=>e.jsxs("div",{className:re("flex items-center justify-between p-3 rounded-lg",x.severity==="high"?"bg-red-100 border border-red-200":"bg-yellow-100 border border-yellow-200"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:re("w-2 h-2 rounded-full",x.severity==="high"?"bg-red-500":"bg-yellow-500")}),e.jsxs("span",{className:re("font-medium",x.severity==="high"?"text-red-800":"text-yellow-800"),children:[x.type," needs improvement"]})]}),e.jsxs(M,{variant:"outline",className:re(x.severity==="high"?"border-red-300 text-red-700":"border-yellow-300 text-yellow-700"),children:["Score: ",x.score,"/100"]})]},W)),(((h=t.quality_score)==null?void 0:h.suggestions)||[]).length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-orange-200",children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-2",children:"Recommendations:"}),e.jsx("div",{className:"space-y-2",children:(((l=t.quality_score)==null?void 0:l.suggestions)||[]).map((x,W)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-orange-700",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:x})]},W))})]})]})]}),t.status==="partial_analysis"&&((y=t.errors)==null?void 0:y.length)&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(es,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-800",children:"Partial Analysis"})]}),e.jsx("div",{className:"space-y-1",children:(t.errors||[]).map((x,W)=>e.jsx("p",{className:"text-sm text-yellow-700",children:x},W))})]})]})]})}function wa({videoId:n,className:v}){var Z,oe,ie,ce,xe,le,ye,be,Te,de,he,a,k,D,G,Y,Ce,te,Ne,Ae,ve,we,ue,ae,Ee,Fe,_e,q;const[o,C]=c.useState(null),[t,_]=c.useState(!1),[B,z]=c.useState("overview"),[ne,R]=c.useState(!1),[E,K]=c.useState(null),{toast:V}=ws(),ee=async()=>{var h;if(!n){V({title:"No Video Selected",description:"Please select a video to analyze performance.",variant:"destructive"});return}_(!0);try{const y=await(await fetch("/ai/analyze-video-performance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||""},body:JSON.stringify({video_id:n})})).json();if(y.success)C(y.data),V({title:"Performance Analysis Complete! ðŸ“Š",description:"AI has analyzed your video performance across all platforms."});else throw new Error(y.message||"Failed to analyze performance")}catch(l){console.error("Performance analysis error:",l),V({title:"Analysis Failed",description:"Failed to analyze video performance. Please try again.",variant:"destructive"})}finally{_(!1)}},X=async h=>{var l;try{const x=await(await fetch("/ai/create-ab-test",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_id:n,...h})})).json();if(x.success)V({title:"A/B Test Created! ðŸ§ª",description:"Your A/B test has been set up and will start collecting data."}),R(!1);else throw new Error(x.message||"Failed to create A/B test")}catch(y){console.error("A/B test creation error:",y),V({title:"A/B Test Failed",description:"Failed to create A/B test. Please try again.",variant:"destructive"})}},P=h=>h>=1e6?`${(h/1e6).toFixed(1)}M`:h>=1e3?`${(h/1e3).toFixed(1)}K`:h.toString(),b=h=>{switch(h){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"average":return"text-yellow-600 bg-yellow-100";case"needs_improvement":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},p=h=>{switch(h){case"increasing":return e.jsx(Pe,{className:"w-4 h-4 text-green-600"});case"decreasing":return e.jsx(ua,{className:"w-4 h-4 text-red-600"});default:return e.jsx(ys,{className:"w-4 h-4 text-blue-600"})}},S=h=>({youtube:"ðŸ“º",instagram:"ðŸ“·",tiktok:"ðŸŽµ",x:"ð•",facebook:"ðŸ‘¥"})[h]||"ðŸ“±",f=h=>{switch(h){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return!o&&!t?e.jsxs(w,{className:re("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",v),children:[e.jsxs($,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit",children:e.jsx(qe,{className:"w-8 h-8 text-white"})}),e.jsx(I,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Performance Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Analyze your video performance and get AI-powered optimization recommendations"})]}),e.jsxs(T,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Performance Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Xe,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Optimization Tips"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(ms,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"A/B Testing"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Tt,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Timing Optimization"})]})]}),e.jsxs(H,{onClick:ee,disabled:!n,size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(qe,{className:"w-5 h-5 mr-2"}),"Start Performance Analysis"]}),!n&&e.jsx("p",{className:"text-sm text-gray-500",children:"Select a video first to enable performance analysis"})]})]}):t?e.jsx(w,{className:re("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",v),children:e.jsxs(T,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit animate-pulse",children:e.jsx(qe,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Performance..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing your video performance across all platforms"}),e.jsx(Ze,{value:85,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing metrics..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Finding opportunities..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Generating recommendations..."})]})]})]})}):!o||!o.overall_performance||!o.comparative_analysis||!o.platform_breakdown||!o.trend_analysis?e.jsx(w,{className:re("border-2 border-red-200 bg-gradient-to-br from-red-50 to-orange-50",v),children:e.jsxs(T,{className:"p-8 text-center space-y-4",children:[e.jsx(Bs,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Analysis Data Incomplete"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The performance analysis data is incomplete or missing."}),e.jsxs(H,{onClick:ee,variant:"outline",className:"border-red-300 text-red-700",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})}):e.jsxs(w,{className:re("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",v),children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(I,{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Performance Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered performance insights and optimization recommendations"})]})]}),e.jsxs(H,{onClick:ee,disabled:t,size:"sm",variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(T,{children:[e.jsxs(us,{value:B,onValueChange:z,className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-6",children:[e.jsx(fe,{value:"overview",children:"Overview"}),e.jsx(fe,{value:"platforms",children:"Platforms"}),e.jsx(fe,{value:"opportunities",children:"Opportunities"}),e.jsx(fe,{value:"trends",children:"Trends"}),e.jsx(fe,{value:"timing",children:"Timing"}),e.jsx(fe,{value:"testing",children:"A/B Testing"})]}),e.jsxs(je,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Total Performance"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[o.performance_score,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Views:"}),e.jsx("span",{className:"font-medium",children:P(((Z=o.overall_performance)==null?void 0:Z.total_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Engagement Rate:"}),e.jsxs("span",{className:"font-medium",children:[((oe=o.overall_performance)==null?void 0:oe.engagement_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Performance Tier:"}),e.jsx(M,{className:b(((ie=o.overall_performance)==null?void 0:ie.performance_tier)||"unknown"),children:(((ce=o.overall_performance)==null?void 0:ce.performance_tier)||"unknown").replace("_"," ")})]})]})]}),e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Industry Comparison"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Views vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((le=(xe=o.comparative_analysis)==null?void 0:xe.views_vs_industry)==null?void 0:le.performance)||"below_average")==="above_average"?e.jsx(Us,{className:"w-3 h-3 text-green-600"}):e.jsx(Hs,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:re("text-sm font-medium",(((be=(ye=o.comparative_analysis)==null?void 0:ye.views_vs_industry)==null?void 0:be.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((de=(Te=o.comparative_analysis)==null?void 0:Te.views_vs_industry)==null?void 0:de.difference_percentage)||0),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((a=(he=o.comparative_analysis)==null?void 0:he.engagement_vs_industry)==null?void 0:a.performance)||"below_average")==="above_average"?e.jsx(Us,{className:"w-3 h-3 text-green-600"}):e.jsx(Hs,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:re("text-sm font-medium",(((D=(k=o.comparative_analysis)==null?void 0:k.engagement_vs_industry)==null?void 0:D.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((Y=(G=o.comparative_analysis)==null?void 0:G.engagement_vs_industry)==null?void 0:Y.difference_percentage)||0),"%"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Growth Potential:"}),e.jsxs("div",{className:"text-lg font-medium text-purple-600",children:[P(((te=(Ce=o.comparative_analysis)==null?void 0:Ce.growth_potential)==null?void 0:te.views_growth_potential)||0)," more views"]})]})]})]}),e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"Improvement Potential"]})}),e.jsxs(T,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[o.improvement_potential,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Potential"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Platforms:"}),e.jsx("span",{className:"font-medium",children:((Ne=o.overall_performance)==null?void 0:Ne.platform_count)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Days Since Upload:"}),e.jsx("span",{className:"font-medium",children:((Ae=o.overall_performance)==null?void 0:Ae.days_since_upload)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(M,{variant:"outline",children:((ve=o.trend_analysis)==null?void 0:ve.lifecycle_stage)||"unknown"})]})]})]})]}),e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5"}),"Platform Performance Overview"]})}),e.jsx(T,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(o.platform_breakdown||{}).map(([h,l])=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:S(h)}),e.jsx("div",{className:"font-medium capitalize mb-1",children:h}),e.jsxs("div",{className:"text-sm text-gray-600",children:["#",(l==null?void 0:l.ranking)||0]}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[(l==null?void 0:l.performance_score)||0,"/100"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[P((l==null?void 0:l.views)||0)," views"]})]},h))})})]})]}),e.jsx(je,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(o.platform_breakdown||{}).map(([h,l])=>e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:S(h)}),e.jsx("span",{className:"capitalize",children:h}),e.jsxs(M,{className:"ml-2",children:["#",(l==null?void 0:l.ranking)||0]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(l==null?void 0:l.performance_score)||0,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(Ve,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:P((l==null?void 0:l.views)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Views"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(st,{className:"w-6 h-6 text-green-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:P((l==null?void 0:l.engagement)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Engagement"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx(Pe,{className:"w-6 h-6 text-purple-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[(l==null?void 0:l.engagement_rate)||0,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Engagement Rate"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[((l==null?void 0:l.strengths)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(ga,{className:"w-4 h-4"}),"Strengths"]}),e.jsx("ul",{className:"space-y-1",children:((l==null?void 0:l.strengths)||[]).map((y,x)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mt-2 flex-shrink-0"}),y]},x))})]}),((l==null?void 0:l.weaknesses)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(Bs,{className:"w-4 h-4"}),"Areas for Improvement"]}),e.jsx("ul",{className:"space-y-1",children:((l==null?void 0:l.weaknesses)||[]).map((y,x)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full mt-2 flex-shrink-0"}),y]},x))})]})]}),((l==null?void 0:l.recommendations)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx(Ct,{className:"w-4 h-4"}),"Recommendations"]}),e.jsx("div",{className:"space-y-2",children:((l==null?void 0:l.recommendations)||[]).map((y,x)=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("span",{className:"text-sm text-blue-800",children:y})},x))})]})]})]},h))})}),e.jsx(je,{value:"opportunities",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(o.optimization_opportunities||{}).map(([h,l])=>e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:S(h)}),e.jsxs("span",{className:"capitalize",children:[h," Opportunities"]})]})}),e.jsx(T,{className:"space-y-4",children:(l||[]).map((y,x)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Xe,{className:"w-4 h-4"}),(y==null?void 0:y.title)||"Untitled"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(y==null?void 0:y.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{className:f((y==null?void 0:y.priority)||"low"),children:(y==null?void 0:y.priority)||"low"}),e.jsxs(M,{variant:"outline",children:[(y==null?void 0:y.potential_impact)||"unknown"," impact"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Action Steps:"}),e.jsx("div",{className:"space-y-1",children:((y==null?void 0:y.actions)||[]).map((W,F)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),W]},F))})]})]},x))})]},h))})}),e.jsx(je,{value:"trends",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(ys,{className:"w-5 h-5"}),"Trend Analysis"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trend Direction:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[p(((we=o.trend_analysis)==null?void 0:we.trend_direction)||"stable"),e.jsx("span",{className:"font-medium capitalize",children:((ue=o.trend_analysis)==null?void 0:ue.trend_direction)||"stable"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Avg Views:"}),e.jsx("span",{className:"font-medium",children:P(((ae=o.trend_analysis)==null?void 0:ae.daily_average_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Momentum Score:"}),e.jsxs("span",{className:"font-medium",children:[((Ee=o.trend_analysis)==null?void 0:Ee.momentum_score)||0,"/100"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(M,{variant:"outline",children:((Fe=o.trend_analysis)==null?void 0:Fe.lifecycle_stage)||"unknown"})]})]})]}),e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Performance Projections"]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:P(((_e=o.trend_analysis)==null?void 0:_e.projected_30_day_views)||0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Projected 30-Day Views"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Peak Performance Day:"}),e.jsxs("span",{className:"font-medium",children:["Day ",((q=o.trend_analysis)==null?void 0:q.peak_performance_day)||0]})]})]})]})]})}),e.jsx(je,{value:"timing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(o.posting_time_optimization||{}).map(([h,l])=>e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:S(h)}),e.jsxs("span",{className:"capitalize",children:[h," Timing Optimization"]})]})}),e.jsx(T,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Current Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted at:"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.current_posting_time)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Day type:"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.current_day_type)||"unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Improvement potential:"}),e.jsx(M,{className:f((l==null?void 0:l.improvement_potential)||"low"),children:(l==null?void 0:l.improvement_potential)||"low"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimal Times"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Best time:"}),e.jsx("span",{className:"font-medium text-green-600",children:(l==null?void 0:l.best_time)||"unknown"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"All optimal times:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:((l==null?void 0:l.optimal_times)||[]).map((y,x)=>e.jsx(M,{variant:"outline",className:"text-xs",children:y},x))})]})]})]})})]},h))})}),e.jsx(je,{value:"testing",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),"A/B Testing Suggestions"]})}),e.jsx(T,{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:(o.ab_test_suggestions||[]).map((h,l)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ms,{className:"w-4 h-4"}),(h==null?void 0:h.title)||"Untitled Test"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(h==null?void 0:h.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{className:f((h==null?void 0:h.priority)||"low"),children:(h==null?void 0:h.priority)||"low"}),e.jsx(H,{size:"sm",onClick:()=>{K(h),R(!0)},children:"Start Test"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Test Variations:"}),e.jsx("div",{className:"space-y-1",children:((h==null?void 0:h.test_variations)||[]).map((y,x)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),y]},x))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Success Metrics:"}),e.jsx("div",{className:"space-y-1",children:((h==null?void 0:h.success_metrics)||[]).map((y,x)=>e.jsx(M,{variant:"outline",className:"text-xs mr-1",children:y.replace("_"," ")},x))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Duration: ",(h==null?void 0:h.duration)||"Unknown"]})]})]})]},l))})})]})})]}),e.jsx(Gs,{open:ne,onOpenChange:R,children:e.jsxs(Js,{className:"max-w-md",children:[e.jsxs(Ys,{children:[e.jsx(Qs,{children:"Create A/B Test"}),e.jsxs(Zs,{children:['Set up an A/B test for "',E==null?void 0:E.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Test Duration (days)"}),e.jsxs(vt,{defaultValue:"14",children:[e.jsx(wt,{children:e.jsx(_t,{})}),e.jsxs(kt,{children:[e.jsx(os,{value:"7",children:"7 days"}),e.jsx(os,{value:"14",children:"14 days"}),e.jsx(os,{value:"21",children:"21 days"}),e.jsx(os,{value:"30",children:"30 days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Success Metrics"}),e.jsx("div",{className:"space-y-2",children:((E==null?void 0:E.success_metrics)||[]).map((h,l)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(St,{id:`metric-${l}`,defaultChecked:!0}),e.jsx("label",{htmlFor:`metric-${l}`,className:"text-sm",children:h.replace("_"," ")})]},l))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(H,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(H,{onClick:()=>X({test_type:E==null?void 0:E.test_type,test_variations:E==null?void 0:E.test_variations,success_metrics:E==null?void 0:E.success_metrics,test_duration_days:14}),children:"Create Test"})]})]})]})})]})]})}const _a=({subtitle:n,currentTime:v,position:o,onMouseDown:C,onDoubleClick:t,editingSubtitle:_,editingText:B,onTextChange:z,onSaveEdit:ne,onCancelEdit:R})=>{var b;const E=c.useRef(null),[K,V]=c.useState(new Set);c.useEffect(()=>{if(!n.words||n.words.length===0){V(new Set);return}const p=new Set;n.words.forEach((S,f)=>{v>=S.start_time&&v<=S.end_time&&p.add(f)}),V(p)},[v,n.words]);const ee=()=>!n.words||n.words.length===0?e.jsx("span",{className:"subtitle-text",children:n.text}):n.words.map((p,S)=>{var oe,ie,ce,xe,le;const f=K.has(S),Z=S===n.words.length-1;return e.jsxs("span",{className:`subtitle-word ${f?"active":""}`,style:{color:f?((oe=n.style)==null?void 0:oe.color)||"#FFFFFF":((ie=n.style)==null?void 0:ie.color)||"#FFFFFF",fontWeight:f||(ce=n.style)!=null&&ce.bold?"bold":"normal",fontStyle:(xe=n.style)!=null&&xe.italic?"italic":"normal",textDecoration:(le=n.style)!=null&&le.underline?"underline":"none",transition:"all 0.1s ease-in-out",display:"inline-block",marginRight:Z?"0":"0.1em"},children:[p.word,!Z&&" "]},`${p.word}-${S}`)}),X=()=>{const p=Math.max(15,Math.min(85,o.x)),S=Math.max(15,Math.min(85,o.y));return{x:p,y:S}},P=()=>{var Z,oe;const p=n.style||{},S=X(),f=Math.max(16,Math.min(48,p.fontSize||24));return{position:"absolute",left:`${S.x}%`,top:`${S.y}%`,transform:"translate(-50%, -50%)",fontFamily:p.fontFamily||"Arial, sans-serif",fontSize:`${f}px`,fontWeight:p.fontWeight||"bold",color:p.color||"#FFFFFF",background:(Z=p.backgroundColor)!=null&&Z.includes("gradient")?p.backgroundColor:void 0,backgroundColor:(oe=p.backgroundColor)!=null&&oe.includes("gradient")?void 0:p.backgroundColor||"rgba(0, 0, 0, 0.7)",textAlign:p.textAlign||"center",borderRadius:`${p.borderRadius||4}px`,padding:`${p.padding||8}px`,textShadow:p.textShadow||"2px 2px 4px rgba(0, 0, 0, 0.5)",fontStyle:p.italic?"italic":"normal",textDecoration:p.underline?"underline":"none",cursor:"move",userSelect:"none",boxShadow:(p==null?void 0:p.preset)==="neon"?"none":void 0,whiteSpace:"normal",wordWrap:"break-word",maxWidth:"80vw",minWidth:"200px",lineHeight:"1.2",letterSpacing:"0.5px",backdropFilter:"blur(2px)",zIndex:1e3,border:_?"2px solid #3b82f6":"none"}};return e.jsx("div",{ref:E,style:P(),onMouseDown:C,onDoubleClick:t,className:`subtitle-container ${((b=n.style)==null?void 0:b.preset)||""}`,children:_?e.jsx("textarea",{value:B||"",onChange:p=>z==null?void 0:z(p.target.value),onKeyDown:p=>{p.key==="Enter"&&!p.shiftKey?(p.preventDefault(),ne==null||ne()):p.key==="Escape"&&(R==null||R())},onBlur:ne,className:"subtitle-editor",style:{background:"transparent",border:"none",outline:"none",textAlign:"center",color:"inherit",fontSize:"inherit",fontFamily:"inherit",fontWeight:"inherit",width:"100%",minWidth:"200px",resize:"none",overflow:"hidden",whiteSpace:"normal",wordWrap:"break-word",lineHeight:"inherit",letterSpacing:"inherit",padding:"0",margin:"0"},rows:2,autoFocus:!0}):e.jsx("div",{className:"subtitle-content",style:{textAlign:"inherit",width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:"0.1em",lineHeight:"inherit",letterSpacing:"inherit"},children:ee()})})},Ks=n=>{if(n==="transparent")return"#000000";if(n.startsWith("rgba(")){const o=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(o){const C=parseInt(o[1]).toString(16).padStart(2,"0"),t=parseInt(o[2]).toString(16).padStart(2,"0"),_=parseInt(o[3]).toString(16).padStart(2,"0");return`#${C}${t}${_}`}}if(n.startsWith("rgb(")){const o=n.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);if(o){const C=parseInt(o[1]).toString(16).padStart(2,"0"),t=parseInt(o[2]).toString(16).padStart(2,"0"),_=parseInt(o[3]).toString(16).padStart(2,"0");return`#${C}${t}${_}`}}const v={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",cyan:"#00ffff",magenta:"#ff00ff",silver:"#c0c0c0",gray:"#808080",maroon:"#800000",olive:"#808000",lime:"#00ff00",aqua:"#00ffff",teal:"#008080",navy:"#000080",fuchsia:"#ff00ff",purple:"#800080"};return v[n.toLowerCase()]?v[n.toLowerCase()]:n.startsWith("#")&&/^#[0-9A-Fa-f]{6}$/.test(n)?n:"#000000"},ka=({videoPath:n,videoId:v,videoTitle:o,onSubtitleGenerated:C})=>{var Cs,As,Fs,Es,Ms,zs,Rs,Ps,Os,$s,Is,Ds,qs;const[t,_]=c.useState(null),[B,z]=c.useState(!1),[ne,R]=c.useState(!1),[E,K]=c.useState(!1),[V,ee]=c.useState(!1),X=c.useRef(null),[P,b]=c.useState({}),[p,S]=c.useState("en"),[f,Z]=c.useState(null),[oe,ie]=c.useState("standard"),[ce,xe]=c.useState(null),[le,ye]=c.useState(null),[be,Te]=c.useState(null),[de,he]=c.useState(!1),[a,k]=c.useState(0),[D,G]=c.useState(0),[Y,Ce]=c.useState(!1),[te,Ne]=c.useState(new Set),[Ae,ve]=c.useState(null),[we,ue]=c.useState(""),[ae,Ee]=c.useState(null),[Fe,_e]=c.useState({x:0,y:0}),q=c.useRef(null),h=c.useRef(null),l=c.useRef(null),y=c.useRef(null),[x,W]=c.useState(null),[F,Me]=c.useState(null),[We,ss]=c.useState(!1),[ts,as]=c.useState(null),[Be,rs]=c.useState(null),[gs,fs]=c.useState(!1),i={standard:{name:"Standard",style:{fontFamily:"Arial, sans-serif",fontSize:32,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.7)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:4,padding:8,textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)",preset:"standard"}},"no-background":{name:"No Background",style:{fontFamily:"Arial, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"no-background"}},neon:{name:"Neon",style:{fontFamily:"Impact, Arial Black, sans-serif",fontSize:40,fontWeight:"bold",color:"#00FFFF",backgroundColor:"rgba(0, 20, 40, 0.8)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:8,padding:12,textShadow:"0 0 10px #00FFFF, 0 0 20px #00FFFF",preset:"neon"}},confetti:{name:"Confetti",style:{fontFamily:"Comic Sans MS, cursive",fontSize:38,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"2px 2px 0px #000000, -2px -2px 0px #000000, 2px -2px 0px #000000, -2px 2px 0px #000000",preset:"confetti"}},bubbles:{name:"Bubbles",style:{fontFamily:"Trebuchet MS, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"bubbles"}}},m=i.standard.style;c.useEffect(()=>(J(),()=>{ce&&clearInterval(ce)}),[]),c.useEffect(()=>{v&&(console.log("Checking existing subtitles for video ID:",v),g())},[v]),c.useEffect(()=>{t!=null&&t.subtitles&&t.subtitles.length>0&&fs(!0)},[t==null?void 0:t.subtitles]);const g=async()=>{var s,r;if(!v){console.log("No video ID available, skipping subtitle check");return}console.log("Checking for existing subtitles for video:",v);try{const j=await(await fetch("/ai/subtitle-check",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:v})})).json();if(console.log("Subtitle check response:",j),j.success&&j.data&&j.data.processing_status==="completed"){console.log("Found existing subtitles, loading them:",j.data);const A=((r=j.data.subtitles)==null?void 0:r.map(N=>({...N,style:N.style||m,position:N.position||{x:50,y:85}})))||[];_({...j.data,original_video_path:n,subtitles:A}),console.log("Loaded subtitles with styles:",A),C&&C(),j.data.generation_id&&O(j.data.generation_id)}else console.log("No existing subtitles found for this video")}catch(d){console.error("Error checking existing subtitles:",d)}},O=async s=>{try{console.log("Loading word timing data for generation:",s);const r=await fetch(`/ai/word-timing/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(r.ok){const d=await r.json();d.success&&d.data?(console.log("Word timing data loaded:",d.data),Te(d.data),_(j=>{var ze,Re,ls,Je;if(!j||!j.subtitles)return j;const A=new Map;d.data.words.forEach(ge=>{A.has(ge.subtitle_id)||A.set(ge.subtitle_id,[]),A.get(ge.subtitle_id).push({word:ge.word,start_time:ge.start_time,end_time:ge.end_time,confidence:ge.confidence})});const N=j.subtitles.map(ge=>{const Ls=A.get(ge.id)||[];return console.log(`Merging words for subtitle ${ge.id}: ${Ls.length} words`),{...ge,words:Ls}});console.log("Updated subtitles with word timing:",N),console.log("First subtitle word count after merge:",((Re=(ze=N[0])==null?void 0:ze.words)==null?void 0:Re.length)||0),console.log("First subtitle words sample:",(Je=(ls=N[0])==null?void 0:ls.words)==null?void 0:Je.slice(0,3));const u=N.filter(ge=>ge.words&&ge.words.length>0);return console.log(`Subtitles with word timing: ${u.length}/${N.length}`),{...j,subtitles:N}})):console.log("No word timing data available")}else console.log("Word timing data not found or not accessible")}catch(r){console.error("Error loading word timing data:",r)}};c.useEffect(()=>{if(t&&t.processing_status==="processing"){const s=setInterval(()=>{Q()},2e3);return xe(s),()=>clearInterval(s)}else ce&&(clearInterval(ce),xe(null))},[t==null?void 0:t.processing_status]),c.useEffect(()=>{const s=q.current;if(!s)return;const r=()=>{k(s.currentTime)},d=()=>{G(s.duration)};return s.addEventListener("timeupdate",r),s.addEventListener("loadedmetadata",d),()=>{s.removeEventListener("timeupdate",r),s.removeEventListener("loadedmetadata",d)}},[]);const J=async()=>{try{const r=await(await fetch("/ai/subtitle-languages")).json();r.success&&b(r.data)}catch(s){console.error("Error loading languages:",s)}},L=async()=>{var s;if(!v){alert("No video ID available for subtitle generation. Please ensure the video is properly uploaded.");return}z(!0);try{const d=await(await fetch("/ai/subtitle-generate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:v,language:p})})).json();d.success?_({...d.data,original_video_path:n}):(console.error("Generation failed:",d.message),alert(`Subtitle generation failed: ${d.message}`))}catch(r){console.error("Error starting generation:",r)}finally{z(!1)}},Q=async()=>{var s;if(t!=null&&t.generation_id)try{const d=await(await fetch("/ai/subtitle-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id})})).json();d.success&&_(j=>{const A={...j,...d.data,original_video_path:(j==null?void 0:j.original_video_path)||n};return d.data.processing_status==="completed"&&d.data.generation_id&&!be&&(O(d.data.generation_id),C&&C()),A})}catch(r){console.error("Error polling progress:",r)}},U=()=>{const s=q.current;s&&(de?s.pause():s.play(),he(!de))},ke=s=>{const r=q.current,d=h.current;if(!r||!d)return;const j=d.getBoundingClientRect(),N=(s.clientX-j.left)/j.width*D;r.currentTime=N,k(N)},He=()=>t!=null&&t.subtitles&&t.subtitles.find(s=>a>=s.start_time&&a<=s.end_time)||null,Oe=async()=>{var d;const s=q.current,r=y.current;if(!s||!r||!v){alert("Unable to capture frame. Please ensure video is loaded.");return}K(!0);try{r.width=s.videoWidth,r.height=s.videoHeight;const j=r.getContext("2d");if(!j)throw new Error("Unable to get canvas context");j.drawImage(s,0,0,r.width,r.height);const A=await new Promise((Re,ls)=>{r.toBlob(Je=>{Je?Re(Je):ls(new Error("Failed to create blob from canvas"))},"image/jpeg",.8)}),N=new FormData;N.append("video_id",v.toString()),N.append("frame_id",`frame_${Date.now()}`),N.append("thumbnail",A,"thumbnail.jpg"),N.append("current_time",a.toString());const ze=await(await fetch("/ai/set-video-thumbnail-from-frame",{method:"POST",headers:{"X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:N})).json();if(ze.success){const Re=document.createElement("div");Re.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",Re.textContent="âœ“ Thumbnail set successfully!",document.body.appendChild(Re),setTimeout(()=>{document.body.removeChild(Re)},3e3)}else alert(`Failed to set thumbnail: ${ze.message}`)}catch(j){console.error("Error setting thumbnail:",j),alert("Failed to capture and set thumbnail. Please try again.")}finally{K(!1)}},Ke=s=>{const r=t==null?void 0:t.subtitles.find(d=>d.id===s);r&&(ve(s),ue(r.text))},ns=async()=>{var s;if(!(!Ae||!t))try{if((await(await fetch("/ai/subtitle-update-text",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id,subtitle_id:Ae,text:we})})).json()).success){const j=t.subtitles.map(A=>A.id===Ae?{...A,text:we}:A);_({...t,subtitles:j}),ve(null),ue("")}}catch(r){console.error("Error updating subtitle:",r)}},Se=async(s,r)=>{var d;if(t)try{if((await(await fetch("/ai/subtitle-update-style",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id,subtitle_id:s,style:r})})).json()).success){const N=t.subtitles.map(u=>u.id===s?{...u,style:{...u.style,...r}}:u);_({...t,subtitles:N})}}catch(j){console.error("Error updating subtitle style:",j)}},nt=async(s,r)=>{var d;if(t)try{if((await(await fetch("/ai/subtitle-update-position",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id,subtitle_id:s,position:r})})).json()).success){const N=t.subtitles.map(u=>u.id===s?{...u,position:r}:u);_({...t,subtitles:N})}}catch(j){console.error("Error updating subtitle position:",j)}},it=async s=>{var d;if(!t)return;const r=i[s];if(r)try{(await(await fetch("/ai/apply-style-to-all-subtitles",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id,style:r.style})})).json()).success&&(_(N=>N?{...N,subtitles:N.subtitles.map(u=>({...u,style:{...r.style}}))}:null),ie(s))}catch(j){console.error("Failed to apply style to all subtitles:",j)}},lt=(s,r)=>{if(s.preventDefault(),s.stopPropagation(),!(t==null?void 0:t.subtitles.find(ze=>ze.id===r))||!q.current)return;Ee(r),q.current.getBoundingClientRect();const A=s.target.getBoundingClientRect(),N=A.left+A.width/2,u=A.top+A.height/2;_e({x:s.clientX-N,y:s.clientY-u})},ct=s=>{if(!ae||!q.current)return;const r=q.current.getBoundingClientRect(),d=s.clientX-Fe.x,j=s.clientY-Fe.y,A=(d-r.left)/r.width*100,N=(j-r.top)/r.height*100,u=Math.max(5,Math.min(95,A)),ze=Math.max(5,Math.min(95,N));nt(ae,{x:u,y:ze})},ks=()=>{Ee(null),_e({x:0,y:0})},ot=async()=>{var s;if(t!=null&&t.generation_id)try{const d=await(await fetch("/ai/subtitle-export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id,format:"srt"})})).json();d.success&&window.open(d.data.file_url,"_blank")}catch(r){console.error("Error exporting transcript:",r)}},Ss=async()=>{var s;if(v)try{const d=await(await fetch("/ai/rendered-video-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:v})})).json();d.success&&ye({status:d.status,rendered_video_path:d.rendered_video_path})}catch{}};c.useEffect(()=>{let s=null;return(le==null?void 0:le.status)==="processing"&&(s=setInterval(Ss,3e3)),()=>{s&&clearInterval(s)}},[le==null?void 0:le.status,v]),c.useEffect(()=>{Ss()},[v]);const dt=async()=>{var s;if(t!=null&&t.generation_id){R(!0);try{const d=await(await fetch("/ai/subtitle-render-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:t.generation_id,video_id:v})})).json();d.success?ye({status:"processing",rendered_video_path:null}):alert(`Failed to render video: ${d.message}`)}catch(r){console.error("Error rendering video:",r),alert("An error occurred while rendering the video. Please try again.")}finally{R(!1)}}},Ue=s=>{const r=Math.floor(s/60),d=Math.floor(s%60);return`${r}:${d.toString().padStart(2,"0")}`},mt=async()=>{var s,r,d;try{V?document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen():(s=X.current)!=null&&s.requestFullscreen?await X.current.requestFullscreen():(r=X.current)!=null&&r.webkitRequestFullscreen?await X.current.webkitRequestFullscreen():(d=X.current)!=null&&d.msRequestFullscreen&&await X.current.msRequestFullscreen()}catch(j){console.error("Error toggling fullscreen:",j)}};c.useEffect(()=>{const s=()=>{const r=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);ee(r)};return document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("msfullscreenchange",s),()=>{document.removeEventListener("fullscreenchange",s),document.removeEventListener("webkitfullscreenchange",s),document.removeEventListener("msfullscreenchange",s)}},[]);const pe=He(),is=()=>{if(q.current&&l.current){const s=q.current.getBoundingClientRect(),r=l.current.getBoundingClientRect();if(r){const d={width:s.width,height:s.height,top:s.top-r.top,left:s.left-r.left};W(F?{width:d.width*(F.width/100),height:d.height*(F.height/100),top:d.top+d.height*(F.y/100),left:d.left+d.width*(F.x/100)}:d)}}},xt=()=>{F||Me({x:10,y:20,width:80,height:60})};c.useEffect(()=>{t!=null&&t.custom_bounds&&Me(t.custom_bounds)},[t]);const Ge=(s,r)=>{s.preventDefault(),s.stopPropagation(),!(!F||!q.current)&&(as(r),q.current.getBoundingClientRect(),rs({x:s.clientX,y:s.clientY,bounds:{...F}}))},ht=s=>{if(!ts||!Be||!q.current)return;const r=q.current.getBoundingClientRect(),d=s.clientX-Be.x,j=s.clientY-Be.y,A=d/r.width*100,N=j/r.height*100;let u={...Be.bounds};switch(ts){case"move":u.x=Math.max(0,Math.min(100-u.width,u.x+A)),u.y=Math.max(0,Math.min(100-u.height,u.y+N));break;case"resize-tl":u.x=Math.max(0,Math.min(u.x+u.width-10,u.x+A)),u.y=Math.max(0,Math.min(u.y+u.height-10,u.y+N)),u.width=Math.max(10,Math.min(100-u.x,u.width-A)),u.height=Math.max(10,Math.min(100-u.y,u.height-N));break;case"resize-tr":u.y=Math.max(0,Math.min(u.y+u.height-10,u.y+N)),u.width=Math.max(10,Math.min(100-u.x,u.width+A)),u.height=Math.max(10,Math.min(100-u.y,u.height-N));break;case"resize-bl":u.x=Math.max(0,Math.min(u.x+u.width-10,u.x+A)),u.width=Math.max(10,Math.min(100-u.x,u.width-A)),u.height=Math.max(10,Math.min(100-u.y,u.height+N));break;case"resize-br":u.width=Math.max(10,Math.min(100-u.x,u.width+A)),u.height=Math.max(10,Math.min(100-u.y,u.height+N));break}Me(u)},Ts=()=>{as(null),rs(null)};return c.useEffect(()=>{const s=()=>{setTimeout(is,50)},r=()=>is();return q.current&&(q.current.addEventListener("loadedmetadata",r),q.current.addEventListener("loadeddata",r)),window.addEventListener("resize",s),setTimeout(is,100),()=>{q.current&&(q.current.removeEventListener("loadedmetadata",r),q.current.removeEventListener("loadeddata",r)),window.removeEventListener("resize",s)}},[n,F]),c.useEffect(()=>{setTimeout(is,100)},[V,F]),c.useEffect(()=>{if(!(pe!=null&&pe.words)||pe.words.length===0){Ne(new Set);return}const s=new Set;pe.words.forEach((r,d)=>{a>=r.start_time&&a<=r.end_time&&s.add(d)}),Ne(s)},[a,pe==null?void 0:pe.words]),e.jsxs("div",{ref:X,className:`bg-background shadow-sm border ${V?"h-screen w-screen flex flex-col":"rounded-lg"}`,children:[e.jsx("canvas",{ref:y,style:{display:"none"}}),e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-muted/50 to-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs("button",{onClick:mt,className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-lg transition-colors",title:V?"Exit fullscreen":"Enter fullscreen",children:[V?e.jsx(ca,{className:"w-4 h-4"}):e.jsx(ra,{className:"w-4 h-4"}),V?"Exit Fullscreen":"Fullscreen"]})}),!t&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-foreground mb-2",children:[e.jsx(ea,{className:"w-4 h-4 inline mr-2"}),"Language"]}),e.jsx("select",{value:p,onChange:s=>S(s.target.value),className:"border border-input rounded-lg px-3 py-2 focus:ring-2 focus:ring-primary focus:border-transparent bg-background text-foreground",disabled:B,children:Object.entries(P).map(([s,r])=>e.jsxs("option",{value:s,children:[r.name," (",r.accuracy,"% accuracy)"]},s))})]}),e.jsx("button",{onClick:L,disabled:B||!v,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ia,{className:"w-4 h-4"}),"Generate Subtitles"]})})]})]})}),e.jsxs("div",{className:`p-6 ${V?"flex-1 overflow-auto":""}`,children:[(t==null?void 0:t.processing_status)==="processing"&&e.jsxs("div",{className:"bg-blue-950/50 border border-blue-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-400 border-t-transparent"}),e.jsxs("span",{className:"font-medium text-blue-200",children:["Processing: ",t.progress.current_step]})]}),e.jsx("div",{className:"w-full bg-blue-900/50 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${t.progress.percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-blue-300",children:[e.jsxs("span",{children:[t.progress.percentage,"% complete"]}),e.jsxs("span",{children:[Ue(t.progress.processed_duration)," / ",Ue(t.progress.total_duration)]})]})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{ref:l,className:"relative bg-black rounded-lg overflow-hidden",onMouseMove:ct,onMouseUp:ks,onMouseLeave:ks,style:{position:"relative"},children:[e.jsx("video",{ref:q,src:(t==null?void 0:t.original_video_path)||n,className:`w-full h-auto ${V?"max-h-[70vh]":"max-h-96"}`,controls:!1,onPlay:()=>he(!0),onPause:()=>he(!1)}),e.jsx("div",{className:"video-subtitle-overlay",style:{top:(x==null?void 0:x.top)||0,left:(x==null?void 0:x.left)||0,width:(x==null?void 0:x.width)||"100%",height:(x==null?void 0:x.height)||"100%"},children:pe&&e.jsx("div",{style:{pointerEvents:"auto"},children:e.jsx(_a,{subtitle:pe,currentTime:a,position:pe.position,onMouseDown:s=>lt(s,pe.id),onDoubleClick:()=>Ke(pe.id),editingSubtitle:Ae===pe.id,editingText:we,onTextChange:ue,onSaveEdit:ns,onCancelEdit:()=>{ve(null),ue("")}})})}),We&&F&&q.current&&e.jsx("div",{className:"bounds-editor-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"auto"},onMouseMove:ht,onMouseUp:Ts,onMouseLeave:Ts,children:e.jsxs("div",{className:"bounds-rectangle",style:{position:"absolute",left:`${F.x}%`,top:`${F.y}%`,width:`${F.width}%`,height:`${F.height}%`,border:"3px solid #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.15)",cursor:"move",boxShadow:"0 0 10px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Ge(s,"move"),children:[e.jsx("div",{className:"resize-handle resize-tl",style:{position:"absolute",top:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"nw-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Ge(s,"resize-tl")}),e.jsx("div",{className:"resize-handle resize-tr",style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"ne-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Ge(s,"resize-tr")}),e.jsx("div",{className:"resize-handle resize-bl",style:{position:"absolute",bottom:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"sw-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Ge(s,"resize-bl")}),e.jsx("div",{className:"resize-handle resize-br",style:{position:"absolute",bottom:"-8px",right:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"se-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Ge(s,"resize-br")}),e.jsx("div",{className:"center-indicator",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"4px",height:"4px",backgroundColor:"#3b82f6",borderRadius:"50%",border:"2px solid white"}})]})})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:U,className:"flex items-center justify-center w-10 h-10 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors",children:de?e.jsx(At,{className:"w-5 h-5"}):e.jsx(tt,{className:"w-5 h-5 ml-0.5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{ref:h,className:"h-2 bg-muted rounded-full cursor-pointer",onClick:ke,children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full transition-all",style:{width:`${a/D*100}%`}})})}),e.jsxs("span",{className:"text-sm text-muted-foreground min-w-0",children:[Ue(a)," / ",Ue(D)]}),e.jsx("button",{onClick:Oe,disabled:E||!v,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",title:"Set current frame as thumbnail",children:E?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Setting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ft,{className:"w-4 h-4"}),"Set Thumbnail"]})})]}),gs&&e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Subtitle Area:"}),e.jsxs("button",{onClick:()=>{xt(),ss(!We)},className:`flex items-center gap-2 px-3 py-1 rounded-lg text-sm transition-colors ${We?"bg-purple-600 text-white":"bg-muted/50 text-foreground hover:bg-muted"}`,children:[e.jsx(ma,{className:"w-4 h-4"}),We?"Finish Editing":"Set Boundary"]}),F&&e.jsxs("button",{onClick:()=>{Me(null),ss(!1)},className:"flex items-center gap-2 px-3 py-1 bg-red-950/50 text-red-300 rounded-lg hover:bg-red-900/50 text-sm transition-colors",children:[e.jsx(Qe,{className:"w-4 h-4"}),"Reset to Auto"]}),F&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(F.width),"% Ã— ",Math.round(F.height),"%"]})]})]})]}),(t==null?void 0:t.processing_status)==="completed"&&t.subtitles&&e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-foreground mb-4",children:"Subtitle Timeline"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:t.subtitles.map(s=>e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-lg hover:bg-background transition-colors cursor-pointer ${a>=s.start_time&&a<=s.end_time?"border-purple-300 bg-purple-950/20":"border-border bg-background"}`,onClick:()=>{q.current&&(q.current.currentTime=s.start_time)},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[Ue(s.start_time)," â†’ ",Ue(s.end_time)]})}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"text-foreground",children:s.text})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),Ke(s.id)},className:"p-1 text-muted-foreground hover:text-purple-400 transition-colors",title:"Edit subtitle",children:e.jsx(_s,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),Z(s.id)},className:"p-1 text-muted-foreground hover:text-purple-400 transition-colors",title:"Style subtitle",children:e.jsx(at,{className:"w-4 h-4"})})]})]},s.id))})]}),(t==null?void 0:t.processing_status)==="completed"&&f&&e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-foreground mb-4",children:"Subtitle Style Editor"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-foreground mb-3",children:"Style Presets"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(i).map(([s,r])=>{var j,A;const d=((A=(j=t.subtitles.find(N=>N.id===f))==null?void 0:j.style)==null?void 0:A.preset)===s;return e.jsx("button",{onClick:()=>{Se(f,{...r.style}),ie(s)},className:`p-3 border rounded-lg text-sm font-medium transition-all ${d?"border-purple-500 bg-purple-950/20 text-purple-300":"border-border bg-background text-foreground hover:border-purple-300 hover:bg-purple-950/10"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs mb-1 px-2 py-1 rounded",style:{color:r.style.color,backgroundColor:(()=>{const N=r.style.backgroundColor;return N.includes("gradient")?"#FFD700":N==="transparent"?"rgba(0, 0, 0, 0)":N})(),textShadow:r.style.textShadow.includes("0px")?r.style.textShadow:"none",fontFamily:r.style.fontFamily.split(",")[0]},children:"Aa"}),r.name]})},s)})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("button",{onClick:()=>it(oe),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(Na,{className:"w-4 h-4"}),"Apply to All Subtitles"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Font Family"}),e.jsxs("select",{value:((Fs=(As=(Cs=t.subtitles.find(s=>s.id===f))==null?void 0:Cs.style)==null?void 0:As.fontFamily)==null?void 0:Fs.split(",")[0])||"Arial",onChange:s=>Se(f,{fontFamily:s.target.value+", sans-serif"}),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-background text-foreground",children:[e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"}),e.jsx("option",{value:"Impact",children:"Impact"}),e.jsx("option",{value:"Trebuchet MS",children:"Trebuchet MS"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Courier New",children:"Courier New"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Font Size"}),e.jsx("input",{type:"range",min:"12",max:"48",value:((Ms=(Es=t.subtitles.find(s=>s.id===f))==null?void 0:Es.style)==null?void 0:Ms.fontSize)||24,onChange:s=>Se(f,{fontSize:parseInt(s.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Text Color"}),e.jsx("input",{type:"color",value:Ks(((Rs=(zs=t.subtitles.find(s=>s.id===f))==null?void 0:zs.style)==null?void 0:Rs.color)||"#FFFFFF"),onChange:s=>Se(f,{color:s.target.value}),className:"w-full h-8 rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Background"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:(()=>{var d;const s=t.subtitles.find(j=>j.id===f),r=((d=s==null?void 0:s.style)==null?void 0:d.backgroundColor)||"#000000";return Ks(r)})(),onChange:s=>Se(f,{backgroundColor:s.target.value}),className:"flex-1 h-8 rounded border"}),e.jsx("button",{onClick:()=>Se(f,{backgroundColor:"transparent"}),className:"px-3 py-1 text-xs border rounded hover:bg-muted text-foreground",title:"Make background transparent",children:"None"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Alignment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Se(f,{textAlign:"left"}),className:"p-2 border rounded hover:bg-muted text-foreground",children:e.jsx(Lt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Se(f,{textAlign:"center"}),className:"p-2 border rounded hover:bg-muted text-foreground",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Se(f,{textAlign:"right"}),className:"p-2 border rounded hover:bg-muted text-foreground",children:e.jsx(Wt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{var s,r;return Se(f,{bold:!((r=(s=t.subtitles.find(d=>d.id===f))==null?void 0:s.style)!=null&&r.bold)})},className:`p-2 border rounded hover:bg-muted text-foreground ${(Os=(Ps=t.subtitles.find(s=>s.id===f))==null?void 0:Ps.style)!=null&&Os.bold?"bg-purple-950/20 border-purple-300":""}`,children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,r;return Se(f,{italic:!((r=(s=t.subtitles.find(d=>d.id===f))==null?void 0:s.style)!=null&&r.italic)})},className:`p-2 border rounded hover:bg-muted text-foreground ${(Is=($s=t.subtitles.find(s=>s.id===f))==null?void 0:$s.style)!=null&&Is.italic?"bg-purple-950/20 border-purple-300":""}`,children:e.jsx(Qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,r;return Se(f,{underline:!((r=(s=t.subtitles.find(d=>d.id===f))==null?void 0:s.style)!=null&&r.underline)})},className:`p-2 border rounded hover:bg-muted text-foreground ${(qs=(Ds=t.subtitles.find(s=>s.id===f))==null?void 0:Ds.style)!=null&&qs.underline?"bg-purple-950/20 border-purple-300":""}`,children:e.jsx(ba,{className:"w-4 h-4"})})]})]}),(t==null?void 0:t.processing_status)==="completed"&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("button",{onClick:ot,className:"flex items-center gap-2 px-4 py-2 border border-input text-foreground rounded-lg hover:bg-muted transition-colors",children:[e.jsx(Et,{className:"w-4 h-4"}),"Export Transcript"]}),e.jsx("button",{onClick:dt,disabled:ne,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Rendering Video..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"w-5 h-5"}),"Render & Upload to All Platforms"]})})]})]})]})]})},Sa=({videoPath:n,onRemovalComplete:v,className:o})=>{const[C,t]=c.useState("detection"),[_,B]=c.useState(!1),[z,ne]=c.useState(null),[R,E]=c.useState(null),[K,V]=c.useState([]),[ee,X]=c.useState(!1),[P,b]=c.useState({method:"inpainting",quality_preset:"balanced",sensitivity:"medium",detection_mode:"balanced"}),p=[{id:"detection",label:"Detection",icon:Ye},{id:"removal",label:"Removal",icon:Le},{id:"progress",label:"Progress",icon:qe},{id:"quality",label:"Quality",icon:Ve},{id:"settings",label:"Settings",icon:Nt}],S=[{id:"inpainting",name:"AI Inpainting",accuracy:95,speed:"Slow",description:"Advanced neural network fills watermark area"},{id:"content_aware",name:"Content-Aware Fill",accuracy:88,speed:"Medium",description:"Intelligent background reconstruction"},{id:"temporal_coherence",name:"Temporal Coherence",accuracy:92,speed:"Slow",description:"Frame-by-frame consistency analysis"},{id:"frequency_domain",name:"Frequency Domain",accuracy:85,speed:"Fast",description:"Spectral analysis and filtering"}],f=async()=>{var a,k;if(!n){alert("No video path provided");return}X(!0),B(!0);try{const G=await(await fetch("/ai/watermark-detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({video_path:n,sensitivity:P.sensitivity,detection_mode:"thorough",enable_learning:!0,platform_focus:"all"})})).json();if(!G.success)throw new Error(G.message||"Watermark detection failed");ne(G.data);const Y=G.data.detected_watermarks||[];if(Y.length===0){alert("ðŸŽ‰ No watermarks detected in your video! Your video is clean."),X(!1),B(!1);return}V(Y.map(Ne=>Ne.id)),t("progress");const te=await(await fetch("/ai/watermark-remove",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((k=document.querySelector('meta[name="csrf-token"]'))==null?void 0:k.getAttribute("content"))||""},body:JSON.stringify({video_path:n,watermarks:Y,method:P.method,quality_preset:"high"})})).json();if(!te.success)throw new Error(te.message||"Watermark removal failed");E(te.data),ie(te.data.removal_id)}catch(D){console.error("Auto watermark removal failed:",D),alert(`Failed to remove watermarks: ${D instanceof Error?D.message:"Unknown error"}`),X(!1),B(!1)}},Z=async()=>{var a;if(n){B(!0);try{const D=await(await fetch("/ai/watermark-detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({video_path:n,sensitivity:P.sensitivity,detection_mode:P.detection_mode,enable_learning:!0,platform_focus:"all"})})).json();D.success?(ne(D.data),V(D.data.detected_watermarks.map(G=>G.id))):(console.error("Watermark detection failed:",D.error),alert(`Detection failed: ${D.message||"Unknown error"}`))}catch(k){console.error("Error detecting watermarks:",k),alert("An error occurred while detecting watermarks. Please try again.")}finally{B(!1)}}},oe=async()=>{var a;if(!(!z||K.length===0)){B(!0);try{const k=z.detected_watermarks.filter(Y=>K.includes(Y.id)),G=await(await fetch("/ai/watermark-remove",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((a=document.querySelector('meta[name="csrf-token"]'))==null?void 0:a.getAttribute("content"))||""},body:JSON.stringify({video_path:n,watermarks:k,method:P.method,quality_preset:P.quality_preset})})).json();G.success?(E(G.data),t("progress"),ie(G.data.removal_id)):(console.error("Watermark removal failed:",G.error),alert(`Removal failed: ${G.message||"Unknown error"}`))}catch(k){console.error("Error removing watermarks:",k),alert("An error occurred while removing watermarks. Please try again.")}finally{B(!1)}}},ie=async a=>{const k=async()=>{var D;try{const Y=await(await fetch("/ai/watermark-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((D=document.querySelector('meta[name="csrf-token"]'))==null?void 0:D.getAttribute("content"))||""},body:JSON.stringify({removal_id:a})})).json();if(Y.success){if(E(Y.data),Y.data.processing_status==="completed"){X(!1),B(!1),v==null||v(Y.data);return}if(Y.data.processing_status==="failed"){X(!1),B(!1),alert("Watermark removal failed. Please try again.");return}Y.data.processing_status==="processing"&&setTimeout(k,3e3)}}catch(G){console.error("Error polling progress:",G),X(!1),B(!1)}};k()},ce=a=>{switch(a){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},xe=a=>{switch(a){case"inpainting":return"text-purple-600 bg-purple-100";case"content_aware":return"text-blue-600 bg-blue-100";case"temporal_coherence":return"text-green-600 bg-green-100";case"frequency_domain":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},le=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Watermark Detection"}),e.jsx("p",{className:"text-blue-100",children:"AI-powered watermark detection and analysis"})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(Ye,{})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(H,{onClick:Z,disabled:_||!n,className:"bg-white text-blue-600 hover:bg-blue-50",children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),_?"Detecting...":"Detect Watermarks"]})})]}),z&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Detection Results"}),e.jsxs(M,{className:"bg-green-100 text-green-800",children:[z.detected_watermarks.length," watermarks found"]})]}),z.detected_watermarks.length===0?e.jsxs("div",{className:"text-center py-12 bg-muted rounded-lg",children:[e.jsx(Ye,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Watermarks Detected"}),e.jsx("p",{className:"text-muted-foreground",children:"The video appears to be clean of watermarks."})]}):e.jsx("div",{className:"space-y-4",children:z.detected_watermarks.map((a,k)=>e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:K.includes(a.id),onChange:D=>{D.target.checked?V([...K,a.id]):V(K.filter(G=>G!==a.id))},className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("h4",{className:"font-medium capitalize",children:[a.type," Watermark #",k+1]}),e.jsx(M,{className:ce(a.removal_difficulty),children:a.removal_difficulty}),a.platform&&a.platform!=="unknown"&&e.jsx(M,{className:"bg-blue-100 text-blue-800",children:a.platform})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confidence:"}),e.jsxs("div",{className:"font-medium",children:[a.confidence,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsxs("div",{className:"font-medium",children:[a.location.x,", ",a.location.y]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("div",{className:"font-medium",children:[a.location.width,"Ã—",a.location.height]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Frames:"}),e.jsx("div",{className:"font-medium",children:a.frames_detected})]})]}),a.detection_method&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Detected using: ",a.detection_method.replace("_"," ")]})]}),e.jsxs("div",{className:"text-2xl",children:[a.platform==="tiktok"&&"ðŸŽµ",a.platform==="sora"&&"ðŸ¤–",a.platform==="custom"&&"ðŸŽ¨",a.type==="logo"&&!a.platform&&"ðŸŽ¨",a.type==="text"&&!a.platform&&"ðŸ“",a.type==="brand"&&!a.platform&&"ðŸ·ï¸",a.type==="channel"&&!a.platform&&"ðŸ“º"]})]})},a.id))})]})]}),ye=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-background rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Method"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:S.map(a=>e.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${P.method===a.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>b(k=>({...k,method:a.id})),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:a.name}),e.jsxs(M,{className:xe(a.id),children:[a.accuracy,"% accuracy"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:a.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Speed: ",a.speed]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((k,D)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${D<Math.floor(a.accuracy/20)?"bg-green-500":"bg-gray-300"}`},D))})})]})]},a.id))})]}),z&&K.length>0&&e.jsxs("div",{className:"bg-background rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Selected for Removal"}),e.jsx("div",{className:"space-y-3",children:z.detected_watermarks.filter(a=>K.includes(a.id)).map((a,k)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-xl",children:[a.type==="logo"&&"ðŸŽ¨",a.type==="text"&&"ðŸ“",a.type==="brand"&&"ðŸ·ï¸",a.type==="channel"&&"ðŸ“º"]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium capitalize",children:[a.type," Watermark"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[a.confidence,"% confidence"]})]})]}),e.jsx(M,{className:ce(a.removal_difficulty),children:a.removal_difficulty})]},a.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Start Removal"}),e.jsxs("p",{className:"text-red-100",children:["Remove ",K.length," selected watermark",K.length!==1?"s":""]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(Le,{})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(H,{onClick:oe,disabled:_||K.length===0,className:"bg-white text-red-600 hover:bg-red-50",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),_?"Processing...":"Remove Watermarks"]})})]})]}),be=()=>e.jsx("div",{className:"space-y-6",children:R?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Removal Progress"}),e.jsx("p",{className:"text-green-100",children:R.processing_status==="completed"?"Completed":R.processing_status==="processing"?"Processing...":R.processing_status})]}),e.jsx("div",{className:"text-6xl opacity-20",children:R.processing_status==="completed"?e.jsx(xs,{}):e.jsx(me,{})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Progress"}),e.jsxs("span",{className:"text-sm",children:[R.progress.percentage,"%"]})]}),e.jsx(Ze,{value:R.progress.percentage,className:"h-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(hs,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Step"}),e.jsx("p",{className:"font-medium capitalize",children:R.progress.current_step})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ta,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Frames Processed"}),e.jsxs("p",{className:"font-medium",children:[R.progress.frames_processed," / ",R.progress.total_frames]})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(rt,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Time"}),e.jsxs("p",{className:"font-medium",children:[Math.round(R.progress.estimated_time/60)," min"]})]})]})})]}),R.removal_results&&R.removal_results.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Results"}),e.jsx("div",{className:"space-y-3",children:R.removal_results.map((a,k)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[a.removal_success?e.jsx(xs,{className:"w-5 h-5 text-green-600"}):e.jsx(es,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Watermark ",k+1]}),e.jsx("p",{className:"text-sm text-gray-600",children:a.removal_success?"Successfully removed":"Removal failed"})]})]}),e.jsxs(M,{className:a.removal_success?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:[a.confidence,"% confidence"]})]},k))})]})]}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(qe,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Removal"}),e.jsx("p",{className:"text-gray-600",children:"Start watermark removal to see progress here."})]})}),Te=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Ve,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quality Analysis"}),e.jsx("p",{className:"text-gray-600",children:"Complete watermark removal to see quality analysis."})]})}),de=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sensitivity"}),e.jsxs("select",{value:P.sensitivity,onChange:a=>b(k=>({...k,sensitivity:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low - Detect obvious watermarks"}),e.jsx("option",{value:"medium",children:"Medium - Balanced detection"}),e.jsx("option",{value:"high",children:"High - Detect subtle watermarks"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detection Mode"}),e.jsxs("select",{value:P.detection_mode,onChange:a=>b(k=>({...k,detection_mode:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast - Quick detection"}),e.jsx("option",{value:"balanced",children:"Balanced - Good accuracy and speed"}),e.jsx("option",{value:"thorough",children:"Thorough - Maximum accuracy"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Preset"}),e.jsxs("select",{value:P.quality_preset,onChange:a=>b(k=>({...k,quality_preset:a.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast - Quick processing"}),e.jsx("option",{value:"balanced",children:"Balanced - Good quality and speed"}),e.jsx("option",{value:"high",children:"High - Best quality"}),e.jsx("option",{value:"ultra",children:"Ultra - Maximum quality"})]})]})})]})]}),he=()=>{switch(C){case"detection":return le();case"removal":return ye();case"progress":return be();case"quality":return Te();case"settings":return de();default:return le()}};return!z&&!ee?e.jsxs("div",{className:`space-y-4 ${o}`,children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Remove Watermarks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically detect and remove watermarks from your video using AI"})]}),e.jsx(H,{onClick:f,disabled:_||!n,size:"lg",className:"bg-red-600 hover:bg-red-700 text-white",children:_?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ye,{className:"w-4 h-4 mr-2"}),"Find and Remove Watermarks"]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"This will scan your entire video and automatically remove detected watermarks"})]}),e.jsxs("details",{className:"mt-6",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-medium text-muted-foreground hover:text-foreground",children:"Advanced Options"}),e.jsxs("div",{className:"mt-3 space-y-3 p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Detection Sensitivity"}),e.jsxs("select",{value:P.sensitivity,onChange:a=>b({...P,sensitivity:a.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"low",children:"Low - Fast detection"}),e.jsx("option",{value:"medium",children:"Medium - Balanced"}),e.jsx("option",{value:"high",children:"High - Thorough detection"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Removal Method"}),e.jsx("select",{value:P.method,onChange:a=>b({...P,method:a.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm",children:S.map(a=>e.jsxs("option",{value:a.id,children:[a.name," - ",a.description]},a.id))})]})]})]})]}):e.jsxs("div",{className:`max-w-6xl mx-auto p-6 ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Watermark Remover"}),e.jsx("p",{className:"text-gray-600",children:"Detect and remove watermarks from your videos"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(M,{className:"bg-blue-100 text-blue-800",children:"AI Powered"}),e.jsx(M,{className:"bg-green-100 text-green-800",children:"High Quality"})]})]}),e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:p.map(a=>{const k=a.icon;return e.jsxs("button",{onClick:()=>t(a.id),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${C===a.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),a.label]},a.id)})}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:he()})]})};function Ta({videoId:n,videoPath:v,title:o,className:C,onThumbnailSet:t}){const[_,B]=c.useState(null),[z,ne]=c.useState(!1),[R,E]=c.useState(null),[K,V]=c.useState("suggestions"),{toast:ee}=ws(),X=async()=>{var b,p;if(!n){ee({title:"No Video ID",description:"Please provide a video ID to optimize thumbnails.",variant:"destructive"});return}ne(!0);try{const f=await(await fetch("/ai/optimize-thumbnails",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((b=document.querySelector('meta[name="csrf-token"]'))==null?void 0:b.getAttribute("content"))||""},body:JSON.stringify({video_id:n,title:o||"Amazing Video",platforms:["youtube","instagram","tiktok"]})})).json();if(f.success)B(f.data),ee({title:"Thumbnail Optimization Complete! ðŸŽ¨",description:`AI has analyzed your video and extracted ${((p=f.data.extracted_frames)==null?void 0:p.length)||0} thumbnail frames.`});else throw new Error(f.message||"Failed to optimize thumbnails")}catch(S){console.error("Thumbnail optimization error:",S),ee({title:"Optimization Failed",description:"Failed to optimize thumbnails. Please try again.",variant:"destructive"})}finally{ne(!1)}},P=async(b,p)=>{var S;if(!n){ee({title:"Error",description:"Video ID is required to set thumbnail.",variant:"destructive"});return}try{const Z=await(await fetch("/ai/set-video-thumbnail",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((S=document.querySelector('meta[name="csrf-token"]'))==null?void 0:S.getAttribute("content"))||""},body:JSON.stringify({video_id:n,frame_id:b,thumbnail_path:p})})).json();if(Z.success)ee({title:"Thumbnail Set Successfully! ðŸŽ¯",description:"This thumbnail has been set for all platforms."}),t&&t();else throw new Error(Z.message||"Failed to set thumbnail")}catch(f){console.error("Set thumbnail error:",f),ee({title:"Setting Failed",description:"Failed to set thumbnail. Please try again.",variant:"destructive"})}};return!_&&!z?e.jsxs(w,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",C),children:[e.jsxs($,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit",children:e.jsx($e,{className:"w-8 h-8 text-white"})}),e.jsx(I,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate eye-catching thumbnails with AI-powered optimization and CTR predictions"})]}),e.jsxs(T,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(Ve,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"CTR Prediction"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(Mt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Face Detection"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(at,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Color Analysis"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(_s,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Text Optimization"})]})]}),e.jsxs(H,{onClick:X,disabled:!n,size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(vs,{className:"w-5 h-5 mr-2"}),"Analyze Video & Extract Thumbnails"]}),!n&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Video ID required for thumbnail analysis"})]})]}):z?e.jsx(w,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",C),children:e.jsxs(T,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit animate-pulse",children:e.jsx($e,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Optimizing Thumbnails..."}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"AI is analyzing frames, detecting faces, and predicting CTR"}),e.jsx("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{className:"text-foreground",children:"Extracting frames..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-foreground",children:"Analyzing faces..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(me,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{className:"text-foreground",children:"Predicting CTR..."})]})]})]})}):e.jsxs(w,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",C),children:[e.jsx($,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg",children:e.jsx($e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(I,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Thumbnail Optimization Results"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Score: ",_.overall_score,"/100 â€¢ ",_.extracted_frames.length," frames analyzed"]})]})]}),e.jsxs(H,{onClick:X,disabled:z,size:"sm",variant:"outline",children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsx(T,{children:e.jsxs(us,{value:K,onValueChange:V,className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-3",children:[e.jsx(fe,{value:"suggestions",children:"Suggestions"}),e.jsx(fe,{value:"platforms",children:"Platform Thumbnail Specifications"}),e.jsx(fe,{value:"testing",children:"A/B Testing"})]}),e.jsx(je,{value:"suggestions",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:_.thumbnail_suggestions.slice(0,3).map((b,p)=>e.jsx(w,{className:p===0?"border-2 border-gold":"",children:e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:b.preview_url,alt:`Thumbnail at ${b.timestamp}s`,className:"w-32 h-18 object-cover rounded-lg border-2 border-gray-200",onError:S=>{var Z;const f=S.target;console.error("Thumbnail failed to load:",b.preview_url),f.style.display="none",(Z=f.nextElementSibling)==null||Z.classList.remove("hidden")},onLoad:()=>{console.log("Thumbnail loaded successfully:",b.preview_url)}}),e.jsx("div",{className:"w-32 h-18 bg-gray-200 rounded-lg flex items-center justify-center hidden",children:e.jsx(tt,{className:"w-6 h-6 text-gray-400"})}),p===0&&e.jsxs(M,{className:"absolute -top-2 -right-2 bg-yellow-500 text-black",children:[e.jsx(zt,{className:"w-3 h-3 mr-1"}),"Best"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:["Frame at ",b.timestamp,"s"]}),e.jsxs(M,{variant:"outline",children:[b.predicted_ctr,"% CTR"]}),e.jsxs(M,{variant:"outline",children:[b.confidence_score,"% confidence"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Why this frame:"}),e.jsx("ul",{className:"text-sm text-gray-600",children:b.reasons.map((S,f)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),S]},f))})]}),b.design_scores&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Design Feature Scores:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(b.design_scores).map(([S,f])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[S.replace("_"," "),":"]}),e.jsx(M,{variant:"outline",className:re("text-xs px-1.5 py-0.5",f>=80?"border-green-500 text-green-700 bg-green-50":f>=60?"border-yellow-500 text-yellow-700 bg-yellow-50":"border-red-500 text-red-700 bg-red-50"),children:f})]},S))})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(H,{size:"sm",onClick:()=>P(b.frame_id,b.path),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Set as Thumbnail"]})})]})})},b.frame_id))})}),e.jsx(je,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(_.platform_optimizations).map(([b,p])=>e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs(I,{className:"text-lg capitalize flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),b]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specifications"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Dimensions: ",p.specifications.width,"Ã—",p.specifications.height]}),e.jsxs("div",{children:["Aspect Ratio: ",p.specifications.aspect_ratio]}),e.jsxs("div",{children:["Max Size: ",p.specifications.max_file_size,"KB"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimization Focus"}),e.jsx("div",{className:"text-sm space-y-1",children:p.design_adjustments.map((S,f)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),S]},f))})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected Improvement:"}),e.jsxs(M,{className:"bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),p.expected_improvement]})]})]})]},b))})}),e.jsx(je,{value:"testing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:_.ab_test_variants.map(b=>e.jsxs(w,{children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(I,{className:"text-lg flex items-center gap-2",children:[e.jsx(ms,{className:"w-5 h-5"}),b.variant_id.replace("_"," ").toUpperCase()]}),e.jsxs(M,{variant:"outline",children:[b.confidence_level,"% confidence"]})]})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Hypothesis"}),e.jsx("p",{className:"text-sm text-gray-600",children:b.test_hypothesis})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Planned Modifications"}),e.jsx("div",{className:"space-y-1",children:b.modifications.map((p,S)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),p]},S))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected CTR Increase:"}),e.jsxs(M,{className:"bg-blue-100 text-blue-800",children:["+",b.expected_outcome.expected_ctr_increase]})]})]})]},b.variant_id))})})]})})]})}const Ca=({isOpen:n,onClose:v,videoId:o,videoPath:C,title:t,onThumbnailSet:_})=>{if(!n)return null;const B=()=>{const z=document.createElement("div");z.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",z.textContent="âœ“ Thumbnail optimized successfully!",document.body.appendChild(z),setTimeout(()=>{document.body.contains(z)&&document.body.removeChild(z)},3e3),_&&_()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-muted/50 to-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx($e,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and optimize thumbnails for better engagement"})]})]}),e.jsx("button",{onClick:v,className:"flex items-center justify-center w-8 h-8 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full transition-colors",title:"Close",children:e.jsx(Qe,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(Ta,{videoId:o,videoPath:C,title:t,onThumbnailSet:B})})]})})},Aa={youtube:Ot,instagram:Pt,tiktok:De,facebook:De,snapchat:De,pinterest:De,x:De},Fa={pending:hs,processing:es,success:xs,failed:Ns},Ea={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},Ma=(n,v)=>{if(!n||!v)return{status:"unknown",color:"text-gray-500",label:"Unknown"};const o=n*v;return o>=1920*1080?{status:"great",color:"text-green-600",label:"1080p+"}:o>=1280*720?{status:"good",color:"text-orange-500",label:"720p"}:{status:"poor",color:"text-red-600",label:"Low Quality"}};function Tr({video:n}){const v=[{title:"My channels",href:"/dashboard"},{title:"Videos",href:"/videos"},{title:n.title,href:`/videos/${n.id}/edit`}],{data:o,setData:C,put:t,errors:_}=ut({title:n.title||"",description:n.description||"",tags:n.tags||[],thumbnail:null}),[B,z]=c.useState("overview"),[ne,R]=c.useState(!1),[E,K]=c.useState("tikomat"),[V,ee]=c.useState(!1),[X,P]=c.useState(!1),[b,p]=c.useState(n.thumbnail||null),[S,f]=c.useState([0]),[Z,oe]=c.useState(null),[ie,ce]=c.useState(null),[xe,le]=c.useState([]),[ye,be]=c.useState(!1),[Te,de]=c.useState(!1),[he,a]=c.useState(!1),[k,D]=c.useState(!1),[G]=c.useState(["youtube","instagram","tiktok","facebook","x","pinterest","snapchat"]),[Y,Ce]=c.useState([]),[te,Ne]=c.useState({title:n.title||"",description:n.description||"",tags:n.tags||[],thumbnail:n.thumbnail||null,subtitles:!1,watermark_removal:!1}),[Ae,ve]=c.useState(!1),we=c.useRef(null),ue=Ma(n.width,n.height),ae=(i,m,g,O)=>{const J={type:i,field:m,oldValue:g,newValue:O,timestamp:new Date};Ce(L=>[...L.filter(U=>U.type!==i),J]),de(!0)},Ee=i=>{Ce(m=>m.filter(g=>g.type!==i)),de(Y.length>1)},Fe=()=>{Ce([]),de(!1)},_e=async i=>{var m;ve(!0);try{const g=await fetch(`/videos/${n.id}`,{method:"PUT",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((m=document.querySelector('meta[name="csrf-token"]'))==null?void 0:m.getAttribute("content"))||""},body:JSON.stringify(i)});g.ok?(Ne(O=>({...O,...i})),Ee(i.type||"title")):console.error("Failed to save changes:",g.statusText)}catch(g){console.error("Error saving changes:",g)}finally{ve(!1)}},q=i=>{i.preventDefault(),t(`/videos/${n.id}`)},h=()=>{R(!0)},l=()=>{js.delete(`/videos/${n.id}`,{data:{delete_option:E},onSuccess:()=>{js.visit("/videos")}})},y=(i,m)=>{confirm(`Are you sure you want to remove this video from ${m}?`)&&js.delete(`/video-targets/${i}`,{preserveScroll:!0,onSuccess:()=>{},onError:g=>{console.error("Failed to remove video from platform:",g),alert("Failed to remove video from platform. Please try again.")}})},x=i=>{if(i.platform_url)return i.platform_url;switch(i.platform){case"youtube":return i.platform_video_id?`https://youtube.com/watch?v=${i.platform_video_id}`:null;case"instagram":return i.platform_video_id?`https://instagram.com/p/${i.platform_video_id}`:null;case"tiktok":return i.platform_video_id?`https://tiktok.com/@username/video/${i.platform_video_id}`:null;default:return null}},W=async()=>{var i;ee(!0);try{const m=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_id:n.id,content_type:"title",current_title:o.title})});if(m.ok){const g=await m.json();if(g.success&&g.data.optimized_title){const O=o.title,J=g.data.optimized_title;C("title",J),ae("title","title",O,J),await _e({title:J});const L=g.data.analysis_summary;let Q="Title generated based on video content analysis";if(L){const U=[];L.has_transcript&&U.push("audio transcription"),L.scenes_detected>0&&U.push(`${L.scenes_detected} visual scenes`),L.content_category!=="unknown"&&U.push(`${L.content_category} content`),U.length>0&&(Q+=`. Analyzed: ${U.join(", ")}.`)}alert(`âœ… AI Title Generated!

${Q}`)}}else{const g=await m.json();console.error("Failed to generate AI title:",g),alert(`Failed to generate title: ${g.message||"Unknown error"}`)}}catch(m){console.error("Failed to generate AI title:",m),alert("An error occurred while generating the title. Please try again.")}finally{ee(!1)}},F=async()=>{var i;P(!0);try{const m=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_id:n.id,content_type:"description",current_description:o.description})});if(m.ok){const g=await m.json();if(g.success&&g.data.optimized_description){const O=o.description,J=g.data.optimized_description;C("description",J),ae("description","description",O,J),await _e({description:J});const L=g.data.analysis_summary;let Q="Description generated based on video content analysis";if(L){const U=[];L.has_transcript&&U.push("audio transcription"),L.scenes_detected>0&&U.push(`${L.scenes_detected} visual scenes`),L.content_category!=="unknown"&&U.push(`${L.content_category} content`),U.length>0&&(Q+=`. Analyzed: ${U.join(", ")}.`)}alert(`âœ… AI Description Generated!

${Q}`)}}else{const g=await m.json();console.error("Failed to generate AI description:",g),alert(`Failed to generate description: ${g.message||"Unknown error"}`)}}catch(m){console.error("Failed to generate AI description:",m),alert("An error occurred while generating the description. Please try again.")}finally{P(!1)}},Me=async i=>{var g,O;const m=(g=i.target.files)==null?void 0:g[0];if(m){if(!m.type.startsWith("image/")){alert("Please select a valid image file");return}if(m.size>5*1024*1024){alert("Image size must be less than 5MB");return}D(!0),oe(m);try{const J=new FormData;J.append("thumbnail",m),J.append("video_id",n.id.toString());const L=(O=document.querySelector('meta[name="csrf-token"]'))==null?void 0:O.getAttribute("content");console.log("CSRF Token:",L?"Found":"Missing");const Q=await fetch("/ai/upload-custom-thumbnail",{method:"POST",headers:{"X-CSRF-TOKEN":L||"",Accept:"application/json"},body:J});if(console.log("Response status:",Q.status),console.log("Response headers:",Object.fromEntries(Q.headers.entries())),Q.ok){const U=await Q.json();if(U.success){const ke=b,He=U.thumbnail_url;p(He),ae("thumbnail","thumbnail",ke,He);const Oe=document.createElement("div");Oe.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",Oe.textContent="âœ… Thumbnail uploaded successfully!",document.body.appendChild(Oe),setTimeout(()=>{document.body.contains(Oe)&&document.body.removeChild(Oe)},3e3)}else throw new Error(U.message||"Upload failed")}else{const U=Q.headers.get("content-type");if(console.log("Error response content-type:",U),U&&U.includes("application/json")){const ke=await Q.json();throw new Error(ke.message||`HTTP ${Q.status}: Upload failed`)}else{const ke=await Q.text();throw console.log("HTML error response:",ke.substring(0,200)),new Error(`HTTP ${Q.status}: Server returned HTML instead of JSON - check Laravel logs`)}}}catch(J){console.error("Failed to upload thumbnail:",J);const L=document.createElement("div");L.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",L.textContent=`âŒ Upload failed: ${J instanceof Error?J.message:"Unknown error"}`,document.body.appendChild(L),setTimeout(()=>{document.body.contains(L)&&document.body.removeChild(L)},5e3);const Q=new FileReader;Q.onload=U=>{var ke;p((ke=U.target)==null?void 0:ke.result)},Q.readAsDataURL(m)}finally{D(!1)}}},We=i=>{ce(i)};c.useEffect(()=>{de(Y.length>0)},[Y]);const ss=async()=>{a(!0);const i=async(m=0)=>{var g,O,J;try{const L=((g=document.querySelector('meta[name="csrf-token"]'))==null?void 0:g.getAttribute("content"))||((O=document.querySelector('input[name="_token"]'))==null?void 0:O.getAttribute("value"))||"";if(!L)throw new Error("CSRF token not found");const Q=await fetch("/ai/analyze-video-tags",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":L,Accept:"application/json"},body:JSON.stringify({video_id:n.id,title:o.title||"",description:o.description||""})});if(Q.status===419&&m===0){console.log("CSRF token expired, refreshing...");const U=await fetch("/");if(U.ok){const ke=await U.text(),Ke=(J=new DOMParser().parseFromString(ke,"text/html").querySelector('meta[name="csrf-token"]'))==null?void 0:J.getAttribute("content");if(Ke){const ns=document.querySelector('meta[name="csrf-token"]');return ns&&ns.setAttribute("content",Ke),i(1)}}}return Q}catch(L){if(m===0)return console.log("Request failed, retrying once...",L),i(1);throw L}};try{const m=await i();if(m.ok){const g=await m.json();if(console.log("Tag generation response:",g),g.success&&g.data&&g.data.analysis.tags){const O=o.tags,J=g.data.analysis.tags;C("tags",J),ae("tags","tags",O,J),await _e({tags:J})}else{console.warn("Unexpected response structure:",g);const O=document.createElement("div");O.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",O.textContent="âš ï¸ Tag generation failed - unexpected response",document.body.appendChild(O),setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},5e3)}}else{const g=await m.text();console.error("HTTP Error:",m.status,m.statusText,g);const O=document.createElement("div");O.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",O.textContent=`âš ï¸ Tag generation failed - Server error (${m.status})`,document.body.appendChild(O),setTimeout(()=>{document.body.contains(O)&&document.body.removeChild(O)},5e3)}}catch(m){console.error("Failed to generate tags:",m);const g=document.createElement("div");g.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",g.textContent="âš ï¸ Tag generation failed - Network error",document.body.appendChild(g),setTimeout(()=>{document.body.contains(g)&&document.body.removeChild(g)},5e3)}finally{a(!1)}},ts=i=>{if(!o.tags.includes(i)){const m=[...o.tags,i];C("tags",m),ae("tags","tags",te.tags,m)}},as=i=>{const m=o.tags.filter(g=>g!==i);C("tags",m),ae("tags","tags",te.tags,m)},Be=async()=>{var i;try{if((await fetch(`/videos/${n.id}/update-platforms`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({title:o.title,description:o.description,tags:o.tags})})).ok){Fe();const g=document.createElement("div");g.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",g.textContent="âœ“ All platforms updated successfully!",document.body.appendChild(g),setTimeout(()=>{document.body.contains(g)&&document.body.removeChild(g)},3e3)}}catch(m){console.error("Failed to update platforms:",m)}},rs=()=>{C("title",te.title),C("description",te.description),C("tags",te.tags),p(te.thumbnail),Fe()},gs=()=>{ae("subtitles","subtitles",!1,!0)},fs=()=>{ae("watermark_removal","watermark_removal",!1,!0)};return e.jsxs(bt,{breadcrumbs:v,children:[e.jsx(pt,{title:`Edit: ${n.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(gt,{href:"/videos",children:e.jsxs(H,{variant:"outline",size:"sm",children:[e.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n.title}),e.jsx("p",{className:"text-muted-foreground",children:"Edit and optimize your video with AI-powered tools"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(H,{variant:"outline",onClick:h,className:"text-red-600 hover:text-red-700",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),"Delete"]})})]}),Te&&e.jsx(w,{className:"border-orange-200 bg-orange-50",children:e.jsx(T,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-full",children:e.jsx(es,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-900 text-lg",children:"Unsaved Changes Detected"}),e.jsx("p",{className:"text-sm text-orange-700",children:"The following changes have been made to your video:"})]})]}),e.jsx("div",{className:"space-y-2",children:Y.map((i,m)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex-shrink-0",children:[i.type==="title"&&e.jsx(_s,{className:"w-4 h-4 text-blue-600"}),i.type==="description"&&e.jsx(et,{className:"w-4 h-4 text-green-600"}),i.type==="tags"&&e.jsx(bs,{className:"w-4 h-4 text-purple-600"}),i.type==="thumbnail"&&e.jsx($e,{className:"w-4 h-4 text-pink-600"}),i.type==="subtitles"&&e.jsx(Kt,{className:"w-4 h-4 text-indigo-600"}),i.type==="watermark_removal"&&e.jsx(Le,{className:"w-4 h-4 text-red-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-gray-900 capitalize",children:[i.type.replace("_"," ")," Updated"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.type==="title"&&`"${i.oldValue}" â†’ "${i.newValue}"`,i.type==="description"&&"Description content modified",i.type==="tags"&&`${i.oldValue.length} â†’ ${i.newValue.length} tags`,i.type==="thumbnail"&&"Custom thumbnail uploaded",i.type==="subtitles"&&"Subtitles generated and applied",i.type==="watermark_removal"&&"Watermarks detected and removed"]})]}),e.jsx("div",{className:"text-xs text-gray-500",children:i.timestamp.toLocaleTimeString()})]},m))}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(H,{onClick:rs,variant:"outline",className:"border-red-300 text-red-700 hover:bg-red-50",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Discard All Changes"]}),e.jsxs(H,{onClick:Be,className:"bg-orange-600 hover:bg-orange-700",children:[e.jsx(Xs,{className:"w-4 h-4 mr-2"}),"Upload Changes to All Platforms"]})]})]})})}),e.jsxs(us,{value:B,onValueChange:z,className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-2",children:[e.jsx(fe,{value:"overview",children:"Overview/Edit"}),e.jsx(fe,{value:"performance",children:"Performance"})]}),e.jsx(je,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx($,{children:e.jsx(I,{className:"flex items-center gap-2",children:"Video Editor"})}),e.jsx(T,{children:e.jsx(ds,{children:e.jsx(ka,{videoPath:n.video_path||n.file_path||"",videoId:n.id,videoTitle:n.title,onSubtitleGenerated:gs})})})]}),e.jsxs(w,{children:[e.jsxs($,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Watermark Removal"]}),e.jsx(cs,{children:"Automatically detect and remove watermarks from your video"})]}),e.jsx(T,{children:e.jsx(ds,{children:e.jsx(Sa,{videoPath:n.original_file_path||n.file_path||"",onRemovalComplete:i=>{console.log("Watermark removal completed:",i),fs();const m=document.createElement("div");m.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",m.textContent="âœ… Watermarks removed successfully!",document.body.appendChild(m),setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},5e3)}})})})]}),e.jsxs(w,{children:[e.jsx($,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(Xe,{className:"w-5 h-5"}),"AI Analysis"]})}),e.jsxs(T,{children:[e.jsx(ds,{children:e.jsx(va,{videoId:n.id,videoPath:n.original_file_path||n.file_path,onAnalysisComplete:We})}),ie&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg",children:ie.category||"Entertainment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Mood"}),e.jsx("p",{className:"text-lg",children:ie.mood||"Positive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"AI Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(ie.tags||["creative","engaging","trending"]).map((i,m)=>e.jsx(M,{variant:"secondary",className:"text-xs",children:i},m))})]})]})]})]}),e.jsxs(w,{children:[e.jsxs($,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(rt,{className:"w-5 h-5"}),"AI Suggestions"]}),e.jsx(cs,{children:"Most important optimization recommendations"})]}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 border border-orange-200 bg-orange-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-900",children:"Increase Engagement"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Add a call-to-action in the first 5 seconds to boost viewer retention."})]})]})}),e.jsx("div",{className:"p-4 border border-blue-800 bg-blue-950/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ve,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Optimize Thumbnail"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Consider adding text overlay to your thumbnail to increase click-through rate."})]})]})}),e.jsx("div",{className:"p-4 border border-green-200 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(bs,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Add More Tags"}),e.jsx("p",{className:"text-sm text-green-700",children:"Include platform-specific hashtags to improve discoverability."})]})]})})]})})]}),n.targets&&n.targets.length>0&&e.jsxs(w,{children:[e.jsxs($,{children:[e.jsx(I,{children:"Publishing Status"}),e.jsx(cs,{children:"Current status for each platform"})]}),e.jsx(T,{children:e.jsx("div",{className:"space-y-4",children:n.targets.map(i=>{const m=Fa[i.status],g=Aa[i.platform],O=x(i);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:i.platform}),i.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(i.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{className:Ea[i.status],children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),i.status]}),O&&i.status==="success"&&e.jsx("a",{href:O,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx($t,{className:"w-4 h-4"})}),i.status==="success"&&e.jsxs(H,{size:"sm",variant:"outline",onClick:()=>y(i.id,i.platform),className:"text-red-600 hover:text-red-700",children:[e.jsx(Qe,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},i.id)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:q,className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx($,{children:e.jsx(I,{children:"Title"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Vs,{value:o.title,onChange:i=>{const m=i.target.value;C("title",m),ae("title","title",te.title,m)},placeholder:"Enter video title",className:"flex-1"}),e.jsx(H,{type:"button",variant:"outline",size:"sm",onClick:W,disabled:V,children:V?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(Ie,{className:"w-4 h-4"})})]}),_.title&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:_.title})]})]}),e.jsxs(w,{children:[e.jsx($,{children:e.jsx(I,{children:"Description"})}),e.jsxs(T,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ft,{value:o.description,onChange:i=>{const m=i.target.value;C("description",m),ae("description","description",te.description,m)},placeholder:"Enter video description",rows:4}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(H,{type:"button",variant:"outline",size:"sm",onClick:F,disabled:X,children:[X?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"AI Generate"]})})]}),_.description&&e.jsx("p",{className:"text-sm text-red-600",children:_.description})]})]}),e.jsxs(w,{children:[e.jsx($,{children:e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Tags"]})}),e.jsx(T,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.tags.map((i,m)=>e.jsxs(M,{variant:"secondary",className:"flex items-center gap-1",children:[i,e.jsx("button",{type:"button",onClick:()=>as(i),className:"ml-1 text-xs hover:text-red-600",children:e.jsx(Qe,{className:"w-3 h-3"})})]},m)),o.tags.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No tags added yet"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Vs,{placeholder:"Add a tag...",onKeyDown:i=>{if(i.key==="Enter"){i.preventDefault();const m=i.currentTarget.value.trim();m&&(ts(m),i.currentTarget.value="")}},className:"flex-1"}),e.jsxs(H,{type:"button",variant:"outline",onClick:ss,disabled:he,children:[he?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(vs,{className:"w-4 h-4 mr-2"}),"AI Generate"]})]}),o.tags.length>0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Tags help categorize your video and improve discoverability across platforms"})]})})]})]}),e.jsxs(w,{children:[e.jsx($,{children:e.jsx(I,{children:"Video Details"})}),e.jsxs(T,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-lg",children:n.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Resolution"}),e.jsx("p",{className:`text-lg ${ue.color}`,children:n.width&&n.height?`${n.width}x${n.height}`:"Unknown"}),e.jsx("p",{className:`text-sm ${ue.color}`,children:ue.label})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"text-lg",children:new Date(n.created_at).toLocaleString()})]})]})]}),e.jsxs(w,{children:[e.jsxs($,{children:[e.jsxs(I,{className:"flex items-center gap-2",children:[e.jsx($e,{className:"w-5 h-5"}),"Thumbnail Optimization"]}),e.jsx(cs,{children:"Set your video thumbnail using AI optimization or custom upload"})]}),e.jsxs(T,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(H,{onClick:()=>be(!0),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(vs,{className:"w-4 h-4 mr-2"}),"AI Optimize Thumbnail"]}),e.jsxs(H,{variant:"outline",onClick:()=>{var i;return(i=we.current)==null?void 0:i.click()},disabled:k,children:[k?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Xs,{className:"w-4 h-4 mr-2"}),k?"Uploading...":"Upload Custom Thumbnail"]}),e.jsx("input",{ref:we,type:"file",accept:"image/*",onChange:Me,className:"hidden"})]}),b&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-700",children:"âœ“ Thumbnail has been set for this video"})}),n.thumbnail&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current Thumbnail:"}),e.jsx("img",{src:`${n.thumbnail}`,alt:"Current thumbnail",className:"w-32 h-20 object-cover rounded-lg border",onError:i=>{var g;const m=i.target;m.style.display="none",(g=m.nextElementSibling)==null||g.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-20 bg-gray-200 rounded-lg flex items-center justify-center hidden",children:e.jsx($e,{className:"w-6 h-6 text-gray-400"})})]})]})]})]})]})}),e.jsx(je,{value:"performance",className:"space-y-6",children:e.jsx(ds,{children:e.jsx(wa,{videoId:n.id})})})]}),e.jsx(Gs,{open:ne,onOpenChange:R,children:e.jsxs(Js,{children:[e.jsxs(Ys,{children:[e.jsx(Qs,{children:"Delete Video"}),e.jsx(Zs,{children:"This action cannot be undone. Choose what you want to delete:"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:E==="tikomat",onChange:i=>K(i.target.value)}),e.jsx(Ws,{htmlFor:"delete-tikomat",children:"Delete only from Tikomat (keep on social platforms)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:E==="all",onChange:i=>K(i.target.value)}),e.jsx(Ws,{htmlFor:"delete-all",children:"Delete from everywhere (Tikomat + all social platforms)"})]})]}),e.jsxs(jt,{children:[e.jsx(H,{variant:"outline",onClick:()=>R(!1),children:"Cancel"}),e.jsx(H,{variant:"destructive",onClick:l,children:"Delete Video"})]})]})}),e.jsx(Ca,{isOpen:ye,onClose:()=>be(!1),videoId:n.id,videoPath:n.original_file_path||n.file_path||"",title:o.title,onThumbnailSet:()=>{const i=b,m="optimized";p(m),ae("thumbnail","thumbnail",i,m),be(!1)}})]})]})}export{Tr as default};
