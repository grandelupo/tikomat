import{r as n,j as e,$ as W,Y as h,m as v}from"./app-Dh2pqQW8.js";import{B as t}from"./button-Cr1jA-MS.js";import{C as O,b as Y,c as _,a as z,d as Z}from"./card-CIXNuoen.js";import{B as C}from"./badge-DFOe09ez.js";import{S as y,a as w,b as S,c as k,d as l}from"./select-DlPI7xud.js";import{D as ee,b as se,c as le,d as ae,e as te,f as re}from"./dialog-B7m6Lziu.js";import{I as ie}from"./input-CJrEPem9.js";import{T as ne,a as ce,b as H,c as r,d as de,e as i,V as oe,S as me}from"./VideoThumbnail-CWaalOK4.js";import{A as he,d as xe,C as ue}from"./app-layout-RZkRsqEQ.js";import{P as L}from"./plus-BmBJ6CSj.js";import{F as je,S as pe}from"./search-NdYYYcZI.js";import{V as o}from"./video-DcE6X725.js";import{C as fe}from"./circle-check-big-DMsOTgJ2.js";import{C as ge}from"./clock-aHGhXVBI.js";import{I as ve}from"./instagram-BjRh5zQ1.js";import{Y as be}from"./youtube-Dmt7Erou.js";import{E as Ne}from"./eye-g2m3h92o.js";import{T as Ce}from"./trash-2-hpxVPSfM.js";import"./index-BaFsiqUt.js";import"./index-B8jI-Vg9.js";import"./index-CsaL79G-.js";import"./chevron-down-w2qg2TD-.js";import"./settings-BS42aODm.js";import"./shield-C5VWzc-P.js";import"./file-text-DsM7T5Cn.js";const ye=[{title:"My channels",href:"/dashboard"},{title:"All videos",href:"/videos"}],we={youtube:be,instagram:ve,tiktok:o,facebook:o,x:o,snapchat:o,pinterest:o},Se={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},ke={pending:ge,processing:ue,success:fe,failed:xe};function We({videos:b,channels:m,filters:c}){var $,R,B,E,U;const[N,T]=n.useState(c.search||""),[x,D]=n.useState(c.channel||""),[u,V]=n.useState(c.platform||""),[j,F]=n.useState(c.status||""),[M,p]=n.useState(!1),[A,I]=n.useState(null),[f,g]=n.useState("filmate"),P=()=>{const s=new URLSearchParams;N&&s.set("search",N),x&&x!=="all"&&s.set("channel",x),u&&u!=="all"&&s.set("platform",u),j&&j!=="all"&&s.set("status",j),v.get("/videos",Object.fromEntries(s),{preserveState:!0})},X=()=>{T(""),D(""),V(""),F(""),v.get("/videos",{},{preserveState:!0})},q=s=>{v.post(`/video-targets/${s}/retry`)},G=s=>{I(s),p(!0)},K=()=>{A&&v.delete(`/videos/${A}`,{data:{delete_option:f},onSuccess:()=>{p(!1),I(null)}})},d=()=>m.find(s=>s.name.toLowerCase().includes("default"))||m[0];return e.jsxs(he,{breadcrumbs:ye,children:[e.jsx(W,{title:"Recently Uploaded Videos"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recently Uploaded"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all your uploaded videos and their publishing status"})]}),m.length>0&&d()&&(($=d())==null?void 0:$.slug)&&e.jsx(h,{href:`/channels/${(R=d())==null?void 0:R.slug}/videos/create`,children:e.jsxs(t,{size:"lg",children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})]}),e.jsxs(O,{children:[e.jsx(Y,{children:e.jsxs(_,{className:"flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsx(z,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(ie,{placeholder:"Search videos...",value:N,onChange:s=>T(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&P()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Channel"}),e.jsxs(y,{value:x||"all",onValueChange:s=>D(s==="all"?"":s),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"All channels"})}),e.jsxs(k,{children:[e.jsx(l,{value:"all",children:"All channels"}),m.map(s=>e.jsx(l,{value:s.slug,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Platform"}),e.jsxs(y,{value:u||"all",onValueChange:s=>V(s==="all"?"":s),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"All platforms"})}),e.jsxs(k,{children:[e.jsx(l,{value:"all",children:"All platforms"}),e.jsx(l,{value:"youtube",children:"YouTube"}),e.jsx(l,{value:"instagram",children:"Instagram"}),e.jsx(l,{value:"tiktok",children:"TikTok"}),e.jsx(l,{value:"facebook",children:"Facebook"}),e.jsx(l,{value:"x",children:"X"}),e.jsx(l,{value:"snapchat",children:"Snapchat"}),e.jsx(l,{value:"pinterest",children:"Pinterest"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(y,{value:j||"all",onValueChange:s=>F(s==="all"?"":s),children:[e.jsx(w,{children:e.jsx(S,{placeholder:"All statuses"})}),e.jsxs(k,{children:[e.jsx(l,{value:"all",children:"All statuses"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"processing",children:"Processing"}),e.jsx(l,{value:"success",children:"Success"}),e.jsx(l,{value:"failed",children:"Failed"})]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(t,{onClick:P,className:"flex-1",children:"Apply Filters"}),e.jsx(t,{variant:"outline",onClick:X,children:"Clear"})]})]})})]}),e.jsxs(O,{children:[e.jsxs(Y,{children:[e.jsxs(_,{children:["Videos (",((B=b.meta)==null?void 0:B.total)||0,")"]}),e.jsx(Z,{children:"Your uploaded videos and their publishing status across platforms"})]}),e.jsx(z,{children:b.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(o,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No videos found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:Object.values(c).some(s=>s)?"Try adjusting your filters.":"Get started by uploading your first video."}),!Object.values(c).some(s=>s)&&m.length>0&&d()&&((E=d())==null?void 0:E.slug)&&e.jsx("div",{className:"mt-6",children:e.jsx(h,{href:`/channels/${(U=d())==null?void 0:U.slug}/videos/create`,children:e.jsxs(t,{children:[e.jsx(L,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})})]}):e.jsxs(ne,{children:[e.jsx(ce,{children:e.jsxs(H,{children:[e.jsx(r,{className:"w-20",children:"Thumbnail"}),e.jsx(r,{children:"Title"}),e.jsx(r,{children:"Channel"}),e.jsx(r,{children:"Tags"}),e.jsx(r,{children:"Duration"}),e.jsx(r,{children:"Platforms"}),e.jsx(r,{children:"Cloud Backup"}),e.jsx(r,{children:"Upload Date"}),e.jsx(r,{className:"text-right",children:"Actions"})]})}),e.jsx(de,{children:b.data.map(s=>e.jsxs(H,{children:[e.jsx(i,{children:e.jsx(oe,{src:s.thumbnail_path,alt:s.title,width:s.video_width??void 0,height:s.video_height??void 0,className:"w-16 h-12"})}),e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(i,{children:s.channel?e.jsx(h,{href:`/channels/${s.channel.slug}`,className:"text-blue-600 hover:text-blue-700",children:s.channel.name}):e.jsx("span",{className:"text-muted-foreground",children:"No Channel"})}),e.jsx(i,{children:e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.tags&&s.tags.length>0?s.tags.slice(0,3).map(a=>e.jsx(C,{variant:"secondary",className:"text-xs",children:a},a)):e.jsx("span",{className:"text-muted-foreground text-xs",children:"No tags"}),s.tags&&s.tags.length>3&&e.jsxs(C,{variant:"outline",className:"text-xs",children:["+",s.tags.length-3]})]})}),e.jsx(i,{children:s.formatted_duration}),e.jsx(i,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.targets.map(a=>{const J=ke[a.status],Q=we[a.platform];return e.jsxs("div",{className:"flex items-center",children:[e.jsxs(C,{variant:"secondary",className:`${Se[a.status]} flex items-center gap-1 text-xs text-foreground`,children:[e.jsx(Q,{className:"h-3 w-3"}),e.jsx(J,{className:"h-3 w-3"}),a.platform.charAt(0).toUpperCase()+a.platform.slice(1)]}),a.status==="failed"&&e.jsx(t,{variant:"ghost",size:"sm",onClick:()=>q(a.id),className:"text-xs px-1 py-0 h-auto ml-1 text-red-600",children:"Retry"})]},a.id)})})}),e.jsx(i,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(h,{href:`/videos/${s.id}/edit`,children:e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(Ne,{className:"mr-1 h-3 w-3"}),"View"]})}),e.jsx(h,{href:`/videos/${s.id}/edit`,children:e.jsxs(t,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"mr-1 h-3 w-3"}),"Edit"]})}),e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>G(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(Ce,{className:"mr-1 h-3 w-3"}),"Delete"]})]})})]},s.id))})]})})]}),e.jsx(ee,{open:M,onOpenChange:p,children:e.jsxs(se,{className:"sm:max-w-md",children:[e.jsxs(le,{children:[e.jsx(ae,{children:"Delete Video"}),e.jsx(te,{children:"Choose how you want to handle this video deletion. This action cannot be undone."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-muted cursor-pointer",onClick:()=>g("filmate"),children:[e.jsx("input",{type:"radio",id:"delete-filmate-videos",name:"delete-option",value:"filmate",checked:f==="filmate",onChange:s=>g(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-filmate-videos",className:"text-sm font-medium cursor-pointer",children:"Remove only from Filmate"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will remain published on all platforms but removed from Filmate's tracking"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-muted cursor-pointer",onClick:()=>g("all"),children:[e.jsx("input",{type:"radio",id:"delete-all-videos",name:"delete-option",value:"all",checked:f==="all",onChange:s=>g(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-all-videos",className:"text-sm font-medium cursor-pointer",children:"Take down from all platforms"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will be completely removed from all platforms and Filmate"})]})]})]})}),e.jsxs(re,{children:[e.jsx(t,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(t,{variant:"destructive",onClick:K,children:f==="all"?"Take Down Video":"Remove from Filmate"})]})]})})]})]})}export{We as default};
