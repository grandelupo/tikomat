import{r as d,j as e,v as xt,$ as ht,Y as ut,m as rs}from"./app-DaSgcSBk.js";import{a as K,c as Y,B as V}from"./button-ZPEjDMT5.js";import{C as w,b as R,c as P,a as k,d as Ke}from"./card-3-PrQBJ1.js";import{I as Fs}from"./input-C3UZ6d0a.js";import{L as Ms}from"./label-KCLPARmI.js";import{T as pt}from"./textarea-DIlA7iCN.js";import{T as ts,a as as,b as ue,c as pe}from"./tabs-D10nkW_Y.js";import{B as O}from"./badge-gzQiXufL.js";import{D as $s,b as Is,c as qs,d as Ds,e as Ls,f as gt}from"./dialog-k-OTtqbd.js";import{B as Ee,d as is,C as Qe,X as Ze,A as ft}from"./app-layout-CrM2Jx5M.js";import{P as Be}from"./progress-CInM5WGo.js";import{u as cs}from"./use-toast-CaI6mVlp.js";import{V as ze}from"./video-C6rj63JT.js";import{F as jt}from"./file-text-DIM7YyOC.js";import{I as qe,T as Es}from"./tag-CEa3ERhr.js";import{T as Me,C as Re,a as De,S as bt}from"./workflow-CUkpBmFx.js";import{R as re}from"./refresh-cw-CIIdJlFi.js";import{C as es}from"./circle-check-big-CIimIw4l.js";import{E as Pe}from"./eye-DHPhdf93.js";import{H as Vs}from"./heart-o49b7SBi.js";import{C as ss}from"./clock-CKOqupUX.js";import{S as yt,a as Nt,b as vt,c as wt,d as Ge}from"./select-KvqDg6A-.js";import{C as _t}from"./checkbox-B1sxecyB.js";import{C as St}from"./calendar-DuDHcrMH.js";import{T as zs}from"./triangle-alert-BPdOaJao.js";import{A as Rs}from"./arrow-up-C04TEmuf.js";import{A as ns}from"./activity-BtT3XkwD.js";import{L as kt}from"./lightbulb-ChAqNp1_.js";import{P as Tt}from"./pause-CGL3Y6qU.js";import{P as Ws}from"./play-WDuFeJqp.js";import{C as Ct,P as Bs}from"./palette-CZVVbCRp.js";import{D as At}from"./download-HYkvhc9m.js";import{T as Ie}from"./trash-2-Dv8o1F-2.js";import{Z as Us}from"./zap-DeUz7tLz.js";import{E as Je}from"./ErrorBoundary-D3nE3M-2.js";import{U as Ft}from"./user-UnHpbDdQ.js";import{S as ls}from"./sparkles-CEraoaCO.js";import{S as Mt}from"./star-BWw6rxqa.js";import{A as Et}from"./arrow-left-3ABDfnY6.js";import{I as zt}from"./instagram--irV84Ne.js";import{Y as Rt}from"./youtube-C8feLUS6.js";import{E as Pt}from"./external-link-GNSmmJej.js";import{U as Ot}from"./upload-B8bwHx5B.js";import"./index-BtG2E8G4.js";import"./index-B1_Whm0Q.js";import"./index-BytnI-Si.js";import"./chevron-down-DPus1Yu8.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $t=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],It=K("AlignCenter",$t);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Dt=K("AlignLeft",qt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Vt=K("AlignRight",Lt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Ps=K("ArrowDown",Wt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Ut=K("Bold",Bt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Xt=K("Film",Ht);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Gt=K("Italic",Kt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Yt=K("Languages",Jt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zt=K("Layers",Qt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],sa=K("Maximize",ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],aa=K("Mic",ta);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],na=K("Minimize",ra);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],la=K("Save",ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],We=K("Scan",ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Hs=K("Settings2",oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],ma=K("Share2",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xa=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Ye=K("TestTube",xa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],ua=K("TrendingDown",ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pa=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],ga=K("Trophy",pa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Xs=K("Type",fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],ba=K("Underline",ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ya=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Na=K("WandSparkles",ya);function va({videoId:n,videoPath:v,onAnalysisComplete:m,className:a}){var T,H,ne,te,Z,ee,oe,ve,be,de,ge,X,l,S,q,B,J,we,ie,me,ye,Ne,fe,_e,Se,ke,Te,$,Ce,h,c,j;const[x,A]=d.useState(null),[D,M]=d.useState(!1),[Q,I]=d.useState("overview"),{toast:F}=cs(),E=async()=>{var t;if(!n){F({title:"No Video Selected",description:"Please select a video first before analyzing.",variant:"destructive"});return}M(!0);try{const i=await fetch("/ai/analyze-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({video_id:n})}),p=await i.json();p.success?(A(p.data),m==null||m(p.data),F({title:"Analysis Complete! ðŸŽ¬",description:"AI has analyzed your video and extracted valuable insights."})):i.status===404?F({title:"Video File Not Found",description:"The video file associated with this record could not be found. Please re-upload the video.",variant:"destructive"}):F({title:"Analysis Failed",description:p.message||"Failed to analyze video. Please try again.",variant:"destructive"})}catch(i){console.error("Video analysis error:",i),F({title:"Analysis Failed",description:"Failed to analyze video. Please try again.",variant:"destructive"})}finally{M(!1)}},U=t=>{const i=Math.floor(t/60),p=Math.floor(t%60);return`${i}:${p.toString().padStart(2,"0")}`},W=t=>`${(t/1048576).toFixed(1)} MB`,G=t=>t>=80?"text-green-600 bg-green-100":t>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",z=t=>({positive:"ðŸ˜Š",energetic:"âš¡",calm:"ðŸ˜Œ",professional:"ðŸ’¼",casual:"ðŸ˜Ž",inspirational:"âœ¨",neutral:"ðŸ˜"})[t]||"ðŸ˜",y=t=>({educational:"ðŸ“š",entertainment:"ðŸŽ­",gaming:"ðŸŽ®",lifestyle:"ðŸ ",fitness:"ðŸ’ª",food:"ðŸ³",travel:"âœˆï¸",tech:"ðŸ’»",music:"ðŸŽµ",fashion:"ðŸ‘—",business:"ðŸ’¼",diy:"ðŸ”¨",general:"ðŸ“¹"})[t]||"ðŸ“¹",f=()=>{if(!(x!=null&&x.quality_score))return!1;const t=x.quality_score.resolution_score||0,i=x.quality_score.audio_score||0,p=x.quality_score.bitrate_score||0;return t<70||i<70||p<70},u=()=>{if(!(x!=null&&x.quality_score))return[];const t=[],i=x.quality_score.resolution_score||0,p=x.quality_score.audio_score||0,_=x.quality_score.bitrate_score||0;return i<70&&t.push({type:"Resolution",score:i,severity:i<40?"high":"medium"}),p<70&&t.push({type:"Audio Quality",score:p,severity:p<40?"high":"medium"}),_<70&&t.push({type:"Bitrate",score:_,severity:_<40?"high":"medium"}),t};return!x&&!D?e.jsxs(w,{className:Y("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",a),children:[e.jsxs(R,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit",children:e.jsx(Ee,{className:"w-8 h-8 text-white"})}),e.jsx(P,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analyzer"}),e.jsx("p",{className:"text-gray-600",children:"Get comprehensive insights about your video content using advanced AI analysis"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(ze,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Video Quality"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(jt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Transcription"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(qe,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Scene Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Me,{className:"w-6 h-6 text-pink-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Engagement Prediction"})]})]}),e.jsxs(V,{onClick:E,disabled:!v,size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(Ee,{className:"w-5 h-5 mr-2"}),"Start AI Analysis"]}),!v&&e.jsx("p",{className:"text-sm text-gray-500",children:"Upload a video first to enable AI analysis"})]})]}):D?e.jsx(w,{className:Y("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",a),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit animate-pulse",children:e.jsx(Ee,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Your Video..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Our AI is processing your video to extract valuable insights"}),e.jsx(Be,{value:75,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Extracting audio..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing scenes..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Predicting engagement..."})]})]})]})}):!x||!x.basic_info?e.jsx(w,{className:Y("border-2 border-red-200 bg-red-50",a),children:e.jsxs(k,{className:"p-8 text-center",children:[e.jsx(is,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Analysis Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The video analysis data is incomplete or corrupted."}),e.jsxs(V,{onClick:E,variant:"outline",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs(w,{className:Y("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",a),children:[e.jsx(R,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:e.jsx(Ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(P,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive insights powered by artificial intelligence"})]})]}),e.jsxs(V,{onClick:E,disabled:D,size:"sm",variant:"outline",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(k,{children:[e.jsxs(ts,{value:Q,onValueChange:I,className:"w-full",children:[e.jsxs(as,{className:"grid w-full grid-cols-3",children:[e.jsx(ue,{value:"overview",children:"Overview"}),e.jsx(ue,{value:"engagement",children:"Engagement"}),e.jsx(ue,{value:"chapters",children:"Chapters"})]}),e.jsxs(pe,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(ze,{className:"w-5 h-5"}),"Video Information"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:U(((T=x.basic_info)==null?void 0:T.duration)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Resolution:"}),e.jsxs("span",{className:"font-medium",children:[((H=x.basic_info)==null?void 0:H.width)||0,"Ã—",((ne=x.basic_info)==null?void 0:ne.height)||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"File Size:"}),e.jsx("span",{className:"font-medium",children:W(((te=x.basic_info)==null?void 0:te.file_size)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Audio:"}),e.jsx(O,{variant:(Z=x.basic_info)!=null&&Z.has_audio?"default":"destructive",children:(ee=x.basic_info)!=null&&ee.has_audio?"Present":"Missing"})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Content Analysis"]})}),e.jsxs(k,{className:"space-y-3",children:[x.content_category&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsxs(O,{className:"bg-blue-100 text-blue-800",children:[y(x.content_category.primary_category)," ",x.content_category.primary_category]})]}),x.mood_analysis&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Mood:"}),e.jsxs(O,{className:"bg-green-100 text-green-800",children:[z(x.mood_analysis.dominant_mood)," ",x.mood_analysis.dominant_mood]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Transcript:"}),e.jsx(O,{variant:(oe=x.transcript)!=null&&oe.success?"default":"destructive",children:(ve=x.transcript)!=null&&ve.success?e.jsxs(e.Fragment,{children:[e.jsx(es,{className:"w-3 h-3 mr-1"}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(is,{className:"w-3 h-3 mr-1"}),"Failed"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Content Tags:"}),e.jsxs("span",{className:"font-medium",children:[((be=x.content_tags)==null?void 0:be.length)||0," tags"]})]})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),"Overall Scores"]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:Y("text-3xl font-bold p-4 rounded-lg mb-2",G(((de=x.quality_score)==null?void 0:de.overall_score)||0)),children:[((ge=x.quality_score)==null?void 0:ge.overall_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Video Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:Y("text-3xl font-bold p-4 rounded-lg mb-2",G(((X=x.engagement_predictions)==null?void 0:X.engagement_score)||0)),children:[((l=x.engagement_predictions)==null?void 0:l.engagement_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Engagement Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold p-4 bg-purple-100 text-purple-800 rounded-lg mb-2",children:((S=x.engagement_predictions)==null?void 0:S.virality_potential)||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Virality Potential"})]})]})})]})]}),e.jsx(pe,{value:"engagement",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx(R,{children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Engagement Predictions"]})}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(Pe,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:(((B=(q=x.engagement_predictions)==null?void 0:q.predicted_views)==null?void 0:B.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-blue-600",children:"Expected Views"})]}),e.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[e.jsx(Vs,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-pink-800",children:(((we=(J=x.engagement_predictions)==null?void 0:J.predicted_likes)==null?void 0:we.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-pink-600",children:"Expected Likes"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(ma,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:(((me=(ie=x.engagement_predictions)==null?void 0:ie.predicted_shares)==null?void 0:me.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"Expected Shares"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Prediction Ranges"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Views"}),e.jsxs("span",{children:[(((Ne=(ye=x.engagement_predictions)==null?void 0:ye.predicted_views)==null?void 0:Ne.conservative)||0).toLocaleString()," - ",(((_e=(fe=x.engagement_predictions)==null?void 0:fe.predicted_views)==null?void 0:_e.optimistic)||0).toLocaleString()]})]}),e.jsx(Be,{value:60,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Likes"}),e.jsxs("span",{children:[(((ke=(Se=x.engagement_predictions)==null?void 0:Se.predicted_likes)==null?void 0:ke.conservative)||0).toLocaleString()," - ",((($=(Te=x.engagement_predictions)==null?void 0:Te.predicted_likes)==null?void 0:$.optimistic)||0).toLocaleString()]})]}),e.jsx(Be,{value:60,className:"h-2"})]})]})]})]})]})}),e.jsx(pe,{value:"chapters",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx(R,{children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"Auto-Generated Chapters"]})}),e.jsx(k,{children:(((Ce=x.auto_chapters)==null?void 0:Ce.length)||0)===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ss,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No chapters detected"}),e.jsx("p",{className:"text-sm",children:"Video may be too short or lack clear segment divisions"})]}):e.jsx("div",{className:"space-y-3",children:(x.auto_chapters||[]).map((t,i)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(O,{variant:"outline",className:"mt-1",children:U(t.start_time)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600",children:t.description})]})]},i))})})]})})]}),f()&&e.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Qe,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-800",children:"Video Quality Suggestions"})]}),e.jsxs("div",{className:"space-y-3",children:[u().map((t,i)=>e.jsxs("div",{className:Y("flex items-center justify-between p-3 rounded-lg",t.severity==="high"?"bg-red-100 border border-red-200":"bg-yellow-100 border border-yellow-200"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:Y("w-2 h-2 rounded-full",t.severity==="high"?"bg-red-500":"bg-yellow-500")}),e.jsxs("span",{className:Y("font-medium",t.severity==="high"?"text-red-800":"text-yellow-800"),children:[t.type," needs improvement"]})]}),e.jsxs(O,{variant:"outline",className:Y(t.severity==="high"?"border-red-300 text-red-700":"border-yellow-300 text-yellow-700"),children:["Score: ",t.score,"/100"]})]},i)),(((h=x.quality_score)==null?void 0:h.suggestions)||[]).length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-orange-200",children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-2",children:"Recommendations:"}),e.jsx("div",{className:"space-y-2",children:(((c=x.quality_score)==null?void 0:c.suggestions)||[]).map((t,i)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-orange-700",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:t})]},i))})]})]})]}),x.status==="partial_analysis"&&((j=x.errors)==null?void 0:j.length)&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qe,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-800",children:"Partial Analysis"})]}),e.jsx("div",{className:"space-y-1",children:(x.errors||[]).map((t,i)=>e.jsx("p",{className:"text-sm text-yellow-700",children:t},i))})]})]})]})}function wa({videoId:n,className:v}){var H,ne,te,Z,ee,oe,ve,be,de,ge,X,l,S,q,B,J,we,ie,me,ye,Ne,fe,_e,Se,ke,Te,$,Ce;const[m,a]=d.useState(null),[x,A]=d.useState(!1),[D,M]=d.useState("overview"),[Q,I]=d.useState(!1),[F,E]=d.useState(null),{toast:U}=cs(),W=async()=>{var h;if(!n){U({title:"No Video Selected",description:"Please select a video to analyze performance.",variant:"destructive"});return}A(!0);try{const j=await(await fetch("/ai/analyze-video-performance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||""},body:JSON.stringify({video_id:n})})).json();if(j.success)a(j.data),U({title:"Performance Analysis Complete! ðŸ“Š",description:"AI has analyzed your video performance across all platforms."});else throw new Error(j.message||"Failed to analyze performance")}catch(c){console.error("Performance analysis error:",c),U({title:"Analysis Failed",description:"Failed to analyze video performance. Please try again.",variant:"destructive"})}finally{A(!1)}},G=async h=>{var c;try{const t=await(await fetch("/ai/create-ab-test",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:JSON.stringify({video_id:n,...h})})).json();if(t.success)U({title:"A/B Test Created! ðŸ§ª",description:"Your A/B test has been set up and will start collecting data."}),I(!1);else throw new Error(t.message||"Failed to create A/B test")}catch(j){console.error("A/B test creation error:",j),U({title:"A/B Test Failed",description:"Failed to create A/B test. Please try again.",variant:"destructive"})}},z=h=>h>=1e6?`${(h/1e6).toFixed(1)}M`:h>=1e3?`${(h/1e3).toFixed(1)}K`:h.toString(),y=h=>{switch(h){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"average":return"text-yellow-600 bg-yellow-100";case"needs_improvement":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},f=h=>{switch(h){case"increasing":return e.jsx(Me,{className:"w-4 h-4 text-green-600"});case"decreasing":return e.jsx(ua,{className:"w-4 h-4 text-red-600"});default:return e.jsx(ns,{className:"w-4 h-4 text-blue-600"})}},u=h=>({youtube:"ðŸ“º",instagram:"ðŸ“·",tiktok:"ðŸŽµ",x:"ð•",facebook:"ðŸ‘¥"})[h]||"ðŸ“±",T=h=>{switch(h){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return!m&&!x?e.jsxs(w,{className:Y("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",v),children:[e.jsxs(R,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit",children:e.jsx(Re,{className:"w-8 h-8 text-white"})}),e.jsx(P,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Performance Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Analyze your video performance and get AI-powered optimization recommendations"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Me,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Performance Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(De,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Optimization Tips"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ye,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"A/B Testing"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(St,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Timing Optimization"})]})]}),e.jsxs(V,{onClick:W,disabled:!n,size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(Re,{className:"w-5 h-5 mr-2"}),"Start Performance Analysis"]}),!n&&e.jsx("p",{className:"text-sm text-gray-500",children:"Select a video first to enable performance analysis"})]})]}):x?e.jsx(w,{className:Y("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",v),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit animate-pulse",children:e.jsx(Re,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Performance..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing your video performance across all platforms"}),e.jsx(Be,{value:85,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing metrics..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Finding opportunities..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Generating recommendations..."})]})]})]})}):!m||!m.overall_performance||!m.comparative_analysis||!m.platform_breakdown||!m.trend_analysis?e.jsx(w,{className:Y("border-2 border-red-200 bg-gradient-to-br from-red-50 to-orange-50",v),children:e.jsxs(k,{className:"p-8 text-center space-y-4",children:[e.jsx(zs,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Analysis Data Incomplete"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The performance analysis data is incomplete or missing."}),e.jsxs(V,{onClick:W,variant:"outline",className:"border-red-300 text-red-700",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})}):e.jsxs(w,{className:Y("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",v),children:[e.jsx(R,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(P,{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Performance Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered performance insights and optimization recommendations"})]})]}),e.jsxs(V,{onClick:W,disabled:x,size:"sm",variant:"outline",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(k,{children:[e.jsxs(ts,{value:D,onValueChange:M,className:"w-full",children:[e.jsxs(as,{className:"grid w-full grid-cols-6",children:[e.jsx(ue,{value:"overview",children:"Overview"}),e.jsx(ue,{value:"platforms",children:"Platforms"}),e.jsx(ue,{value:"opportunities",children:"Opportunities"}),e.jsx(ue,{value:"trends",children:"Trends"}),e.jsx(ue,{value:"timing",children:"Timing"}),e.jsx(ue,{value:"testing",children:"A/B Testing"})]}),e.jsxs(pe,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Total Performance"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[m.performance_score,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Views:"}),e.jsx("span",{className:"font-medium",children:z(((H=m.overall_performance)==null?void 0:H.total_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Engagement Rate:"}),e.jsxs("span",{className:"font-medium",children:[((ne=m.overall_performance)==null?void 0:ne.engagement_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Performance Tier:"}),e.jsx(O,{className:y(((te=m.overall_performance)==null?void 0:te.performance_tier)||"unknown"),children:(((Z=m.overall_performance)==null?void 0:Z.performance_tier)||"unknown").replace("_"," ")})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Industry Comparison"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Views vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((oe=(ee=m.comparative_analysis)==null?void 0:ee.views_vs_industry)==null?void 0:oe.performance)||"below_average")==="above_average"?e.jsx(Rs,{className:"w-3 h-3 text-green-600"}):e.jsx(Ps,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:Y("text-sm font-medium",(((be=(ve=m.comparative_analysis)==null?void 0:ve.views_vs_industry)==null?void 0:be.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((ge=(de=m.comparative_analysis)==null?void 0:de.views_vs_industry)==null?void 0:ge.difference_percentage)||0),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((l=(X=m.comparative_analysis)==null?void 0:X.engagement_vs_industry)==null?void 0:l.performance)||"below_average")==="above_average"?e.jsx(Rs,{className:"w-3 h-3 text-green-600"}):e.jsx(Ps,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:Y("text-sm font-medium",(((q=(S=m.comparative_analysis)==null?void 0:S.engagement_vs_industry)==null?void 0:q.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((J=(B=m.comparative_analysis)==null?void 0:B.engagement_vs_industry)==null?void 0:J.difference_percentage)||0),"%"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Growth Potential:"}),e.jsxs("div",{className:"text-lg font-medium text-purple-600",children:[z(((ie=(we=m.comparative_analysis)==null?void 0:we.growth_potential)==null?void 0:ie.views_growth_potential)||0)," more views"]})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Improvement Potential"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[m.improvement_potential,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Potential"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Platforms:"}),e.jsx("span",{className:"font-medium",children:((me=m.overall_performance)==null?void 0:me.platform_count)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Days Since Upload:"}),e.jsx("span",{className:"font-medium",children:((ye=m.overall_performance)==null?void 0:ye.days_since_upload)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(O,{variant:"outline",children:((Ne=m.trend_analysis)==null?void 0:Ne.lifecycle_stage)||"unknown"})]})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Platform Performance Overview"]})}),e.jsx(k,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(m.platform_breakdown||{}).map(([h,c])=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:u(h)}),e.jsx("div",{className:"font-medium capitalize mb-1",children:h}),e.jsxs("div",{className:"text-sm text-gray-600",children:["#",(c==null?void 0:c.ranking)||0]}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[(c==null?void 0:c.performance_score)||0,"/100"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[z((c==null?void 0:c.views)||0)," views"]})]},h))})})]})]}),e.jsx(pe,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(m.platform_breakdown||{}).map(([h,c])=>e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:u(h)}),e.jsx("span",{className:"capitalize",children:h}),e.jsxs(O,{className:"ml-2",children:["#",(c==null?void 0:c.ranking)||0]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(c==null?void 0:c.performance_score)||0,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:z((c==null?void 0:c.views)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Views"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(Vs,{className:"w-6 h-6 text-green-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:z((c==null?void 0:c.engagement)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Engagement"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx(Me,{className:"w-6 h-6 text-purple-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[(c==null?void 0:c.engagement_rate)||0,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Engagement Rate"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[((c==null?void 0:c.strengths)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(ga,{className:"w-4 h-4"}),"Strengths"]}),e.jsx("ul",{className:"space-y-1",children:((c==null?void 0:c.strengths)||[]).map((j,t)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mt-2 flex-shrink-0"}),j]},t))})]}),((c==null?void 0:c.weaknesses)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(zs,{className:"w-4 h-4"}),"Areas for Improvement"]}),e.jsx("ul",{className:"space-y-1",children:((c==null?void 0:c.weaknesses)||[]).map((j,t)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full mt-2 flex-shrink-0"}),j]},t))})]})]}),((c==null?void 0:c.recommendations)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx(kt,{className:"w-4 h-4"}),"Recommendations"]}),e.jsx("div",{className:"space-y-2",children:((c==null?void 0:c.recommendations)||[]).map((j,t)=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("span",{className:"text-sm text-blue-800",children:j})},t))})]})]})]},h))})}),e.jsx(pe,{value:"opportunities",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(m.optimization_opportunities||{}).map(([h,c])=>e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:u(h)}),e.jsxs("span",{className:"capitalize",children:[h," Opportunities"]})]})}),e.jsx(k,{className:"space-y-4",children:(c||[]).map((j,t)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),(j==null?void 0:j.title)||"Untitled"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(j==null?void 0:j.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{className:T((j==null?void 0:j.priority)||"low"),children:(j==null?void 0:j.priority)||"low"}),e.jsxs(O,{variant:"outline",children:[(j==null?void 0:j.potential_impact)||"unknown"," impact"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Action Steps:"}),e.jsx("div",{className:"space-y-1",children:((j==null?void 0:j.actions)||[]).map((i,p)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),i]},p))})]})]},t))})]},h))})}),e.jsx(pe,{value:"trends",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Trend Analysis"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trend Direction:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[f(((fe=m.trend_analysis)==null?void 0:fe.trend_direction)||"stable"),e.jsx("span",{className:"font-medium capitalize",children:((_e=m.trend_analysis)==null?void 0:_e.trend_direction)||"stable"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Avg Views:"}),e.jsx("span",{className:"font-medium",children:z(((Se=m.trend_analysis)==null?void 0:Se.daily_average_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Momentum Score:"}),e.jsxs("span",{className:"font-medium",children:[((ke=m.trend_analysis)==null?void 0:ke.momentum_score)||0,"/100"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(O,{variant:"outline",children:((Te=m.trend_analysis)==null?void 0:Te.lifecycle_stage)||"unknown"})]})]})]}),e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Performance Projections"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:z((($=m.trend_analysis)==null?void 0:$.projected_30_day_views)||0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Projected 30-Day Views"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Peak Performance Day:"}),e.jsxs("span",{className:"font-medium",children:["Day ",((Ce=m.trend_analysis)==null?void 0:Ce.peak_performance_day)||0]})]})]})]})]})}),e.jsx(pe,{value:"timing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(m.posting_time_optimization||{}).map(([h,c])=>e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:u(h)}),e.jsxs("span",{className:"capitalize",children:[h," Timing Optimization"]})]})}),e.jsx(k,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Current Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted at:"}),e.jsx("span",{className:"font-medium",children:(c==null?void 0:c.current_posting_time)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Day type:"}),e.jsx("span",{className:"font-medium",children:(c==null?void 0:c.current_day_type)||"unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Improvement potential:"}),e.jsx(O,{className:T((c==null?void 0:c.improvement_potential)||"low"),children:(c==null?void 0:c.improvement_potential)||"low"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimal Times"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Best time:"}),e.jsx("span",{className:"font-medium text-green-600",children:(c==null?void 0:c.best_time)||"unknown"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"All optimal times:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:((c==null?void 0:c.optimal_times)||[]).map((j,t)=>e.jsx(O,{variant:"outline",className:"text-xs",children:j},t))})]})]})]})})]},h))})}),e.jsx(pe,{value:"testing",className:"space-y-4",children:e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),"A/B Testing Suggestions"]})}),e.jsx(k,{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:(m.ab_test_suggestions||[]).map((h,c)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ye,{className:"w-4 h-4"}),(h==null?void 0:h.title)||"Untitled Test"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(h==null?void 0:h.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(O,{className:T((h==null?void 0:h.priority)||"low"),children:(h==null?void 0:h.priority)||"low"}),e.jsx(V,{size:"sm",onClick:()=>{E(h),I(!0)},children:"Start Test"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Test Variations:"}),e.jsx("div",{className:"space-y-1",children:((h==null?void 0:h.test_variations)||[]).map((j,t)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),j]},t))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Success Metrics:"}),e.jsx("div",{className:"space-y-1",children:((h==null?void 0:h.success_metrics)||[]).map((j,t)=>e.jsx(O,{variant:"outline",className:"text-xs mr-1",children:j.replace("_"," ")},t))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Duration: ",(h==null?void 0:h.duration)||"Unknown"]})]})]})]},c))})})]})})]}),e.jsx($s,{open:Q,onOpenChange:I,children:e.jsxs(Is,{className:"max-w-md",children:[e.jsxs(qs,{children:[e.jsx(Ds,{children:"Create A/B Test"}),e.jsxs(Ls,{children:['Set up an A/B test for "',F==null?void 0:F.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Test Duration (days)"}),e.jsxs(yt,{defaultValue:"14",children:[e.jsx(Nt,{children:e.jsx(vt,{})}),e.jsxs(wt,{children:[e.jsx(Ge,{value:"7",children:"7 days"}),e.jsx(Ge,{value:"14",children:"14 days"}),e.jsx(Ge,{value:"21",children:"21 days"}),e.jsx(Ge,{value:"30",children:"30 days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Success Metrics"}),e.jsx("div",{className:"space-y-2",children:((F==null?void 0:F.success_metrics)||[]).map((h,c)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_t,{id:`metric-${c}`,defaultChecked:!0}),e.jsx("label",{htmlFor:`metric-${c}`,className:"text-sm",children:h.replace("_"," ")})]},c))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(V,{variant:"outline",onClick:()=>I(!1),children:"Cancel"}),e.jsx(V,{onClick:()=>G({test_type:F==null?void 0:F.test_type,test_variations:F==null?void 0:F.test_variations,success_metrics:F==null?void 0:F.success_metrics,test_duration_days:14}),children:"Create Test"})]})]})]})})]})]})}const _a=({subtitle:n,currentTime:v,position:m,onMouseDown:a,onDoubleClick:x,editingSubtitle:A,editingText:D,onTextChange:M,onSaveEdit:Q,onCancelEdit:I})=>{var y;const F=d.useRef(null),[E,U]=d.useState(new Set);d.useEffect(()=>{if(!n.words||n.words.length===0){U(new Set);return}const f=new Set;n.words.forEach((u,T)=>{v>=u.start_time&&v<=u.end_time&&f.add(T)}),U(f)},[v,n.words]);const W=()=>!n.words||n.words.length===0?e.jsx("span",{className:"subtitle-text",children:n.text}):n.words.map((f,u)=>{var ne,te,Z,ee,oe;const T=E.has(u),H=u===n.words.length-1;return e.jsxs("span",{className:`subtitle-word ${T?"active":""}`,style:{color:T?((ne=n.style)==null?void 0:ne.color)||"#FFFFFF":((te=n.style)==null?void 0:te.color)||"#FFFFFF",fontWeight:T||(Z=n.style)!=null&&Z.bold?"bold":"normal",fontStyle:(ee=n.style)!=null&&ee.italic?"italic":"normal",textDecoration:(oe=n.style)!=null&&oe.underline?"underline":"none",transition:"all 0.1s ease-in-out",display:"inline-block",marginRight:H?"0":"0.1em"},children:[f.word,!H&&" "]},`${f.word}-${u}`)}),G=()=>{const f=Math.max(15,Math.min(85,m.x)),u=Math.max(15,Math.min(85,m.y));return{x:f,y:u}},z=()=>{var H,ne;const f=n.style||{},u=G(),T=Math.max(16,Math.min(48,f.fontSize||24));return{position:"absolute",left:`${u.x}%`,top:`${u.y}%`,transform:"translate(-50%, -50%)",fontFamily:f.fontFamily||"Arial, sans-serif",fontSize:`${T}px`,fontWeight:f.fontWeight||"bold",color:f.color||"#FFFFFF",background:(H=f.backgroundColor)!=null&&H.includes("gradient")?f.backgroundColor:void 0,backgroundColor:(ne=f.backgroundColor)!=null&&ne.includes("gradient")?void 0:f.backgroundColor||"rgba(0, 0, 0, 0.7)",textAlign:f.textAlign||"center",borderRadius:`${f.borderRadius||4}px`,padding:`${f.padding||8}px`,textShadow:f.textShadow||"2px 2px 4px rgba(0, 0, 0, 0.5)",fontStyle:f.italic?"italic":"normal",textDecoration:f.underline?"underline":"none",cursor:"move",userSelect:"none",boxShadow:(f==null?void 0:f.preset)==="neon"?"none":void 0,whiteSpace:"normal",wordWrap:"break-word",maxWidth:"80vw",minWidth:"200px",lineHeight:"1.2",letterSpacing:"0.5px",backdropFilter:"blur(2px)",zIndex:1e3,border:A?"2px solid #3b82f6":"none"}};return e.jsx("div",{ref:F,style:z(),onMouseDown:a,onDoubleClick:x,className:`subtitle-container ${((y=n.style)==null?void 0:y.preset)||""}`,children:A?e.jsx("textarea",{value:D||"",onChange:f=>M==null?void 0:M(f.target.value),onKeyDown:f=>{f.key==="Enter"&&!f.shiftKey?(f.preventDefault(),Q==null||Q()):f.key==="Escape"&&(I==null||I())},onBlur:Q,className:"subtitle-editor",style:{background:"transparent",border:"none",outline:"none",textAlign:"center",color:"inherit",fontSize:"inherit",fontFamily:"inherit",fontWeight:"inherit",width:"100%",minWidth:"200px",resize:"none",overflow:"hidden",whiteSpace:"normal",wordWrap:"break-word",lineHeight:"inherit",letterSpacing:"inherit",padding:"0",margin:"0"},rows:2,autoFocus:!0}):e.jsx("div",{className:"subtitle-content",style:{textAlign:"inherit",width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:"0.1em",lineHeight:"inherit",letterSpacing:"inherit"},children:W()})})},Os=n=>{if(n==="transparent")return"#000000";if(n.startsWith("rgba(")){const m=n.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(m){const a=parseInt(m[1]).toString(16).padStart(2,"0"),x=parseInt(m[2]).toString(16).padStart(2,"0"),A=parseInt(m[3]).toString(16).padStart(2,"0");return`#${a}${x}${A}`}}if(n.startsWith("rgb(")){const m=n.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);if(m){const a=parseInt(m[1]).toString(16).padStart(2,"0"),x=parseInt(m[2]).toString(16).padStart(2,"0"),A=parseInt(m[3]).toString(16).padStart(2,"0");return`#${a}${x}${A}`}}const v={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",cyan:"#00ffff",magenta:"#ff00ff",silver:"#c0c0c0",gray:"#808080",maroon:"#800000",olive:"#808000",lime:"#00ff00",aqua:"#00ffff",teal:"#008080",navy:"#000080",fuchsia:"#ff00ff",purple:"#800080"};return v[n.toLowerCase()]?v[n.toLowerCase()]:n.startsWith("#")&&/^#[0-9A-Fa-f]{6}$/.test(n)?n:"#000000"},Sa=({videoPath:n,videoId:v,videoTitle:m})=>{var gs,fs,js,bs,ys,Ns,vs,ws,_s,Ss,ks,Ts,Cs;const[a,x]=d.useState(null),[A,D]=d.useState(!1),[M,Q]=d.useState(!1),[I,F]=d.useState(!1),[E,U]=d.useState(!1),W=d.useRef(null),[G,z]=d.useState({}),[y,f]=d.useState("en"),[u,T]=d.useState(null),[H,ne]=d.useState("standard"),[te,Z]=d.useState(null),[ee,oe]=d.useState(null),[ve,be]=d.useState(null),[de,ge]=d.useState(!1),[X,l]=d.useState(0),[S,q]=d.useState(0),[B,J]=d.useState(!1),[we,ie]=d.useState(new Set),[me,ye]=d.useState(null),[Ne,fe]=d.useState(""),[_e,Se]=d.useState(null),[ke,Te]=d.useState({x:0,y:0}),$=d.useRef(null),Ce=d.useRef(null),h=d.useRef(null),c=d.useRef(null),[j,t]=d.useState(null),[i,p]=d.useState(null),[_,se]=d.useState(!1),[L,ae]=d.useState(null),[le,ce]=d.useState(null),[os,ds]=d.useState(!1),Oe={standard:{name:"Standard",style:{fontFamily:"Arial, sans-serif",fontSize:32,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.7)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:4,padding:8,textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)",preset:"standard"}},"no-background":{name:"No Background",style:{fontFamily:"Arial, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"no-background"}},neon:{name:"Neon",style:{fontFamily:"Impact, Arial Black, sans-serif",fontSize:40,fontWeight:"bold",color:"#00FFFF",backgroundColor:"rgba(0, 20, 40, 0.8)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:8,padding:12,textShadow:"0 0 10px #00FFFF, 0 0 20px #00FFFF",preset:"neon"}},confetti:{name:"Confetti",style:{fontFamily:"Comic Sans MS, cursive",fontSize:38,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"2px 2px 0px #000000, -2px -2px 0px #000000, 2px -2px 0px #000000, -2px 2px 0px #000000",preset:"confetti"}},bubbles:{name:"Bubbles",style:{fontFamily:"Trebuchet MS, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"bubbles"}}},Ue=Oe.standard.style;d.useEffect(()=>(Gs(),()=>{te&&clearInterval(te)}),[]),d.useEffect(()=>{v&&(console.log("Checking existing subtitles for video ID:",v),Ks())},[v]),d.useEffect(()=>{a!=null&&a.subtitles&&a.subtitles.length>0&&ds(!0)},[a==null?void 0:a.subtitles]);const Ks=async()=>{var s,r;if(!v){console.log("No video ID available, skipping subtitle check");return}console.log("Checking for existing subtitles for video:",v);try{const b=await(await fetch("/ai/subtitle-check",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:v})})).json();if(console.log("Subtitle check response:",b),b.success&&b.data&&b.data.processing_status==="completed"){console.log("Found existing subtitles, loading them:",b.data);const C=((r=b.data.subtitles)==null?void 0:r.map(N=>({...N,style:N.style||Ue,position:N.position||{x:50,y:85}})))||[];x({...b.data,original_video_path:n,subtitles:C}),console.log("Loaded subtitles with styles:",C),b.data.generation_id&&ms(b.data.generation_id)}else console.log("No existing subtitles found for this video")}catch(o){console.error("Error checking existing subtitles:",o)}},ms=async s=>{try{console.log("Loading word timing data for generation:",s);const r=await fetch(`/ai/word-timing/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(r.ok){const o=await r.json();o.success&&o.data?(console.log("Word timing data loaded:",o.data),be(o.data),x(b=>{var Ae,Fe,Xe,Ve;if(!b||!b.subtitles)return b;const C=new Map;o.data.words.forEach(he=>{C.has(he.subtitle_id)||C.set(he.subtitle_id,[]),C.get(he.subtitle_id).push({word:he.word,start_time:he.start_time,end_time:he.end_time,confidence:he.confidence})});const N=b.subtitles.map(he=>{const As=C.get(he.id)||[];return console.log(`Merging words for subtitle ${he.id}: ${As.length} words`),{...he,words:As}});console.log("Updated subtitles with word timing:",N),console.log("First subtitle word count after merge:",((Fe=(Ae=N[0])==null?void 0:Ae.words)==null?void 0:Fe.length)||0),console.log("First subtitle words sample:",(Ve=(Xe=N[0])==null?void 0:Xe.words)==null?void 0:Ve.slice(0,3));const g=N.filter(he=>he.words&&he.words.length>0);return console.log(`Subtitles with word timing: ${g.length}/${N.length}`),{...b,subtitles:N}})):console.log("No word timing data available")}else console.log("Word timing data not found or not accessible")}catch(r){console.error("Error loading word timing data:",r)}};d.useEffect(()=>{if(a&&a.processing_status==="processing"){const s=setInterval(()=>{Ys()},2e3);return Z(s),()=>clearInterval(s)}else te&&(clearInterval(te),Z(null))},[a==null?void 0:a.processing_status]),d.useEffect(()=>{const s=$.current;if(!s)return;const r=()=>{l(s.currentTime)},o=()=>{q(s.duration)};return s.addEventListener("timeupdate",r),s.addEventListener("loadedmetadata",o),()=>{s.removeEventListener("timeupdate",r),s.removeEventListener("loadedmetadata",o)}},[]);const Gs=async()=>{try{const r=await(await fetch("/ai/subtitle-languages")).json();r.success&&z(r.data)}catch(s){console.error("Error loading languages:",s)}},Js=async()=>{var s;if(!v){alert("No video ID available for subtitle generation. Please ensure the video is properly uploaded.");return}D(!0);try{const o=await(await fetch("/ai/subtitle-generate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:v,language:y})})).json();o.success?x({...o.data,original_video_path:n}):(console.error("Generation failed:",o.message),alert(`Subtitle generation failed: ${o.message}`))}catch(r){console.error("Error starting generation:",r)}finally{D(!1)}},Ys=async()=>{var s;if(a!=null&&a.generation_id)try{const o=await(await fetch("/ai/subtitle-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id})})).json();o.success&&x(b=>{const C={...b,...o.data,original_video_path:(b==null?void 0:b.original_video_path)||n};return o.data.processing_status==="completed"&&o.data.generation_id&&!ve&&ms(o.data.generation_id),C})}catch(r){console.error("Error polling progress:",r)}},Qs=()=>{const s=$.current;s&&(de?s.pause():s.play(),ge(!de))},Zs=s=>{const r=$.current,o=Ce.current;if(!r||!o)return;const b=o.getBoundingClientRect(),N=(s.clientX-b.left)/b.width*S;r.currentTime=N,l(N)},et=()=>a!=null&&a.subtitles&&a.subtitles.find(s=>X>=s.start_time&&X<=s.end_time)||null,st=async()=>{var o;const s=$.current,r=c.current;if(!s||!r||!v){alert("Unable to capture frame. Please ensure video is loaded.");return}F(!0);try{r.width=s.videoWidth,r.height=s.videoHeight;const b=r.getContext("2d");if(!b)throw new Error("Unable to get canvas context");b.drawImage(s,0,0,r.width,r.height);const C=await new Promise((Fe,Xe)=>{r.toBlob(Ve=>{Ve?Fe(Ve):Xe(new Error("Failed to create blob from canvas"))},"image/jpeg",.8)}),N=new FormData;N.append("video_id",v.toString()),N.append("frame_id",`frame_${Date.now()}`),N.append("thumbnail",C,"thumbnail.jpg"),N.append("current_time",X.toString());const Ae=await(await fetch("/ai/set-video-thumbnail-from-frame",{method:"POST",headers:{"X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:N})).json();if(Ae.success){const Fe=document.createElement("div");Fe.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",Fe.textContent="âœ“ Thumbnail set successfully!",document.body.appendChild(Fe),setTimeout(()=>{document.body.removeChild(Fe)},3e3)}else alert(`Failed to set thumbnail: ${Ae.message}`)}catch(b){console.error("Error setting thumbnail:",b),alert("Failed to capture and set thumbnail. Please try again.")}finally{F(!1)}},xs=s=>{const r=a==null?void 0:a.subtitles.find(o=>o.id===s);r&&(ye(s),fe(r.text))},tt=async()=>{var s;if(!(!me||!a))try{if((await(await fetch("/ai/subtitle-update-text",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:me,text:Ne})})).json()).success){const b=a.subtitles.map(C=>C.id===me?{...C,text:Ne}:C);x({...a,subtitles:b}),ye(null),fe("")}}catch(r){console.error("Error updating subtitle:",r)}},je=async(s,r)=>{var o;if(a)try{if((await(await fetch("/ai/subtitle-update-style",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:s,style:r})})).json()).success){const N=a.subtitles.map(g=>g.id===s?{...g,style:{...g.style,...r}}:g);x({...a,subtitles:N})}}catch(b){console.error("Error updating subtitle style:",b)}},at=async(s,r)=>{var o;if(a)try{if((await(await fetch("/ai/subtitle-update-position",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:s,position:r})})).json()).success){const N=a.subtitles.map(g=>g.id===s?{...g,position:r}:g);x({...a,subtitles:N})}}catch(b){console.error("Error updating subtitle position:",b)}},rt=async s=>{var o;if(!a)return;const r=Oe[s];if(r)try{(await(await fetch("/ai/apply-style-to-all-subtitles",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((o=document.querySelector('meta[name="csrf-token"]'))==null?void 0:o.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,style:r.style})})).json()).success&&(x(N=>N?{...N,subtitles:N.subtitles.map(g=>({...g,style:{...r.style}}))}:null),ne(s))}catch(b){console.error("Failed to apply style to all subtitles:",b)}},nt=(s,r)=>{if(s.preventDefault(),s.stopPropagation(),!(a==null?void 0:a.subtitles.find(Ae=>Ae.id===r))||!$.current)return;Se(r),$.current.getBoundingClientRect();const C=s.target.getBoundingClientRect(),N=C.left+C.width/2,g=C.top+C.height/2;Te({x:s.clientX-N,y:s.clientY-g})},it=s=>{if(!_e||!$.current)return;const r=$.current.getBoundingClientRect(),o=s.clientX-ke.x,b=s.clientY-ke.y,C=(o-r.left)/r.width*100,N=(b-r.top)/r.height*100,g=Math.max(5,Math.min(95,C)),Ae=Math.max(5,Math.min(95,N));at(_e,{x:g,y:Ae})},hs=()=>{Se(null),Te({x:0,y:0})},lt=async()=>{var s;if(a!=null&&a.generation_id)try{const o=await(await fetch("/ai/subtitle-export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,format:"srt"})})).json();o.success&&window.open(o.data.file_url,"_blank")}catch(r){console.error("Error exporting transcript:",r)}},us=async()=>{var s;if(v)try{const o=await(await fetch("/ai/rendered-video-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:v})})).json();o.success&&oe({status:o.status,rendered_video_path:o.rendered_video_path})}catch{}};d.useEffect(()=>{let s=null;return(ee==null?void 0:ee.status)==="processing"&&(s=setInterval(us,3e3)),()=>{s&&clearInterval(s)}},[ee==null?void 0:ee.status,v]),d.useEffect(()=>{us()},[v]);const ct=async()=>{var s;if(a!=null&&a.generation_id){Q(!0);try{const o=await(await fetch("/ai/subtitle-render-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,video_id:v})})).json();o.success?oe({status:"processing",rendered_video_path:null}):alert(`Failed to render video: ${o.message}`)}catch(r){console.error("Error rendering video:",r),alert("An error occurred while rendering the video. Please try again.")}finally{Q(!1)}}},$e=s=>{const r=Math.floor(s/60),o=Math.floor(s%60);return`${r}:${o.toString().padStart(2,"0")}`},ot=async()=>{var s,r,o;try{E?document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen():(s=W.current)!=null&&s.requestFullscreen?await W.current.requestFullscreen():(r=W.current)!=null&&r.webkitRequestFullscreen?await W.current.webkitRequestFullscreen():(o=W.current)!=null&&o.msRequestFullscreen&&await W.current.msRequestFullscreen()}catch(b){console.error("Error toggling fullscreen:",b)}};d.useEffect(()=>{const s=()=>{const r=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);U(r)};return document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("msfullscreenchange",s),()=>{document.removeEventListener("fullscreenchange",s),document.removeEventListener("webkitfullscreenchange",s),document.removeEventListener("msfullscreenchange",s)}},[]);const xe=et(),He=()=>{if($.current&&h.current){const s=$.current.getBoundingClientRect(),r=h.current.getBoundingClientRect();if(r){const o={width:s.width,height:s.height,top:s.top-r.top,left:s.left-r.left};t(i?{width:o.width*(i.width/100),height:o.height*(i.height/100),top:o.top+o.height*(i.y/100),left:o.left+o.width*(i.x/100)}:o)}}},dt=()=>{i||p({x:10,y:20,width:80,height:60})};d.useEffect(()=>{a!=null&&a.custom_bounds&&p(a.custom_bounds)},[a]);const Le=(s,r)=>{s.preventDefault(),s.stopPropagation(),!(!i||!$.current)&&(ae(r),$.current.getBoundingClientRect(),ce({x:s.clientX,y:s.clientY,bounds:{...i}}))},mt=s=>{if(!L||!le||!$.current)return;const r=$.current.getBoundingClientRect(),o=s.clientX-le.x,b=s.clientY-le.y,C=o/r.width*100,N=b/r.height*100;let g={...le.bounds};switch(L){case"move":g.x=Math.max(0,Math.min(100-g.width,g.x+C)),g.y=Math.max(0,Math.min(100-g.height,g.y+N));break;case"resize-tl":g.x=Math.max(0,Math.min(g.x+g.width-10,g.x+C)),g.y=Math.max(0,Math.min(g.y+g.height-10,g.y+N)),g.width=Math.max(10,Math.min(100-g.x,g.width-C)),g.height=Math.max(10,Math.min(100-g.y,g.height-N));break;case"resize-tr":g.y=Math.max(0,Math.min(g.y+g.height-10,g.y+N)),g.width=Math.max(10,Math.min(100-g.x,g.width+C)),g.height=Math.max(10,Math.min(100-g.y,g.height-N));break;case"resize-bl":g.x=Math.max(0,Math.min(g.x+g.width-10,g.x+C)),g.width=Math.max(10,Math.min(100-g.x,g.width-C)),g.height=Math.max(10,Math.min(100-g.y,g.height+N));break;case"resize-br":g.width=Math.max(10,Math.min(100-g.x,g.width+C)),g.height=Math.max(10,Math.min(100-g.y,g.height+N));break}p(g)},ps=()=>{ae(null),ce(null)};return d.useEffect(()=>{const s=()=>{setTimeout(He,50)},r=()=>He();return $.current&&($.current.addEventListener("loadedmetadata",r),$.current.addEventListener("loadeddata",r)),window.addEventListener("resize",s),setTimeout(He,100),()=>{$.current&&($.current.removeEventListener("loadedmetadata",r),$.current.removeEventListener("loadeddata",r)),window.removeEventListener("resize",s)}},[n,i]),d.useEffect(()=>{setTimeout(He,100)},[E,i]),d.useEffect(()=>{if(!(xe!=null&&xe.words)||xe.words.length===0){ie(new Set);return}const s=new Set;xe.words.forEach((r,o)=>{X>=r.start_time&&X<=r.end_time&&s.add(o)}),ie(s)},[X,xe==null?void 0:xe.words]),e.jsxs("div",{ref:W,className:`bg-white shadow-sm border ${E?"h-screen w-screen flex flex-col":"rounded-lg"}`,children:[e.jsx("canvas",{ref:c,style:{display:"none"}}),e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs("button",{onClick:ot,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",title:E?"Exit fullscreen":"Enter fullscreen",children:[E?e.jsx(na,{className:"w-4 h-4"}):e.jsx(sa,{className:"w-4 h-4"}),E?"Exit Fullscreen":"Fullscreen"]})}),!a&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(Yt,{className:"w-4 h-4 inline mr-2"}),"Language"]}),e.jsx("select",{value:y,onChange:s=>f(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:A,children:Object.entries(G).map(([s,r])=>e.jsxs("option",{value:s,children:[r.name," (",r.accuracy,"% accuracy)"]},s))})]}),e.jsx("button",{onClick:Js,disabled:A||!v,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:A?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(aa,{className:"w-4 h-4"}),"Generate Subtitles"]})})]})]})}),e.jsxs("div",{className:`p-6 ${E?"flex-1 overflow-auto":""}`,children:[(a==null?void 0:a.processing_status)==="processing"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),e.jsxs("span",{className:"font-medium text-blue-900",children:["Processing: ",a.progress.current_step]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.progress.percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[e.jsxs("span",{children:[a.progress.percentage,"% complete"]}),e.jsxs("span",{children:[$e(a.progress.processed_duration)," / ",$e(a.progress.total_duration)]})]})]}),n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{ref:h,className:"relative bg-black rounded-lg overflow-hidden",onMouseMove:it,onMouseUp:hs,onMouseLeave:hs,style:{position:"relative"},children:[e.jsx("video",{ref:$,src:(a==null?void 0:a.original_video_path)||n,className:`w-full h-auto ${E?"max-h-[70vh]":"max-h-96"}`,controls:!1,onPlay:()=>ge(!0),onPause:()=>ge(!1)}),e.jsx("div",{className:"video-subtitle-overlay",style:{top:(j==null?void 0:j.top)||0,left:(j==null?void 0:j.left)||0,width:(j==null?void 0:j.width)||"100%",height:(j==null?void 0:j.height)||"100%"},children:xe&&e.jsx("div",{style:{pointerEvents:"auto"},children:e.jsx(_a,{subtitle:xe,currentTime:X,position:xe.position,onMouseDown:s=>nt(s,xe.id),onDoubleClick:()=>xs(xe.id),editingSubtitle:me===xe.id,editingText:Ne,onTextChange:fe,onSaveEdit:tt,onCancelEdit:()=>{ye(null),fe("")}})})}),_&&i&&$.current&&e.jsx("div",{className:"bounds-editor-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"auto"},onMouseMove:mt,onMouseUp:ps,onMouseLeave:ps,children:e.jsxs("div",{className:"bounds-rectangle",style:{position:"absolute",left:`${i.x}%`,top:`${i.y}%`,width:`${i.width}%`,height:`${i.height}%`,border:"3px solid #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.15)",cursor:"move",boxShadow:"0 0 10px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Le(s,"move"),children:[e.jsx("div",{className:"resize-handle resize-tl",style:{position:"absolute",top:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"nw-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Le(s,"resize-tl")}),e.jsx("div",{className:"resize-handle resize-tr",style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"ne-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Le(s,"resize-tr")}),e.jsx("div",{className:"resize-handle resize-bl",style:{position:"absolute",bottom:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"sw-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Le(s,"resize-bl")}),e.jsx("div",{className:"resize-handle resize-br",style:{position:"absolute",bottom:"-8px",right:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"se-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Le(s,"resize-br")}),e.jsx("div",{className:"center-indicator",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"4px",height:"4px",backgroundColor:"#3b82f6",borderRadius:"50%",border:"2px solid white"}})]})})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:Qs,className:"flex items-center justify-center w-10 h-10 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors",children:de?e.jsx(Tt,{className:"w-5 h-5"}):e.jsx(Ws,{className:"w-5 h-5 ml-0.5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{ref:Ce,className:"h-2 bg-gray-200 rounded-full cursor-pointer",onClick:Zs,children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full transition-all",style:{width:`${X/S*100}%`}})})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-0",children:[$e(X)," / ",$e(S)]}),e.jsx("button",{onClick:st,disabled:I||!v,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",title:"Set current frame as thumbnail",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Setting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ct,{className:"w-4 h-4"}),"Set Thumbnail"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Subtitle Area:"}),os&&e.jsxs("button",{onClick:()=>{dt(),se(!_)},className:`flex items-center gap-2 px-3 py-1 rounded-lg text-sm transition-colors ${_?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx(Hs,{className:"w-4 h-4"}),_?"Finish Editing":"Set Boundary"]}),i&&e.jsxs("button",{onClick:()=>{p(null),se(!1)},className:"flex items-center gap-2 px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Reset to Auto"]}),i&&e.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(i.width),"% Ã— ",Math.round(i.height),"%"]})]})]})]}),(a==null?void 0:a.processing_status)==="completed"&&a.subtitles&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subtitle Timeline"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.subtitles.map(s=>e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-lg hover:bg-white transition-colors cursor-pointer ${X>=s.start_time&&X<=s.end_time?"border-purple-300 bg-purple-50":"border-gray-200 bg-white"}`,onClick:()=>{$.current&&($.current.currentTime=s.start_time)},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"text-sm font-mono text-gray-500",children:[$e(s.start_time)," â†’ ",$e(s.end_time)]})}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"text-gray-900",children:s.text})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),xs(s.id)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Edit subtitle",children:e.jsx(Xs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),T(s.id)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Style subtitle",children:e.jsx(Bs,{className:"w-4 h-4"})})]})]},s.id))})]}),u&&(a==null?void 0:a.subtitles)&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subtitle Style"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Style Presets"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(Oe).map(([s,r])=>{var C;const o=a.subtitles.find(N=>N.id===u),b=((C=o==null?void 0:o.style)==null?void 0:C.preset)===s;return e.jsx("button",{onClick:()=>{je(u,{...r.style}),ne(s)},className:`p-3 border rounded-lg text-sm font-medium transition-all ${b?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 bg-white text-gray-700 hover:border-purple-300 hover:bg-purple-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs mb-1 px-2 py-1 rounded",style:{color:r.style.color,backgroundColor:(()=>{const N=r.style.backgroundColor;return N.includes("gradient")?"#FFD700":N==="transparent"?"rgba(0, 0, 0, 0)":N})(),textShadow:r.style.textShadow.includes("0px")?r.style.textShadow:"none",fontFamily:r.style.fontFamily.split(",")[0]},children:"Aa"}),r.name]})},s)})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("button",{onClick:()=>rt(H),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(Na,{className:"w-4 h-4"}),"Apply to All Subtitles"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Family"}),e.jsxs("select",{value:((js=(fs=(gs=a.subtitles.find(s=>s.id===u))==null?void 0:gs.style)==null?void 0:fs.fontFamily)==null?void 0:js.split(",")[0])||"Arial",onChange:s=>je(u,{fontFamily:s.target.value+", sans-serif"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"}),e.jsx("option",{value:"Impact",children:"Impact"}),e.jsx("option",{value:"Trebuchet MS",children:"Trebuchet MS"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Courier New",children:"Courier New"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),e.jsx("input",{type:"range",min:"12",max:"48",value:((ys=(bs=a.subtitles.find(s=>s.id===u))==null?void 0:bs.style)==null?void 0:ys.fontSize)||24,onChange:s=>je(u,{fontSize:parseInt(s.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),e.jsx("input",{type:"color",value:Os(((vs=(Ns=a.subtitles.find(s=>s.id===u))==null?void 0:Ns.style)==null?void 0:vs.color)||"#FFFFFF"),onChange:s=>je(u,{color:s.target.value}),className:"w-full h-8 rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:(()=>{var o;const s=a.subtitles.find(b=>b.id===u),r=((o=s==null?void 0:s.style)==null?void 0:o.backgroundColor)||"#000000";return Os(r)})(),onChange:s=>je(u,{backgroundColor:s.target.value}),className:"flex-1 h-8 rounded border"}),e.jsx("button",{onClick:()=>je(u,{backgroundColor:"transparent"}),className:"px-3 py-1 text-xs border rounded hover:bg-gray-100",title:"Make background transparent",children:"None"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alignment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>je(u,{textAlign:"left"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>je(u,{textAlign:"center"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(It,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>je(u,{textAlign:"right"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(Vt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{var s,r;return je(u,{bold:!((r=(s=a.subtitles.find(o=>o.id===u))==null?void 0:s.style)!=null&&r.bold)})},className:`p-2 border rounded hover:bg-gray-100 ${(_s=(ws=a.subtitles.find(s=>s.id===u))==null?void 0:ws.style)!=null&&_s.bold?"bg-purple-100 border-purple-300":""}`,children:e.jsx(Ut,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,r;return je(u,{italic:!((r=(s=a.subtitles.find(o=>o.id===u))==null?void 0:s.style)!=null&&r.italic)})},className:`p-2 border rounded hover:bg-gray-100 ${(ks=(Ss=a.subtitles.find(s=>s.id===u))==null?void 0:Ss.style)!=null&&ks.italic?"bg-purple-100 border-purple-300":""}`,children:e.jsx(Gt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,r;return je(u,{underline:!((r=(s=a.subtitles.find(o=>o.id===u))==null?void 0:s.style)!=null&&r.underline)})},className:`p-2 border rounded hover:bg-gray-100 ${(Cs=(Ts=a.subtitles.find(s=>s.id===u))==null?void 0:Ts.style)!=null&&Cs.underline?"bg-purple-100 border-purple-300":""}`,children:e.jsx(ba,{className:"w-4 h-4"})})]})]}),(a==null?void 0:a.processing_status)==="completed"&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("button",{onClick:lt,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(At,{className:"w-4 h-4"}),"Export Transcript"]}),e.jsx("button",{onClick:ct,disabled:M,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Rendering Video..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"w-5 h-5"}),"Render & Upload to All Platforms"]})})]})]})]})]})},ka=({videoPath:n,onRemovalComplete:v,className:m})=>{const[a,x]=d.useState("detection"),[A,D]=d.useState(!1),[M,Q]=d.useState(null),[I,F]=d.useState(null),[E,U]=d.useState([]),[W,G]=d.useState(!1),[z,y]=d.useState({method:"inpainting",quality_preset:"balanced",sensitivity:"medium",detection_mode:"balanced"}),f=[{id:"detection",label:"Detection",icon:We},{id:"removal",label:"Removal",icon:Ie},{id:"progress",label:"Progress",icon:Re},{id:"quality",label:"Quality",icon:Pe},{id:"settings",label:"Settings",icon:bt}],u=[{id:"inpainting",name:"AI Inpainting",accuracy:95,speed:"Slow",description:"Advanced neural network fills watermark area"},{id:"content_aware",name:"Content-Aware Fill",accuracy:88,speed:"Medium",description:"Intelligent background reconstruction"},{id:"temporal_coherence",name:"Temporal Coherence",accuracy:92,speed:"Slow",description:"Frame-by-frame consistency analysis"},{id:"frequency_domain",name:"Frequency Domain",accuracy:85,speed:"Fast",description:"Spectral analysis and filtering"}],T=async()=>{var l,S;if(!n){alert("No video path provided");return}G(!0),D(!0);try{const B=await(await fetch("/ai/watermark-detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_path:n,sensitivity:z.sensitivity,detection_mode:"thorough"})})).json();if(!B.success)throw new Error(B.message||"Watermark detection failed");Q(B.data);const J=B.data.detected_watermarks||[];if(J.length===0){alert("ðŸŽ‰ No watermarks detected in your video! Your video is clean."),G(!1),D(!1);return}U(J.map(me=>me.id)),x("progress");const ie=await(await fetch("/ai/watermark-remove",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((S=document.querySelector('meta[name="csrf-token"]'))==null?void 0:S.getAttribute("content"))||""},body:JSON.stringify({video_path:n,watermarks:J,method:z.method,quality_preset:"high"})})).json();if(!ie.success)throw new Error(ie.message||"Watermark removal failed");F(ie.data),te(ie.data.removal_id)}catch(q){console.error("Auto watermark removal failed:",q),alert(`Failed to remove watermarks: ${q instanceof Error?q.message:"Unknown error"}`),G(!1),D(!1)}},H=async()=>{var l;if(n){D(!0);try{const q=await(await fetch("/ai/watermark-detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_path:n,sensitivity:z.sensitivity,detection_mode:z.detection_mode})})).json();q.success?(Q(q.data),U(q.data.detected_watermarks.map(B=>B.id))):(console.error("Watermark detection failed:",q.error),alert(`Detection failed: ${q.message||"Unknown error"}`))}catch(S){console.error("Error detecting watermarks:",S),alert("An error occurred while detecting watermarks. Please try again.")}finally{D(!1)}}},ne=async()=>{var l;if(!(!M||E.length===0)){D(!0);try{const S=M.detected_watermarks.filter(J=>E.includes(J.id)),B=await(await fetch("/ai/watermark-remove",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_path:n,watermarks:S,method:z.method,quality_preset:z.quality_preset})})).json();B.success?(F(B.data),x("progress"),te(B.data.removal_id)):(console.error("Watermark removal failed:",B.error),alert(`Removal failed: ${B.message||"Unknown error"}`))}catch(S){console.error("Error removing watermarks:",S),alert("An error occurred while removing watermarks. Please try again.")}finally{D(!1)}}},te=async l=>{const S=async()=>{var q;try{const J=await(await fetch("/ai/watermark-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((q=document.querySelector('meta[name="csrf-token"]'))==null?void 0:q.getAttribute("content"))||""},body:JSON.stringify({removal_id:l})})).json();if(J.success){if(F(J.data),J.data.processing_status==="completed"){G(!1),D(!1),v==null||v(J.data);return}if(J.data.processing_status==="failed"){G(!1),D(!1),alert("Watermark removal failed. Please try again.");return}J.data.processing_status==="processing"&&setTimeout(S,3e3)}}catch(B){console.error("Error polling progress:",B),G(!1),D(!1)}};S()},Z=l=>{switch(l){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},ee=l=>{switch(l){case"inpainting":return"text-purple-600 bg-purple-100";case"content_aware":return"text-blue-600 bg-blue-100";case"temporal_coherence":return"text-green-600 bg-green-100";case"frequency_domain":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},oe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Watermark Detection"}),e.jsx("p",{className:"text-blue-100",children:"AI-powered watermark detection and analysis"})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(We,{})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(V,{onClick:H,disabled:A||!n,className:"bg-white text-blue-600 hover:bg-blue-50",children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),A?"Detecting...":"Detect Watermarks"]})})]}),M&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Detection Results"}),e.jsxs(O,{className:"bg-green-100 text-green-800",children:[M.detected_watermarks.length," watermarks found"]})]}),M.detected_watermarks.length===0?e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(We,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Watermarks Detected"}),e.jsx("p",{className:"text-gray-600",children:"The video appears to be clean of watermarks."})]}):e.jsx("div",{className:"space-y-4",children:M.detected_watermarks.map((l,S)=>e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:E.includes(l.id),onChange:q=>{q.target.checked?U([...E,l.id]):U(E.filter(B=>B!==l.id))},className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("h4",{className:"font-medium capitalize",children:[l.type," Watermark #",S+1]}),e.jsx(O,{className:Z(l.removal_difficulty),children:l.removal_difficulty})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confidence:"}),e.jsxs("div",{className:"font-medium",children:[l.confidence,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsxs("div",{className:"font-medium",children:[l.location.x,", ",l.location.y]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("div",{className:"font-medium",children:[l.location.width,"Ã—",l.location.height]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Frames:"}),e.jsx("div",{className:"font-medium",children:l.frames_detected})]})]})]}),e.jsxs("div",{className:"text-2xl",children:[l.type==="logo"&&"ðŸŽ¨",l.type==="text"&&"ðŸ“",l.type==="brand"&&"ðŸ·ï¸",l.type==="channel"&&"ðŸ“º"]})]})},l.id))})]})]}),ve=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Method"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(l=>e.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${z.method===l.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>y(S=>({...S,method:l.id})),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:l.name}),e.jsxs(O,{className:ee(l.id),children:[l.accuracy,"% accuracy"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:l.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Speed: ",l.speed]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((S,q)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${q<Math.floor(l.accuracy/20)?"bg-green-500":"bg-gray-300"}`},q))})})]})]},l.id))})]}),M&&E.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Selected for Removal"}),e.jsx("div",{className:"space-y-3",children:M.detected_watermarks.filter(l=>E.includes(l.id)).map((l,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-xl",children:[l.type==="logo"&&"ðŸŽ¨",l.type==="text"&&"ðŸ“",l.type==="brand"&&"ðŸ·ï¸",l.type==="channel"&&"ðŸ“º"]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium capitalize",children:[l.type," Watermark"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[l.confidence,"% confidence"]})]})]}),e.jsx(O,{className:Z(l.removal_difficulty),children:l.removal_difficulty})]},l.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Start Removal"}),e.jsxs("p",{className:"text-red-100",children:["Remove ",E.length," selected watermark",E.length!==1?"s":""]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(Ie,{})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(V,{onClick:ne,disabled:A||E.length===0,className:"bg-white text-red-600 hover:bg-red-50",children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),A?"Processing...":"Remove Watermarks"]})})]})]}),be=()=>e.jsx("div",{className:"space-y-6",children:I?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Removal Progress"}),e.jsx("p",{className:"text-green-100",children:I.processing_status==="completed"?"Completed":I.processing_status==="processing"?"Processing...":I.processing_status})]}),e.jsx("div",{className:"text-6xl opacity-20",children:I.processing_status==="completed"?e.jsx(es,{}):e.jsx(re,{})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Progress"}),e.jsxs("span",{className:"text-sm",children:[I.progress.percentage,"%"]})]}),e.jsx(Be,{value:I.progress.percentage,className:"h-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ss,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Step"}),e.jsx("p",{className:"font-medium capitalize",children:I.progress.current_step})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Zt,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Frames Processed"}),e.jsxs("p",{className:"font-medium",children:[I.progress.frames_processed," / ",I.progress.total_frames]})]})]})}),e.jsx(w,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Us,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Time"}),e.jsxs("p",{className:"font-medium",children:[Math.round(I.progress.estimated_time/60)," min"]})]})]})})]}),I.removal_results&&I.removal_results.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Results"}),e.jsx("div",{className:"space-y-3",children:I.removal_results.map((l,S)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[l.removal_success?e.jsx(es,{className:"w-5 h-5 text-green-600"}):e.jsx(Qe,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Watermark ",S+1]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.removal_success?"Successfully removed":"Removal failed"})]})]}),e.jsxs(O,{className:l.removal_success?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:[l.confidence,"% confidence"]})]},S))})]})]}):e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Re,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Removal"}),e.jsx("p",{className:"text-gray-600",children:"Start watermark removal to see progress here."})]})}),de=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[e.jsx(Pe,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quality Analysis"}),e.jsx("p",{className:"text-gray-600",children:"Complete watermark removal to see quality analysis."})]})}),ge=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sensitivity"}),e.jsxs("select",{value:z.sensitivity,onChange:l=>y(S=>({...S,sensitivity:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low - Detect obvious watermarks"}),e.jsx("option",{value:"medium",children:"Medium - Balanced detection"}),e.jsx("option",{value:"high",children:"High - Detect subtle watermarks"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detection Mode"}),e.jsxs("select",{value:z.detection_mode,onChange:l=>y(S=>({...S,detection_mode:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast - Quick detection"}),e.jsx("option",{value:"balanced",children:"Balanced - Good accuracy and speed"}),e.jsx("option",{value:"thorough",children:"Thorough - Maximum accuracy"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Preset"}),e.jsxs("select",{value:z.quality_preset,onChange:l=>y(S=>({...S,quality_preset:l.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast - Quick processing"}),e.jsx("option",{value:"balanced",children:"Balanced - Good quality and speed"}),e.jsx("option",{value:"high",children:"High - Best quality"}),e.jsx("option",{value:"ultra",children:"Ultra - Maximum quality"})]})]})})]})]}),X=()=>{switch(a){case"detection":return oe();case"removal":return ve();case"progress":return be();case"quality":return de();case"settings":return ge();default:return oe()}};return!M&&!W?e.jsxs("div",{className:`space-y-4 ${m}`,children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(Ie,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Remove Watermarks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically detect and remove watermarks from your video using AI"})]}),e.jsx(V,{onClick:T,disabled:A||!n,size:"lg",className:"bg-red-600 hover:bg-red-700 text-white",children:A?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(We,{className:"w-4 h-4 mr-2"}),"Find and Remove Watermarks"]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"This will scan your entire video and automatically remove detected watermarks"})]}),e.jsxs("details",{className:"mt-6",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-medium text-muted-foreground hover:text-foreground",children:"Advanced Options"}),e.jsxs("div",{className:"mt-3 space-y-3 p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Detection Sensitivity"}),e.jsxs("select",{value:z.sensitivity,onChange:l=>y({...z,sensitivity:l.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"low",children:"Low - Fast detection"}),e.jsx("option",{value:"medium",children:"Medium - Balanced"}),e.jsx("option",{value:"high",children:"High - Thorough detection"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Removal Method"}),e.jsx("select",{value:z.method,onChange:l=>y({...z,method:l.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm",children:u.map(l=>e.jsxs("option",{value:l.id,children:[l.name," - ",l.description]},l.id))})]})]})]})]}):e.jsxs("div",{className:`max-w-6xl mx-auto p-6 ${m}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Watermark Remover"}),e.jsx("p",{className:"text-gray-600",children:"Detect and remove watermarks from your videos"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(O,{className:"bg-blue-100 text-blue-800",children:"AI Powered"}),e.jsx(O,{className:"bg-green-100 text-green-800",children:"High Quality"})]})]}),e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:f.map(l=>{const S=l.icon;return e.jsxs("button",{onClick:()=>x(l.id),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${a===l.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(S,{className:"w-4 h-4 mr-2"}),l.label]},l.id)})}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:X()})]})};function Ta({videoId:n,videoPath:v,title:m,className:a,onThumbnailSet:x}){const[A,D]=d.useState(null),[M,Q]=d.useState(!1),[I,F]=d.useState(null),[E,U]=d.useState("suggestions"),{toast:W}=cs(),G=async()=>{var y,f;if(!n){W({title:"No Video ID",description:"Please provide a video ID to optimize thumbnails.",variant:"destructive"});return}Q(!0);try{const T=await(await fetch("/ai/optimize-thumbnails",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((y=document.querySelector('meta[name="csrf-token"]'))==null?void 0:y.getAttribute("content"))||""},body:JSON.stringify({video_id:n,title:m||"Amazing Video",platforms:["youtube","instagram","tiktok"]})})).json();if(T.success)D(T.data),W({title:"Thumbnail Optimization Complete! ðŸŽ¨",description:`AI has analyzed your video and extracted ${((f=T.data.extracted_frames)==null?void 0:f.length)||0} thumbnail frames.`});else throw new Error(T.message||"Failed to optimize thumbnails")}catch(u){console.error("Thumbnail optimization error:",u),W({title:"Optimization Failed",description:"Failed to optimize thumbnails. Please try again.",variant:"destructive"})}finally{Q(!1)}},z=async(y,f)=>{var u;if(!n){W({title:"Error",description:"Video ID is required to set thumbnail.",variant:"destructive"});return}try{const H=await(await fetch("/ai/set-video-thumbnail",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.getAttribute("content"))||""},body:JSON.stringify({video_id:n,frame_id:y,thumbnail_path:f})})).json();if(H.success)W({title:"Thumbnail Set Successfully! ðŸŽ¯",description:"This thumbnail has been set for all platforms."}),x&&x();else throw new Error(H.message||"Failed to set thumbnail")}catch(T){console.error("Set thumbnail error:",T),W({title:"Setting Failed",description:"Failed to set thumbnail. Please try again.",variant:"destructive"})}};return!A&&!M?e.jsxs(w,{className:Y("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",a),children:[e.jsxs(R,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit",children:e.jsx(qe,{className:"w-8 h-8 text-white"})}),e.jsx(P,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Generate eye-catching thumbnails with AI-powered optimization and CTR predictions"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Pe,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"CTR Prediction"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ft,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Face Detection"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Bs,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Color Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Xs,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Text Optimization"})]})]}),e.jsxs(V,{onClick:G,disabled:!n,size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(ls,{className:"w-5 h-5 mr-2"}),"Analyze Video & Extract Thumbnails"]}),!n&&e.jsx("p",{className:"text-sm text-gray-500",children:"Video ID required for thumbnail analysis"})]})]}):M?e.jsx(w,{className:Y("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",a),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit animate-pulse",children:e.jsx(qe,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Optimizing Thumbnails..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing frames, detecting faces, and predicting CTR"}),e.jsx("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Extracting frames..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing faces..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(re,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Predicting CTR..."})]})]})]})}):e.jsxs(w,{className:Y("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",a),children:[e.jsx(R,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(P,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Thumbnail Optimization Results"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Score: ",A.overall_score,"/100 â€¢ ",A.extracted_frames.length," frames analyzed"]})]})]}),e.jsxs(V,{onClick:G,disabled:M,size:"sm",variant:"outline",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsx(k,{children:e.jsxs(ts,{value:E,onValueChange:U,className:"w-full",children:[e.jsxs(as,{className:"grid w-full grid-cols-3",children:[e.jsx(ue,{value:"suggestions",children:"Suggestions"}),e.jsx(ue,{value:"platforms",children:"Platform Thumbnail Specifications"}),e.jsx(ue,{value:"testing",children:"A/B Testing"})]}),e.jsx(pe,{value:"suggestions",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:A.thumbnail_suggestions.slice(0,3).map((y,f)=>e.jsx(w,{className:f===0?"border-2 border-gold":"",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:y.preview_url,alt:`Thumbnail at ${y.timestamp}s`,className:"w-32 h-18 object-cover rounded-lg border-2 border-gray-200",onError:u=>{var H;const T=u.target;T.style.display="none",(H=T.nextElementSibling)==null||H.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-18 bg-gray-200 rounded-lg flex items-center justify-center hidden",children:e.jsx(Ws,{className:"w-6 h-6 text-gray-400"})}),f===0&&e.jsxs(O,{className:"absolute -top-2 -right-2 bg-yellow-500 text-black",children:[e.jsx(Mt,{className:"w-3 h-3 mr-1"}),"Best"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:["Frame at ",y.timestamp,"s"]}),e.jsxs(O,{variant:"outline",children:[y.predicted_ctr,"% CTR"]}),e.jsxs(O,{variant:"outline",children:[y.confidence_score,"% confidence"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Why this frame:"}),e.jsx("ul",{className:"text-sm text-gray-600",children:y.reasons.map((u,T)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),u]},T))})]}),y.design_scores&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Design Feature Scores:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(y.design_scores).map(([u,T])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[u.replace("_"," "),":"]}),e.jsx(O,{variant:"outline",className:Y("text-xs px-1.5 py-0.5",T>=80?"border-green-500 text-green-700 bg-green-50":T>=60?"border-yellow-500 text-yellow-700 bg-yellow-50":"border-red-500 text-red-700 bg-red-50"),children:T})]},u))})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(V,{size:"sm",onClick:()=>z(y.frame_id,y.path),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),"Set as Thumbnail"]})})]})})},y.frame_id))})}),e.jsx(pe,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(A.platform_optimizations).map(([y,f])=>e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs(P,{className:"text-lg capitalize flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),y]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specifications"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Dimensions: ",f.specifications.width,"Ã—",f.specifications.height]}),e.jsxs("div",{children:["Aspect Ratio: ",f.specifications.aspect_ratio]}),e.jsxs("div",{children:["Max Size: ",f.specifications.max_file_size,"KB"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimization Focus"}),e.jsx("div",{className:"text-sm space-y-1",children:f.design_adjustments.map((u,T)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),u]},T))})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected Improvement:"}),e.jsxs(O,{className:"bg-green-100 text-green-800",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),f.expected_improvement]})]})]})]},y))})}),e.jsx(pe,{value:"testing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:A.ab_test_variants.map(y=>e.jsxs(w,{children:[e.jsx(R,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(P,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),y.variant_id.replace("_"," ").toUpperCase()]}),e.jsxs(O,{variant:"outline",children:[y.confidence_level,"% confidence"]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Hypothesis"}),e.jsx("p",{className:"text-sm text-gray-600",children:y.test_hypothesis})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Planned Modifications"}),e.jsx("div",{className:"space-y-1",children:y.modifications.map((f,u)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),f]},u))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected CTR Increase:"}),e.jsxs(O,{className:"bg-blue-100 text-blue-800",children:["+",y.expected_outcome.expected_ctr_increase]})]})]})]},y.variant_id))})})]})})]})}const Ca=({isOpen:n,onClose:v,videoId:m,videoPath:a,title:x,onThumbnailSet:A})=>{if(!n)return null;const D=()=>{const M=document.createElement("div");M.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",M.textContent="âœ“ Thumbnail optimized successfully!",document.body.appendChild(M),setTimeout(()=>{document.body.contains(M)&&document.body.removeChild(M)},3e3),A&&A()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and optimize thumbnails for better engagement"})]})]}),e.jsx("button",{onClick:v,className:"flex items-center justify-center w-8 h-8 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full transition-colors",title:"Close",children:e.jsx(Ze,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(Ta,{videoId:m,videoPath:a,title:x,onThumbnailSet:D})})]})})},Aa={youtube:Rt,instagram:zt,tiktok:ze,facebook:ze,snapchat:ze,pinterest:ze,x:ze},Fa={pending:ss,processing:Qe,success:es,failed:is},Ma={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},Ea=(n,v)=>{if(!n||!v)return{status:"unknown",color:"text-gray-500",label:"Unknown"};const m=n*v;return m>=1920*1080?{status:"great",color:"text-green-600",label:"1080p+"}:m>=1280*720?{status:"good",color:"text-orange-500",label:"720p"}:{status:"poor",color:"text-red-600",label:"Low Quality"}};function kr({video:n}){const v=[{title:"My channels",href:"/dashboard"},{title:"Videos",href:"/videos"},{title:n.title,href:`/videos/${n.id}/edit`}],{data:m,setData:a,put:x,processing:A,errors:D}=xt({title:n.title||"",description:n.description||"",tags:n.tags||[],thumbnail:null}),[M,Q]=d.useState("overview"),[I,F]=d.useState(!1),[E,U]=d.useState("tikomat"),[W,G]=d.useState(!1),[z,y]=d.useState(!1),[f,u]=d.useState(n.thumbnail||null),[T,H]=d.useState([0]),[ne,te]=d.useState(null),[Z,ee]=d.useState(null),[oe,ve]=d.useState([]),[be,de]=d.useState(!1),[ge,X]=d.useState(!1),[l,S]=d.useState(!1),[q,B]=d.useState(!1),[J]=d.useState(["youtube","instagram","tiktok","facebook","x","pinterest","snapchat"]),we=d.useRef(null),ie=Ea(n.width,n.height),me=t=>{t.preventDefault(),x(`/videos/${n.id}`)},ye=()=>{F(!0)},Ne=()=>{rs.delete(`/videos/${n.id}`,{data:{delete_option:E},onSuccess:()=>{rs.visit("/videos")}})},fe=(t,i)=>{confirm(`Are you sure you want to remove this video from ${i}?`)&&rs.delete(`/video-targets/${t}`,{preserveScroll:!0,onSuccess:()=>{},onError:p=>{console.error("Failed to remove video from platform:",p),alert("Failed to remove video from platform. Please try again.")}})},_e=t=>{if(t.platform_url)return t.platform_url;switch(t.platform){case"youtube":return t.platform_video_id?`https://youtube.com/watch?v=${t.platform_video_id}`:null;case"instagram":return t.platform_video_id?`https://instagram.com/p/${t.platform_video_id}`:null;case"tiktok":return t.platform_video_id?`https://tiktok.com/@username/video/${t.platform_video_id}`:null;default:return null}},Se=async()=>{var t;G(!0);try{const i=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({video_id:n.id,content_type:"title",current_title:m.title})});if(i.ok){const p=await i.json();if(p.success&&p.data.optimized_title){a("title",p.data.optimized_title);const _=p.data.analysis_summary;let se="Title generated based on video content analysis";if(_){const L=[];_.has_transcript&&L.push("audio transcription"),_.scenes_detected>0&&L.push(`${_.scenes_detected} visual scenes`),_.content_category!=="unknown"&&L.push(`${_.content_category} content`),L.length>0&&(se+=`. Analyzed: ${L.join(", ")}.`)}alert(`âœ… AI Title Generated!

${se}`)}}else{const p=await i.json();console.error("Failed to generate AI title:",p),alert(`Failed to generate title: ${p.message||"Unknown error"}`)}}catch(i){console.error("Failed to generate AI title:",i),alert("An error occurred while generating the title. Please try again.")}finally{G(!1)}},ke=async()=>{var t;y(!0);try{const i=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({video_id:n.id,content_type:"description",current_description:m.description})});if(i.ok){const p=await i.json();if(p.success&&p.data.optimized_description){a("description",p.data.optimized_description);const _=p.data.analysis_summary;let se="Description generated based on video content analysis";if(_){const L=[];_.has_transcript&&L.push("audio transcription"),_.scenes_detected>0&&L.push(`${_.scenes_detected} visual scenes`),_.content_category!=="unknown"&&L.push(`${_.content_category} content`),L.length>0&&(se+=`. Analyzed: ${L.join(", ")}.`)}alert(`âœ… AI Description Generated!

${se}`)}}else{const p=await i.json();console.error("Failed to generate AI description:",p),alert(`Failed to generate description: ${p.message||"Unknown error"}`)}}catch(i){console.error("Failed to generate AI description:",i),alert("An error occurred while generating the description. Please try again.")}finally{y(!1)}},Te=async t=>{var p,_;const i=(p=t.target.files)==null?void 0:p[0];if(i){if(!i.type.startsWith("image/")){alert("Please select a valid image file");return}if(i.size>5*1024*1024){alert("Image size must be less than 5MB");return}B(!0),te(i);try{const se=new FormData;se.append("thumbnail",i),se.append("video_id",n.id.toString());const L=(_=document.querySelector('meta[name="csrf-token"]'))==null?void 0:_.getAttribute("content");console.log("CSRF Token:",L?"Found":"Missing");const ae=await fetch("/ai/upload-custom-thumbnail",{method:"POST",headers:{"X-CSRF-TOKEN":L||"",Accept:"application/json"},body:se});if(console.log("Response status:",ae.status),console.log("Response headers:",Object.fromEntries(ae.headers.entries())),ae.ok){const le=await ae.json();if(le.success){u(le.thumbnail_url);const ce=document.createElement("div");ce.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",ce.textContent="âœ… Thumbnail uploaded successfully!",document.body.appendChild(ce),setTimeout(()=>{document.body.contains(ce)&&document.body.removeChild(ce)},3e3)}else throw new Error(le.message||"Upload failed")}else{const le=ae.headers.get("content-type");if(console.log("Error response content-type:",le),le&&le.includes("application/json")){const ce=await ae.json();throw new Error(ce.message||`HTTP ${ae.status}: Upload failed`)}else{const ce=await ae.text();throw console.log("HTML error response:",ce.substring(0,200)),new Error(`HTTP ${ae.status}: Server returned HTML instead of JSON - check Laravel logs`)}}}catch(se){console.error("Failed to upload thumbnail:",se);const L=document.createElement("div");L.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",L.textContent=`âŒ Upload failed: ${se instanceof Error?se.message:"Unknown error"}`,document.body.appendChild(L),setTimeout(()=>{document.body.contains(L)&&document.body.removeChild(L)},5e3);const ae=new FileReader;ae.onload=le=>{var ce;u((ce=le.target)==null?void 0:ce.result)},ae.readAsDataURL(i)}finally{B(!1)}}},$=t=>{ee(t)};d.useEffect(()=>{const t={title:n.title||"",description:n.description||"",tags:n.tags||[]},i=JSON.stringify(m)!==JSON.stringify(t);X(i)},[m,n]);const Ce=async()=>{S(!0);const t=async(i=0)=>{var p,_,se;try{const L=((p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"))||((_=document.querySelector('input[name="_token"]'))==null?void 0:_.getAttribute("value"))||"";if(!L)throw new Error("CSRF token not found");const ae=await fetch("/ai/analyze-video-tags",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":L,Accept:"application/json"},body:JSON.stringify({video_id:n.id,title:m.title||"",description:m.description||""})});if(ae.status===419&&i===0){console.log("CSRF token expired, refreshing...");const le=await fetch("/");if(le.ok){const ce=await le.text(),Oe=(se=new DOMParser().parseFromString(ce,"text/html").querySelector('meta[name="csrf-token"]'))==null?void 0:se.getAttribute("content");if(Oe){const Ue=document.querySelector('meta[name="csrf-token"]');return Ue&&Ue.setAttribute("content",Oe),t(1)}}}return ae}catch(L){if(i===0)return console.log("Request failed, retrying once...",L),t(1);throw L}};try{const i=await t();if(i.ok){const p=await i.json();if(console.log("Tag generation response:",p),p.success&&p.data&&p.data.analysis.tags)a("tags",p.data.analysis.tags);else{console.warn("Unexpected response structure:",p);const _=document.createElement("div");_.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",_.textContent="âš ï¸ Tag generation failed - unexpected response",document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},5e3)}}else{const p=await i.text();console.error("HTTP Error:",i.status,i.statusText,p);const _=document.createElement("div");_.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",_.textContent=`âš ï¸ Tag generation failed - Server error (${i.status})`,document.body.appendChild(_),setTimeout(()=>{document.body.contains(_)&&document.body.removeChild(_)},5e3)}}catch(i){console.error("Failed to generate tags:",i);const p=document.createElement("div");p.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",p.textContent="âš ï¸ Tag generation failed - Network error",document.body.appendChild(p),setTimeout(()=>{document.body.contains(p)&&document.body.removeChild(p)},5e3)}finally{S(!1)}},h=t=>{m.tags.includes(t)||a("tags",[...m.tags,t])},c=t=>{a("tags",m.tags.filter(i=>i!==t))},j=async()=>{var t;try{if((await fetch(`/videos/${n.id}/update-platforms`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""},body:JSON.stringify({title:m.title,description:m.description,tags:m.tags})})).ok){X(!1);const p=document.createElement("div");p.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",p.textContent="âœ“ All platforms updated successfully!",document.body.appendChild(p),setTimeout(()=>{document.body.contains(p)&&document.body.removeChild(p)},3e3)}}catch(i){console.error("Failed to update platforms:",i)}};return e.jsxs(ft,{breadcrumbs:v,children:[e.jsx(ht,{title:`Edit: ${n.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ut,{href:"/videos",children:e.jsxs(V,{variant:"outline",size:"sm",children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:n.title}),e.jsx("p",{className:"text-muted-foreground",children:"Edit and optimize your video with AI-powered tools"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(V,{variant:"outline",onClick:ye,className:"text-red-600 hover:text-red-700",children:[e.jsx(Ie,{className:"mr-2 h-4 w-4"}),"Delete"]})})]}),ge&&e.jsx(w,{className:"border-blue-200 bg-blue-50",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(re,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Unsaved Changes Detected"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Update all connected platforms with your changes"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(V,{onClick:j,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),"Update All Platforms"]}),e.jsxs(V,{variant:"outline",onClick:()=>{},children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Manage Platforms"]})]})]})})}),e.jsxs(ts,{value:M,onValueChange:Q,className:"w-full",children:[e.jsxs(as,{className:"grid w-full grid-cols-2",children:[e.jsx(ue,{value:"overview",children:"Overview/Edit"}),e.jsx(ue,{value:"performance",children:"Performance"})]}),e.jsx(pe,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(P,{className:"flex items-center gap-2",children:"Video Editor"})}),e.jsx(k,{children:e.jsx(Je,{children:e.jsx(Sa,{videoPath:n.video_path||n.file_path||"",videoId:n.id,videoTitle:n.title})})})]}),e.jsxs(w,{children:[e.jsxs(R,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Watermark Removal"]}),e.jsx(Ke,{children:"Automatically detect and remove watermarks from your video"})]}),e.jsx(k,{children:e.jsx(Je,{children:e.jsx(ka,{videoPath:n.original_file_path||n.file_path||"",onRemovalComplete:t=>{console.log("Watermark removal completed:",t);const i=document.createElement("div");i.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",i.textContent="âœ… Watermarks removed successfully!",document.body.appendChild(i),setTimeout(()=>{document.body.contains(i)&&document.body.removeChild(i)},5e3)}})})})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"AI Analysis"]})}),e.jsxs(k,{children:[e.jsx(Je,{children:e.jsx(va,{videoId:n.id,videoPath:n.original_file_path||n.file_path,onAnalysisComplete:$})}),Z&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg",children:Z.category||"Entertainment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Mood"}),e.jsx("p",{className:"text-lg",children:Z.mood||"Positive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"AI Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(Z.tags||["creative","engaging","trending"]).map((t,i)=>e.jsx(O,{variant:"secondary",className:"text-xs",children:t},i))})]})]})]})]}),e.jsxs(w,{children:[e.jsxs(R,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5"}),"AI Suggestions"]}),e.jsx(Ke,{children:"Most important optimization recommendations"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 border border-orange-200 bg-orange-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Me,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-900",children:"Increase Engagement"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Add a call-to-action in the first 5 seconds to boost viewer retention."})]})]})}),e.jsx("div",{className:"p-4 border border-blue-200 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Optimize Thumbnail"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Consider adding text overlay to your thumbnail to increase click-through rate."})]})]})}),e.jsx("div",{className:"p-4 border border-green-200 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Es,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Add More Tags"}),e.jsx("p",{className:"text-sm text-green-700",children:"Include platform-specific hashtags to improve discoverability."})]})]})})]})})]}),n.targets&&n.targets.length>0&&e.jsxs(w,{children:[e.jsxs(R,{children:[e.jsx(P,{children:"Publishing Status"}),e.jsx(Ke,{children:"Current status for each platform"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:n.targets.map(t=>{const i=Fa[t.status],p=Aa[t.platform],_=_e(t);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:t.platform}),t.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(t.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(O,{className:Ma[t.status],children:[e.jsx(i,{className:"w-3 h-3 mr-1"}),t.status]}),_&&t.status==="success"&&e.jsx("a",{href:_,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx(Pt,{className:"w-4 h-4"})}),t.status==="success"&&e.jsxs(V,{size:"sm",variant:"outline",onClick:()=>fe(t.id,t.platform),className:"text-red-600 hover:text-red-700",children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},t.id)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:me,className:"space-y-6",children:[e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(P,{children:"Title"})}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fs,{value:m.title,onChange:t=>a("title",t.target.value),placeholder:"Enter video title",className:"flex-1"}),e.jsx(V,{type:"button",variant:"outline",size:"sm",onClick:Se,disabled:W,children:W?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(Ee,{className:"w-4 h-4"})})]}),D.title&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:D.title})]})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(P,{children:"Description"})}),e.jsxs(k,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(pt,{value:m.description,onChange:t=>a("description",t.target.value),placeholder:"Enter video description",rows:4}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(V,{type:"button",variant:"outline",size:"sm",onClick:ke,disabled:z,children:[z?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"AI Generate"]})})]}),D.description&&e.jsx("p",{className:"text-sm text-red-600",children:D.description})]})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(Es,{className:"w-5 h-5"}),"Tags"]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.tags.map((t,i)=>e.jsxs(O,{variant:"secondary",className:"flex items-center gap-1",children:[t,e.jsx("button",{type:"button",onClick:()=>c(t),className:"ml-1 text-xs hover:text-red-600",children:e.jsx(Ze,{className:"w-3 h-3"})})]},i)),m.tags.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No tags added yet"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fs,{placeholder:"Add a tag...",onKeyDown:t=>{if(t.key==="Enter"){t.preventDefault();const i=t.currentTarget.value.trim();i&&(h(i),t.currentTarget.value="")}},className:"flex-1"}),e.jsxs(V,{type:"button",variant:"outline",onClick:Ce,disabled:l,children:[l?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(ls,{className:"w-4 h-4 mr-2"}),"AI Generate"]})]}),m.tags.length>0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Tags help categorize your video and improve discoverability across platforms"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(V,{type:"submit",disabled:A,children:[A?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(la,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),e.jsxs(w,{children:[e.jsx(R,{children:e.jsx(P,{children:"Video Details"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-lg",children:n.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Resolution"}),e.jsx("p",{className:`text-lg ${ie.color}`,children:n.width&&n.height?`${n.width}x${n.height}`:"Unknown"}),e.jsx("p",{className:`text-sm ${ie.color}`,children:ie.label})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"text-lg",children:new Date(n.created_at).toLocaleString()})]})]})]}),e.jsxs(w,{children:[e.jsxs(R,{children:[e.jsxs(P,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"Thumbnail Optimization"]}),e.jsx(Ke,{children:"Set your video thumbnail using AI optimization or custom upload"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(V,{onClick:()=>de(!0),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"AI Optimize Thumbnail"]}),e.jsxs(V,{variant:"outline",onClick:()=>{var t;return(t=we.current)==null?void 0:t.click()},disabled:q,children:[q?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Ot,{className:"w-4 h-4 mr-2"}),q?"Uploading...":"Upload Custom Thumbnail"]}),e.jsx("input",{ref:we,type:"file",accept:"image/*",onChange:Te,className:"hidden"})]}),f&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-700",children:"âœ“ Thumbnail has been set for this video"})}),n.thumbnail&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current Thumbnail:"}),e.jsx("img",{src:`${n.thumbnail}`,alt:"Current thumbnail",className:"w-32 h-20 object-cover rounded-lg border"})]})]})]})]})]})}),e.jsx(pe,{value:"performance",className:"space-y-6",children:e.jsx(Je,{children:e.jsx(wa,{videoId:n.id})})})]}),e.jsx($s,{open:I,onOpenChange:F,children:e.jsxs(Is,{children:[e.jsxs(qs,{children:[e.jsx(Ds,{children:"Delete Video"}),e.jsx(Ls,{children:"This action cannot be undone. Choose what you want to delete:"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:E==="tikomat",onChange:t=>U(t.target.value)}),e.jsx(Ms,{htmlFor:"delete-tikomat",children:"Delete only from Tikomat (keep on social platforms)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:E==="all",onChange:t=>U(t.target.value)}),e.jsx(Ms,{htmlFor:"delete-all",children:"Delete from everywhere (Tikomat + all social platforms)"})]})]}),e.jsxs(gt,{children:[e.jsx(V,{variant:"outline",onClick:()=>F(!1),children:"Cancel"}),e.jsx(V,{variant:"destructive",onClick:Ne,children:"Delete Video"})]})]})}),e.jsx(Ca,{isOpen:be,onClose:()=>de(!1),videoId:n.id,videoPath:n.original_file_path||n.file_path||"",title:m.title,onThumbnailSet:()=>{u("optimized"),de(!1)}})]})]})}export{kr as default};
