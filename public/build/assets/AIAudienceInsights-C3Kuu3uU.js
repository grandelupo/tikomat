import{r as l,j as e}from"./app-CBf7Yo4i.js";import{R as v}from"./refresh-cw-CqKnoXPc.js";import{S as D,U as N,T as E}from"./workflow-CYqTzzaE.js";import{G as y}from"./globe-DZx0vTZn.js";import{T as w}from"./target-BsVxV3-V.js";import{E as L}from"./eye-dtF8XHsu.js";import{U as O}from"./user-CuuBkL9h.js";import{C as U}from"./circle-check-big-BYalqjnE.js";import{A as G}from"./arrow-up-B4JHTwxW.js";import{H as $}from"./heart-BJuaG0jD.js";import{T as B}from"./triangle-alert-Qb3Cvihj.js";import{Z as H}from"./zap-DyiKkr_o.js";import{C as q}from"./clock-7HvGeyld.js";import{P as F}from"./plus-jOgccZmW.js";import{C as M}from"./app-layout-DH9UKU3X.js";const ce=({videoId:Z,onClose:u})=>{const[m,_]=l.useState("overview"),[o,h]=l.useState(!1),[s,k]=l.useState(null),[d,A]=l.useState({platforms:["youtube","instagram","tiktok"],timeframe:"30d",includeSegmentation:!0}),S=[{id:"overview",label:"Overview",icon:N},{id:"demographics",label:"Demographics",icon:y},{id:"segments",label:"Segments",icon:w},{id:"behavior",label:"Behavior",icon:L},{id:"growth",label:"Growth",icon:E},{id:"personalization",label:"Personalization",icon:O}],f={youtube:"ðŸŽ¬",instagram:"ðŸ“¸",tiktok:"ðŸŽµ",facebook:"ðŸ‘¥",twitter:"ðŸ¦",snapchat:"ðŸ‘»"},g=async()=>{var r;h(!0);try{const a=await(await fetch("/ai/audience-insights",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({platforms:d.platforms,timeframe:d.timeframe,include_segmentation:d.includeSegmentation})})).json();a.success?k(a.data):console.error("Failed to analyze audience insights:",a.error)}catch(t){console.error("Error analyzing audience insights:",t)}finally{h(!1)}};l.useEffect(()=>{g()},[d]);const i=()=>!s||s.status!=="insufficient_data"?null:e.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[e.jsxs("div",{className:"bg-amber-950/20 border border-amber-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(B,{className:"w-6 h-6 text-amber-400 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-amber-300",children:"Not Enough Data for Analysis"})]}),e.jsx("p",{className:"text-amber-200 mb-4",children:s.message}),s.data_sufficiency&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-amber-800",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Videos Created"}),e.jsx("div",{className:"text-2xl font-bold text-amber-300",children:s.data_sufficiency.metrics.video_count}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Need ",s.data_sufficiency.requirements.min_videos,"+"]})]}),e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-amber-800",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Connected Platforms"}),e.jsx("div",{className:"text-2xl font-bold text-amber-300",children:s.data_sufficiency.metrics.connected_platforms}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Need ",s.data_sufficiency.requirements.min_platforms,"+"]})]}),e.jsxs("div",{className:"bg-background rounded-lg p-4 border border-amber-800",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Publishing History"}),e.jsx("div",{className:"text-2xl font-bold text-amber-300",children:s.data_sufficiency.metrics.publishing_history}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Need 1+ successful publish"})]})]})]}),s.recommendations&&s.recommendations.length>0&&e.jsxs("div",{className:"bg-blue-950 border border-blue-800 rounded-lg p-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-blue-300 mb-4 flex items-center",children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Recommended Actions"]}),e.jsx("div",{className:"space-y-4",children:s.recommendations.map((r,t)=>e.jsx("div",{className:"bg-background rounded-lg p-4 border border-blue-800",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h5",{className:"font-medium text-blue-300 mb-1",children:r.action}),e.jsx("p",{className:"text-blue-200 text-sm mb-2",children:r.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-blue-300",children:[e.jsxs("span",{className:`px-2 py-1 rounded-full ${r.priority==="critical"?"bg-red-950/20 text-red-300":r.priority==="high"?"bg-orange-950/20 text-orange-300":"bg-blue-950/20 text-blue-300"}`,children:[r.priority," priority"]}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(q,{className:"w-3 h-3 mr-1"}),r.estimated_time]})]})]}),e.jsx(F,{className:"w-5 h-5 text-blue-500 ml-4"})]})},t))})]})]}),n=(r,t)=>r&&(r.status==="insufficient_data"||r.status==="no_data"||r.status==="error")?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"w-5 h-5 text-yellow-600 mr-2"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-yellow-800",children:["Limited ",t," Data"]}),e.jsx("div",{className:"text-sm text-yellow-700",children:r.message})]})]})}):null,b=()=>{var r,t,a,c,p,j;return(s==null?void 0:s.status)==="insufficient_data"?i():e.jsxs("div",{className:"space-y-6",children:[(s==null?void 0:s.data_sufficiency)&&e.jsx("div",{className:`rounded-lg p-4 ${s.data_sufficiency.confidence==="high"?"bg-green-950/20 border border-green-800":s.data_sufficiency.confidence==="medium"?"bg-yellow-950/20 border border-yellow-800":"bg-red-950/20 border border-red-800"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium ${s.data_sufficiency.confidence==="high"?"text-green-300":s.data_sufficiency.confidence==="medium"?"text-yellow-300":"text-red-300"}`,children:["Data Quality: ",s.data_sufficiency.confidence.charAt(0).toUpperCase()+s.data_sufficiency.confidence.slice(1)," Confidence"]}),e.jsxs("p",{className:`text-sm ${s.data_sufficiency.confidence==="high"?"text-green-200":s.data_sufficiency.confidence==="medium"?"text-yellow-200":"text-red-200"}`,children:["Based on ",s.data_sufficiency.metrics.video_count," videos and ",s.data_sufficiency.metrics.publishing_history," publications"]})]}),e.jsx(U,{className:`w-6 h-6 ${s.data_sufficiency.confidence==="high"?"text-green-500":s.data_sufficiency.confidence==="medium"?"text-yellow-500":"text-red-500"}`})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Audience Health Score"}),e.jsxs("div",{className:"text-3xl font-bold",children:[(s==null?void 0:s.audience_health_score)||0,"/100"]}),e.jsxs("p",{className:"text-purple-100 text-sm mt-1",children:[(s==null?void 0:s.insights_confidence)==="high"?"High Confidence":(s==null?void 0:s.insights_confidence)==="medium"?"Medium Confidence":"Limited Data"," Analysis"]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(N,{})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[((t=(r=s==null?void 0:s.engagement_insights)==null?void 0:r.overall_metrics)==null?void 0:t.success_rate)||0,"%"]}),e.jsxs("p",{className:"text-sm text-muted-foreground flex items-center mt-1",children:[e.jsx(G,{className:"w-4 h-4 mr-1"}),"Publishing success"]})]}),e.jsx($,{className:"w-8 h-8 text-red-500"})]})}),e.jsx("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground",children:"Total Publications"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:((c=(a=s==null?void 0:s.engagement_insights)==null?void 0:a.overall_metrics)==null?void 0:c.total_publications)||0}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Across platforms"})]}),e.jsx(w,{className:"w-8 h-8 text-blue-500"})]})}),e.jsx("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-foreground",children:"Platform Coverage"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:((j=(p=s==null?void 0:s.engagement_insights)==null?void 0:p.overall_metrics)==null?void 0:j.platform_coverage)||d.platforms.length}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Platforms active"})]}),e.jsx(y,{className:"w-8 h-8 text-green-500"})]})})]}),e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Platform Distribution"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:d.platforms.map(x=>e.jsxs("div",{className:"flex items-center p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-2xl mr-3",children:f[x]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:x}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"})]})]},x))})]})]})},T=()=>{var r,t;return(s==null?void 0:s.status)==="insufficient_data"?i():e.jsxs("div",{className:"space-y-6",children:[n(s==null?void 0:s.demographic_breakdown,"Demographics"),(r=s==null?void 0:s.demographic_breakdown)!=null&&r.status?e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Demographics Analysis"}),e.jsx("p",{className:"text-muted-foreground",children:s.demographic_breakdown.message||"No demographic data available yet."}),e.jsx("div",{className:"mt-4 p-4 bg-background rounded-lg",children:e.jsxs("p",{className:"text-foreground text-sm",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Connect more social media accounts and publish videos to gather demographic insights."]})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Platform Activity"}),e.jsx("div",{className:"space-y-4",children:Object.entries((s==null?void 0:s.demographic_breakdown)||{}).filter(([a])=>!["overall","analysis_period"].includes(a)).map(([a,c])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-2xl mr-3",children:f[a]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium capitalize",children:a}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.publishing_count," publications"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-foreground",children:[c.success_rate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Success rate"})]})]},a))})]}),((t=s==null?void 0:s.demographic_breakdown)==null?void 0:t.overall)&&e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Overall Statistics"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.demographic_breakdown.overall.total_publications}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Publications"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-foreground",children:[s.demographic_breakdown.overall.average_success_rate,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Success Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.demographic_breakdown.overall.platform_diversity}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Platforms Used"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-foreground capitalize",children:s.demographic_breakdown.overall.most_active_platform}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Most Active"})]})]})]})]})]})},C=()=>(s==null?void 0:s.status)==="insufficient_data"?i():e.jsxs("div",{className:"space-y-6",children:[n(s==null?void 0:s.audience_segments,"Segmentation"),e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Audience Segments"}),e.jsx("p",{className:"text-muted-foreground",children:"Segment analysis based on your content and publishing patterns."})]})]}),P=()=>(s==null?void 0:s.status)==="insufficient_data"?i():e.jsxs("div",{className:"space-y-6",children:[n(s==null?void 0:s.behavior_patterns,"Behavior"),e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Behavior Patterns"}),e.jsx("p",{className:"text-muted-foreground",children:"Analysis of content creation and publishing behavior."})]})]}),z=()=>(s==null?void 0:s.status)==="insufficient_data"?i():e.jsxs("div",{className:"space-y-6",children:[n(s==null?void 0:s.growth_opportunities,"Growth"),e.jsxs("div",{className:"bg-background rounded-lg p-6 shadow-sm border border-gray-800",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Growth Opportunities"}),e.jsx("p",{className:"text-muted-foreground",children:"Recommendations for expanding your audience reach."})]})]}),I=()=>(s==null?void 0:s.status)==="insufficient_data"?i():e.jsxs("div",{className:"space-y-6",children:[n(s==null?void 0:s.personalization_recommendations,"Personalization"),e.jsxs("div",{className:"bg-white rounded-lg p-6 shadow-sm border border-gray-200",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Personalization Recommendations"}),e.jsx("p",{className:"text-gray-600",children:"Tailored strategies for your content and audience."})]})]}),R=()=>{switch(m){case"overview":return b();case"demographics":return T();case"segments":return C();case"behavior":return P();case"growth":return z();case"personalization":return I();default:return b()}};return e.jsxs("div",{className:"max-w-7xl mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Audience Insights"}),e.jsx("p",{className:"text-gray-600",children:(s==null?void 0:s.insights_confidence)==="insufficient"?"Gather more data for comprehensive insights":"Deep audience analysis and personalization recommendations"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:g,disabled:o,className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:[e.jsx(v,{className:`w-4 h-4 mr-2 ${o?"animate-spin":""}`}),o?"Analyzing...":"Refresh Analysis"]}),u&&e.jsx("button",{onClick:u,className:"p-2 text-gray-400 hover:text-gray-600",children:"âœ•"})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4 mb-6 shadow-sm border border-gray-200",children:e.jsx("div",{className:"flex flex-wrap items-center gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-4 h-4 text-gray-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Timeframe:"}),e.jsxs("select",{value:d.timeframe,onChange:r=>A({...d,timeframe:r.target.value}),className:"border border-gray-300 rounded-md px-3 py-1 text-sm",children:[e.jsx("option",{value:"7d",children:"Last 7 days"}),e.jsx("option",{value:"30d",children:"Last 30 days"}),e.jsx("option",{value:"90d",children:"Last 90 days"}),e.jsx("option",{value:"180d",children:"Last 6 months"}),e.jsx("option",{value:"365d",children:"Last year"})]})]})})}),e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:S.map(r=>{const t=r.icon;return e.jsxs("button",{onClick:()=>_(r.id),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${m===r.id?"bg-white text-purple-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(t,{className:"w-4 h-4 mr-2"}),r.label]},r.id)})}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:o?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-8 h-8 mx-auto mb-4 text-purple-600 animate-spin"}),e.jsx("p",{className:"text-gray-600",children:"Analyzing audience insights..."})]}):R()},m)]})};export{ce as A};
