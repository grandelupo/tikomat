import{r as u,j as e,$ as w,Y as f,m as h}from"./app-Dix-0CZJ.js";import{c as C,B as a}from"./createLucideIcon-BkgCo8iS.js";import{C as i,b as o,c as d,a as n,d as D}from"./card-BV5uTwUg.js";import{B as y}from"./message-square-N0I_HEuJ.js";import{D as _,b as S,c as V,d as T,e as $,f as E}from"./dialog-Duu_Zf1U.js";import{A as L,X as I}from"./app-layout-BHJk1TeI.js";import{A as P}from"./arrow-left-B6awCLqM.js";import{S as A}from"./square-pen-ufYUEFMN.js";import{T as B}from"./trash-2-Qe-Do4G0.js";import{C as j}from"./circle-x-C7s5Ghuu.js";import{C as F}from"./circle-check-big-Cl7aySdh.js";import{C as R}from"./circle-alert-BmqcK-ke.js";import{C as q}from"./clock-CeY4eJPg.js";import{V as z}from"./video-rFNFgllK.js";import{I as U,Y}from"./youtube-D7WXEF7e.js";import"./index-B1NxcSBP.js";import"./index-BofPx8cF.js";import"./workflow-CUhZVOiY.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],M=C("ExternalLink",H),O={youtube:Y,instagram:U,tiktok:z},X={pending:q,processing:R,success:F,failed:j},G={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},J=[{title:"Videos",href:"/videos"},{title:"Video Details",href:"#"}];function pe({video:t}){const[v,c]=u.useState(!1),[r,l]=u.useState("tikomat"),N=()=>{c(!0)},g=()=>{h.delete(`/videos/${t.id}`,{data:{delete_option:r},onSuccess:()=>{h.visit("/videos")}})},b=(s,m)=>{confirm(`Are you sure you want to remove this video from ${m}?`)&&h.delete(`/video-targets/${s}`,{preserveScroll:!0,onSuccess:()=>{},onError:x=>{console.error("Failed to remove video from platform:",x),alert("Failed to remove video from platform. Please try again.")}})},k=s=>{if(s.platform_url)return s.platform_url;switch(s.platform){case"youtube":return s.platform_video_id?`https://youtube.com/watch?v=${s.platform_video_id}`:null;case"instagram":return s.platform_video_id?`https://instagram.com/p/${s.platform_video_id}`:null;case"tiktok":return s.platform_video_id?`https://tiktok.com/@username/video/${s.platform_video_id}`:null;default:return null}};return e.jsxs(L,{breadcrumbs:J,children:[e.jsx(w,{title:`Video: ${t.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(f,{href:"/videos",children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.title}),e.jsxs("p",{className:"text-muted-foreground",children:["Uploaded ",new Date(t.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{href:`/videos/${t.id}/edit`,children:e.jsxs(a,{variant:"outline",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsxs(a,{variant:"outline",onClick:N,className:"text-red-600 hover:text-red-700",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(i,{children:[e.jsx(o,{children:e.jsx(d,{children:"Video Preview"})}),e.jsx(n,{children:e.jsx("div",{className:"aspect-video w-full bg-black rounded-lg overflow-hidden",children:e.jsx("video",{src:t.video_path,controls:!0,className:"w-full h-full"})})})]}),e.jsxs(i,{children:[e.jsx(o,{children:e.jsx(d,{children:"Video Details"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Title"}),e.jsx("p",{className:"mt-1",children:t.title})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Description"}),e.jsx("p",{className:"mt-1",children:t.description})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"mt-1",children:t.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-sm text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"mt-1",children:new Date(t.created_at).toLocaleString()})]})]})]}),e.jsxs(i,{className:"md:col-span-2",children:[e.jsxs(o,{children:[e.jsx(d,{children:"Publishing Status"}),e.jsx(D,{children:"Status for each platform"})]}),e.jsx(n,{children:e.jsx("div",{className:"space-y-4",children:t.targets.map(s=>{const m=X[s.status],x=O[s.platform],p=k(s);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(x,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:s.platform}),s.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(s.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{className:G[s.status],children:[e.jsx(m,{className:"w-3 h-3 mr-1"}),s.status]}),p&&s.status==="success"&&e.jsx("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx(M,{className:"w-4 h-4"})}),s.status==="success"&&e.jsxs(a,{size:"sm",variant:"outline",onClick:()=>b(s.id,s.platform),className:"text-red-600 hover:text-red-700",children:[e.jsx(I,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},s.id)})})})]})]}),t.targets.some(s=>s.status==="failed"&&s.error_message)&&e.jsxs(i,{children:[e.jsx(o,{children:e.jsx(d,{className:"text-red-600",children:"Error Details"})}),e.jsx(n,{children:e.jsx("div",{className:"space-y-3",children:t.targets.filter(s=>s.status==="failed"&&s.error_message).map(s=>e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(j,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"font-medium capitalize text-red-600",children:[s.platform," Error"]})]}),e.jsx("p",{className:"text-sm text-red-700",children:s.error_message})]},s.id))})})]}),e.jsx(_,{open:v,onOpenChange:c,children:e.jsxs(S,{className:"sm:max-w-md",children:[e.jsxs(V,{children:[e.jsx(T,{children:"Delete Video"}),e.jsx($,{children:"Choose how you want to handle this video deletion. This action cannot be undone."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>l("tikomat"),children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:r==="tikomat",onChange:s=>l(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-tikomat",className:"text-sm font-medium cursor-pointer",children:"Remove only from Tikomat"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will remain published on all platforms but removed from Tikomat's tracking"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>l("all"),children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:r==="all",onChange:s=>l(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-all",className:"text-sm font-medium cursor-pointer",children:"Take down from all platforms"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will be completely removed from all platforms and Tikomat"})]})]})]})}),e.jsxs(E,{children:[e.jsx(a,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:g,children:r==="all"?"Take Down Video":"Remove from Tikomat"})]})]})})]})]})}export{pe as default};
