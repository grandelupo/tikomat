import{r as h,j as e,v as pt,$ as gt,Y as ft,m as Ze}from"./app-DOfgBAdY.js";import{a as X,c as G,B as L}from"./button-DusFDF6e.js";import{C as S,b as M,c as z,a as k,d as es}from"./card-NOvTL9i3.js";import{I as Ps}from"./input-BVtcs4zt.js";import{L as Os}from"./label-MGvNRqK6.js";import{T as bt}from"./textarea-D9HiMTVk.js";import{T as Ye,a as Qe,b as xe,c as he}from"./tabs-BLZjGTdI.js";import{B as I}from"./badge-BEg_nt2T.js";import{D as qs,b as Us,c as Ws,d as Hs,e as Xs,f as jt}from"./dialog-DRrzR5Bi.js";import{B as Ee,X as Je,A as yt}from"./app-layout-xUENHnT-.js";import{P as Ke}from"./progress-4tv84ClZ.js";import{u as cs}from"./use-toast-B3UqC0lt.js";import{V as Me}from"./video-B1_qcYLZ.js";import{F as Nt}from"./file-text-Dzltiasd.js";import{I as Re,T as Is}from"./tag-CKxBWjEH.js";import{T as Fe,C as Be,a as Pe}from"./workflow-Di27OO1P.js";import{R as ce}from"./refresh-cw-BnF8ZL1-.js";import{C as rs}from"./circle-x-DaxSv6O2.js";import{C as Ks}from"./circle-check-big-tqD8yPyD.js";import{E as De}from"./eye-_287pDvY.js";import{H as Gs}from"./heart-Cs_eswSW.js";import{C as ns}from"./clock-B091Ytnr.js";import{C as is}from"./circle-alert-GCCe6kog.js";import{S as vt,a as wt,b as _t,c as St,d as Xe}from"./select-rR8iUN_T.js";import{C as kt}from"./checkbox-r0ANFHGX.js";import{C as Ct}from"./calendar-DYQyY8Vj.js";import{T as Vs}from"./triangle-alert-B_FZwXxz.js";import{A as Bs}from"./arrow-up-BfTQ0iol.js";import{A as ss,S as ls}from"./sparkles-B-hcJuTJ.js";import{L as Tt}from"./lightbulb-Cnhxl-Pl.js";import{P as Ft}from"./pause-BpA3rzOZ.js";import{P as Js}from"./play-D1Q0gnRP.js";import{C as At,P as Ys}from"./palette-Ca75FlXN.js";import{D as Et}from"./download-CliY2Fx8.js";import{E as ts}from"./ErrorBoundary-BcSKaUQk.js";import{U as Mt}from"./user-uh8TWG_5.js";import{S as zt}from"./star-SCfsWb67.js";import{A as $t}from"./arrow-left-DfMfUNVM.js";import{T as Rt}from"./trash-2-mDx0_Qn_.js";import{Z as Pt}from"./zap-CI1ioqk7.js";import{I as Ot,Y as It}from"./youtube-DTGwUPFx.js";import{U as Vt}from"./upload-C5eo_aGQ.js";import"./index-BcMPJG2j.js";import"./index-B3GgOWpq.js";import"./index-DDvtniew.js";import"./chevron-down-Dyp32wui.js";import"./check-Dn7lRlwn.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Dt=X("AlignCenter",Bt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],qt=X("AlignLeft",Lt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Wt=X("AlignRight",Ut);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Ds=X("ArrowDown",Ht);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Kt=X("Bold",Xt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Jt=X("ExternalLink",Gt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yt=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],Qt=X("Film",Yt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],ea=X("Italic",Zt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sa=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],ta=X("Languages",sa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aa=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],ra=X("Maximize",aa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const na=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],as=X("Mic",na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],la=X("Minimize",ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ca=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],oa=X("Save",ca);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],Qs=X("Settings2",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],xa=X("Share2",ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],Ge=X("TestTube",ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],pa=X("TrendingDown",ua);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],fa=X("Trophy",ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],Zs=X("Type",ba);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],ya=X("Underline",ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],va=X("WandSparkles",Na);function wa({videoId:t,videoPath:f,onAnalysisComplete:o,className:a}){var y,H,q,P,$,N,B,C,E,T,Y,D,ie,ae,oe,ue,Ae,pe,ge,ye,fe,Ne,ve,we,_e,F,Se,be,ke,x,l,u;const[m,R]=h.useState(null),[J,U]=h.useState(!1),[re,ne]=h.useState("overview"),{toast:A}=cs(),W=async()=>{var r;if(!t){A({title:"No Video Selected",description:"Please select a video first before analyzing.",variant:"destructive"});return}U(!0);try{const d=await fetch("/ai/analyze-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({video_id:t})}),p=await d.json();p.success?(R(p.data),o==null||o(p.data),A({title:"Analysis Complete! 🎬",description:"AI has analyzed your video and extracted valuable insights."})):d.status===404?A({title:"Video File Not Found",description:"The video file associated with this record could not be found. Please re-upload the video.",variant:"destructive"}):A({title:"Analysis Failed",description:p.message||"Failed to analyze video. Please try again.",variant:"destructive"})}catch(d){console.error("Video analysis error:",d),A({title:"Analysis Failed",description:"Failed to analyze video. Please try again.",variant:"destructive"})}finally{U(!1)}},Z=r=>{const d=Math.floor(r/60),p=Math.floor(r%60);return`${d}:${p.toString().padStart(2,"0")}`},V=r=>`${(r/1048576).toFixed(1)} MB`,de=r=>r>=80?"text-green-600 bg-green-100":r>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",ee=r=>({positive:"😊",energetic:"⚡",calm:"😌",professional:"💼",casual:"😎",inspirational:"✨",neutral:"😐"})[r]||"😐",_=r=>({educational:"📚",entertainment:"🎭",gaming:"🎮",lifestyle:"🏠",fitness:"💪",food:"🍳",travel:"✈️",tech:"💻",music:"🎵",fashion:"👗",business:"💼",diy:"🔨",general:"📹"})[r]||"📹",O=()=>{if(!(m!=null&&m.quality_score))return!1;const r=m.quality_score.resolution_score||0,d=m.quality_score.audio_score||0,p=m.quality_score.bitrate_score||0;return r<70||d<70||p<70},i=()=>{if(!(m!=null&&m.quality_score))return[];const r=[],d=m.quality_score.resolution_score||0,p=m.quality_score.audio_score||0,v=m.quality_score.bitrate_score||0;return d<70&&r.push({type:"Resolution",score:d,severity:d<40?"high":"medium"}),p<70&&r.push({type:"Audio Quality",score:p,severity:p<40?"high":"medium"}),v<70&&r.push({type:"Bitrate",score:v,severity:v<40?"high":"medium"}),r};return!m&&!J?e.jsxs(S,{className:G("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",a),children:[e.jsxs(M,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit",children:e.jsx(Ee,{className:"w-8 h-8 text-white"})}),e.jsx(z,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analyzer"}),e.jsx("p",{className:"text-gray-600",children:"Get comprehensive insights about your video content using advanced AI analysis"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Me,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Video Quality"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Nt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Transcription"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Re,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Scene Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Fe,{className:"w-6 h-6 text-pink-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Engagement Prediction"})]})]}),e.jsxs(L,{onClick:W,disabled:!f,size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(Ee,{className:"w-5 h-5 mr-2"}),"Start AI Analysis"]}),!f&&e.jsx("p",{className:"text-sm text-gray-500",children:"Upload a video first to enable AI analysis"})]})]}):J?e.jsx(S,{className:G("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",a),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit animate-pulse",children:e.jsx(Ee,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Your Video..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Our AI is processing your video to extract valuable insights"}),e.jsx(Ke,{value:75,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Extracting audio..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing scenes..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Predicting engagement..."})]})]})]})}):!m||!m.basic_info?e.jsx(S,{className:G("border-2 border-red-200 bg-red-50",a),children:e.jsxs(k,{className:"p-8 text-center",children:[e.jsx(rs,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Analysis Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The video analysis data is incomplete or corrupted."}),e.jsxs(L,{onClick:W,variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs(S,{className:G("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",a),children:[e.jsx(M,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:e.jsx(Ee,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive insights powered by artificial intelligence"})]})]}),e.jsxs(L,{onClick:W,disabled:J,size:"sm",variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(k,{children:[e.jsxs(Ye,{value:re,onValueChange:ne,className:"w-full",children:[e.jsxs(Qe,{className:"grid w-full grid-cols-3",children:[e.jsx(xe,{value:"overview",children:"Overview"}),e.jsx(xe,{value:"engagement",children:"Engagement"}),e.jsx(xe,{value:"chapters",children:"Chapters"})]}),e.jsxs(he,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Me,{className:"w-5 h-5"}),"Video Information"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:Z(((y=m.basic_info)==null?void 0:y.duration)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Resolution:"}),e.jsxs("span",{className:"font-medium",children:[((H=m.basic_info)==null?void 0:H.width)||0,"×",((q=m.basic_info)==null?void 0:q.height)||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"File Size:"}),e.jsx("span",{className:"font-medium",children:V(((P=m.basic_info)==null?void 0:P.file_size)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Audio:"}),e.jsx(I,{variant:($=m.basic_info)!=null&&$.has_audio?"default":"destructive",children:(N=m.basic_info)!=null&&N.has_audio?"Present":"Missing"})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ee,{className:"w-5 h-5"}),"Content Analysis"]})}),e.jsxs(k,{className:"space-y-3",children:[m.content_category&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsxs(I,{className:"bg-blue-100 text-blue-800",children:[_(m.content_category.primary_category)," ",m.content_category.primary_category]})]}),m.mood_analysis&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Mood:"}),e.jsxs(I,{className:"bg-green-100 text-green-800",children:[ee(m.mood_analysis.dominant_mood)," ",m.mood_analysis.dominant_mood]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Transcript:"}),e.jsx(I,{variant:(B=m.transcript)!=null&&B.success?"default":"destructive",children:(C=m.transcript)!=null&&C.success?e.jsxs(e.Fragment,{children:[e.jsx(Ks,{className:"w-3 h-3 mr-1"}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(rs,{className:"w-3 h-3 mr-1"}),"Failed"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Content Tags:"}),e.jsxs("span",{className:"font-medium",children:[((E=m.content_tags)==null?void 0:E.length)||0," tags"]})]})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Overall Scores"]})}),e.jsx(k,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:G("text-3xl font-bold p-4 rounded-lg mb-2",de(((T=m.quality_score)==null?void 0:T.overall_score)||0)),children:[((Y=m.quality_score)==null?void 0:Y.overall_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Video Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:G("text-3xl font-bold p-4 rounded-lg mb-2",de(((D=m.engagement_predictions)==null?void 0:D.engagement_score)||0)),children:[((ie=m.engagement_predictions)==null?void 0:ie.engagement_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Engagement Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold p-4 bg-purple-100 text-purple-800 rounded-lg mb-2",children:((ae=m.engagement_predictions)==null?void 0:ae.virality_potential)||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Virality Potential"})]})]})})]})]}),e.jsx(he,{value:"engagement",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(M,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"Engagement Predictions"]})}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(De,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:(((ue=(oe=m.engagement_predictions)==null?void 0:oe.predicted_views)==null?void 0:ue.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-blue-600",children:"Expected Views"})]}),e.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[e.jsx(Gs,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-pink-800",children:(((pe=(Ae=m.engagement_predictions)==null?void 0:Ae.predicted_likes)==null?void 0:pe.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-pink-600",children:"Expected Likes"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(xa,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:(((ye=(ge=m.engagement_predictions)==null?void 0:ge.predicted_shares)==null?void 0:ye.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"Expected Shares"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Prediction Ranges"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Views"}),e.jsxs("span",{children:[(((Ne=(fe=m.engagement_predictions)==null?void 0:fe.predicted_views)==null?void 0:Ne.conservative)||0).toLocaleString()," - ",(((we=(ve=m.engagement_predictions)==null?void 0:ve.predicted_views)==null?void 0:we.optimistic)||0).toLocaleString()]})]}),e.jsx(Ke,{value:60,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Likes"}),e.jsxs("span",{children:[(((F=(_e=m.engagement_predictions)==null?void 0:_e.predicted_likes)==null?void 0:F.conservative)||0).toLocaleString()," - ",(((be=(Se=m.engagement_predictions)==null?void 0:Se.predicted_likes)==null?void 0:be.optimistic)||0).toLocaleString()]})]}),e.jsx(Ke,{value:60,className:"h-2"})]})]})]})]})]})}),e.jsx(he,{value:"chapters",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(M,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(ns,{className:"w-5 h-5"}),"Auto-Generated Chapters"]})}),e.jsx(k,{children:(((ke=m.auto_chapters)==null?void 0:ke.length)||0)===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(ns,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No chapters detected"}),e.jsx("p",{className:"text-sm",children:"Video may be too short or lack clear segment divisions"})]}):e.jsx("div",{className:"space-y-3",children:(m.auto_chapters||[]).map((r,d)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(I,{variant:"outline",className:"mt-1",children:Z(r.start_time)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:r.title}),e.jsx("p",{className:"text-sm text-gray-600",children:r.description})]})]},d))})})]})})]}),O()&&e.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(is,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-800",children:"Video Quality Suggestions"})]}),e.jsxs("div",{className:"space-y-3",children:[i().map((r,d)=>e.jsxs("div",{className:G("flex items-center justify-between p-3 rounded-lg",r.severity==="high"?"bg-red-100 border border-red-200":"bg-yellow-100 border border-yellow-200"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:G("w-2 h-2 rounded-full",r.severity==="high"?"bg-red-500":"bg-yellow-500")}),e.jsxs("span",{className:G("font-medium",r.severity==="high"?"text-red-800":"text-yellow-800"),children:[r.type," needs improvement"]})]}),e.jsxs(I,{variant:"outline",className:G(r.severity==="high"?"border-red-300 text-red-700":"border-yellow-300 text-yellow-700"),children:["Score: ",r.score,"/100"]})]},d)),(((x=m.quality_score)==null?void 0:x.suggestions)||[]).length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-orange-200",children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-2",children:"Recommendations:"}),e.jsx("div",{className:"space-y-2",children:(((l=m.quality_score)==null?void 0:l.suggestions)||[]).map((r,d)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-orange-700",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:r})]},d))})]})]})]}),m.status==="partial_analysis"&&((u=m.errors)==null?void 0:u.length)&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(is,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-800",children:"Partial Analysis"})]}),e.jsx("div",{className:"space-y-1",children:(m.errors||[]).map((r,d)=>e.jsx("p",{className:"text-sm text-yellow-700",children:r},d))})]})]})]})}function _a({videoId:t,className:f}){var H,q,P,$,N,B,C,E,T,Y,D,ie,ae,oe,ue,Ae,pe,ge,ye,fe,Ne,ve,we,_e,F,Se,be,ke;const[o,a]=h.useState(null),[m,R]=h.useState(!1),[J,U]=h.useState("overview"),[re,ne]=h.useState(!1),[A,W]=h.useState(null),{toast:Z}=cs(),V=async()=>{var x;if(!t){Z({title:"No Video Selected",description:"Please select a video to analyze performance.",variant:"destructive"});return}R(!0);try{const u=await(await fetch("/ai/analyze-video-performance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({video_id:t})})).json();if(u.success)a(u.data),Z({title:"Performance Analysis Complete! 📊",description:"AI has analyzed your video performance across all platforms."});else throw new Error(u.message||"Failed to analyze performance")}catch(l){console.error("Performance analysis error:",l),Z({title:"Analysis Failed",description:"Failed to analyze video performance. Please try again.",variant:"destructive"})}finally{R(!1)}},de=async x=>{var l;try{const r=await(await fetch("/ai/create-ab-test",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_id:t,...x})})).json();if(r.success)Z({title:"A/B Test Created! 🧪",description:"Your A/B test has been set up and will start collecting data."}),ne(!1);else throw new Error(r.message||"Failed to create A/B test")}catch(u){console.error("A/B test creation error:",u),Z({title:"A/B Test Failed",description:"Failed to create A/B test. Please try again.",variant:"destructive"})}},ee=x=>x>=1e6?`${(x/1e6).toFixed(1)}M`:x>=1e3?`${(x/1e3).toFixed(1)}K`:x.toString(),_=x=>{switch(x){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"average":return"text-yellow-600 bg-yellow-100";case"needs_improvement":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},O=x=>{switch(x){case"increasing":return e.jsx(Fe,{className:"w-4 h-4 text-green-600"});case"decreasing":return e.jsx(pa,{className:"w-4 h-4 text-red-600"});default:return e.jsx(ss,{className:"w-4 h-4 text-blue-600"})}},i=x=>({youtube:"📺",instagram:"📷",tiktok:"🎵",twitter:"🐦",facebook:"👥"})[x]||"📱",y=x=>{switch(x){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return!o&&!m?e.jsxs(S,{className:G("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",f),children:[e.jsxs(M,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit",children:e.jsx(Be,{className:"w-8 h-8 text-white"})}),e.jsx(z,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Performance Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Analyze your video performance and get AI-powered optimization recommendations"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Fe,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Performance Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Pe,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Optimization Tips"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ge,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"A/B Testing"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ct,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Timing Optimization"})]})]}),e.jsxs(L,{onClick:V,disabled:!t,size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(Be,{className:"w-5 h-5 mr-2"}),"Start Performance Analysis"]}),!t&&e.jsx("p",{className:"text-sm text-gray-500",children:"Select a video first to enable performance analysis"})]})]}):m?e.jsx(S,{className:G("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",f),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit animate-pulse",children:e.jsx(Be,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Performance..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing your video performance across all platforms"}),e.jsx(Ke,{value:85,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing metrics..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Finding opportunities..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Generating recommendations..."})]})]})]})}):!o||!o.overall_performance||!o.comparative_analysis||!o.platform_breakdown||!o.trend_analysis?e.jsx(S,{className:G("border-2 border-red-200 bg-gradient-to-br from-red-50 to-orange-50",f),children:e.jsxs(k,{className:"p-8 text-center space-y-4",children:[e.jsx(Vs,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Analysis Data Incomplete"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The performance analysis data is incomplete or missing."}),e.jsxs(L,{onClick:V,variant:"outline",className:"border-red-300 text-red-700",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})}):e.jsxs(S,{className:G("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",f),children:[e.jsx(M,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Performance Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered performance insights and optimization recommendations"})]})]}),e.jsxs(L,{onClick:V,disabled:m,size:"sm",variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(k,{children:[e.jsxs(Ye,{value:J,onValueChange:U,className:"w-full",children:[e.jsxs(Qe,{className:"grid w-full grid-cols-6",children:[e.jsx(xe,{value:"overview",children:"Overview"}),e.jsx(xe,{value:"platforms",children:"Platforms"}),e.jsx(xe,{value:"opportunities",children:"Opportunities"}),e.jsx(xe,{value:"trends",children:"Trends"}),e.jsx(xe,{value:"timing",children:"Timing"}),e.jsx(xe,{value:"testing",children:"A/B Testing"})]}),e.jsxs(he,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Total Performance"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[o.performance_score,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Views:"}),e.jsx("span",{className:"font-medium",children:ee(((H=o.overall_performance)==null?void 0:H.total_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Engagement Rate:"}),e.jsxs("span",{className:"font-medium",children:[((q=o.overall_performance)==null?void 0:q.engagement_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Performance Tier:"}),e.jsx(I,{className:_(((P=o.overall_performance)==null?void 0:P.performance_tier)||"unknown"),children:((($=o.overall_performance)==null?void 0:$.performance_tier)||"unknown").replace("_"," ")})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"Industry Comparison"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Views vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((B=(N=o.comparative_analysis)==null?void 0:N.views_vs_industry)==null?void 0:B.performance)||"below_average")==="above_average"?e.jsx(Bs,{className:"w-3 h-3 text-green-600"}):e.jsx(Ds,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:G("text-sm font-medium",(((E=(C=o.comparative_analysis)==null?void 0:C.views_vs_industry)==null?void 0:E.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((Y=(T=o.comparative_analysis)==null?void 0:T.views_vs_industry)==null?void 0:Y.difference_percentage)||0),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((ie=(D=o.comparative_analysis)==null?void 0:D.engagement_vs_industry)==null?void 0:ie.performance)||"below_average")==="above_average"?e.jsx(Bs,{className:"w-3 h-3 text-green-600"}):e.jsx(Ds,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:G("text-sm font-medium",(((oe=(ae=o.comparative_analysis)==null?void 0:ae.engagement_vs_industry)==null?void 0:oe.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((Ae=(ue=o.comparative_analysis)==null?void 0:ue.engagement_vs_industry)==null?void 0:Ae.difference_percentage)||0),"%"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Growth Potential:"}),e.jsxs("div",{className:"text-lg font-medium text-purple-600",children:[ee(((ge=(pe=o.comparative_analysis)==null?void 0:pe.growth_potential)==null?void 0:ge.views_growth_potential)||0)," more views"]})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Improvement Potential"]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[o.improvement_potential,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Potential"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Platforms:"}),e.jsx("span",{className:"font-medium",children:((ye=o.overall_performance)==null?void 0:ye.platform_count)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Days Since Upload:"}),e.jsx("span",{className:"font-medium",children:((fe=o.overall_performance)==null?void 0:fe.days_since_upload)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(I,{variant:"outline",children:((Ne=o.trend_analysis)==null?void 0:Ne.lifecycle_stage)||"unknown"})]})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"Platform Performance Overview"]})}),e.jsx(k,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(o.platform_breakdown||{}).map(([x,l])=>e.jsxs("div",{className:"text-center p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:i(x)}),e.jsx("div",{className:"font-medium capitalize mb-1",children:x}),e.jsxs("div",{className:"text-sm text-gray-600",children:["#",(l==null?void 0:l.ranking)||0]}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[(l==null?void 0:l.performance_score)||0,"/100"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ee((l==null?void 0:l.views)||0)," views"]})]},x))})})]})]}),e.jsx(he,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(o.platform_breakdown||{}).map(([x,l])=>e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:i(x)}),e.jsx("span",{className:"capitalize",children:x}),e.jsxs(I,{className:"ml-2",children:["#",(l==null?void 0:l.ranking)||0]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(l==null?void 0:l.performance_score)||0,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[e.jsx(De,{className:"w-6 h-6 text-blue-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:ee((l==null?void 0:l.views)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Views"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[e.jsx(Gs,{className:"w-6 h-6 text-green-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:ee((l==null?void 0:l.engagement)||0)}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Engagement"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[e.jsx(Fe,{className:"w-6 h-6 text-purple-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[(l==null?void 0:l.engagement_rate)||0,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Engagement Rate"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[((l==null?void 0:l.strengths)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(fa,{className:"w-4 h-4"}),"Strengths"]}),e.jsx("ul",{className:"space-y-1",children:((l==null?void 0:l.strengths)||[]).map((u,r)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mt-2 flex-shrink-0"}),u]},r))})]}),((l==null?void 0:l.weaknesses)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(Vs,{className:"w-4 h-4"}),"Areas for Improvement"]}),e.jsx("ul",{className:"space-y-1",children:((l==null?void 0:l.weaknesses)||[]).map((u,r)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full mt-2 flex-shrink-0"}),u]},r))})]})]}),((l==null?void 0:l.recommendations)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx(Tt,{className:"w-4 h-4"}),"Recommendations"]}),e.jsx("div",{className:"space-y-2",children:((l==null?void 0:l.recommendations)||[]).map((u,r)=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("span",{className:"text-sm text-blue-800",children:u})},r))})]})]})]},x))})}),e.jsx(he,{value:"opportunities",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(o.optimization_opportunities||{}).map(([x,l])=>e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:i(x)}),e.jsxs("span",{className:"capitalize",children:[x," Opportunities"]})]})}),e.jsx(k,{className:"space-y-4",children:(l||[]).map((u,r)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Pe,{className:"w-4 h-4"}),(u==null?void 0:u.title)||"Untitled"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(u==null?void 0:u.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{className:y((u==null?void 0:u.priority)||"low"),children:(u==null?void 0:u.priority)||"low"}),e.jsxs(I,{variant:"outline",children:[(u==null?void 0:u.potential_impact)||"unknown"," impact"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Action Steps:"}),e.jsx("div",{className:"space-y-1",children:((u==null?void 0:u.actions)||[]).map((d,p)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),d]},p))})]})]},r))})]},x))})}),e.jsx(he,{value:"trends",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(ss,{className:"w-5 h-5"}),"Trend Analysis"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trend Direction:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[O(((ve=o.trend_analysis)==null?void 0:ve.trend_direction)||"stable"),e.jsx("span",{className:"font-medium capitalize",children:((we=o.trend_analysis)==null?void 0:we.trend_direction)||"stable"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Avg Views:"}),e.jsx("span",{className:"font-medium",children:ee(((_e=o.trend_analysis)==null?void 0:_e.daily_average_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Momentum Score:"}),e.jsxs("span",{className:"font-medium",children:[((F=o.trend_analysis)==null?void 0:F.momentum_score)||0,"/100"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(I,{variant:"outline",children:((Se=o.trend_analysis)==null?void 0:Se.lifecycle_stage)||"unknown"})]})]})]}),e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5"}),"Performance Projections"]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ee(((be=o.trend_analysis)==null?void 0:be.projected_30_day_views)||0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Projected 30-Day Views"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Peak Performance Day:"}),e.jsxs("span",{className:"font-medium",children:["Day ",((ke=o.trend_analysis)==null?void 0:ke.peak_performance_day)||0]})]})]})]})]})}),e.jsx(he,{value:"timing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(o.posting_time_optimization||{}).map(([x,l])=>e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:i(x)}),e.jsxs("span",{className:"capitalize",children:[x," Timing Optimization"]})]})}),e.jsx(k,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Current Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted at:"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.current_posting_time)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Day type:"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.current_day_type)||"unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Improvement potential:"}),e.jsx(I,{className:y((l==null?void 0:l.improvement_potential)||"low"),children:(l==null?void 0:l.improvement_potential)||"low"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimal Times"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Best time:"}),e.jsx("span",{className:"font-medium text-green-600",children:(l==null?void 0:l.best_time)||"unknown"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"All optimal times:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:((l==null?void 0:l.optimal_times)||[]).map((u,r)=>e.jsx(I,{variant:"outline",className:"text-xs",children:u},r))})]})]})]})})]},x))})}),e.jsx(he,{value:"testing",className:"space-y-4",children:e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),"A/B Testing Suggestions"]})}),e.jsx(k,{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:(o.ab_test_suggestions||[]).map((x,l)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),(x==null?void 0:x.title)||"Untitled Test"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(x==null?void 0:x.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(I,{className:y((x==null?void 0:x.priority)||"low"),children:(x==null?void 0:x.priority)||"low"}),e.jsx(L,{size:"sm",onClick:()=>{W(x),ne(!0)},children:"Start Test"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Test Variations:"}),e.jsx("div",{className:"space-y-1",children:((x==null?void 0:x.test_variations)||[]).map((u,r)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),u]},r))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Success Metrics:"}),e.jsx("div",{className:"space-y-1",children:((x==null?void 0:x.success_metrics)||[]).map((u,r)=>e.jsx(I,{variant:"outline",className:"text-xs mr-1",children:u.replace("_"," ")},r))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Duration: ",(x==null?void 0:x.duration)||"Unknown"]})]})]})]},l))})})]})})]}),e.jsx(qs,{open:re,onOpenChange:ne,children:e.jsxs(Us,{className:"max-w-md",children:[e.jsxs(Ws,{children:[e.jsx(Hs,{children:"Create A/B Test"}),e.jsxs(Xs,{children:['Set up an A/B test for "',A==null?void 0:A.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Test Duration (days)"}),e.jsxs(vt,{defaultValue:"14",children:[e.jsx(wt,{children:e.jsx(_t,{})}),e.jsxs(St,{children:[e.jsx(Xe,{value:"7",children:"7 days"}),e.jsx(Xe,{value:"14",children:"14 days"}),e.jsx(Xe,{value:"21",children:"21 days"}),e.jsx(Xe,{value:"30",children:"30 days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Success Metrics"}),e.jsx("div",{className:"space-y-2",children:((A==null?void 0:A.success_metrics)||[]).map((x,l)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kt,{id:`metric-${l}`,defaultChecked:!0}),e.jsx("label",{htmlFor:`metric-${l}`,className:"text-sm",children:x.replace("_"," ")})]},l))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(L,{variant:"outline",onClick:()=>ne(!1),children:"Cancel"}),e.jsx(L,{onClick:()=>de({test_type:A==null?void 0:A.test_type,test_variations:A==null?void 0:A.test_variations,success_metrics:A==null?void 0:A.success_metrics,test_duration_days:14}),children:"Create Test"})]})]})]})})]})]})}const Sa=(t,f,o)=>{const a=document.createElement("div");a.style.position="absolute",a.style.left=`${t}px`,a.style.top=`${f}px`,a.style.width="6px",a.style.height="6px",a.style.backgroundColor=o,a.style.borderRadius="50%",a.style.pointerEvents="none",a.style.zIndex="1000";const m=(Math.random()-.5)*100,R=(Math.random()-.5)*100;return a.animate([{transform:"translate(0, 0) rotate(0deg)",opacity:1},{transform:`translate(${m}px, ${R}px) rotate(360deg)`,opacity:0}],{duration:800,easing:"ease-out"}).onfinish=()=>{a.parentNode&&a.parentNode.removeChild(a)},a},ka=({subtitle:t,currentTime:f,position:o,onMouseDown:a,onDoubleClick:m,editingSubtitle:R,editingText:J,onTextChange:U,onSaveEdit:re,onCancelEdit:ne})=>{var _,O;const A=h.useRef(null),[W,Z]=h.useState(new Set);h.useEffect(()=>{var i,y;console.log("AdvancedSubtitleRenderer: Complete subtitle object:",t),console.log("AdvancedSubtitleRenderer: Subtitle words:",t.words),console.log("AdvancedSubtitleRenderer: Words array length:",((i=t.words)==null?void 0:i.length)||0),console.log("AdvancedSubtitleRenderer: Subtitle text:",t.text),console.log("AdvancedSubtitleRenderer: Subtitle style preset:",(y=t.style)==null?void 0:y.preset),console.log("AdvancedSubtitleRenderer: Subtitle time range:",t.start_time,"-",t.end_time),console.log("AdvancedSubtitleRenderer: Current time:",f),console.log("AdvancedSubtitleRenderer: Is subtitle active?",f>=t.start_time&&f<=t.end_time)},[t,f]),h.useEffect(()=>{var H,q,P,$,N,B;const i=f>=t.start_time&&f<=t.end_time;if(!i){Z(new Set);return}if(!t.words||t.words.length===0){console.log("AdvancedSubtitleRenderer: No word data available for subtitle:",t.text),console.log("AdvancedSubtitleRenderer: Using fallback word timing simulation");return}(((H=t.style)==null?void 0:H.preset)==="bubbles"||((q=t.style)==null?void 0:q.preset)==="confetti")&&(console.log(`${t.style.preset} effect - Current time:`,f),console.log(`${t.style.preset} effect - Words:`,t.words),console.log(`${t.style.preset} effect - Words count:`,t.words.length),console.log(`${t.style.preset} effect - Subtitle time range:`,t.start_time,"-",t.end_time),console.log(`${t.style.preset} effect - Subtitle is active:`,i));const y=new Set;if(((P=t.style)==null?void 0:P.preset)==="confetti"){let C=-1;for(let E=0;E<t.words.length;E++){const T=t.words[E];f>=T.start_time&&f<=T.end_time-.05&&(C=E,console.log(`Confetti - Word ${E} "${T.word}" is active at time ${f} (${T.start_time}-${T.end_time})`))}if(C>=0&&(y.add(C),!W.has(C)&&A.current)){console.log("Triggering confetti for word:",t.words[C].word);const T=A.current.getBoundingClientRect(),Y=["#FFD700","#FF69B4","#00CED1","#FF4500","#9370DB"];for(let D=0;D<8;D++)setTimeout(()=>{const ie=Y[Math.floor(Math.random()*Y.length)],ae=T.left+T.width*Math.random(),oe=T.top+T.height*Math.random(),ue=Sa(ae,oe,ie);document.body.appendChild(ue)},D*30)}}else if((($=t.style)==null?void 0:$.preset)==="bubbles"){let C=-1;for(let E=0;E<t.words.length;E++){const T=t.words[E];f>=T.start_time&&f<=T.end_time-.05&&(C=E,console.log(`Bubbles - Word ${E} "${T.word}" is active at time ${f} (${T.start_time}-${T.end_time})`))}C>=0&&y.add(C)}else t.words.forEach((C,E)=>{f>=C.start_time&&f<=C.end_time&&y.add(E)});(((N=t.style)==null?void 0:N.preset)==="bubbles"||((B=t.style)==null?void 0:B.preset)==="confetti")&&y.size>0&&console.log(`${t.style.preset} effect - Active words count:`,y.size,"Active words:",Array.from(y)),Z(y)},[f,t.words,(_=t.style)==null?void 0:_.preset]);const V=()=>{var i,y,H;if(!t.words||t.words.length===0){if(((i=t.style)==null?void 0:i.preset)==="bubbles"||((y=t.style)==null?void 0:y.preset)==="confetti"){console.log("Using fallback word timing for preset:",t.style.preset);const q=t.text.split(" "),P=q.length/(t.end_time-t.start_time);let $=-1;for(let N=0;N<q.length;N++){const B=t.start_time+N/P,C=t.start_time+(N+1)/P;if(f>=B&&f<=C-.05){$=N;break}}return q.map((N,B)=>{var T,Y,D,ie,ae;const C=B===$;if(C&&((T=t.style)==null?void 0:T.preset)==="bubbles"){const oe=t.start_time+B/P,ue=t.start_time+(B+1)/P;console.log(`Fallback bubbles - Active word ${B}: "${N}" (${oe.toFixed(2)}-${ue.toFixed(2)})`)}const E={display:"inline-block",margin:"0 0.1em",flexShrink:0};return((Y=t.style)==null?void 0:Y.preset)==="confetti"?e.jsx("span",{style:{...E,opacity:C?1:.4,transform:C?"scale(1.3)":"scale(1)",transition:C?"all 0.1s ease-out":"all 0.05s ease-in",fontWeight:"bold",color:"#FFFFFF",textShadow:C?"0 0 15px #FFD700, 0 0 25px #FFD700, 2px 2px 4px rgba(0, 0, 0, 0.8)":"2px 2px 4px rgba(0, 0, 0, 0.8)"},children:N},B):((D=t.style)==null?void 0:D.preset)==="bubbles"?e.jsx("span",{style:{...E,color:C?"#FF1493":((ie=t.style)==null?void 0:ie.color)||"#FFFFFF",transform:C?"scale(1.4)":"scale(1)",transition:C?"all 0.1s cubic-bezier(0.68, -0.55, 0.265, 1.55)":"all 0.05s ease-in",textShadow:C?"0 0 15px #FF1493, 0 0 25px #FF1493, 0 0 35px #FF1493":((ae=t.style)==null?void 0:ae.textShadow)||"3px 3px 6px rgba(0, 0, 0, 0.8)",fontWeight:C?"bold":"normal"},children:N},B):e.jsx("span",{style:E,children:N},B)})}return t.text}return console.log("Using actual word timing data for preset:",(H=t.style)==null?void 0:H.preset),t.words.map((q,P)=>{var B,C,E,T;const $=W.has(P),N={display:"inline-block",margin:"0 0.1em",flexShrink:0};return((B=t.style)==null?void 0:B.preset)==="confetti"?e.jsx("span",{style:{...N,opacity:$?1:.4,transform:$?"scale(1.3)":"scale(1)",transition:$?"all 0.1s ease-out":"all 0.05s ease-in",fontWeight:"bold",color:"#FFFFFF",textShadow:$?"0 0 15px #FFD700, 0 0 25px #FFD700, 2px 2px 4px rgba(0, 0, 0, 0.8)":"2px 2px 4px rgba(0, 0, 0, 0.8)"},children:q.word},P):((C=t.style)==null?void 0:C.preset)==="bubbles"?($&&console.log(`Rendering active bubble word: "${q.word}"`),e.jsx("span",{style:{...N,color:$?"#FF1493":((E=t.style)==null?void 0:E.color)||"#FFFFFF",transform:$?"scale(1.4)":"scale(1)",transition:$?"all 0.1s cubic-bezier(0.68, -0.55, 0.265, 1.55)":"all 0.05s ease-in",textShadow:$?"0 0 15px #FF1493, 0 0 25px #FF1493, 0 0 35px #FF1493":((T=t.style)==null?void 0:T.textShadow)||"3px 3px 6px rgba(0, 0, 0, 0.8)",fontWeight:$?"bold":"normal"},children:q.word},P)):e.jsx("span",{style:N,children:q.word},P)})},de=()=>{const i=Math.max(10,Math.min(90,o.x)),y=Math.max(10,Math.min(90,o.y));return{x:i,y}},ee=()=>{var q,P;const i=t.style||{},y=de(),H=Math.max(16,Math.min(48,i.fontSize||24));return{position:"absolute",left:`${y.x}%`,top:`${y.y}%`,transform:"translate(-50%, -50%)",fontFamily:i.fontFamily||"Arial, sans-serif",fontSize:`${H}px`,fontWeight:i.fontWeight||"bold",color:i.color||"#FFFFFF",background:(q=i.backgroundColor)!=null&&q.includes("gradient")?i.backgroundColor:void 0,backgroundColor:(P=i.backgroundColor)!=null&&P.includes("gradient")?void 0:i.backgroundColor||"rgba(0, 0, 0, 0.7)",textAlign:i.textAlign||"center",borderRadius:`${i.borderRadius||4}px`,padding:`${i.padding||8}px`,textShadow:i.textShadow||"2px 2px 4px rgba(0, 0, 0, 0.5)",fontStyle:i.italic?"italic":"normal",textDecoration:i.underline?"underline":"none",cursor:"move",userSelect:"none",boxShadow:(i==null?void 0:i.preset)==="neon"?"none":void 0,whiteSpace:"normal",wordWrap:"break-word",overflowWrap:"break-word",maxWidth:"85%",minWidth:"200px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",maxHeight:"30%",overflow:"hidden",lineHeight:"1.2"}};return e.jsx("div",{ref:A,style:ee(),onMouseDown:a,onDoubleClick:m,className:`subtitle-container ${((O=t.style)==null?void 0:O.preset)||""}`,children:R?e.jsx("textarea",{value:J||"",onChange:i=>U==null?void 0:U(i.target.value),onKeyDown:i=>{i.key==="Enter"&&!i.shiftKey?(i.preventDefault(),re==null||re()):i.key==="Escape"&&(ne==null||ne())},onBlur:re,className:"subtitle-editor",style:{background:"transparent",border:"none",outline:"none",textAlign:"center",color:"inherit",fontSize:"inherit",fontFamily:"inherit",fontWeight:"inherit",width:"100%",minWidth:"200px",resize:"none",overflow:"hidden",whiteSpace:"normal",wordWrap:"break-word",lineHeight:"inherit"},rows:2,autoFocus:!0}):e.jsx("div",{className:"subtitle-content",style:{textAlign:"inherit",width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:"0.2em"},children:V()})})},Ls=t=>{if(t==="transparent")return"#000000";if(t.startsWith("rgba(")){const o=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(o){const a=parseInt(o[1]).toString(16).padStart(2,"0"),m=parseInt(o[2]).toString(16).padStart(2,"0"),R=parseInt(o[3]).toString(16).padStart(2,"0");return`#${a}${m}${R}`}}if(t.startsWith("rgb(")){const o=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);if(o){const a=parseInt(o[1]).toString(16).padStart(2,"0"),m=parseInt(o[2]).toString(16).padStart(2,"0"),R=parseInt(o[3]).toString(16).padStart(2,"0");return`#${a}${m}${R}`}}const f={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",cyan:"#00ffff",magenta:"#ff00ff",silver:"#c0c0c0",gray:"#808080",maroon:"#800000",olive:"#808000",lime:"#00ff00",aqua:"#00ffff",teal:"#008080",navy:"#000080",fuchsia:"#ff00ff",purple:"#800080"};return f[t.toLowerCase()]?f[t.toLowerCase()]:t.startsWith("#")&&/^#[0-9A-Fa-f]{6}$/.test(t)?t:"#000000"},Ca=({videoPath:t,videoId:f,videoTitle:o})=>{var us,ps,gs,fs,bs,js,ys,Ns,vs,ws,_s,Ss,ks,Cs,Ts,Fs,As,Es,Ms,zs,$s;const[a,m]=h.useState(null),[R,J]=h.useState(!1),[U,re]=h.useState(!1),[ne,A]=h.useState(!1),[W,Z]=h.useState(!1),V=h.useRef(null),[de,ee]=h.useState({}),[_,O]=h.useState("en"),[i,y]=h.useState(null),[H,q]=h.useState("standard"),[P,$]=h.useState(null),[N,B]=h.useState(null),[C,E]=h.useState(null),[T,Y]=h.useState(!1),[D,ie]=h.useState(0),[ae,oe]=h.useState(0),[ue,Ae]=h.useState(!1),[pe,ge]=h.useState(null),[ye,fe]=h.useState(""),[Ne,ve]=h.useState(null),[we,_e]=h.useState({x:0,y:0}),F=h.useRef(null),Se=h.useRef(null),be=h.useRef(null),ke=h.useRef(null),[x,l]=h.useState(null),[u,r]=h.useState(null),[d,p]=h.useState(!1),[v,Q]=h.useState(null),[j,se]=h.useState(null),le={standard:{name:"Standard",style:{fontFamily:"Arial, sans-serif",fontSize:32,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.7)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:4,padding:8,textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)",preset:"standard"}},"no-background":{name:"No Background",style:{fontFamily:"Arial, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"no-background"}},neon:{name:"Neon",style:{fontFamily:"Impact, Arial Black, sans-serif",fontSize:40,fontWeight:"bold",color:"#00FFFF",backgroundColor:"rgba(0, 20, 40, 0.8)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:8,padding:12,textShadow:"0 0 10px #00FFFF, 0 0 20px #00FFFF",preset:"neon"}},confetti:{name:"Confetti",style:{fontFamily:"Comic Sans MS, cursive",fontSize:38,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"2px 2px 0px #000000, -2px -2px 0px #000000, 2px -2px 0px #000000, -2px 2px 0px #000000",preset:"confetti"}},bubbles:{name:"Bubbles",style:{fontFamily:"Trebuchet MS, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"bubbles"}}},te=le.standard.style;h.useEffect(()=>(qe(),()=>{P&&clearInterval(P)}),[]),h.useEffect(()=>{f&&(console.log("Checking existing subtitles for video ID:",f),os())},[f]);const os=async()=>{var s,n;if(!f){console.log("No video ID available, skipping subtitle check");return}console.log("Checking for existing subtitles for video:",f);try{const g=await(await fetch("/ai/subtitle-check",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:f})})).json();if(console.log("Subtitle check response:",g),g.success&&g.data&&g.data.processing_status==="completed"){console.log("Found existing subtitles, loading them:",g.data);const b=((n=g.data.subtitles)==null?void 0:n.map(w=>({...w,style:w.style||te,position:w.position||{x:50,y:85}})))||[];m({...g.data,original_video_path:t,subtitles:b}),console.log("Loaded subtitles with styles:",b),g.data.generation_id&&Le(g.data.generation_id)}else console.log("No existing subtitles found for this video")}catch(c){console.error("Error checking existing subtitles:",c)}},Le=async s=>{try{console.log("Loading word timing data for generation:",s);const n=await fetch(`/ai/word-timing/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(n.ok){const c=await n.json();c.success&&c.data?(console.log("Word timing data loaded:",c.data),E(c.data),m(g=>{var Ce,Te,He,Ve;if(!g||!g.subtitles)return g;const b=new Map;c.data.words.forEach(me=>{b.has(me.subtitle_id)||b.set(me.subtitle_id,[]),b.get(me.subtitle_id).push({word:me.word,start_time:me.start_time,end_time:me.end_time,confidence:me.confidence})});const w=g.subtitles.map(me=>{const Rs=b.get(me.id)||[];return console.log(`Merging words for subtitle ${me.id}: ${Rs.length} words`),{...me,words:Rs}});console.log("Updated subtitles with word timing:",w),console.log("First subtitle word count after merge:",((Te=(Ce=w[0])==null?void 0:Ce.words)==null?void 0:Te.length)||0),console.log("First subtitle words sample:",(Ve=(He=w[0])==null?void 0:He.words)==null?void 0:Ve.slice(0,3));const K=w.filter(me=>me.words&&me.words.length>0);return console.log(`Subtitles with word timing: ${K.length}/${w.length}`),{...g,subtitles:w}})):console.log("No word timing data available")}else console.log("Word timing data not found or not accessible")}catch(n){console.error("Error loading word timing data:",n)}};h.useEffect(()=>{if(a&&a.processing_status==="processing"){const s=setInterval(()=>{et()},2e3);return $(s),()=>clearInterval(s)}else P&&(clearInterval(P),$(null))},[a==null?void 0:a.processing_status]),h.useEffect(()=>{const s=F.current;if(!s)return;const n=()=>{ie(s.currentTime)},c=()=>{oe(s.duration)};return s.addEventListener("timeupdate",n),s.addEventListener("loadedmetadata",c),()=>{s.removeEventListener("timeupdate",n),s.removeEventListener("loadedmetadata",c)}},[]);const qe=async()=>{try{const n=await(await fetch("/ai/subtitle-languages")).json();n.success&&ee(n.data)}catch(s){console.error("Error loading languages:",s)}},Ue=async()=>{var s;if(!f){alert("No video ID available for subtitle generation. Please ensure the video is properly uploaded.");return}J(!0);try{const c=await(await fetch("/ai/subtitle-generate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:f,language:_})})).json();c.success?m({...c.data,original_video_path:t}):(console.error("Generation failed:",c.message),alert(`Subtitle generation failed: ${c.message}`))}catch(n){console.error("Error starting generation:",n)}finally{J(!1)}},et=async()=>{var s;if(a!=null&&a.generation_id)try{const c=await(await fetch("/ai/subtitle-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id})})).json();c.success&&m(g=>{const b={...g,...c.data,original_video_path:(g==null?void 0:g.original_video_path)||t};return c.data.processing_status==="completed"&&c.data.generation_id&&!C&&Le(c.data.generation_id),b})}catch(n){console.error("Error polling progress:",n)}},st=()=>{const s=F.current;s&&(T?s.pause():s.play(),Y(!T))},tt=s=>{const n=F.current,c=Se.current;if(!n||!c)return;const g=c.getBoundingClientRect(),w=(s.clientX-g.left)/g.width*ae;n.currentTime=w,ie(w)},We=()=>a!=null&&a.subtitles&&a.subtitles.find(s=>D>=s.start_time&&D<=s.end_time)||null,at=async()=>{var c;const s=F.current,n=ke.current;if(!s||!n||!f){alert("Unable to capture frame. Please ensure video is loaded.");return}A(!0);try{n.width=s.videoWidth,n.height=s.videoHeight;const g=n.getContext("2d");if(!g)throw new Error("Unable to get canvas context");g.drawImage(s,0,0,n.width,n.height);const b=await new Promise((Te,He)=>{n.toBlob(Ve=>{Ve?Te(Ve):He(new Error("Failed to create blob from canvas"))},"image/jpeg",.8)}),w=new FormData;w.append("video_id",f.toString()),w.append("frame_id",`frame_${Date.now()}`),w.append("thumbnail",b,"thumbnail.jpg"),w.append("current_time",D.toString());const Ce=await(await fetch("/ai/set-video-thumbnail-from-frame",{method:"POST",headers:{"X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:w})).json();if(Ce.success){const Te=document.createElement("div");Te.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",Te.textContent="✓ Thumbnail set successfully!",document.body.appendChild(Te),setTimeout(()=>{document.body.removeChild(Te)},3e3)}else alert(`Failed to set thumbnail: ${Ce.message}`)}catch(g){console.error("Error setting thumbnail:",g),alert("Failed to capture and set thumbnail. Please try again.")}finally{A(!1)}},ds=s=>{const n=a==null?void 0:a.subtitles.find(c=>c.id===s);n&&(ge(s),fe(n.text))},rt=async()=>{var s;if(!(!pe||!a))try{if((await(await fetch("/ai/subtitle-update-text",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:pe,text:ye})})).json()).success){const g=a.subtitles.map(b=>b.id===pe?{...b,text:ye}:b);m({...a,subtitles:g}),ge(null),fe("")}}catch(n){console.error("Error updating subtitle:",n)}},je=async(s,n)=>{var c;if(a)try{if((await(await fetch("/ai/subtitle-update-style",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:s,style:n})})).json()).success){const w=a.subtitles.map(K=>K.id===s?{...K,style:{...K.style,...n}}:K);m({...a,subtitles:w})}}catch(g){console.error("Error updating subtitle style:",g)}},nt=async(s,n)=>{var c;if(a)try{if((await(await fetch("/ai/subtitle-update-position",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:s,position:n})})).json()).success){const w=a.subtitles.map(K=>K.id===s?{...K,position:n}:K);m({...a,subtitles:w})}}catch(g){console.error("Error updating subtitle position:",g)}},it=async s=>{var c;if(!a)return;const n=le[s];if(n)try{(await(await fetch("/ai/apply-style-to-all-subtitles",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((c=document.querySelector('meta[name="csrf-token"]'))==null?void 0:c.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,style:n.style})})).json()).success&&(m(w=>w?{...w,subtitles:w.subtitles.map(K=>({...K,style:{...n.style}}))}:null),q(s))}catch(g){console.error("Failed to apply style to all subtitles:",g)}},lt=(s,n)=>{if(s.preventDefault(),!(a==null?void 0:a.subtitles.find(Ce=>Ce.id===n))||!F.current)return;ve(n),F.current.getBoundingClientRect();const b=s.target.getBoundingClientRect(),w=b.left+b.width/2,K=b.top+b.height/2;_e({x:s.clientX-w,y:s.clientY-K})},ct=s=>{if(!Ne||!F.current)return;const n=F.current.getBoundingClientRect(),c=s.clientX-we.x,g=s.clientY-we.y,b=(c-n.left)/n.width*100,w=(g-n.top)/n.height*100,K=Math.max(5,Math.min(95,b)),Ce=Math.max(5,Math.min(95,w));nt(Ne,{x:K,y:Ce})},ms=()=>{ve(null),_e({x:0,y:0})},ot=async()=>{var s;if(a!=null&&a.generation_id)try{const c=await(await fetch("/ai/subtitle-export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,format:"srt"})})).json();c.success&&window.open(c.data.file_url,"_blank")}catch(n){console.error("Error exporting transcript:",n)}},xs=async()=>{var s;if(f)try{const c=await(await fetch("/ai/rendered-video-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:f})})).json();c.success&&B({status:c.status,rendered_video_path:c.rendered_video_path})}catch{}};h.useEffect(()=>{let s=null;return(N==null?void 0:N.status)==="processing"&&(s=setInterval(xs,3e3)),()=>{s&&clearInterval(s)}},[N==null?void 0:N.status,f]),h.useEffect(()=>{xs()},[f]);const dt=async()=>{var s;if(a!=null&&a.generation_id){re(!0);try{const c=await(await fetch("/ai/subtitle-render-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,video_id:f})})).json();c.success?B({status:"processing",rendered_video_path:null}):alert(`Failed to render video: ${c.message}`)}catch(n){console.error("Error rendering video:",n),alert("An error occurred while rendering the video. Please try again.")}finally{re(!1)}}},ze=s=>{const n=Math.floor(s/60),c=Math.floor(s%60);return`${n}:${c.toString().padStart(2,"0")}`},mt=async()=>{var s,n,c;try{W?document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen():(s=V.current)!=null&&s.requestFullscreen?await V.current.requestFullscreen():(n=V.current)!=null&&n.webkitRequestFullscreen?await V.current.webkitRequestFullscreen():(c=V.current)!=null&&c.msRequestFullscreen&&await V.current.msRequestFullscreen()}catch(g){console.error("Error toggling fullscreen:",g)}};h.useEffect(()=>{const s=()=>{const n=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);Z(n)};return document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("msfullscreenchange",s),()=>{document.removeEventListener("fullscreenchange",s),document.removeEventListener("webkitfullscreenchange",s),document.removeEventListener("msfullscreenchange",s)}},[]);const $e=We(),Oe=()=>{var s;if(F.current){const n=F.current.getBoundingClientRect(),c=(s=be.current)==null?void 0:s.getBoundingClientRect();if(c){const g={width:n.width,height:n.height,top:n.top-c.top,left:n.left-c.left};l(u?{width:g.width*(u.width/100),height:g.height*(u.height/100),top:g.top+g.height*(u.y/100),left:g.left+g.width*(u.x/100)}:g)}}},xt=()=>{u||r({x:10,y:20,width:80,height:60})},ht=async()=>{var s;if(!(!u||!(a!=null&&a.generation_id)))try{(await fetch("/ai/subtitle-update-bounds",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,custom_bounds:u})})).ok&&console.log("Custom bounds saved successfully")}catch(n){console.error("Error saving custom bounds:",n)}};h.useEffect(()=>{a!=null&&a.custom_bounds&&r(a.custom_bounds)},[a]);const Ie=(s,n)=>{!u||!F.current||(s.preventDefault(),s.stopPropagation(),Q(n),se({x:s.clientX,y:s.clientY,bounds:{...u}}))},ut=s=>{if(!v||!j||!F.current)return;const n=F.current.getBoundingClientRect(),c=(s.clientX-j.x)/n.width*100,g=(s.clientY-j.y)/n.height*100;let b={...j.bounds};switch(v){case"move":b.x=Math.max(0,Math.min(100-b.width,j.bounds.x+c)),b.y=Math.max(0,Math.min(100-b.height,j.bounds.y+g));break;case"resize-tl":const w=Math.max(10,j.bounds.width-c),K=Math.max(10,j.bounds.height-g);b.x=Math.max(0,j.bounds.x+(j.bounds.width-w)),b.y=Math.max(0,j.bounds.y+(j.bounds.height-K)),b.width=w,b.height=K;break;case"resize-tr":b.width=Math.max(10,Math.min(100-b.x,j.bounds.width+c)),b.height=Math.max(10,j.bounds.height-g),b.y=Math.max(0,j.bounds.y+(j.bounds.height-b.height));break;case"resize-bl":b.width=Math.max(10,j.bounds.width-c),b.height=Math.max(10,Math.min(100-b.y,j.bounds.height+g)),b.x=Math.max(0,j.bounds.x+(j.bounds.width-b.width));break;case"resize-br":b.width=Math.max(10,Math.min(100-b.x,j.bounds.width+c)),b.height=Math.max(10,Math.min(100-b.y,j.bounds.height+g));break}r(b)},hs=()=>{Q(null),se(null),Oe(),ht()};return h.useEffect(()=>{const s=()=>{setTimeout(Oe,50)},n=()=>Oe();return F.current&&(F.current.addEventListener("loadedmetadata",n),F.current.addEventListener("loadeddata",n)),window.addEventListener("resize",s),setTimeout(Oe,100),()=>{F.current&&(F.current.removeEventListener("loadedmetadata",n),F.current.removeEventListener("loadeddata",n)),window.removeEventListener("resize",s)}},[t,u]),h.useEffect(()=>{setTimeout(Oe,100)},[W,u]),e.jsxs("div",{ref:V,className:`bg-white shadow-sm border ${W?"h-screen w-screen flex flex-col":"rounded-lg"}`,children:[e.jsx("canvas",{ref:ke,style:{display:"none"}}),e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx(as,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Video Editor"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Generate and edit subtitles with real-time preview"})]})]}),e.jsxs("button",{onClick:mt,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-lg transition-colors",title:W?"Exit fullscreen":"Enter fullscreen",children:[W?e.jsx(la,{className:"w-4 h-4"}):e.jsx(ra,{className:"w-4 h-4"}),W?"Exit Fullscreen":"Fullscreen"]})]}),!a&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(ta,{className:"w-4 h-4 inline mr-2"}),"Language"]}),e.jsx("select",{value:_,onChange:s=>O(s.target.value),className:"border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-purple-500 focus:border-transparent",disabled:R,children:Object.entries(de).map(([s,n])=>e.jsxs("option",{value:s,children:[n.name," (",n.accuracy,"% accuracy)"]},s))})]}),e.jsx("button",{onClick:Ue,disabled:R||!f,className:"flex items-center gap-2 px-6 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-lg font-medium hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:R?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(as,{className:"w-4 h-4"}),"Generate Subtitles"]})})]})]})}),e.jsxs("div",{className:`p-6 ${W?"flex-1 overflow-auto":""}`,children:[(a==null?void 0:a.processing_status)==="processing"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),e.jsxs("span",{className:"font-medium text-blue-900",children:["Processing: ",a.progress.current_step]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${a.progress.percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-blue-700",children:[e.jsxs("span",{children:[a.progress.percentage,"% complete"]}),e.jsxs("span",{children:[ze(a.progress.processed_duration)," / ",ze(a.progress.total_duration)]})]})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{ref:be,className:"relative bg-black rounded-lg overflow-hidden",onMouseMove:ct,onMouseUp:ms,onMouseLeave:ms,style:{position:"relative"},children:[e.jsx("video",{ref:F,src:(a==null?void 0:a.original_video_path)||t,className:`w-full h-auto ${W?"max-h-[70vh]":"max-h-96"}`,controls:!1,onPlay:()=>Y(!0),onPause:()=>Y(!1)}),e.jsx("div",{className:"video-subtitle-overlay",style:{top:(x==null?void 0:x.top)||0,left:(x==null?void 0:x.left)||0,width:(x==null?void 0:x.width)||"100%",height:(x==null?void 0:x.height)||"100%"},children:$e&&e.jsx("div",{style:{pointerEvents:"auto"},children:e.jsx(ka,{subtitle:$e,currentTime:D,position:$e.position,onMouseDown:s=>lt(s,$e.id),onDoubleClick:()=>ds($e.id),editingSubtitle:pe===$e.id,editingText:ye,onTextChange:fe,onSaveEdit:rt,onCancelEdit:()=>{ge(null),fe("")}})})}),d&&u&&F.current&&e.jsx("div",{className:"bounds-editor-overlay",style:{top:F.current.getBoundingClientRect().top-((us=be.current)==null?void 0:us.getBoundingClientRect().top)||0,left:F.current.getBoundingClientRect().left-((ps=be.current)==null?void 0:ps.getBoundingClientRect().left)||0,width:F.current.getBoundingClientRect().width,height:F.current.getBoundingClientRect().height},onMouseMove:ut,onMouseUp:hs,onMouseLeave:hs,children:e.jsxs("div",{className:"bounds-rectangle",style:{left:`${u.x}%`,top:`${u.y}%`,width:`${u.width}%`,height:`${u.height}%`},onMouseDown:s=>Ie(s,"move"),children:[e.jsx("div",{className:"bounds-handle cursor-nw-resize",style:{top:"-6px",left:"-6px"},onMouseDown:s=>Ie(s,"resize-tl")}),e.jsx("div",{className:"bounds-handle cursor-ne-resize",style:{top:"-6px",right:"-6px"},onMouseDown:s=>Ie(s,"resize-tr")}),e.jsx("div",{className:"bounds-handle cursor-sw-resize",style:{bottom:"-6px",left:"-6px"},onMouseDown:s=>Ie(s,"resize-bl")}),e.jsx("div",{className:"bounds-handle cursor-se-resize",style:{bottom:"-6px",right:"-6px"},onMouseDown:s=>Ie(s,"resize-br")}),e.jsxs("div",{className:"bounds-label",children:["Subtitle Area (",Math.round(u.width),"% × ",Math.round(u.height),"%)"]})]})})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:st,className:"flex items-center justify-center w-10 h-10 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors",children:T?e.jsx(Ft,{className:"w-5 h-5"}):e.jsx(Js,{className:"w-5 h-5 ml-0.5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{ref:Se,className:"h-2 bg-gray-200 rounded-full cursor-pointer",onClick:tt,children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full transition-all",style:{width:`${D/ae*100}%`}})})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-0",children:[ze(D)," / ",ze(ae)]}),e.jsx("button",{onClick:at,disabled:ne||!f,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",title:"Set current frame as thumbnail",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Setting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(At,{className:"w-4 h-4"}),"Set Thumbnail"]})})]}),e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Subtitle Area:"}),e.jsxs("button",{onClick:()=>{xt(),p(!d)},className:`flex items-center gap-2 px-3 py-1 rounded-lg text-sm transition-colors ${d?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[e.jsx(Qs,{className:"w-4 h-4"}),d?"Finish Editing":"Edit Bounds"]}),u&&e.jsxs("button",{onClick:()=>{r(null),p(!1)},className:"flex items-center gap-2 px-3 py-1 bg-red-100 text-red-700 rounded-lg hover:bg-red-200 text-sm transition-colors",children:[e.jsx(Je,{className:"w-4 h-4"}),"Reset to Auto"]}),u&&e.jsxs("span",{className:"text-xs text-gray-500",children:[Math.round(u.width),"% × ",Math.round(u.height),"%"]})]})]})]}),(a==null?void 0:a.processing_status)==="completed"&&a.subtitles&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subtitle Timeline"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.subtitles.map(s=>e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-lg hover:bg-white transition-colors cursor-pointer ${D>=s.start_time&&D<=s.end_time?"border-purple-300 bg-purple-50":"border-gray-200 bg-white"}`,onClick:()=>{F.current&&(F.current.currentTime=s.start_time)},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"text-sm font-mono text-gray-500",children:[ze(s.start_time)," → ",ze(s.end_time)]})}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"text-gray-900",children:s.text})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("button",{onClick:n=>{n.stopPropagation(),ds(s.id)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Edit subtitle",children:e.jsx(Zs,{className:"w-4 h-4"})}),e.jsx("button",{onClick:n=>{n.stopPropagation(),y(s.id)},className:"p-1 text-gray-400 hover:text-purple-600 transition-colors",title:"Style subtitle",children:e.jsx(Ys,{className:"w-4 h-4"})})]})]},s.id))})]}),i&&(a==null?void 0:a.subtitles)&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-4",children:"Subtitle Style"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Style Presets"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(le).map(([s,n])=>{var b;const c=a.subtitles.find(w=>w.id===i),g=((b=c==null?void 0:c.style)==null?void 0:b.preset)===s;return e.jsx("button",{onClick:()=>{je(i,{...n.style}),q(s)},className:`p-3 border rounded-lg text-sm font-medium transition-all ${g?"border-purple-500 bg-purple-50 text-purple-700":"border-gray-200 bg-white text-gray-700 hover:border-purple-300 hover:bg-purple-50"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs mb-1 px-2 py-1 rounded",style:{color:n.style.color,backgroundColor:(()=>{const w=n.style.backgroundColor;return w.includes("gradient")?"#FFD700":w==="transparent"?"rgba(0, 0, 0, 0)":w})(),textShadow:n.style.textShadow.includes("0px")?n.style.textShadow:"none",fontFamily:n.style.fontFamily.split(",")[0]},children:"Aa"}),n.name]})},s)})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("button",{onClick:()=>it(H),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(va,{className:"w-4 h-4"}),"Apply to All Subtitles"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Family"}),e.jsxs("select",{value:((bs=(fs=(gs=a.subtitles.find(s=>s.id===i))==null?void 0:gs.style)==null?void 0:fs.fontFamily)==null?void 0:bs.split(",")[0])||"Arial",onChange:s=>je(i,{fontFamily:s.target.value+", sans-serif"}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"}),e.jsx("option",{value:"Impact",children:"Impact"}),e.jsx("option",{value:"Trebuchet MS",children:"Trebuchet MS"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Courier New",children:"Courier New"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Font Size"}),e.jsx("input",{type:"range",min:"12",max:"48",value:((ys=(js=a.subtitles.find(s=>s.id===i))==null?void 0:js.style)==null?void 0:ys.fontSize)||te.fontSize,onChange:s=>je(i,{fontSize:parseInt(s.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),e.jsx("input",{type:"color",value:Ls(((vs=(Ns=a.subtitles.find(s=>s.id===i))==null?void 0:Ns.style)==null?void 0:vs.color)||te.color),onChange:s=>je(i,{color:s.target.value}),className:"w-full h-8 rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:(()=>{var c;const s=a.subtitles.find(g=>g.id===i),n=((c=s==null?void 0:s.style)==null?void 0:c.backgroundColor)||"#000000";return Ls(n)})(),onChange:s=>je(i,{backgroundColor:s.target.value}),className:"flex-1 h-8 rounded border"}),e.jsx("button",{onClick:()=>je(i,{backgroundColor:"transparent"}),className:"px-3 py-1 text-xs border rounded hover:bg-gray-100",title:"Make background transparent",children:"None"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Alignment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>je(i,{textAlign:"left"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(qt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>je(i,{textAlign:"center"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(Dt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>je(i,{textAlign:"right"}),className:"p-2 border rounded hover:bg-gray-100",children:e.jsx(Wt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{var s,n;return je(i,{bold:!((n=(s=a.subtitles.find(c=>c.id===i))==null?void 0:s.style)!=null&&n.bold)})},className:`p-2 border rounded hover:bg-gray-100 ${(_s=(ws=a.subtitles.find(s=>s.id===i))==null?void 0:ws.style)!=null&&_s.bold?"bg-purple-100 border-purple-300":""}`,children:e.jsx(Kt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,n;return je(i,{italic:!((n=(s=a.subtitles.find(c=>c.id===i))==null?void 0:s.style)!=null&&n.italic)})},className:`p-2 border rounded hover:bg-gray-100 ${(ks=(Ss=a.subtitles.find(s=>s.id===i))==null?void 0:Ss.style)!=null&&ks.italic?"bg-purple-100 border-purple-300":""}`,children:e.jsx(ea,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,n;return je(i,{underline:!((n=(s=a.subtitles.find(c=>c.id===i))==null?void 0:s.style)!=null&&n.underline)})},className:`p-2 border rounded hover:bg-gray-100 ${(Ts=(Cs=a.subtitles.find(s=>s.id===i))==null?void 0:Cs.style)!=null&&Ts.underline?"bg-purple-100 border-purple-300":""}`,children:e.jsx(ya,{className:"w-4 h-4"})})]})]}),(a==null?void 0:a.processing_status)==="completed"&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("button",{onClick:ot,className:"flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsx(Et,{className:"w-4 h-4"}),"Export Transcript"]}),e.jsx("button",{onClick:dt,disabled:U,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Rendering Video..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qt,{className:"w-5 h-5"}),"Render & Upload to All Platforms"]})})]}),(N==null?void 0:N.status)==="processing"&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-600 border-t-transparent"}),e.jsx("span",{className:"font-medium text-blue-900",children:"Rendering video with subtitles..."})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"100%"}})}),e.jsx("div",{className:"flex justify-between text-sm text-blue-700",children:e.jsx("span",{children:"Rendering in progress..."})})]}),(N==null?void 0:N.status)==="completed"&&(N==null?void 0:N.rendered_video_path)&&e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:[e.jsx("div",{className:"flex items-center gap-3 mb-3",children:e.jsx("span",{className:"font-medium text-green-900",children:"Video rendered successfully!"})}),e.jsx("a",{href:N.rendered_video_path,target:"_blank",rel:"noopener noreferrer",className:"text-green-700 underline",children:"Download or view rendered video"})]}),a&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded text-xs space-y-2",children:[e.jsx("p",{children:e.jsx("strong",{children:"Debug Info:"})}),e.jsxs("p",{children:["Generation ID: ",(a==null?void 0:a.generation_id)||"None"]}),e.jsxs("p",{children:["Status: ",(a==null?void 0:a.processing_status)||"None"]}),e.jsxs("p",{children:["Subtitles: ",((Fs=a==null?void 0:a.subtitles)==null?void 0:Fs.length)||0]}),e.jsxs("p",{children:["Video Time: ",D.toFixed(2),"s"]}),e.jsxs("p",{children:["Active Subtitle: ",((As=We())==null?void 0:As.text)||"None"]}),e.jsxs("p",{children:["Active Subtitle Words: ",((Ms=(Es=We())==null?void 0:Es.words)==null?void 0:Ms.length)||0]}),e.jsxs("p",{children:["Current Style: ",(($s=(zs=We())==null?void 0:zs.style)==null?void 0:$s.preset)||"None"]}),(a==null?void 0:a.generation_id)&&e.jsx("button",{onClick:()=>{console.log("Manual word timing reload triggered"),Le(a.generation_id)},className:"mt-2 px-2 py-1 bg-blue-500 text-white rounded text-xs",children:"Reload Word Timing"})]})]}),!t&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(as,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Video Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Upload a video to start using the subtitle generator."})]})]})]})};function Ta({videoId:t,videoPath:f,title:o,className:a,onThumbnailSet:m}){const[R,J]=h.useState(null),[U,re]=h.useState(!1),[ne,A]=h.useState(null),[W,Z]=h.useState("suggestions"),{toast:V}=cs(),de=async()=>{var _,O;if(!t){V({title:"No Video ID",description:"Please provide a video ID to optimize thumbnails.",variant:"destructive"});return}re(!0);try{const y=await(await fetch("/ai/optimize-thumbnails",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((_=document.querySelector('meta[name="csrf-token"]'))==null?void 0:_.getAttribute("content"))||""},body:JSON.stringify({video_id:t,title:o||"Amazing Video",platforms:["youtube","instagram","tiktok"]})})).json();if(y.success)J(y.data),V({title:"Thumbnail Optimization Complete! 🎨",description:`AI has analyzed your video and extracted ${((O=y.data.extracted_frames)==null?void 0:O.length)||0} thumbnail frames.`});else throw new Error(y.message||"Failed to optimize thumbnails")}catch(i){console.error("Thumbnail optimization error:",i),V({title:"Optimization Failed",description:"Failed to optimize thumbnails. Please try again.",variant:"destructive"})}finally{re(!1)}},ee=async(_,O)=>{var i;if(!t){V({title:"Error",description:"Video ID is required to set thumbnail.",variant:"destructive"});return}try{const H=await(await fetch("/ai/set-video-thumbnail",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_id:t,frame_id:_,thumbnail_path:O})})).json();if(H.success)V({title:"Thumbnail Set Successfully! 🎯",description:"This thumbnail has been set for all platforms."}),m&&m();else throw new Error(H.message||"Failed to set thumbnail")}catch(y){console.error("Set thumbnail error:",y),V({title:"Setting Failed",description:"Failed to set thumbnail. Please try again.",variant:"destructive"})}};return!R&&!U?e.jsxs(S,{className:G("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",a),children:[e.jsxs(M,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit",children:e.jsx(Re,{className:"w-8 h-8 text-white"})}),e.jsx(z,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Generate eye-catching thumbnails with AI-powered optimization and CTR predictions"})]}),e.jsxs(k,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(De,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"CTR Prediction"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Mt,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Face Detection"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ys,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Color Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Zs,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Text Optimization"})]})]}),e.jsxs(L,{onClick:de,disabled:!t,size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(ls,{className:"w-5 h-5 mr-2"}),"Analyze Video & Extract Thumbnails"]}),!t&&e.jsx("p",{className:"text-sm text-gray-500",children:"Video ID required for thumbnail analysis"})]})]}):U?e.jsx(S,{className:G("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",a),children:e.jsxs(k,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit animate-pulse",children:e.jsx(Re,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Optimizing Thumbnails..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing frames, detecting faces, and predicting CTR"}),e.jsx("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Extracting frames..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing faces..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Predicting CTR..."})]})]})]})}):e.jsxs(S,{className:G("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",a),children:[e.jsx(M,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Thumbnail Optimization Results"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Score: ",R.overall_score,"/100 • ",R.extracted_frames.length," frames analyzed"]})]})]}),e.jsxs(L,{onClick:de,disabled:U,size:"sm",variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsx(k,{children:e.jsxs(Ye,{value:W,onValueChange:Z,className:"w-full",children:[e.jsxs(Qe,{className:"grid w-full grid-cols-3",children:[e.jsx(xe,{value:"suggestions",children:"Suggestions"}),e.jsx(xe,{value:"platforms",children:"Platform Thumbnail Specifications"}),e.jsx(xe,{value:"testing",children:"A/B Testing"})]}),e.jsx(he,{value:"suggestions",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:R.thumbnail_suggestions.slice(0,3).map((_,O)=>e.jsx(S,{className:O===0?"border-2 border-gold":"",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:_.preview_url,alt:`Thumbnail at ${_.timestamp}s`,className:"w-32 h-18 object-cover rounded-lg border-2 border-gray-200",onError:i=>{var H;const y=i.target;y.style.display="none",(H=y.nextElementSibling)==null||H.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-18 bg-gray-200 rounded-lg flex items-center justify-center hidden",children:e.jsx(Js,{className:"w-6 h-6 text-gray-400"})}),O===0&&e.jsxs(I,{className:"absolute -top-2 -right-2 bg-yellow-500 text-black",children:[e.jsx(zt,{className:"w-3 h-3 mr-1"}),"Best"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:["Frame at ",_.timestamp,"s"]}),e.jsxs(I,{variant:"outline",children:[_.predicted_ctr,"% CTR"]}),e.jsxs(I,{variant:"outline",children:[_.confidence_score,"% confidence"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Why this frame:"}),e.jsx("ul",{className:"text-sm text-gray-600",children:_.reasons.map((i,y)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),i]},y))})]}),_.design_scores&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Design Feature Scores:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(_.design_scores).map(([i,y])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[i.replace("_"," "),":"]}),e.jsx(I,{variant:"outline",className:G("text-xs px-1.5 py-0.5",y>=80?"border-green-500 text-green-700 bg-green-50":y>=60?"border-yellow-500 text-yellow-700 bg-yellow-50":"border-red-500 text-red-700 bg-red-50"),children:y})]},i))})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(L,{size:"sm",onClick:()=>ee(_.frame_id,_.path),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Set as Thumbnail"]})})]})})},_.frame_id))})}),e.jsx(he,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(R.platform_optimizations).map(([_,O])=>e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs(z,{className:"text-lg capitalize flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),_]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specifications"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Dimensions: ",O.specifications.width,"×",O.specifications.height]}),e.jsxs("div",{children:["Aspect Ratio: ",O.specifications.aspect_ratio]}),e.jsxs("div",{children:["Max Size: ",O.specifications.max_file_size,"KB"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimization Focus"}),e.jsx("div",{className:"text-sm space-y-1",children:O.design_adjustments.map((i,y)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),i]},y))})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected Improvement:"}),e.jsxs(I,{className:"bg-green-100 text-green-800",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),O.expected_improvement]})]})]})]},_))})}),e.jsx(he,{value:"testing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:R.ab_test_variants.map(_=>e.jsxs(S,{children:[e.jsx(M,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(z,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ge,{className:"w-5 h-5"}),_.variant_id.replace("_"," ").toUpperCase()]}),e.jsxs(I,{variant:"outline",children:[_.confidence_level,"% confidence"]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Hypothesis"}),e.jsx("p",{className:"text-sm text-gray-600",children:_.test_hypothesis})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Planned Modifications"}),e.jsx("div",{className:"space-y-1",children:_.modifications.map((O,i)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),O]},i))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected CTR Increase:"}),e.jsxs(I,{className:"bg-blue-100 text-blue-800",children:["+",_.expected_outcome.expected_ctr_increase]})]})]})]},_.variant_id))})})]})})]})}const Fa=({isOpen:t,onClose:f,videoId:o,videoPath:a,title:m,onThumbnailSet:R})=>{if(!t)return null;const J=()=>{const U=document.createElement("div");U.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",U.textContent="✓ Thumbnail optimized successfully!",document.body.appendChild(U),setTimeout(()=>{document.body.contains(U)&&document.body.removeChild(U)},3e3),R&&R()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-purple-50 to-blue-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx(Re,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and optimize thumbnails for better engagement"})]})]}),e.jsx("button",{onClick:f,className:"flex items-center justify-center w-8 h-8 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full transition-colors",title:"Close",children:e.jsx(Je,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(Ta,{videoId:o,videoPath:a,title:m,onThumbnailSet:J})})]})})},Aa={youtube:It,instagram:Ot,tiktok:Me,facebook:Me,snapchat:Me,pinterest:Me,twitter:Me},Ea={pending:ns,processing:is,success:Ks,failed:rs},Ma={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},za=(t,f)=>{if(!t||!f)return{status:"unknown",color:"text-gray-500",label:"Unknown"};const o=t*f;return o>=1920*1080?{status:"great",color:"text-green-600",label:"1080p+"}:o>=1280*720?{status:"good",color:"text-orange-500",label:"720p"}:{status:"poor",color:"text-red-600",label:"Low Quality"}};function Cr({video:t}){const f=[{title:"My channels",href:"/dashboard"},{title:"Videos",href:"/videos"},{title:t.title,href:`/videos/${t.id}/edit`}],{data:o,setData:a,put:m,processing:R,errors:J}=pt({title:t.title||"",description:t.description||"",tags:t.tags||[],thumbnail:null}),[U,re]=h.useState("overview"),[ne,A]=h.useState(!1),[W,Z]=h.useState("tikomat"),[V,de]=h.useState(!1),[ee,_]=h.useState(!1),[O,i]=h.useState(t.thumbnail||null),[y,H]=h.useState([0]),[q,P]=h.useState(null),[$,N]=h.useState(null),[B,C]=h.useState([]),[E,T]=h.useState(!1),[Y,D]=h.useState(!1),[ie,ae]=h.useState(!1),[oe,ue]=h.useState(!1),[Ae]=h.useState(["youtube","instagram","tiktok","facebook","twitter","pinterest","snapchat"]),pe=h.useRef(null),ge=za(t.width,t.height),ye=r=>{r.preventDefault(),m(`/videos/${t.id}`)},fe=()=>{A(!0)},Ne=()=>{Ze.delete(`/videos/${t.id}`,{data:{delete_option:W},onSuccess:()=>{Ze.visit("/videos")}})},ve=(r,d)=>{confirm(`Are you sure you want to remove this video from ${d}?`)&&Ze.delete(`/video-targets/${r}`,{preserveScroll:!0,onSuccess:()=>{},onError:p=>{console.error("Failed to remove video from platform:",p),alert("Failed to remove video from platform. Please try again.")}})},we=r=>{if(r.platform_url)return r.platform_url;switch(r.platform){case"youtube":return r.platform_video_id?`https://youtube.com/watch?v=${r.platform_video_id}`:null;case"instagram":return r.platform_video_id?`https://instagram.com/p/${r.platform_video_id}`:null;case"tiktok":return r.platform_video_id?`https://tiktok.com/@username/video/${r.platform_video_id}`:null;default:return null}},_e=async()=>{var r;de(!0);try{const d=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({video_id:t.id,content_type:"title",current_title:o.title})});if(d.ok){const p=await d.json();if(p.success&&p.data.optimized_title){a("title",p.data.optimized_title);const v=p.data.analysis_summary;let Q="Title generated based on video content analysis";if(v){const j=[];v.has_transcript&&j.push("audio transcription"),v.scenes_detected>0&&j.push(`${v.scenes_detected} visual scenes`),v.content_category!=="unknown"&&j.push(`${v.content_category} content`),j.length>0&&(Q+=`. Analyzed: ${j.join(", ")}.`)}alert(`✅ AI Title Generated!

${Q}`)}}else{const p=await d.json();console.error("Failed to generate AI title:",p),alert(`Failed to generate title: ${p.message||"Unknown error"}`)}}catch(d){console.error("Failed to generate AI title:",d),alert("An error occurred while generating the title. Please try again.")}finally{de(!1)}},F=async()=>{var r;_(!0);try{const d=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({video_id:t.id,content_type:"description",current_description:o.description})});if(d.ok){const p=await d.json();if(p.success&&p.data.optimized_description){a("description",p.data.optimized_description);const v=p.data.analysis_summary;let Q="Description generated based on video content analysis";if(v){const j=[];v.has_transcript&&j.push("audio transcription"),v.scenes_detected>0&&j.push(`${v.scenes_detected} visual scenes`),v.content_category!=="unknown"&&j.push(`${v.content_category} content`),j.length>0&&(Q+=`. Analyzed: ${j.join(", ")}.`)}alert(`✅ AI Description Generated!

${Q}`)}}else{const p=await d.json();console.error("Failed to generate AI description:",p),alert(`Failed to generate description: ${p.message||"Unknown error"}`)}}catch(d){console.error("Failed to generate AI description:",d),alert("An error occurred while generating the description. Please try again.")}finally{_(!1)}},Se=async r=>{var p,v;const d=(p=r.target.files)==null?void 0:p[0];if(d){if(!d.type.startsWith("image/")){alert("Please select a valid image file");return}if(d.size>5*1024*1024){alert("Image size must be less than 5MB");return}ue(!0),P(d);try{const Q=new FormData;Q.append("thumbnail",d),Q.append("video_id",t.id.toString());const j=(v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.getAttribute("content");console.log("CSRF Token:",j?"Found":"Missing");const se=await fetch("/ai/upload-custom-thumbnail",{method:"POST",headers:{"X-CSRF-TOKEN":j||"",Accept:"application/json"},body:Q});if(console.log("Response status:",se.status),console.log("Response headers:",Object.fromEntries(se.headers.entries())),se.ok){const le=await se.json();if(le.success){i(le.thumbnail_url);const te=document.createElement("div");te.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",te.textContent="✅ Thumbnail uploaded successfully!",document.body.appendChild(te),setTimeout(()=>{document.body.contains(te)&&document.body.removeChild(te)},3e3)}else throw new Error(le.message||"Upload failed")}else{const le=se.headers.get("content-type");if(console.log("Error response content-type:",le),le&&le.includes("application/json")){const te=await se.json();throw new Error(te.message||`HTTP ${se.status}: Upload failed`)}else{const te=await se.text();throw console.log("HTML error response:",te.substring(0,200)),new Error(`HTTP ${se.status}: Server returned HTML instead of JSON - check Laravel logs`)}}}catch(Q){console.error("Failed to upload thumbnail:",Q);const j=document.createElement("div");j.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",j.textContent=`❌ Upload failed: ${Q instanceof Error?Q.message:"Unknown error"}`,document.body.appendChild(j),setTimeout(()=>{document.body.contains(j)&&document.body.removeChild(j)},5e3);const se=new FileReader;se.onload=le=>{var te;i((te=le.target)==null?void 0:te.result)},se.readAsDataURL(d)}finally{ue(!1)}}},be=r=>{N(r)};h.useEffect(()=>{const r={title:t.title||"",description:t.description||"",tags:t.tags||[]},d=JSON.stringify(o)!==JSON.stringify(r);D(d)},[o,t]);const ke=async()=>{ae(!0);const r=async(d=0)=>{var p,v,Q;try{const j=((p=document.querySelector('meta[name="csrf-token"]'))==null?void 0:p.getAttribute("content"))||((v=document.querySelector('input[name="_token"]'))==null?void 0:v.getAttribute("value"))||"";if(!j)throw new Error("CSRF token not found");const se=await fetch("/ai/analyze-video-tags",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":j,Accept:"application/json"},body:JSON.stringify({video_id:t.id,title:o.title||"",description:o.description||""})});if(se.status===419&&d===0){console.log("CSRF token expired, refreshing...");const le=await fetch("/");if(le.ok){const te=await le.text(),qe=(Q=new DOMParser().parseFromString(te,"text/html").querySelector('meta[name="csrf-token"]'))==null?void 0:Q.getAttribute("content");if(qe){const Ue=document.querySelector('meta[name="csrf-token"]');return Ue&&Ue.setAttribute("content",qe),r(1)}}}return se}catch(j){if(d===0)return console.log("Request failed, retrying once...",j),r(1);throw j}};try{const d=await r();if(d.ok){const p=await d.json();if(console.log("Tag generation response:",p),p.success&&p.data&&p.data.analysis.tags)a("tags",p.data.analysis.tags);else{console.warn("Unexpected response structure:",p);const v=document.createElement("div");v.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",v.textContent="⚠️ Tag generation failed - unexpected response",document.body.appendChild(v),setTimeout(()=>{document.body.contains(v)&&document.body.removeChild(v)},5e3)}}else{const p=await d.text();console.error("HTTP Error:",d.status,d.statusText,p);const v=document.createElement("div");v.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",v.textContent=`⚠️ Tag generation failed - Server error (${d.status})`,document.body.appendChild(v),setTimeout(()=>{document.body.contains(v)&&document.body.removeChild(v)},5e3)}}catch(d){console.error("Failed to generate tags:",d);const p=document.createElement("div");p.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",p.textContent="⚠️ Tag generation failed - Network error",document.body.appendChild(p),setTimeout(()=>{document.body.contains(p)&&document.body.removeChild(p)},5e3)}finally{ae(!1)}},x=r=>{o.tags.includes(r)||a("tags",[...o.tags,r])},l=r=>{a("tags",o.tags.filter(d=>d!==r))},u=async()=>{var r;try{if((await fetch(`/videos/${t.id}/update-platforms`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((r=document.querySelector('meta[name="csrf-token"]'))==null?void 0:r.getAttribute("content"))||""},body:JSON.stringify({title:o.title,description:o.description,tags:o.tags})})).ok){D(!1);const p=document.createElement("div");p.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",p.textContent="✓ All platforms updated successfully!",document.body.appendChild(p),setTimeout(()=>{document.body.contains(p)&&document.body.removeChild(p)},3e3)}}catch(d){console.error("Failed to update platforms:",d)}};return e.jsxs(yt,{breadcrumbs:f,children:[e.jsx(gt,{title:`Edit: ${t.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ft,{href:"/videos",children:e.jsxs(L,{variant:"outline",size:"sm",children:[e.jsx($t,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.title}),e.jsx("p",{className:"text-muted-foreground",children:"Edit and optimize your video with AI-powered tools"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(L,{variant:"outline",onClick:fe,className:"text-red-600 hover:text-red-700",children:[e.jsx(Rt,{className:"mr-2 h-4 w-4"}),"Delete"]})})]}),Y&&e.jsx(S,{className:"border-blue-200 bg-blue-50",children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-500 rounded-full",children:e.jsx(ce,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-blue-900",children:"Unsaved Changes Detected"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Update all connected platforms with your changes"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:u,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Update All Platforms"]}),e.jsxs(L,{variant:"outline",onClick:()=>{},children:[e.jsx(Qs,{className:"w-4 h-4 mr-2"}),"Manage Platforms"]})]})]})})}),e.jsxs(Ye,{value:U,onValueChange:re,className:"w-full",children:[e.jsxs(Qe,{className:"grid w-full grid-cols-2",children:[e.jsx(xe,{value:"overview",children:"Overview/Edit"}),e.jsx(xe,{value:"performance",children:"Performance"})]}),e.jsx(he,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(z,{className:"flex items-center gap-2",children:"Video Editor"})}),e.jsx(k,{children:e.jsx(ts,{children:e.jsx(Ca,{videoPath:t.video_path||t.file_path||"",videoId:t.id,videoTitle:t.title})})})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"AI Analysis"]})}),e.jsxs(k,{children:[e.jsx(ts,{children:e.jsx(wa,{videoId:t.id,videoPath:t.video_path||t.file_path,onAnalysisComplete:be})}),$&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg",children:$.category||"Entertainment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Mood"}),e.jsx("p",{className:"text-lg",children:$.mood||"Positive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"AI Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:($.tags||["creative","engaging","trending"]).map((r,d)=>e.jsx(I,{variant:"secondary",className:"text-xs",children:r},d))})]})]})]})]}),e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Pt,{className:"w-5 h-5"}),"AI Suggestions"]}),e.jsx(es,{children:"Most important optimization recommendations"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 border border-orange-200 bg-orange-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Fe,{className:"w-5 h-5 text-orange-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-900",children:"Increase Engagement"}),e.jsx("p",{className:"text-sm text-orange-700",children:"Add a call-to-action in the first 5 seconds to boost viewer retention."})]})]})}),e.jsx("div",{className:"p-4 border border-blue-200 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(De,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:"Optimize Thumbnail"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Consider adding text overlay to your thumbnail to increase click-through rate."})]})]})}),e.jsx("div",{className:"p-4 border border-green-200 bg-green-50 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Is,{className:"w-5 h-5 text-green-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-900",children:"Add More Tags"}),e.jsx("p",{className:"text-sm text-green-700",children:"Include platform-specific hashtags to improve discoverability."})]})]})})]})})]}),t.targets&&t.targets.length>0&&e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsx(z,{children:"Publishing Status"}),e.jsx(es,{children:"Current status for each platform"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:t.targets.map(r=>{const d=Ea[r.status],p=Aa[r.platform],v=we(r);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(p,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:r.platform}),r.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(r.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(I,{className:Ma[r.status],children:[e.jsx(d,{className:"w-3 h-3 mr-1"}),r.status]}),v&&r.status==="success"&&e.jsx("a",{href:v,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx(Jt,{className:"w-4 h-4"})}),r.status==="success"&&e.jsxs(L,{size:"sm",variant:"outline",onClick:()=>ve(r.id,r.platform),className:"text-red-600 hover:text-red-700",children:[e.jsx(Je,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},r.id)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:ye,className:"space-y-6",children:[e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(z,{children:"Title"})}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ps,{value:o.title,onChange:r=>a("title",r.target.value),placeholder:"Enter video title",className:"flex-1"}),e.jsx(L,{type:"button",variant:"outline",size:"sm",onClick:_e,disabled:V,children:V?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsx(Ee,{className:"w-4 h-4"})})]}),J.title&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:J.title})]})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(z,{children:"Description"})}),e.jsxs(k,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(bt,{value:o.description,onChange:r=>a("description",r.target.value),placeholder:"Enter video description",rows:4}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(L,{type:"button",variant:"outline",size:"sm",onClick:F,disabled:ee,children:[ee?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"AI Generate"]})})]}),J.description&&e.jsx("p",{className:"text-sm text-red-600",children:J.description})]})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Is,{className:"w-5 h-5"}),"Tags"]})}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[o.tags.map((r,d)=>e.jsxs(I,{variant:"secondary",className:"flex items-center gap-1",children:[r,e.jsx("button",{type:"button",onClick:()=>l(r),className:"ml-1 text-xs hover:text-red-600",children:e.jsx(Je,{className:"w-3 h-3"})})]},d)),o.tags.length===0&&e.jsx("p",{className:"text-sm text-gray-500",children:"No tags added yet"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ps,{placeholder:"Add a tag...",onKeyDown:r=>{if(r.key==="Enter"){r.preventDefault();const d=r.currentTarget.value.trim();d&&(x(d),r.currentTarget.value="")}},className:"flex-1"}),e.jsxs(L,{type:"button",variant:"outline",onClick:ke,disabled:ie,children:[ie?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(ls,{className:"w-4 h-4 mr-2"}),"AI Generate"]})]}),o.tags.length>0&&e.jsx("p",{className:"text-xs text-gray-500",children:"Tags help categorize your video and improve discoverability across platforms"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(L,{type:"submit",disabled:R,children:[R?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(oa,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),e.jsxs(S,{children:[e.jsx(M,{children:e.jsx(z,{children:"Video Details"})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-lg",children:t.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Resolution"}),e.jsx("p",{className:`text-lg ${ge.color}`,children:t.width&&t.height?`${t.width}x${t.height}`:"Unknown"}),e.jsx("p",{className:`text-sm ${ge.color}`,children:ge.label})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"text-lg",children:new Date(t.created_at).toLocaleString()})]})]})]}),e.jsxs(S,{children:[e.jsxs(M,{children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"w-5 h-5"}),"Thumbnail Optimization"]}),e.jsx(es,{children:"Set your video thumbnail using AI optimization or custom upload"})]}),e.jsxs(k,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(L,{onClick:()=>T(!0),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"AI Optimize Thumbnail"]}),e.jsxs(L,{variant:"outline",onClick:()=>{var r;return(r=pe.current)==null?void 0:r.click()},disabled:oe,children:[oe?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Vt,{className:"w-4 h-4 mr-2"}),oe?"Uploading...":"Upload Custom Thumbnail"]}),e.jsx("input",{ref:pe,type:"file",accept:"image/*",onChange:Se,className:"hidden"})]}),O&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-700",children:"✓ Thumbnail has been set for this video"})}),t.thumbnail&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current Thumbnail:"}),e.jsx("img",{src:`${t.thumbnail}`,alt:"Current thumbnail",className:"w-32 h-20 object-cover rounded-lg border"})]})]})]})]})]})}),e.jsx(he,{value:"performance",className:"space-y-6",children:e.jsx(ts,{children:e.jsx(_a,{videoId:t.id})})})]}),e.jsx(qs,{open:ne,onOpenChange:A,children:e.jsxs(Us,{children:[e.jsxs(Ws,{children:[e.jsx(Hs,{children:"Delete Video"}),e.jsx(Xs,{children:"This action cannot be undone. Choose what you want to delete:"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:W==="tikomat",onChange:r=>Z(r.target.value)}),e.jsx(Os,{htmlFor:"delete-tikomat",children:"Delete only from Tikomat (keep on social platforms)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:W==="all",onChange:r=>Z(r.target.value)}),e.jsx(Os,{htmlFor:"delete-all",children:"Delete from everywhere (Tikomat + all social platforms)"})]})]}),e.jsxs(jt,{children:[e.jsx(L,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(L,{variant:"destructive",onClick:Ne,children:"Delete Video"})]})]})}),e.jsx(Fa,{isOpen:E,onClose:()=>T(!1),videoId:t.id,videoPath:t.video_path||t.file_path||"",title:o.title,onThumbnailSet:()=>{i("optimized"),T(!1)}})]})]})}export{Cr as default};
