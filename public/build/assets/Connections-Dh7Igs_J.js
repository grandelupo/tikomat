import{q as w,j as e,$,m as A}from"./app-DDUP_vFY.js";import{u as P,A as I,a as T,b as M,c as F,I as Y}from"./app-layout-D8daT4TR.js";import{B as m}from"./button-DnFor2AK.js";import{C as x,b as f,c as p,a as _}from"./card-CCZ3qSwM.js";import{B as g}from"./badge-4OtR2kJM.js";import{A as B,a as D}from"./alert-D4JQfD-S.js";import{X as z}from"./x-B-CykrnY.js";import{T as c}from"./test-tube-BDVFpms2.js";import{P as E,C as H}from"./palette-oWh4wYxu.js";import{F as L}from"./facebook-D2QVWN_T.js";import{V}from"./video-BQ1eEn_N.js";import{I as W}from"./instagram-DvaoQx1A.js";import{Y as X}from"./youtube-CIV2WZ-n.js";import"./index-CeOnb9YN.js";import"./index-DDRXiHTF.js";import"./settings-BR8aH3ES.js";import"./circle-check-big-BiQoVL-a.js";const q={youtube:X,instagram:W,tiktok:V,facebook:L,snapchat:H,pinterest:E,x:z},O={youtube:"text-red-600",instagram:"text-pink-600",tiktok:"text-black",facebook:"text-blue-600",snapchat:"text-yellow-500",pinterest:"text-red-500",x:"text-black"},R=[{title:"My channels",href:"/dashboard"},{title:"Connections",href:"/connections"}];function de({channels:d,socialAccounts:j,availablePlatforms:b,allowedPlatforms:G}){const r=P(),{app:u}=w().props,h=u.env==="local",N=(a,n)=>{window.location.href=`/channels/${n}/auth/${a}`},C=(a,n)=>{confirm(`Create a mock ${a} connection for testing?`)&&(window.location.href=`/channels/${n}/auth/${a}/simulate`)},k=(a,n)=>{confirm(`Are you sure you want to disconnect ${a}?`)&&A.delete(`/channels/${n}/social/${a}`)},y=a=>j.filter(n=>n.platform===a),v=a=>a.access_token==="fake_token_for_development";return e.jsxs(I,{breadcrumbs:R,children:[e.jsx($,{title:"Platform Connections"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[h&&e.jsxs(B,{className:"border-blue-200 bg-blue-50",children:[e.jsx(c,{className:"h-4 w-4 text-blue-600"}),e.jsxs(D,{className:"text-blue-800",children:[e.jsx("strong",{children:"Development Mode:"}),' You can create mock platform connections for testing using the "Test Connect" buttons below.']})]}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Platform Connections"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your social media platform connections across all channels"})]})}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:b.map(a=>{const n=q[a.name],l=y(a.name),o=l.length>0;return e.jsxs(x,{className:"relative",children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-lg font-medium",children:a.label}),e.jsx(n,{className:`h-6 w-6 ${O[a.name]}`})]}),e.jsx(_,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(g,{variant:o?"default":"secondary",className:o?"bg-green-100 text-green-800":"",children:o?`${l.length} Connected`:"Not Connected"})}),l.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Connected Channels:"}),l.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsxs(T,{className:"h-8 w-8",children:[e.jsx(M,{src:s.platform==="youtube"&&s.platform_channel_thumbnail_url?s.platform_channel_thumbnail_url:s.profile_avatar_url,alt:s.platform==="youtube"&&s.platform_channel_name?s.platform_channel_name:s.platform==="facebook"&&s.facebook_page_name?s.facebook_page_name:s.profile_name||s.channel_name}),e.jsx(F,{className:"text-xs bg-background",children:s.platform==="youtube"&&s.platform_channel_name?r(s.platform_channel_name):s.platform==="facebook"&&s.facebook_page_name?r(s.facebook_page_name):s.profile_name?r(s.profile_name):r(s.channel_name)})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:s.channel_name}),v(s)&&e.jsxs(g,{variant:"outline",className:"text-xs bg-orange-50 text-orange-700 border-orange-200",children:[e.jsx(c,{className:"w-3 h-3 mr-1"}),"Mock"]})]}),(s.platform_channel_name||s.profile_name)&&e.jsxs("p",{className:"text-xs text-gray-600 truncate",children:["Connected as: ",s.profile_name||s.platform_channel_name,(s.profile_username||s.platform_channel_handle)&&` (${`@${s.profile_username||s.platform_channel_handle}`})`]}),s.platform==="facebook"&&s.facebook_page_name&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["Facebook Page: ",s.facebook_page_name]}),s.platform==="youtube"&&s.platform_channel_name&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["YouTube Channel: ",s.platform_channel_name,s.platform_channel_handle&&` (${s.platform_channel_handle})`]}),s.platform_channel_specific&&s.platform_channel_name&&s.platform!=="youtube"&&s.platform!=="facebook"&&e.jsxs("p",{className:"text-xs text-gray-500 truncate",children:["Channel: ",s.platform_channel_name,s.platform_channel_handle&&` (${s.platform_channel_handle})`]})]})]}),e.jsx(m,{size:"sm",variant:"outline",onClick:()=>{const t=d.find(i=>i.id===s.channel_id);t&&k(a.name,t.slug)},className:"text-xs h-7 ml-2",children:"Disconnect"})]},s.id))]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Connect to Channel:"}),e.jsx("div",{className:"grid gap-2",children:d.map(s=>{const t=l.some(i=>i.channel_id===s.id);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs(m,{size:"sm",variant:t?"outline":"default",onClick:()=>N(a.name,s.slug),disabled:t,className:"w-full justify-start text-xs",children:[t?"âœ“ ":"+ ",s.name]}),h&&!t&&e.jsxs(m,{size:"sm",variant:"outline",onClick:()=>C(a.name,s.slug),className:"w-full justify-start text-xs text-orange-600 border-orange-200 hover:bg-orange-50",children:[e.jsx(c,{className:"w-3 h-3 mr-1"}),"Test Connect"]})]},s.id)})})]})]})})]},a.name)})}),e.jsxs(x,{className:"mt-6",children:[e.jsx(f,{children:e.jsxs(p,{className:"flex items-center",children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"How Platform Connections Work"]})}),e.jsx(_,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Per-Channel Connections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Each channel can have its own social media connections. This allows you to manage different brands or content types with separate social accounts."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"OAuth Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When you connect a platform, you'll be redirected to authenticate with that service. Your credentials are securely stored and encrypted."})]})]})})]})]})]})}export{de as default};
