import{r as i,v as f,j as e,$ as j,m as g}from"./app-5T0fATnZ.js";import{A as N}from"./app-layout-BozZ9rF9.js";import{c as m,B as y}from"./button-FNOPk3QP.js";import{C as b,b as v,c as C,a as S}from"./card-DJNDP2DF.js";import{I as _}from"./input-DpJ4FMh5.js";import{S as k}from"./scroll-area-D8lbFAVJ.js";import{U as w}from"./user-CoQlPj6_.js";import{S as T}from"./send-CJoCkqxG.js";import"./index-Cs_-uMFl.js";import"./index-Ml8d9wVP.js";import"./chart-column-CuOKg4Wa.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],o=m("MessageCircle",$);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],D=m("UserCheck",A);function z({messages:t,user:n}){const a=i.useRef(null),{data:r,setData:d,post:x,processing:l,reset:p}=f({message:""}),h=[{title:"Dashboard",href:"/dashboard"},{title:"Chat Support",href:"/chat"}];i.useEffect(()=>{a.current&&(a.current.scrollTop=a.current.scrollHeight)},[t]);const u=s=>{s.preventDefault(),r.message.trim()&&x("/chat",{onSuccess:()=>{p("message"),g.reload()}})};return e.jsxs(N,{breadcrumbs:h,children:[e.jsx(j,{title:"Chat Support"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Chat Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Get help from our support team or ask questions about Tikomat"})]}),e.jsxs(b,{className:"flex-1 flex flex-col",children:[e.jsx(v,{children:e.jsxs(C,{className:"flex items-center",children:[e.jsx(o,{className:"w-5 h-5 mr-2"}),"Support Chat"]})}),e.jsxs(S,{className:"flex-1 flex flex-col",children:[e.jsx("div",{className:"flex-1 h-96 mb-4 border rounded-lg",children:e.jsx(k,{className:"h-full p-4",ref:a,children:e.jsx("div",{className:"space-y-4",children:t.length>0?t.map(s=>{var c;return e.jsx("div",{className:`flex ${s.is_admin_message?"justify-start":"justify-end"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.is_admin_message?"bg-gray-100 text-gray-900 dark:bg-gray-800 dark:text-gray-100":"bg-blue-600 text-white"}`,children:[e.jsxs("div",{className:"flex items-center mb-1",children:[s.is_admin_message?e.jsx(D,{className:"w-4 h-4 mr-1"}):e.jsx(w,{className:"w-4 h-4 mr-1"}),e.jsx("span",{className:"text-xs font-medium",children:s.is_admin_message?((c=s.admin_user)==null?void 0:c.name)||"Support":n.name})]}),e.jsx("p",{className:"text-sm",children:s.message}),e.jsx("p",{className:"text-xs opacity-75 mt-1",children:new Date(s.created_at).toLocaleTimeString()})]})},s.id)}):e.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[e.jsx(o,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No messages yet. Start a conversation!"})]})})})}),e.jsxs("form",{onSubmit:u,className:"flex space-x-2",children:[e.jsx(_,{value:r.message,onChange:s=>d("message",s.target.value),placeholder:"Type your message...",className:"flex-1",disabled:l}),e.jsx(y,{type:"submit",disabled:l||!r.message.trim(),children:e.jsx(T,{className:"w-4 h-4"})})]})]})]})]})]})}export{z as default};
