import{r as c,j as e,q as tt,v as jt,$ as yt,Y as vt,m as ks}from"./app-DbvbM8G9.js";import{a as ae,c as re,B as G}from"./button-BDb64g5D.js";import{C as T,b as D,c as q,a as E,d as xs}from"./card-BSsI2gFm.js";import{I as Ks}from"./input-B5csa9am.js";import{L as Gs}from"./label-CJPiUbbj.js";import{T as Nt}from"./textarea-DiASyrdo.js";import{T as bs,a as js,b as be,c as je}from"./tabs-DFAp-cv2.js";import{B as P}from"./badge-CKN_7PQj.js";import{D as at,b as rt,c as nt,d as it,e as lt,f as wt}from"./dialog-BMlTCcVL.js";import{d as Ts,C as ss,X as Ze,A as kt}from"./app-layout-COnWVxxa.js";import{P as es}from"./progress-BQZjUqvz.js";import{u as Cs}from"./use-toast-GT02HxfV.js";import{B as Ie}from"./brain-BntcVsQV.js";import{V as Le}from"./video-BjQhueDL.js";import{F as ot}from"./file-text-B_MLxjVl.js";import{I as qe,S as _t,T as _s}from"./tag-CQsKPamC.js";import{T as Pe,C as Ve,S as St}from"./workflow-DBvnAgQ8.js";import{R as ce}from"./refresh-cw-OsZtceSF.js";import{C as gs}from"./circle-check-big-WmtM1YDf.js";import{E as We}from"./eye-BlQ4IAFs.js";import{H as ct}from"./heart-Bu1siLZZ.js";import{C as fs}from"./clock-DBjIJopD.js";import{S as Tt,a as Ct,b as At,c as Ft,d as us}from"./select-DJTUSYAs.js";import{C as Et}from"./checkbox-XUT6SzOE.js";import{T as Ke}from"./target-C6xqmQ2r.js";import{C as Mt}from"./calendar-E1rZCJFg.js";import{T as Js}from"./triangle-alert-BKEOrKhw.js";import{A as Ys}from"./arrow-up-CJQLsicl.js";import{A as Ss}from"./activity-QaypplR8.js";import{L as zt}from"./lightbulb-DCof7juj.js";import{P as Rt}from"./pause-Dd_1vHmm.js";import{P as dt}from"./play-64IA6_je.js";import{C as Pt,P as mt}from"./palette-BfARk69Q.js";import{D as Ot}from"./download-VMT6cXIz.js";import{T as De}from"./trash-2-gSIGWZyD.js";import{Z as xt}from"./zap-C6zscczj.js";import{E as hs}from"./ErrorBoundary-CfzorruR.js";import{U as $t}from"./user-Bh1Wu9c-.js";import{S as ut}from"./sparkles-DrbJP1Eu.js";import{S as It}from"./star-jbKedLVu.js";import{A as Dt}from"./arrow-left-CbXu8DkS.js";import{U as Qs}from"./upload--nUApiCI.js";import{I as qt}from"./instagram-o1bRNqsP.js";import{Y as Lt}from"./youtube-Fk38ol_5.js";import{E as Vt}from"./external-link-DftJtaTa.js";import"./index-xOYYBGVs.js";import"./index-CDRf_5HS.js";import"./index-B9JUVQY5.js";import"./chevron-down-6aRxaZpI.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Bt=ae("AlignCenter",Wt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Xt=ae("AlignLeft",Ut);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ht=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],Kt=ae("AlignRight",Ht);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],Zs=ae("ArrowDown",Gt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],Yt=ae("Bold",Jt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=[["rect",{width:"18",height:"14",x:"3",y:"5",rx:"2",ry:"2",key:"12ruh7"}],["path",{d:"M7 15h4M15 15h2M7 11h2M13 11h4",key:"1ueiar"}]],Zt=ae("Captions",Qt);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]],sa=ae("Film",ea);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],aa=ae("Italic",ta);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],na=ae("Languages",ra);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],la=ae("Layers",ia);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oa=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],ca=ae("Maximize",oa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],et=ae("Mic",da);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ma=[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]],xa=ae("Minimize",ma);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]],Qe=ae("Scan",ua);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ha=[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],pa=ae("Settings2",ha);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ga=[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5c-1.4 0-2.5-1.1-2.5-2.5V2",key:"125lnx"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]],ps=ae("TestTube",ga);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fa=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],ba=ae("TrendingDown",fa);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],ya=ae("Trophy",ja);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const va=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],As=ae("Type",va);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],wa=ae("Underline",Na);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ka=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],_a=ae("WandSparkles",ka);function Sa({videoId:t,videoPath:k,onAnalysisComplete:g,className:U}){var S,se,M,ue,de,ie,le,ke,me,Ne,ye,_e,i,A,F,W,Q,Ee,xe,we,Se,Me,oe,he,Te,ve,pe,Fe,Ce,h,l,N;const[m,_]=c.useState(null),[a,C]=c.useState(!1),[ne,L]=c.useState("overview"),{toast:O}=Cs(),H=async()=>{var u;if(!t){O({title:"No Video Selected",description:"Please select a video first before analyzing.",variant:"destructive"});return}C(!0);try{const V=await fetch("/ai/analyze-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((u=document.querySelector('meta[name="csrf-token"]'))==null?void 0:u.getAttribute("content"))||""},body:JSON.stringify({video_id:t})}),B=await V.json();B.success?(_(B.data),g==null||g(B.data),O({title:"Analysis Complete! 🎬",description:"AI has analyzed your video and extracted valuable insights."})):V.status===404?O({title:"Video File Not Found",description:"The video file associated with this record could not be found. Please re-upload the video.",variant:"destructive"}):O({title:"Analysis Failed",description:B.message||"Failed to analyze video. Please try again.",variant:"destructive"})}catch(V){console.error("Video analysis error:",V),O({title:"Analysis Failed",description:"Failed to analyze video. Please try again.",variant:"destructive"})}finally{C(!1)}},Y=u=>{const V=Math.floor(u/60),B=Math.floor(u%60);return`${V}:${B.toString().padStart(2,"0")}`},ee=u=>`${(u/1048576).toFixed(1)} MB`,X=u=>u>=80?"text-green-600 bg-green-100":u>=60?"text-yellow-600 bg-yellow-100":"text-red-600 bg-red-100",$=u=>({positive:"😊",energetic:"⚡",calm:"😌",professional:"💼",casual:"😎",inspirational:"✨",neutral:"😐"})[u]||"😐",j=u=>({educational:"📚",entertainment:"🎭",gaming:"🎮",lifestyle:"🏠",fitness:"💪",food:"🍳",travel:"✈️",tech:"💻",music:"🎵",fashion:"👗",business:"💼",diy:"🔨",general:"📹"})[u]||"📹",b=()=>{if(!(m!=null&&m.quality_score))return!1;const u=m.quality_score.resolution_score||0,V=m.quality_score.audio_score||0,B=m.quality_score.bitrate_score||0;return u<70||V<70||B<70},v=()=>{if(!(m!=null&&m.quality_score))return[];const u=[],V=m.quality_score.resolution_score||0,B=m.quality_score.audio_score||0,Oe=m.quality_score.bitrate_score||0;return V<70&&u.push({type:"Resolution",score:V,severity:V<40?"high":"medium"}),B<70&&u.push({type:"Audio Quality",score:B,severity:B<40?"high":"medium"}),Oe<70&&u.push({type:"Bitrate",score:Oe,severity:Oe<40?"high":"medium"}),u};return!m&&!a?e.jsxs(T,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",U),children:[e.jsxs(D,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit",children:e.jsx(Ie,{className:"w-8 h-8 text-white"})}),e.jsx(q,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analyzer"}),e.jsx("p",{className:"text-muted-foreground",children:"Get comprehensive insights about your video content using advanced AI analysis"})]}),e.jsxs(E,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(Le,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Video Quality"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(ot,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Transcription"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(qe,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Scene Analysis"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(Pe,{className:"w-6 h-6 text-pink-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Engagement Prediction"})]})]}),e.jsxs(G,{onClick:H,disabled:!k,size:"lg",className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"Start AI Analysis"]}),!k&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a video first to enable AI analysis"})]})]}):a?e.jsx(T,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",U),children:e.jsxs(E,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-blue-600 rounded-full w-fit animate-pulse",children:e.jsx(Ie,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Analyzing Your Video..."}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Our AI is processing your video to extract valuable insights"}),e.jsx(es,{value:75,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{className:"text-foreground",children:"Extracting audio..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-foreground",children:"Analyzing scenes..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{className:"text-foreground",children:"Predicting engagement..."})]})]})]})}):!m||!m.basic_info?e.jsx(T,{className:re("border-2 border-red-200 bg-red-50",U),children:e.jsxs(E,{className:"p-8 text-center",children:[e.jsx(Ts,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-red-800 mb-2",children:"Analysis Error"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The video analysis data is incomplete or corrupted."}),e.jsxs(G,{onClick:H,variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})}):e.jsxs(T,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-blue-50",U),children:[e.jsx(D,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-blue-600 rounded-lg",children:e.jsx(Ie,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Video Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Comprehensive insights powered by artificial intelligence"})]})]}),e.jsxs(G,{onClick:H,disabled:a,size:"sm",variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(E,{children:[e.jsxs(bs,{value:ne,onValueChange:L,className:"w-full",children:[e.jsxs(js,{className:"grid w-full grid-cols-3",children:[e.jsx(be,{value:"overview",children:"Overview"}),e.jsx(be,{value:"engagement",children:"Engagement"}),e.jsx(be,{value:"chapters",children:"Chapters"})]}),e.jsxs(je,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5"}),"Video Information"]})}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Duration:"}),e.jsx("span",{className:"font-medium",children:Y(((S=m.basic_info)==null?void 0:S.duration)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Resolution:"}),e.jsxs("span",{className:"font-medium",children:[((se=m.basic_info)==null?void 0:se.width)||0,"×",((M=m.basic_info)==null?void 0:M.height)||0]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"File Size:"}),e.jsx("span",{className:"font-medium",children:ee(((ue=m.basic_info)==null?void 0:ue.file_size)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Audio:"}),e.jsx(P,{variant:(de=m.basic_info)!=null&&de.has_audio?"default":"destructive",children:(ie=m.basic_info)!=null&&ie.has_audio?"Present":"Missing"})]})]})]}),e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Content Analysis"]})}),e.jsxs(E,{className:"space-y-3",children:[m.content_category&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Category:"}),e.jsxs(P,{className:"bg-blue-100 text-blue-800",children:[j(m.content_category.primary_category)," ",m.content_category.primary_category]})]}),m.mood_analysis&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Mood:"}),e.jsxs(P,{className:"bg-green-100 text-green-800",children:[$(m.mood_analysis.dominant_mood)," ",m.mood_analysis.dominant_mood]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600",children:"Transcript:"}),e.jsx(P,{variant:(le=m.transcript)!=null&&le.success?"default":"destructive",children:(ke=m.transcript)!=null&&ke.success?e.jsxs(e.Fragment,{children:[e.jsx(gs,{className:"w-3 h-3 mr-1"}),"Available"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ts,{className:"w-3 h-3 mr-1"}),"Failed"]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Content Tags:"}),e.jsxs("span",{className:"font-medium",children:[((me=m.content_tags)==null?void 0:me.length)||0," tags"]})]})]})]})]}),e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Overall Scores"]})}),e.jsx(E,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:re("text-3xl font-bold p-4 rounded-lg mb-2",X(((Ne=m.quality_score)==null?void 0:Ne.overall_score)||0)),children:[((ye=m.quality_score)==null?void 0:ye.overall_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Video Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:re("text-3xl font-bold p-4 rounded-lg mb-2",X(((_e=m.engagement_predictions)==null?void 0:_e.engagement_score)||0)),children:[((i=m.engagement_predictions)==null?void 0:i.engagement_score)||0,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Engagement Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold p-4 bg-purple-100 text-purple-800 rounded-lg mb-2",children:((A=m.engagement_predictions)==null?void 0:A.virality_potential)||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Virality Potential"})]})]})})]})]}),e.jsx(je,{value:"engagement",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Engagement Predictions"]})}),e.jsxs(E,{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx(We,{className:"w-8 h-8 text-blue-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-800",children:(((W=(F=m.engagement_predictions)==null?void 0:F.predicted_views)==null?void 0:W.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-blue-600",children:"Expected Views"})]}),e.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[e.jsx(ct,{className:"w-8 h-8 text-pink-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-pink-800",children:(((Ee=(Q=m.engagement_predictions)==null?void 0:Q.predicted_likes)==null?void 0:Ee.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-pink-600",children:"Expected Likes"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(_t,{className:"w-8 h-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-800",children:(((we=(xe=m.engagement_predictions)==null?void 0:xe.predicted_shares)==null?void 0:we.expected)||0).toLocaleString()}),e.jsx("p",{className:"text-sm text-green-600",children:"Expected Shares"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"Prediction Ranges"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Views"}),e.jsxs("span",{children:[(((Me=(Se=m.engagement_predictions)==null?void 0:Se.predicted_views)==null?void 0:Me.conservative)||0).toLocaleString()," - ",(((he=(oe=m.engagement_predictions)==null?void 0:oe.predicted_views)==null?void 0:he.optimistic)||0).toLocaleString()]})]}),e.jsx(es,{value:60,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[e.jsx("span",{children:"Likes"}),e.jsxs("span",{children:[(((ve=(Te=m.engagement_predictions)==null?void 0:Te.predicted_likes)==null?void 0:ve.conservative)||0).toLocaleString()," - ",(((Fe=(pe=m.engagement_predictions)==null?void 0:pe.predicted_likes)==null?void 0:Fe.optimistic)||0).toLocaleString()]})]}),e.jsx(es,{value:60,className:"h-2"})]})]})]})]})]})}),e.jsx(je,{value:"chapters",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(fs,{className:"w-5 h-5"}),"Auto-Generated Chapters"]})}),e.jsx(E,{children:(((Ce=m.auto_chapters)==null?void 0:Ce.length)||0)===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(fs,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No chapters detected"}),e.jsx("p",{className:"text-sm",children:"Video may be too short or lack clear segment divisions"})]}):e.jsx("div",{className:"space-y-3",children:(m.auto_chapters||[]).map((u,V)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx(P,{variant:"outline",className:"mt-1",children:Y(u.start_time)}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:u.title}),e.jsx("p",{className:"text-sm text-gray-600",children:u.description})]})]},V))})})]})})]}),b()&&e.jsxs("div",{className:"mt-6 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(ss,{className:"w-5 h-5 text-orange-600"}),e.jsx("h4",{className:"font-medium text-orange-800",children:"Video Quality Suggestions"})]}),e.jsxs("div",{className:"space-y-3",children:[v().map((u,V)=>e.jsxs("div",{className:re("flex items-center justify-between p-3 rounded-lg",u.severity==="high"?"bg-red-100 border border-red-200":"bg-yellow-100 border border-yellow-200"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:re("w-2 h-2 rounded-full",u.severity==="high"?"bg-red-500":"bg-yellow-500")}),e.jsxs("span",{className:re("font-medium",u.severity==="high"?"text-red-800":"text-yellow-800"),children:[u.type," needs improvement"]})]}),e.jsxs(P,{variant:"outline",className:re(u.severity==="high"?"border-red-300 text-red-700":"border-yellow-300 text-yellow-700"),children:["Score: ",u.score,"/100"]})]},V)),(((h=m.quality_score)==null?void 0:h.suggestions)||[]).length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-orange-200",children:[e.jsx("h5",{className:"font-medium text-orange-800 mb-2",children:"Recommendations:"}),e.jsx("div",{className:"space-y-2",children:(((l=m.quality_score)==null?void 0:l.suggestions)||[]).map((u,V)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm text-orange-700",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-orange-400 rounded-full mt-2 flex-shrink-0"}),e.jsx("span",{children:u})]},V))})]})]})]}),m.status==="partial_analysis"&&((N=m.errors)==null?void 0:N.length)&&e.jsxs("div",{className:"mt-4 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ss,{className:"w-5 h-5 text-yellow-600"}),e.jsx("h4",{className:"font-medium text-yellow-800",children:"Partial Analysis"})]}),e.jsx("div",{className:"space-y-1",children:(m.errors||[]).map((u,V)=>e.jsx("p",{className:"text-sm text-yellow-700",children:u},V))})]})]})]})}function Ta({videoId:t,className:k}){var se,M,ue,de,ie,le,ke,me,Ne,ye,_e,i,A,F,W,Q,Ee,xe,we,Se,Me,oe,he,Te,ve,pe,Fe,Ce;const[g,U]=c.useState(null),[m,_]=c.useState(!1),[a,C]=c.useState("overview"),[ne,L]=c.useState(!1),[O,H]=c.useState(null),{toast:Y}=Cs(),ee=async()=>{var h;if(!t){Y({title:"No Video Selected",description:"Please select a video to analyze performance.",variant:"destructive"});return}_(!0);try{const N=await(await fetch("/ai/analyze-video-performance",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((h=document.querySelector('meta[name="csrf-token"]'))==null?void 0:h.getAttribute("content"))||""},body:JSON.stringify({video_id:t})})).json();if(N.success)U(N.data),Y({title:"Performance Analysis Complete! 📊",description:"AI has analyzed your video performance across all platforms."});else throw new Error(N.message||"Failed to analyze performance")}catch(l){console.error("Performance analysis error:",l),Y({title:"Analysis Failed",description:"Failed to analyze video performance. Please try again.",variant:"destructive"})}finally{_(!1)}},X=async h=>{var l;try{const u=await(await fetch("/ai/create-ab-test",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((l=document.querySelector('meta[name="csrf-token"]'))==null?void 0:l.getAttribute("content"))||""},body:JSON.stringify({video_id:t,...h})})).json();if(u.success)Y({title:"A/B Test Created! 🧪",description:"Your A/B test has been set up and will start collecting data."}),L(!1);else throw new Error(u.message||"Failed to create A/B test")}catch(N){console.error("A/B test creation error:",N),Y({title:"A/B Test Failed",description:"Failed to create A/B test. Please try again.",variant:"destructive"})}},$=h=>h>=1e6?`${(h/1e6).toFixed(1)}M`:h>=1e3?`${(h/1e3).toFixed(1)}K`:h.toString(),j=h=>{switch(h){case"excellent":return"text-green-600 bg-green-100";case"good":return"text-blue-600 bg-blue-100";case"average":return"text-yellow-600 bg-yellow-100";case"needs_improvement":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},b=h=>{switch(h){case"increasing":return e.jsx(Pe,{className:"w-4 h-4 text-green-600"});case"decreasing":return e.jsx(ba,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Ss,{className:"w-4 h-4 text-blue-600"})}},v=h=>({youtube:"📺",instagram:"📷",tiktok:"🎵",x:"𝕏",facebook:"👥"})[h]||"📱",S=h=>{switch(h){case"high":return"text-red-600 bg-red-100";case"medium":return"text-yellow-600 bg-yellow-100";case"low":return"text-green-600 bg-green-100";default:return"text-gray-600 bg-gray-100"}};return!g&&!m?e.jsxs(T,{className:re("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",k),children:[e.jsxs(D,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit",children:e.jsx(Ve,{className:"w-8 h-8 text-white"})}),e.jsx(q,{className:"text-2xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"AI Performance Optimizer"}),e.jsx("p",{className:"text-gray-600",children:"Analyze your video performance and get AI-powered optimization recommendations"})]}),e.jsxs(E,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Pe,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Performance Analysis"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Ke,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Optimization Tips"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(ps,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"A/B Testing"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border",children:[e.jsx(Mt,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium",children:"Timing Optimization"})]})]}),e.jsxs(G,{onClick:ee,disabled:!t,size:"lg",className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700",children:[e.jsx(Ve,{className:"w-5 h-5 mr-2"}),"Start Performance Analysis"]}),!t&&e.jsx("p",{className:"text-sm text-gray-500",children:"Select a video first to enable performance analysis"})]})]}):m?e.jsx(T,{className:re("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",k),children:e.jsxs(E,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full w-fit animate-pulse",children:e.jsx(Ve,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Analyzing Performance..."}),e.jsx("p",{className:"text-gray-600 mb-4",children:"AI is analyzing your video performance across all platforms"}),e.jsx(es,{value:85,className:"w-full max-w-md mx-auto"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{children:"Analyzing metrics..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{children:"Finding opportunities..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-white rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{children:"Generating recommendations..."})]})]})]})}):!g||!g.overall_performance||!g.comparative_analysis||!g.platform_breakdown||!g.trend_analysis?e.jsx(T,{className:re("border-2 border-red-200 bg-gradient-to-br from-red-50 to-orange-50",k),children:e.jsxs(E,{className:"p-8 text-center space-y-4",children:[e.jsx(Js,{className:"w-12 h-12 text-red-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-red-700 mb-2",children:"Analysis Data Incomplete"}),e.jsx("p",{className:"text-red-600 mb-4",children:"The performance analysis data is incomplete or missing."}),e.jsxs(G,{onClick:ee,variant:"outline",className:"border-red-300 text-red-700",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Try Again"]})]})]})}):e.jsxs(T,{className:re("border-2 border-blue-200 bg-gradient-to-br from-blue-50 to-purple-50",k),children:[e.jsx(D,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg",children:e.jsx(Ve,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Performance Analysis Results"}),e.jsx("p",{className:"text-sm text-gray-600",children:"AI-powered performance insights and optimization recommendations"})]})]}),e.jsxs(G,{onClick:ee,disabled:m,size:"sm",variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsxs(E,{children:[e.jsxs(bs,{value:a,onValueChange:C,className:"w-full",children:[e.jsxs(js,{className:"grid w-full grid-cols-6",children:[e.jsx(be,{value:"overview",children:"Overview"}),e.jsx(be,{value:"platforms",children:"Platforms"}),e.jsx(be,{value:"opportunities",children:"Opportunities"}),e.jsx(be,{value:"trends",children:"Trends"}),e.jsx(be,{value:"timing",children:"Timing"}),e.jsx(be,{value:"testing",children:"A/B Testing"})]}),e.jsxs(je,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(We,{className:"w-5 h-5"}),"Total Performance"]})}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600",children:[g.performance_score,"/100"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Performance Score"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Views:"}),e.jsx("span",{className:"font-medium",children:$(((se=g.overall_performance)==null?void 0:se.total_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Engagement Rate:"}),e.jsxs("span",{className:"font-medium",children:[((M=g.overall_performance)==null?void 0:M.engagement_rate)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Performance Tier:"}),e.jsx(P,{className:j(((ue=g.overall_performance)==null?void 0:ue.performance_tier)||"unknown"),children:(((de=g.overall_performance)==null?void 0:de.performance_tier)||"unknown").replace("_"," ")})]})]})]}),e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Industry Comparison"]})}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Views vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((le=(ie=g.comparative_analysis)==null?void 0:ie.views_vs_industry)==null?void 0:le.performance)||"below_average")==="above_average"?e.jsx(Ys,{className:"w-3 h-3 text-green-600"}):e.jsx(Zs,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:re("text-sm font-medium",(((me=(ke=g.comparative_analysis)==null?void 0:ke.views_vs_industry)==null?void 0:me.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((ye=(Ne=g.comparative_analysis)==null?void 0:Ne.views_vs_industry)==null?void 0:ye.difference_percentage)||0),"%"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Engagement vs Industry:"}),e.jsxs("div",{className:"flex items-center gap-1",children:[(((i=(_e=g.comparative_analysis)==null?void 0:_e.engagement_vs_industry)==null?void 0:i.performance)||"below_average")==="above_average"?e.jsx(Ys,{className:"w-3 h-3 text-green-600"}):e.jsx(Zs,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:re("text-sm font-medium",(((F=(A=g.comparative_analysis)==null?void 0:A.engagement_vs_industry)==null?void 0:F.performance)||"below_average")==="above_average"?"text-green-600":"text-red-600"),children:[Math.abs(((Q=(W=g.comparative_analysis)==null?void 0:W.engagement_vs_industry)==null?void 0:Q.difference_percentage)||0),"%"]})]})]})]}),e.jsxs("div",{className:"pt-2 border-t",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Growth Potential:"}),e.jsxs("div",{className:"text-lg font-medium text-purple-600",children:[$(((xe=(Ee=g.comparative_analysis)==null?void 0:Ee.growth_potential)==null?void 0:xe.views_growth_potential)||0)," more views"]})]})]})]}),e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"Improvement Potential"]})}),e.jsxs(E,{className:"space-y-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[g.improvement_potential,"%"]}),e.jsx("p",{className:"text-sm text-gray-600",children:"Improvement Potential"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Platforms:"}),e.jsx("span",{className:"font-medium",children:((we=g.overall_performance)==null?void 0:we.platform_count)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Days Since Upload:"}),e.jsx("span",{className:"font-medium",children:((Se=g.overall_performance)==null?void 0:Se.days_since_upload)||0})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(P,{variant:"outline",children:((Me=g.trend_analysis)==null?void 0:Me.lifecycle_stage)||"unknown"})]})]})]})]}),e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ss,{className:"w-5 h-5"}),"Platform Performance Overview"]})}),e.jsx(E,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(g.platform_breakdown||{}).map(([h,l])=>e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl mb-2",children:v(h)}),e.jsx("div",{className:"font-medium capitalize mb-1",children:h}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["#",(l==null?void 0:l.ranking)||0]}),e.jsxs("div",{className:"text-lg font-bold text-blue-400",children:[(l==null?void 0:l.performance_score)||0,"/100"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[$((l==null?void 0:l.views)||0)," views"]})]},h))})})]})]}),e.jsx(je,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(g.platform_breakdown||{}).map(([h,l])=>e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:v(h)}),e.jsx("span",{className:"capitalize",children:h}),e.jsxs(P,{className:"ml-2",children:["#",(l==null?void 0:l.ranking)||0]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[(l==null?void 0:l.performance_score)||0,"/100"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Performance Score"})]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-950/20 rounded-lg",children:[e.jsx(We,{className:"w-6 h-6 text-blue-400 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:$((l==null?void 0:l.views)||0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Views"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-950/20 rounded-lg",children:[e.jsx(ct,{className:"w-6 h-6 text-green-400 mx-auto mb-1"}),e.jsx("div",{className:"text-lg font-bold",children:$((l==null?void 0:l.engagement)||0)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Engagement"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-950/20 rounded-lg",children:[e.jsx(Pe,{className:"w-6 h-6 text-purple-400 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[(l==null?void 0:l.engagement_rate)||0,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Engagement Rate"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[((l==null?void 0:l.strengths)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-green-700 mb-2 flex items-center gap-2",children:[e.jsx(ya,{className:"w-4 h-4"}),"Strengths"]}),e.jsx("ul",{className:"space-y-1",children:((l==null?void 0:l.strengths)||[]).map((N,u)=>e.jsxs("li",{className:"text-sm text-green-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-green-400 rounded-full mt-2 flex-shrink-0"}),N]},u))})]}),((l==null?void 0:l.weaknesses)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-red-700 mb-2 flex items-center gap-2",children:[e.jsx(Js,{className:"w-4 h-4"}),"Areas for Improvement"]}),e.jsx("ul",{className:"space-y-1",children:((l==null?void 0:l.weaknesses)||[]).map((N,u)=>e.jsxs("li",{className:"text-sm text-red-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full mt-2 flex-shrink-0"}),N]},u))})]})]}),((l==null?void 0:l.recommendations)||[]).length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-blue-700 mb-2 flex items-center gap-2",children:[e.jsx(zt,{className:"w-4 h-4"}),"Recommendations"]}),e.jsx("div",{className:"space-y-2",children:((l==null?void 0:l.recommendations)||[]).map((N,u)=>e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg",children:e.jsx("span",{className:"text-sm text-blue-800",children:N})},u))})]})]})]},h))})}),e.jsx(je,{value:"opportunities",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(g.optimization_opportunities||{}).map(([h,l])=>e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:v(h)}),e.jsxs("span",{className:"capitalize",children:[h," Opportunities"]})]})}),e.jsx(E,{className:"space-y-4",children:(l||[]).map((N,u)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),(N==null?void 0:N.title)||"Untitled"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(N==null?void 0:N.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{className:S((N==null?void 0:N.priority)||"low"),children:(N==null?void 0:N.priority)||"low"}),e.jsxs(P,{variant:"outline",children:[(N==null?void 0:N.potential_impact)||"unknown"," impact"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Action Steps:"}),e.jsx("div",{className:"space-y-1",children:((N==null?void 0:N.actions)||[]).map((V,B)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),V]},B))})]})]},u))})]},h))})}),e.jsx(je,{value:"trends",className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Ss,{className:"w-5 h-5"}),"Trend Analysis"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Trend Direction:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[b(((oe=g.trend_analysis)==null?void 0:oe.trend_direction)||"stable"),e.jsx("span",{className:"font-medium capitalize",children:((he=g.trend_analysis)==null?void 0:he.trend_direction)||"stable"})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Daily Avg Views:"}),e.jsx("span",{className:"font-medium",children:$(((Te=g.trend_analysis)==null?void 0:Te.daily_average_views)||0)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Momentum Score:"}),e.jsxs("span",{className:"font-medium",children:[((ve=g.trend_analysis)==null?void 0:ve.momentum_score)||0,"/100"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lifecycle Stage:"}),e.jsx(P,{variant:"outline",children:((pe=g.trend_analysis)==null?void 0:pe.lifecycle_stage)||"unknown"})]})]})]}),e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(Pe,{className:"w-5 h-5"}),"Performance Projections"]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:$(((Fe=g.trend_analysis)==null?void 0:Fe.projected_30_day_views)||0)}),e.jsx("div",{className:"text-sm text-blue-600",children:"Projected 30-Day Views"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Peak Performance Day:"}),e.jsxs("span",{className:"font-medium",children:["Day ",((Ce=g.trend_analysis)==null?void 0:Ce.peak_performance_day)||0]})]})]})]})]})}),e.jsx(je,{value:"timing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(g.posting_time_optimization||{}).map(([h,l])=>e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:v(h)}),e.jsxs("span",{className:"capitalize",children:[h," Timing Optimization"]})]})}),e.jsx(E,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Current Status"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Posted at:"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.current_posting_time)||"Unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Day type:"}),e.jsx("span",{className:"font-medium",children:(l==null?void 0:l.current_day_type)||"unknown"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Improvement potential:"}),e.jsx(P,{className:S((l==null?void 0:l.improvement_potential)||"low"),children:(l==null?void 0:l.improvement_potential)||"low"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimal Times"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Best time:"}),e.jsx("span",{className:"font-medium text-green-600",children:(l==null?void 0:l.best_time)||"unknown"})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"All optimal times:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:((l==null?void 0:l.optimal_times)||[]).map((N,u)=>e.jsx(P,{variant:"outline",className:"text-xs",children:N},u))})]})]})]})})]},h))})}),e.jsx(je,{value:"testing",className:"space-y-4",children:e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),"A/B Testing Suggestions"]})}),e.jsx(E,{className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:(g.ab_test_suggestions||[]).map((h,l)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(ps,{className:"w-4 h-4"}),(h==null?void 0:h.title)||"Untitled Test"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(h==null?void 0:h.description)||"No description available"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{className:S((h==null?void 0:h.priority)||"low"),children:(h==null?void 0:h.priority)||"low"}),e.jsx(G,{size:"sm",onClick:()=>{H(h),L(!0)},children:"Start Test"})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Test Variations:"}),e.jsx("div",{className:"space-y-1",children:((h==null?void 0:h.test_variations)||[]).map((N,u)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),N]},u))})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-sm mb-2",children:"Success Metrics:"}),e.jsx("div",{className:"space-y-1",children:((h==null?void 0:h.success_metrics)||[]).map((N,u)=>e.jsx(P,{variant:"outline",className:"text-xs mr-1",children:N.replace("_"," ")},u))}),e.jsxs("div",{className:"text-xs text-gray-500 mt-2",children:["Duration: ",(h==null?void 0:h.duration)||"Unknown"]})]})]})]},l))})})]})})]}),e.jsx(at,{open:ne,onOpenChange:L,children:e.jsxs(rt,{className:"max-w-md",children:[e.jsxs(nt,{children:[e.jsx(it,{children:"Create A/B Test"}),e.jsxs(lt,{children:['Set up an A/B test for "',O==null?void 0:O.title,'"']})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Test Duration (days)"}),e.jsxs(Tt,{defaultValue:"14",children:[e.jsx(Ct,{children:e.jsx(At,{})}),e.jsxs(Ft,{children:[e.jsx(us,{value:"7",children:"7 days"}),e.jsx(us,{value:"14",children:"14 days"}),e.jsx(us,{value:"21",children:"21 days"}),e.jsx(us,{value:"30",children:"30 days"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Success Metrics"}),e.jsx("div",{className:"space-y-2",children:((O==null?void 0:O.success_metrics)||[]).map((h,l)=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Et,{id:`metric-${l}`,defaultChecked:!0}),e.jsx("label",{htmlFor:`metric-${l}`,className:"text-sm",children:h.replace("_"," ")})]},l))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(G,{variant:"outline",onClick:()=>L(!1),children:"Cancel"}),e.jsx(G,{onClick:()=>X({test_type:O==null?void 0:O.test_type,test_variations:O==null?void 0:O.test_variations,success_metrics:O==null?void 0:O.success_metrics,test_duration_days:14}),children:"Create Test"})]})]})]})})]})]})}const Ca=({subtitle:t,currentTime:k,position:g,onMouseDown:U,onDoubleClick:m,editingSubtitle:_,editingText:a,onTextChange:C,onSaveEdit:ne,onCancelEdit:L})=>{var j;const O=c.useRef(null),[H,Y]=c.useState(new Set);c.useEffect(()=>{if(!t.words||t.words.length===0){Y(new Set);return}const b=new Set;t.words.forEach((v,S)=>{k>=v.start_time&&k<=v.end_time&&b.add(S)}),Y(b)},[k,t.words]);const ee=()=>!t.words||t.words.length===0?e.jsx("span",{className:"subtitle-text",children:t.text}):t.words.map((b,v)=>{var M,ue,de,ie,le;const S=H.has(v),se=v===t.words.length-1;return e.jsxs("span",{className:`subtitle-word ${S?"active":""}`,style:{color:S?((M=t.style)==null?void 0:M.color)||"#FFFFFF":((ue=t.style)==null?void 0:ue.color)||"#FFFFFF",fontWeight:S||(de=t.style)!=null&&de.bold?"bold":"normal",fontStyle:(ie=t.style)!=null&&ie.italic?"italic":"normal",textDecoration:(le=t.style)!=null&&le.underline?"underline":"none",transition:"all 0.1s ease-in-out",display:"inline-block",marginRight:se?"0":"0.1em"},children:[b.word,!se&&" "]},`${b.word}-${v}`)}),X=()=>{const b=Math.max(15,Math.min(85,g.x)),v=Math.max(15,Math.min(85,g.y));return{x:b,y:v}},$=()=>{var se,M;const b=t.style||{},v=X(),S=Math.max(16,Math.min(48,b.fontSize||24));return{position:"absolute",left:`${v.x}%`,top:`${v.y}%`,transform:"translate(-50%, -50%)",fontFamily:b.fontFamily||"Arial, sans-serif",fontSize:`${S}px`,fontWeight:b.fontWeight||"bold",color:b.color||"#FFFFFF",background:(se=b.backgroundColor)!=null&&se.includes("gradient")?b.backgroundColor:void 0,backgroundColor:(M=b.backgroundColor)!=null&&M.includes("gradient")?void 0:b.backgroundColor||"rgba(0, 0, 0, 0.7)",textAlign:b.textAlign||"center",borderRadius:`${b.borderRadius||4}px`,padding:`${b.padding||8}px`,textShadow:b.textShadow||"2px 2px 4px rgba(0, 0, 0, 0.5)",fontStyle:b.italic?"italic":"normal",textDecoration:b.underline?"underline":"none",cursor:"move",userSelect:"none",boxShadow:(b==null?void 0:b.preset)==="neon"?"none":void 0,whiteSpace:"normal",wordWrap:"break-word",maxWidth:"80vw",minWidth:"200px",lineHeight:"1.2",letterSpacing:"0.5px",backdropFilter:"blur(2px)",zIndex:1e3,border:_?"2px solid #3b82f6":"none"}};return e.jsx("div",{ref:O,style:$(),onMouseDown:U,onDoubleClick:m,className:`subtitle-container ${((j=t.style)==null?void 0:j.preset)||""}`,children:_?e.jsx("textarea",{value:a||"",onChange:b=>C==null?void 0:C(b.target.value),onKeyDown:b=>{b.key==="Enter"&&!b.shiftKey?(b.preventDefault(),ne==null||ne()):b.key==="Escape"&&(L==null||L())},onBlur:ne,className:"subtitle-editor",style:{background:"transparent",border:"none",outline:"none",textAlign:"center",color:"inherit",fontSize:"inherit",fontFamily:"inherit",fontWeight:"inherit",width:"100%",minWidth:"200px",resize:"none",overflow:"hidden",whiteSpace:"normal",wordWrap:"break-word",lineHeight:"inherit",letterSpacing:"inherit",padding:"0",margin:"0"},rows:2,autoFocus:!0}):e.jsx("div",{className:"subtitle-content",style:{textAlign:"inherit",width:"100%",display:"flex",flexWrap:"wrap",justifyContent:"center",alignItems:"center",gap:"0.1em",lineHeight:"inherit",letterSpacing:"inherit"},children:ee()})})},st=t=>{if(t==="transparent")return"#000000";if(t.startsWith("rgba(")){const g=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);if(g){const U=parseInt(g[1]).toString(16).padStart(2,"0"),m=parseInt(g[2]).toString(16).padStart(2,"0"),_=parseInt(g[3]).toString(16).padStart(2,"0");return`#${U}${m}${_}`}}if(t.startsWith("rgb(")){const g=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);if(g){const U=parseInt(g[1]).toString(16).padStart(2,"0"),m=parseInt(g[2]).toString(16).padStart(2,"0"),_=parseInt(g[3]).toString(16).padStart(2,"0");return`#${U}${m}${_}`}}const k={black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",cyan:"#00ffff",magenta:"#ff00ff",silver:"#c0c0c0",gray:"#808080",maroon:"#800000",olive:"#808000",lime:"#00ff00",aqua:"#00ffff",teal:"#008080",navy:"#000080",fuchsia:"#ff00ff",purple:"#800080"};return k[t.toLowerCase()]?k[t.toLowerCase()]:t.startsWith("#")&&/^#[0-9A-Fa-f]{6}$/.test(t)?t:"#000000"},Aa=({videoPath:t,videoId:k,videoTitle:g,onSubtitleGenerated:U})=>{var zs,Rs,Ps,Os,$s,Is,Ds,qs,Ls,Vs,Ws,Bs,Us,Xs;const{props:m}=tt(),_=((zs=m.app)==null?void 0:zs.env)==="local",[a,C]=c.useState(null),[ne,L]=c.useState(!1),[O,H]=c.useState(!1),[Y,ee]=c.useState(!1),[X,$]=c.useState(!1),j=c.useRef(null),[b,v]=c.useState({}),[S,se]=c.useState("en"),[M,ue]=c.useState(null),[de,ie]=c.useState("standard"),[le,ke]=c.useState(null),[me,Ne]=c.useState(null),[ye,_e]=c.useState(null),[i,A]=c.useState(!1),[F,W]=c.useState(0),[Q,Ee]=c.useState(0),[xe,we]=c.useState(!1),[Se,Me]=c.useState(new Set),[oe,he]=c.useState(null),[Te,ve]=c.useState(""),[pe,Fe]=c.useState(null),[Ce,h]=c.useState({x:0,y:0}),l=c.useRef(null),N=c.useRef(null),u=c.useRef(null),V=c.useRef(null),[B,Oe]=c.useState(null),[te,Be]=c.useState(null),[Ue,ts]=c.useState(!1),[as,rs]=c.useState(null),[Xe,ns]=c.useState(null),[ys,vs]=c.useState(!1),Ge={standard:{name:"Standard",style:{fontFamily:"Arial, sans-serif",fontSize:32,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"rgba(0, 0, 0, 0.7)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:4,padding:8,textShadow:"2px 2px 4px rgba(0, 0, 0, 0.5)",preset:"standard"}},"no-background":{name:"No Background",style:{fontFamily:"Arial, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"no-background"}},neon:{name:"Neon",style:{fontFamily:"Impact, Arial Black, sans-serif",fontSize:40,fontWeight:"bold",color:"#00FFFF",backgroundColor:"rgba(0, 20, 40, 0.8)",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:8,padding:12,textShadow:"0 0 10px #00FFFF, 0 0 20px #00FFFF",preset:"neon"}},confetti:{name:"Confetti",style:{fontFamily:"Comic Sans MS, cursive",fontSize:38,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"2px 2px 0px #000000, -2px -2px 0px #000000, 2px -2px 0px #000000, -2px 2px 0px #000000",preset:"confetti"}},bubbles:{name:"Bubbles",style:{fontFamily:"Trebuchet MS, sans-serif",fontSize:36,fontWeight:"bold",color:"#FFFFFF",backgroundColor:"transparent",textAlign:"center",bold:!0,italic:!1,underline:!1,borderRadius:0,padding:4,textShadow:"3px 3px 6px rgba(0, 0, 0, 0.8)",preset:"bubbles"}}},Ns=Ge.standard.style;c.useEffect(()=>(ls(),()=>{le&&clearInterval(le)}),[]),c.useEffect(()=>{k&&(console.log("Checking existing subtitles for video ID:",k),ws())},[k]),c.useEffect(()=>{a!=null&&a.subtitles&&a.subtitles.length>0&&vs(!0)},[a==null?void 0:a.subtitles]);const ws=async()=>{var s,r;if(!k){console.log("No video ID available, skipping subtitle check");return}console.log("Checking for existing subtitles for video:",k);try{const y=await(await fetch("/ai/subtitle-check",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:k})})).json();if(console.log("Subtitle check response:",y),y.success&&y.data&&y.data.processing_status==="completed"){console.log("Found existing subtitles, loading them:",y.data);const R=((r=y.data.subtitles)==null?void 0:r.map(w=>({...w,style:w.style||Ns,position:w.position||{x:50,y:85}})))||[];C({...y.data,original_video_path:t,subtitles:R}),console.log("Loaded subtitles with styles:",R),U&&U(),y.data.generation_id&&is(y.data.generation_id)}else console.log("No existing subtitles found for this video")}catch(x){console.error("Error checking existing subtitles:",x)}},is=async s=>{try{console.log("Loading word timing data for generation:",s);const r=await fetch(`/ai/word-timing/${s}`,{method:"GET",headers:{Accept:"application/json"}});if(r.ok){const x=await r.json();x.success&&x.data?(console.log("Word timing data loaded:",x.data),_e(x.data),C(y=>{var ze,Re,ms,Ye;if(!y||!y.subtitles)return y;const R=new Map;x.data.words.forEach(fe=>{R.has(fe.subtitle_id)||R.set(fe.subtitle_id,[]),R.get(fe.subtitle_id).push({word:fe.word,start_time:fe.start_time,end_time:fe.end_time,confidence:fe.confidence})});const w=y.subtitles.map(fe=>{const Hs=R.get(fe.id)||[];return console.log(`Merging words for subtitle ${fe.id}: ${Hs.length} words`),{...fe,words:Hs}});console.log("Updated subtitles with word timing:",w),console.log("First subtitle word count after merge:",((Re=(ze=w[0])==null?void 0:ze.words)==null?void 0:Re.length)||0),console.log("First subtitle words sample:",(Ye=(ms=w[0])==null?void 0:ms.words)==null?void 0:Ye.slice(0,3));const p=w.filter(fe=>fe.words&&fe.words.length>0);return console.log(`Subtitles with word timing: ${p.length}/${w.length}`),{...y,subtitles:w}})):console.log("No word timing data available")}else console.log("Word timing data not found or not accessible")}catch(r){console.error("Error loading word timing data:",r)}};c.useEffect(()=>{if(a&&a.processing_status==="processing"){const s=setInterval(()=>{o()},2e3);return ke(s),()=>clearInterval(s)}else le&&(clearInterval(le),ke(null))},[a==null?void 0:a.processing_status]),c.useEffect(()=>{const s=l.current;if(!s)return;const r=()=>{W(s.currentTime)},x=()=>{Ee(s.duration)};return s.addEventListener("timeupdate",r),s.addEventListener("loadedmetadata",x),()=>{s.removeEventListener("timeupdate",r),s.removeEventListener("loadedmetadata",x)}},[]);const ls=async()=>{try{const r=await(await fetch("/ai/subtitle-languages")).json();r.success&&v(r.data)}catch(s){console.error("Error loading languages:",s)}},n=async()=>{var s;if(!k){alert("No video ID available for subtitle generation. Please ensure the video is properly uploaded.");return}L(!0);try{const x=await(await fetch("/ai/subtitle-generate",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:k,language:S})})).json();x.success?C({...x.data,original_video_path:t}):(console.error("Generation failed:",x.message),alert(`Subtitle generation failed: ${x.message}`))}catch(r){console.error("Error starting generation:",r)}finally{L(!1)}},o=async()=>{var s;if(a!=null&&a.generation_id)try{const x=await(await fetch("/ai/subtitle-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id})})).json();x.success&&C(y=>{const R={...y,...x.data,original_video_path:(y==null?void 0:y.original_video_path)||t};return x.data.processing_status==="completed"&&x.data.generation_id&&!ye&&(is(x.data.generation_id),U&&U()),R})}catch(r){console.error("Error polling progress:",r)}},d=()=>{const s=l.current;s&&(i?s.pause():s.play(),A(!i))},f=s=>{const r=l.current,x=N.current;if(!r||!x)return;const y=x.getBoundingClientRect(),w=(s.clientX-y.left)/y.width*Q;r.currentTime=w,W(w)},I=()=>a!=null&&a.subtitles&&a.subtitles.find(s=>F>=s.start_time&&F<=s.end_time)||null,z=async()=>{var x;const s=l.current,r=V.current;if(!s||!r||!k){alert("Unable to capture frame. Please ensure video is loaded.");return}ee(!0);try{r.width=s.videoWidth,r.height=s.videoHeight;const y=r.getContext("2d");if(!y)throw new Error("Unable to get canvas context");y.drawImage(s,0,0,r.width,r.height);const R=await new Promise((Re,ms)=>{r.toBlob(Ye=>{Ye?Re(Ye):ms(new Error("Failed to create blob from canvas"))},"image/jpeg",.8)}),w=new FormData;w.append("video_id",k.toString()),w.append("frame_id",`frame_${Date.now()}`),w.append("thumbnail",R,"thumbnail.jpg"),w.append("current_time",F.toString());const ze=await(await fetch("/ai/set-video-thumbnail-from-frame",{method:"POST",headers:{"X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:w})).json();if(ze.success){const Re=document.createElement("div");Re.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",Re.textContent="✓ Thumbnail set successfully!",document.body.appendChild(Re),setTimeout(()=>{document.body.removeChild(Re)},3e3)}else alert(`Failed to set thumbnail: ${ze.message}`)}catch(y){console.error("Error setting thumbnail:",y),alert("Failed to capture and set thumbnail. Please try again.")}finally{ee(!1)}},J=s=>{const r=a==null?void 0:a.subtitles.find(x=>x.id===s);r&&(he(s),ve(r.text))},K=async()=>{var s;if(!(!oe||!a))try{if((await(await fetch("/ai/subtitle-update-text",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:oe,text:Te})})).json()).success){const y=a.subtitles.map(R=>R.id===oe?{...R,text:Te}:R);C({...a,subtitles:y}),he(null),ve("")}}catch(r){console.error("Error updating subtitle:",r)}},Z=async(s,r)=>{var x;if(a)try{if((await(await fetch("/ai/subtitle-update-style",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:s,style:r})})).json()).success){const w=a.subtitles.map(p=>p.id===s?{...p,style:{...p.style,...r}}:p);C({...a,subtitles:w})}}catch(y){console.error("Error updating subtitle style:",y)}},$e=async(s,r)=>{var x;if(a)try{if((await(await fetch("/ai/subtitle-update-position",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,subtitle_id:s,position:r})})).json()).success){const w=a.subtitles.map(p=>p.id===s?{...p,position:r}:p);C({...a,subtitles:w})}}catch(y){console.error("Error updating subtitle position:",y)}},Ae=async s=>{var x;if(!a)return;const r=Ge[s];if(r)try{(await(await fetch("/ai/apply-style-to-all-subtitles",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((x=document.querySelector('meta[name="csrf-token"]'))==null?void 0:x.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,style:r.style})})).json()).success&&(C(w=>w?{...w,subtitles:w.subtitles.map(p=>({...p,style:{...r.style}}))}:null),ie(s))}catch(y){console.error("Failed to apply style to all subtitles:",y)}},os=(s,r)=>{if(s.preventDefault(),s.stopPropagation(),!(a==null?void 0:a.subtitles.find(ze=>ze.id===r))||!l.current)return;Fe(r),l.current.getBoundingClientRect();const R=s.target.getBoundingClientRect(),w=R.left+R.width/2,p=R.top+R.height/2;h({x:s.clientX-w,y:s.clientY-p})},cs=s=>{if(!pe||!l.current)return;const r=l.current.getBoundingClientRect(),x=s.clientX-Ce.x,y=s.clientY-Ce.y,R=(x-r.left)/r.width*100,w=(y-r.top)/r.height*100,p=Math.max(5,Math.min(95,R)),ze=Math.max(5,Math.min(95,w));$e(pe,{x:p,y:ze})},Fs=()=>{Fe(null),h({x:0,y:0})},ht=async()=>{var s;if(a!=null&&a.generation_id)try{const x=await(await fetch("/ai/subtitle-export",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,format:"srt"})})).json();x.success&&window.open(x.data.file_url,"_blank")}catch(r){console.error("Error exporting transcript:",r)}},Es=async()=>{var s;if(k)try{const x=await(await fetch("/ai/rendered-video-status",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({video_id:k})})).json();x.success&&Ne({status:x.status,rendered_video_path:x.rendered_video_path})}catch{}};c.useEffect(()=>{let s=null;return(me==null?void 0:me.status)==="processing"&&(s=setInterval(Es,3e3)),()=>{s&&clearInterval(s)}},[me==null?void 0:me.status,k]),c.useEffect(()=>{Es()},[k]);const pt=async()=>{var s;if(a!=null&&a.generation_id){H(!0);try{const x=await(await fetch("/ai/subtitle-render-video",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((s=document.querySelector('meta[name="csrf-token"]'))==null?void 0:s.getAttribute("content"))||""},body:JSON.stringify({generation_id:a.generation_id,video_id:k})})).json();x.success?Ne({status:"processing",rendered_video_path:null}):alert(`Failed to render video: ${x.message}`)}catch(r){console.error("Error rendering video:",r),alert("An error occurred while rendering the video. Please try again.")}finally{H(!1)}}},He=s=>{const r=Math.floor(s/60),x=Math.floor(s%60);return`${r}:${x.toString().padStart(2,"0")}`},gt=async()=>{var s,r,x;try{X?document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen():(s=j.current)!=null&&s.requestFullscreen?await j.current.requestFullscreen():(r=j.current)!=null&&r.webkitRequestFullscreen?await j.current.webkitRequestFullscreen():(x=j.current)!=null&&x.msRequestFullscreen&&await j.current.msRequestFullscreen()}catch(y){console.error("Error toggling fullscreen:",y)}};c.useEffect(()=>{const s=()=>{const r=!!(document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement);$(r)};return document.addEventListener("fullscreenchange",s),document.addEventListener("webkitfullscreenchange",s),document.addEventListener("msfullscreenchange",s),()=>{document.removeEventListener("fullscreenchange",s),document.removeEventListener("webkitfullscreenchange",s),document.removeEventListener("msfullscreenchange",s)}},[]);const ge=I(),ds=()=>{if(l.current&&u.current){const s=l.current.getBoundingClientRect(),r=u.current.getBoundingClientRect();if(r){const x={width:s.width,height:s.height,top:s.top-r.top,left:s.left-r.left};Oe(te?{width:x.width*(te.width/100),height:x.height*(te.height/100),top:x.top+x.height*(te.y/100),left:x.left+x.width*(te.x/100)}:x)}}},ft=()=>{te||Be({x:10,y:20,width:80,height:60})};c.useEffect(()=>{a!=null&&a.custom_bounds&&Be(a.custom_bounds)},[a]);const Je=(s,r)=>{s.preventDefault(),s.stopPropagation(),!(!te||!l.current)&&(rs(r),l.current.getBoundingClientRect(),ns({x:s.clientX,y:s.clientY,bounds:{...te}}))},bt=s=>{if(!as||!Xe||!l.current)return;const r=l.current.getBoundingClientRect(),x=s.clientX-Xe.x,y=s.clientY-Xe.y,R=x/r.width*100,w=y/r.height*100;let p={...Xe.bounds};switch(as){case"move":p.x=Math.max(0,Math.min(100-p.width,p.x+R)),p.y=Math.max(0,Math.min(100-p.height,p.y+w));break;case"resize-tl":p.x=Math.max(0,Math.min(p.x+p.width-10,p.x+R)),p.y=Math.max(0,Math.min(p.y+p.height-10,p.y+w)),p.width=Math.max(10,Math.min(100-p.x,p.width-R)),p.height=Math.max(10,Math.min(100-p.y,p.height-w));break;case"resize-tr":p.y=Math.max(0,Math.min(p.y+p.height-10,p.y+w)),p.width=Math.max(10,Math.min(100-p.x,p.width+R)),p.height=Math.max(10,Math.min(100-p.y,p.height-w));break;case"resize-bl":p.x=Math.max(0,Math.min(p.x+p.width-10,p.x+R)),p.width=Math.max(10,Math.min(100-p.x,p.width-R)),p.height=Math.max(10,Math.min(100-p.y,p.height+w));break;case"resize-br":p.width=Math.max(10,Math.min(100-p.x,p.width+R)),p.height=Math.max(10,Math.min(100-p.y,p.height+w));break}Be(p)},Ms=()=>{rs(null),ns(null)};return c.useEffect(()=>{const s=()=>{setTimeout(ds,50)},r=()=>ds();return l.current&&(l.current.addEventListener("loadedmetadata",r),l.current.addEventListener("loadeddata",r)),window.addEventListener("resize",s),setTimeout(ds,100),()=>{l.current&&(l.current.removeEventListener("loadedmetadata",r),l.current.removeEventListener("loadeddata",r)),window.removeEventListener("resize",s)}},[t,te]),c.useEffect(()=>{setTimeout(ds,100)},[X,te]),c.useEffect(()=>{if(!(ge!=null&&ge.words)||ge.words.length===0){Me(new Set);return}const s=new Set;ge.words.forEach((r,x)=>{F>=r.start_time&&F<=r.end_time&&s.add(x)}),Me(s)},[F,ge==null?void 0:ge.words]),e.jsxs("div",{ref:j,className:`bg-background shadow-sm border ${X?"h-screen w-screen flex flex-col":"rounded-lg"}`,children:[e.jsx("canvas",{ref:V,style:{display:"none"}}),e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-muted/50 to-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs("button",{onClick:gt,className:"flex items-center gap-2 px-3 py-2 bg-muted hover:bg-muted/80 text-foreground rounded-lg transition-colors",title:X?"Exit fullscreen":"Enter fullscreen",children:[X?e.jsx(xa,{className:"w-4 h-4"}):e.jsx(ca,{className:"w-4 h-4"}),X?"Exit Fullscreen":"Fullscreen"]})}),!a&&e.jsx("div",{className:"flex items-center gap-4",children:_?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5 text-muted-foreground"}),e.jsxs("select",{value:S,onChange:s=>se(s.target.value),className:"px-3 py-2 border border-input rounded-lg bg-background text-foreground focus:outline-none focus:ring-2 focus:ring-purple-500",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"Spanish"}),e.jsx("option",{value:"fr",children:"French"}),e.jsx("option",{value:"de",children:"German"}),e.jsx("option",{value:"it",children:"Italian"}),e.jsx("option",{value:"pt",children:"Portuguese"}),e.jsx("option",{value:"ru",children:"Russian"}),e.jsx("option",{value:"ja",children:"Japanese"}),e.jsx("option",{value:"ko",children:"Korean"}),e.jsx("option",{value:"zh",children:"Chinese"}),Object.entries(b).map(([s,r])=>e.jsx("option",{value:s,children:r.name||s},s))]})]}),e.jsx("button",{onClick:n,disabled:ne||!k,className:"flex items-center gap-2 px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:ne?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(et,{className:"w-5 h-5"}),"Generate Subtitles"]})})]}):e.jsxs("button",{disabled:!0,className:"flex items-center gap-2 px-6 py-2 bg-gray-400 text-gray-200 rounded-lg font-medium cursor-not-allowed opacity-50 transition-all",children:[e.jsx(et,{className:"w-7 h-7"}),"Subtitle Generation Coming Soon"]})})]})}),e.jsxs("div",{className:`p-6 ${X?"flex-1 overflow-auto":""}`,children:[(a==null?void 0:a.processing_status)==="processing"&&e.jsxs("div",{className:"bg-blue-950/50 border border-blue-800 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-blue-400 border-t-transparent"}),e.jsxs("span",{className:"font-medium text-blue-200",children:["Processing: ",a.progress.current_step]})]}),e.jsx("div",{className:"w-full bg-blue-900/50 rounded-full h-2 mb-2",children:e.jsx("div",{className:"bg-blue-400 h-2 rounded-full transition-all duration-300",style:{width:`${a.progress.percentage}%`}})}),e.jsxs("div",{className:"flex justify-between text-sm text-blue-300",children:[e.jsxs("span",{children:[a.progress.percentage,"% complete"]}),e.jsxs("span",{children:[He(a.progress.processed_duration)," / ",He(a.progress.total_duration)]})]})]}),t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{ref:u,className:"relative bg-black rounded-lg overflow-hidden",onMouseMove:cs,onMouseUp:Fs,onMouseLeave:Fs,style:{position:"relative"},children:[e.jsx("video",{ref:l,src:(a==null?void 0:a.original_video_path)||t,className:`w-full h-auto ${X?"max-h-[70vh]":"max-h-96"}`,controls:!1,onPlay:()=>A(!0),onPause:()=>A(!1)}),e.jsx("div",{className:"video-subtitle-overlay",style:{top:(B==null?void 0:B.top)||0,left:(B==null?void 0:B.left)||0,width:(B==null?void 0:B.width)||"100%",height:(B==null?void 0:B.height)||"100%"},children:ge&&e.jsx("div",{style:{pointerEvents:"auto"},children:e.jsx(Ca,{subtitle:ge,currentTime:F,position:ge.position,onMouseDown:s=>os(s,ge.id),onDoubleClick:()=>J(ge.id),editingSubtitle:oe===ge.id,editingText:Te,onTextChange:ve,onSaveEdit:K,onCancelEdit:()=>{he(null),ve("")}})})}),Ue&&te&&l.current&&e.jsx("div",{className:"bounds-editor-overlay",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"auto"},onMouseMove:bt,onMouseUp:Ms,onMouseLeave:Ms,children:e.jsxs("div",{className:"bounds-rectangle",style:{position:"absolute",left:`${te.x}%`,top:`${te.y}%`,width:`${te.width}%`,height:`${te.height}%`,border:"3px solid #3b82f6",backgroundColor:"rgba(59, 130, 246, 0.15)",cursor:"move",boxShadow:"0 0 10px rgba(59, 130, 246, 0.3)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Je(s,"move"),children:[e.jsx("div",{className:"resize-handle resize-tl",style:{position:"absolute",top:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"nw-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Je(s,"resize-tl")}),e.jsx("div",{className:"resize-handle resize-tr",style:{position:"absolute",top:"-8px",right:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"ne-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Je(s,"resize-tr")}),e.jsx("div",{className:"resize-handle resize-bl",style:{position:"absolute",bottom:"-8px",left:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"sw-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Je(s,"resize-bl")}),e.jsx("div",{className:"resize-handle resize-br",style:{position:"absolute",bottom:"-8px",right:"-8px",width:"16px",height:"16px",backgroundColor:"#3b82f6",border:"3px solid white",borderRadius:"50%",cursor:"se-resize",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.2)",transition:"all 0.2s ease-in-out"},onMouseDown:s=>Je(s,"resize-br")}),e.jsx("div",{className:"center-indicator",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"4px",height:"4px",backgroundColor:"#3b82f6",borderRadius:"50%",border:"2px solid white"}})]})})]}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:d,className:"flex items-center justify-center w-10 h-10 bg-purple-600 text-white rounded-full hover:bg-purple-700 transition-colors",children:i?e.jsx(Rt,{className:"w-5 h-5"}):e.jsx(dt,{className:"w-5 h-5 ml-0.5"})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{ref:N,className:"h-2 bg-muted rounded-full cursor-pointer",onClick:f,children:e.jsx("div",{className:"h-full bg-purple-600 rounded-full transition-all",style:{width:`${F/Q*100}%`}})})}),e.jsxs("span",{className:"text-sm text-muted-foreground min-w-0",children:[He(F)," / ",He(Q)]}),e.jsx("button",{onClick:z,disabled:Y||!k,className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",title:"Set current frame as thumbnail",children:Y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent"}),"Setting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Pt,{className:"w-4 h-4"}),"Set Thumbnail"]})})]}),ys&&e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-muted rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Subtitle Area:"}),e.jsxs("button",{onClick:()=>{ft(),ts(!Ue)},className:`flex items-center gap-2 px-3 py-1 rounded-lg text-sm transition-colors ${Ue?"bg-purple-600 text-white":"bg-muted/50 text-foreground hover:bg-muted"}`,children:[e.jsx(pa,{className:"w-4 h-4"}),Ue?"Finish Editing":"Set Boundary"]}),te&&e.jsxs("button",{onClick:()=>{Be(null),ts(!1)},className:"flex items-center gap-2 px-3 py-1 bg-red-950/50 text-red-300 rounded-lg hover:bg-red-900/50 text-sm transition-colors",children:[e.jsx(Ze,{className:"w-4 h-4"}),"Reset to Auto"]}),te&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[Math.round(te.width),"% × ",Math.round(te.height),"%"]})]})]})]}),(a==null?void 0:a.processing_status)==="completed"&&a.subtitles&&e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-foreground mb-4",children:"Subtitle Timeline"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:a.subtitles.map(s=>e.jsxs("div",{className:`flex items-center gap-4 p-3 border rounded-lg hover:bg-background transition-colors cursor-pointer ${F>=s.start_time&&F<=s.end_time?"border-purple-300 bg-purple-950/20":"border-border bg-background"}`,onClick:()=>{l.current&&(l.current.currentTime=s.start_time)},children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("span",{className:"text-sm font-mono text-muted-foreground",children:[He(s.start_time)," → ",He(s.end_time)]})}),e.jsx("div",{className:"flex-grow",children:e.jsx("p",{className:"text-foreground",children:s.text})}),e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[e.jsx("button",{onClick:r=>{r.stopPropagation(),J(s.id)},className:"p-1 text-muted-foreground hover:text-purple-400 transition-colors",title:"Edit subtitle",children:e.jsx(As,{className:"w-4 h-4"})}),e.jsx("button",{onClick:r=>{r.stopPropagation(),ue(s.id)},className:"p-1 text-muted-foreground hover:text-purple-400 transition-colors",title:"Style subtitle",children:e.jsx(mt,{className:"w-4 h-4"})})]})]},s.id))})]}),(a==null?void 0:a.processing_status)==="completed"&&M&&e.jsxs("div",{className:"bg-muted rounded-lg p-4",children:[e.jsx("h4",{className:"text-lg font-medium text-foreground mb-4",children:"Subtitle Style Editor"}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h5",{className:"text-sm font-medium text-foreground mb-3",children:"Style Presets"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:Object.entries(Ge).map(([s,r])=>{var y,R;const x=((R=(y=a.subtitles.find(w=>w.id===M))==null?void 0:y.style)==null?void 0:R.preset)===s;return e.jsx("button",{onClick:()=>{Z(M,{...r.style}),ie(s)},className:`p-3 border rounded-lg text-sm font-medium transition-all ${x?"border-purple-500 bg-purple-950/20 text-purple-300":"border-border bg-background text-foreground hover:border-purple-300 hover:bg-purple-950/10"}`,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-xs mb-1 px-2 py-1 rounded",style:{color:r.style.color,backgroundColor:(()=>{const w=r.style.backgroundColor;return w.includes("gradient")?"#FFD700":w==="transparent"?"rgba(0, 0, 0, 0)":w})(),textShadow:r.style.textShadow.includes("0px")?r.style.textShadow:"none",fontFamily:r.style.fontFamily.split(",")[0]},children:"Aa"}),r.name]})},s)})}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("button",{onClick:()=>Ae(de),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:[e.jsx(_a,{className:"w-4 h-4"}),"Apply to All Subtitles"]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Font Family"}),e.jsxs("select",{value:((Os=(Ps=(Rs=a.subtitles.find(s=>s.id===M))==null?void 0:Rs.style)==null?void 0:Ps.fontFamily)==null?void 0:Os.split(",")[0])||"Arial",onChange:s=>Z(M,{fontFamily:s.target.value+", sans-serif"}),className:"w-full px-3 py-2 border border-input rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-background text-foreground",children:[e.jsx("option",{value:"Arial",children:"Arial"}),e.jsx("option",{value:"Comic Sans MS",children:"Comic Sans MS"}),e.jsx("option",{value:"Impact",children:"Impact"}),e.jsx("option",{value:"Trebuchet MS",children:"Trebuchet MS"}),e.jsx("option",{value:"Times New Roman",children:"Times New Roman"}),e.jsx("option",{value:"Courier New",children:"Courier New"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Font Size"}),e.jsx("input",{type:"range",min:"12",max:"48",value:((Is=($s=a.subtitles.find(s=>s.id===M))==null?void 0:$s.style)==null?void 0:Is.fontSize)||24,onChange:s=>Z(M,{fontSize:parseInt(s.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Text Color"}),e.jsx("input",{type:"color",value:st(((qs=(Ds=a.subtitles.find(s=>s.id===M))==null?void 0:Ds.style)==null?void 0:qs.color)||"#FFFFFF"),onChange:s=>Z(M,{color:s.target.value}),className:"w-full h-8 rounded border"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Background"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:(()=>{var x;const s=a.subtitles.find(y=>y.id===M),r=((x=s==null?void 0:s.style)==null?void 0:x.backgroundColor)||"#000000";return st(r)})(),onChange:s=>Z(M,{backgroundColor:s.target.value}),className:"flex-1 h-8 rounded border"}),e.jsx("button",{onClick:()=>Z(M,{backgroundColor:"transparent"}),className:"px-3 py-1 text-xs border rounded hover:bg-muted text-foreground",title:"Make background transparent",children:"None"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-foreground mb-2",children:"Alignment"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>Z(M,{textAlign:"left"}),className:"p-2 border rounded hover:bg-muted text-foreground",children:e.jsx(Xt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Z(M,{textAlign:"center"}),className:"p-2 border rounded hover:bg-muted text-foreground",children:e.jsx(Bt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>Z(M,{textAlign:"right"}),className:"p-2 border rounded hover:bg-muted text-foreground",children:e.jsx(Kt,{className:"w-4 h-4"})})]})]})]}),e.jsxs("div",{className:"mt-4 flex gap-2",children:[e.jsx("button",{onClick:()=>{var s,r;return Z(M,{bold:!((r=(s=a.subtitles.find(x=>x.id===M))==null?void 0:s.style)!=null&&r.bold)})},className:`p-2 border rounded hover:bg-muted text-foreground ${(Vs=(Ls=a.subtitles.find(s=>s.id===M))==null?void 0:Ls.style)!=null&&Vs.bold?"bg-purple-950/20 border-purple-300":""}`,children:e.jsx(Yt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,r;return Z(M,{italic:!((r=(s=a.subtitles.find(x=>x.id===M))==null?void 0:s.style)!=null&&r.italic)})},className:`p-2 border rounded hover:bg-muted text-foreground ${(Bs=(Ws=a.subtitles.find(s=>s.id===M))==null?void 0:Ws.style)!=null&&Bs.italic?"bg-purple-950/20 border-purple-300":""}`,children:e.jsx(aa,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>{var s,r;return Z(M,{underline:!((r=(s=a.subtitles.find(x=>x.id===M))==null?void 0:s.style)!=null&&r.underline)})},className:`p-2 border rounded hover:bg-muted text-foreground ${(Xs=(Us=a.subtitles.find(s=>s.id===M))==null?void 0:Us.style)!=null&&Xs.underline?"bg-purple-950/20 border-purple-300":""}`,children:e.jsx(wa,{className:"w-4 h-4"})})]})]}),(a==null?void 0:a.processing_status)==="completed"&&e.jsxs("div",{className:"flex items-center justify-between pt-6 border-t",children:[e.jsxs("button",{onClick:ht,className:"flex items-center gap-2 px-4 py-2 border border-input text-foreground rounded-lg hover:bg-muted transition-colors",children:[e.jsx(Ot,{className:"w-4 h-4"}),"Export Transcript"]}),e.jsx("button",{onClick:pt,disabled:O,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-600 to-emerald-600 text-white rounded-lg font-medium hover:from-green-700 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent"}),"Rendering Video..."]}):e.jsxs(e.Fragment,{children:[e.jsx(sa,{className:"w-5 h-5"}),"Render & Upload to All Platforms"]})})]})]})]})]})},Fa=({videoPath:t,onRemovalComplete:k,className:g})=>{const[U,m]=c.useState("detection"),[_,a]=c.useState(!1),[C,ne]=c.useState(null),[L,O]=c.useState(null),[H,Y]=c.useState([]),[ee,X]=c.useState(!1),[$,j]=c.useState({method:"inpainting",quality_preset:"balanced",sensitivity:"medium",detection_mode:"balanced"}),b=[{id:"detection",label:"Detection",icon:Qe},{id:"removal",label:"Removal",icon:De},{id:"progress",label:"Progress",icon:Ve},{id:"quality",label:"Quality",icon:We},{id:"settings",label:"Settings",icon:St}],v=[{id:"inpainting",name:"AI Inpainting",accuracy:95,speed:"Slow",description:"Advanced neural network fills watermark area"},{id:"content_aware",name:"Content-Aware Fill",accuracy:88,speed:"Medium",description:"Intelligent background reconstruction"},{id:"temporal_coherence",name:"Temporal Coherence",accuracy:92,speed:"Slow",description:"Frame-by-frame consistency analysis"},{id:"frequency_domain",name:"Frequency Domain",accuracy:85,speed:"Fast",description:"Spectral analysis and filtering"}],S=async()=>{var i,A;if(!t){alert("No video path provided");return}X(!0),a(!0);try{const W=await(await fetch("/ai/watermark-detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_path:t,sensitivity:$.sensitivity,detection_mode:"thorough",enable_learning:!0,platform_focus:"all"})})).json();if(!W.success)throw new Error(W.message||"Watermark detection failed");ne(W.data);const Q=W.data.detected_watermarks||[];if(Q.length===0){alert("🎉 No watermarks detected in your video! Your video is clean."),X(!1),a(!1);return}Y(Q.map(we=>we.id)),m("progress");const xe=await(await fetch("/ai/watermark-remove",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((A=document.querySelector('meta[name="csrf-token"]'))==null?void 0:A.getAttribute("content"))||""},body:JSON.stringify({video_path:t,watermarks:Q,method:$.method,quality_preset:"high"})})).json();if(!xe.success)throw new Error(xe.message||"Watermark removal failed");O(xe.data),ue(xe.data.removal_id)}catch(F){console.error("Auto watermark removal failed:",F),alert(`Failed to remove watermarks: ${F instanceof Error?F.message:"Unknown error"}`),X(!1),a(!1)}},se=async()=>{var i;if(t){a(!0);try{const F=await(await fetch("/ai/watermark-detect",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_path:t,sensitivity:$.sensitivity,detection_mode:$.detection_mode,enable_learning:!0,platform_focus:"all"})})).json();F.success?(ne(F.data),Y(F.data.detected_watermarks.map(W=>W.id))):(console.error("Watermark detection failed:",F.error),alert(`Detection failed: ${F.message||"Unknown error"}`))}catch(A){console.error("Error detecting watermarks:",A),alert("An error occurred while detecting watermarks. Please try again.")}finally{a(!1)}}},M=async()=>{var i;if(!(!C||H.length===0)){a(!0);try{const A=C.detected_watermarks.filter(Q=>H.includes(Q.id)),W=await(await fetch("/ai/watermark-remove",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((i=document.querySelector('meta[name="csrf-token"]'))==null?void 0:i.getAttribute("content"))||""},body:JSON.stringify({video_path:t,watermarks:A,method:$.method,quality_preset:$.quality_preset})})).json();W.success?(O(W.data),m("progress"),ue(W.data.removal_id)):(console.error("Watermark removal failed:",W.error),alert(`Removal failed: ${W.message||"Unknown error"}`))}catch(A){console.error("Error removing watermarks:",A),alert("An error occurred while removing watermarks. Please try again.")}finally{a(!1)}}},ue=async i=>{const A=async()=>{var F;try{const Q=await(await fetch("/ai/watermark-progress",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((F=document.querySelector('meta[name="csrf-token"]'))==null?void 0:F.getAttribute("content"))||""},body:JSON.stringify({removal_id:i})})).json();if(Q.success){if(O(Q.data),Q.data.processing_status==="completed"){X(!1),a(!1),k==null||k(Q.data);return}if(Q.data.processing_status==="failed"){X(!1),a(!1),alert("Watermark removal failed. Please try again.");return}Q.data.processing_status==="processing"&&setTimeout(A,3e3)}}catch(W){console.error("Error polling progress:",W),X(!1),a(!1)}};A()},de=i=>{switch(i){case"easy":return"text-green-600 bg-green-100";case"medium":return"text-yellow-600 bg-yellow-100";case"hard":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},ie=i=>{switch(i){case"inpainting":return"text-purple-600 bg-purple-100";case"content_aware":return"text-blue-600 bg-blue-100";case"temporal_coherence":return"text-green-600 bg-green-100";case"frequency_domain":return"text-orange-600 bg-orange-100";default:return"text-gray-600 bg-gray-100"}},le=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Watermark Detection"}),e.jsx("p",{className:"text-blue-100",children:"AI-powered watermark detection and analysis"})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(Qe,{})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(G,{onClick:se,disabled:_||!t,className:"bg-background text-blue-400 hover:bg-blue-950/20",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),_?"Detecting...":"Detect Watermarks"]})})]}),C&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Detection Results"}),e.jsxs(P,{className:"bg-green-100 text-green-800",children:[C.detected_watermarks.length," watermarks found"]})]}),C.detected_watermarks.length===0?e.jsxs("div",{className:"text-center py-12 bg-muted rounded-lg",children:[e.jsx(Qe,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No Watermarks Detected"}),e.jsx("p",{className:"text-muted-foreground",children:"The video appears to be clean of watermarks."})]}):e.jsx("div",{className:"space-y-4",children:C.detected_watermarks.map((i,A)=>e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("input",{type:"checkbox",checked:H.includes(i.id),onChange:F=>{F.target.checked?Y([...H,i.id]):Y(H.filter(W=>W!==i.id))},className:"w-4 h-4 text-blue-600 rounded"}),e.jsxs("h4",{className:"font-medium capitalize",children:[i.type," Watermark #",A+1]}),e.jsx(P,{className:de(i.removal_difficulty),children:i.removal_difficulty}),i.platform&&i.platform!=="unknown"&&e.jsx(P,{className:"bg-blue-100 text-blue-800",children:i.platform})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Confidence:"}),e.jsxs("div",{className:"font-medium",children:[i.confidence,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Location:"}),e.jsxs("div",{className:"font-medium",children:[i.location.x,", ",i.location.y]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Size:"}),e.jsxs("div",{className:"font-medium",children:[i.location.width,"×",i.location.height]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600",children:"Frames:"}),e.jsx("div",{className:"font-medium",children:i.frames_detected})]})]}),i.detection_method&&e.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:["Detected using: ",i.detection_method.replace("_"," ")]})]}),e.jsxs("div",{className:"text-2xl",children:[i.platform==="tiktok"&&"🎵",i.platform==="sora"&&"🤖",i.platform==="custom"&&"🎨",i.type==="logo"&&!i.platform&&"🎨",i.type==="text"&&!i.platform&&"📝",i.type==="brand"&&!i.platform&&"🏷️",i.type==="channel"&&!i.platform&&"📺"]})]})},i.id))})]})]}),ke=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-background rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Method"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(i=>e.jsxs("div",{className:`p-4 rounded-lg border-2 cursor-pointer transition-colors ${$.method===i.id?"border-blue-500 bg-blue-950/20":"border-gray-200 hover:border-gray-300"}`,onClick:()=>j(A=>({...A,method:i.id})),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h4",{className:"font-medium",children:i.name}),e.jsxs(P,{className:ie(i.id),children:[i.accuracy,"% accuracy"]})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:i.description}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-500",children:["Speed: ",i.speed]}),e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex space-x-1",children:[...Array(5)].map((A,F)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${F<Math.floor(i.accuracy/20)?"bg-green-500":"bg-gray-300"}`},F))})})]})]},i.id))})]}),C&&H.length>0&&e.jsxs("div",{className:"bg-background rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Selected for Removal"}),e.jsx("div",{className:"space-y-3",children:C.detected_watermarks.filter(i=>H.includes(i.id)).map((i,A)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"text-xl",children:[i.type==="logo"&&"🎨",i.type==="text"&&"📝",i.type==="brand"&&"🏷️",i.type==="channel"&&"📺"]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium capitalize",children:[i.type," Watermark"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[i.confidence,"% confidence"]})]})]}),e.jsx(P,{className:de(i.removal_difficulty),children:i.removal_difficulty})]},i.id))})]}),e.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-pink-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Start Removal"}),e.jsxs("p",{className:"text-red-100",children:["Remove ",H.length," selected watermark",H.length!==1?"s":""]})]}),e.jsx("div",{className:"text-6xl opacity-20",children:e.jsx(De,{})})]}),e.jsx("div",{className:"mt-4",children:e.jsxs(G,{onClick:M,disabled:_||H.length===0,className:"bg-background text-red-400 hover:bg-red-950/20",children:[e.jsx(De,{className:"w-4 h-4 mr-2"}),_?"Processing...":"Remove Watermarks"]})})]})]}),me=()=>e.jsx("div",{className:"space-y-6",children:L?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 rounded-xl p-6 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Removal Progress"}),e.jsx("p",{className:"text-green-100",children:L.processing_status==="completed"?"Completed":L.processing_status==="processing"?"Processing...":L.processing_status})]}),e.jsx("div",{className:"text-6xl opacity-20",children:L.processing_status==="completed"?e.jsx(gs,{}):e.jsx(ce,{})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm",children:"Progress"}),e.jsxs("span",{className:"text-sm",children:[L.progress.percentage,"%"]})]}),e.jsx(es,{value:L.progress.percentage,className:"h-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(fs,{className:"w-8 h-8 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Step"}),e.jsx("p",{className:"font-medium capitalize",children:L.progress.current_step})]})]})}),e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(la,{className:"w-8 h-8 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Frames Processed"}),e.jsxs("p",{className:"font-medium",children:[L.progress.frames_processed," / ",L.progress.total_frames]})]})]})}),e.jsx(T,{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xt,{className:"w-8 h-8 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Est. Time"}),e.jsxs("p",{className:"font-medium",children:[Math.round(L.progress.estimated_time/60)," min"]})]})]})})]}),L.removal_results&&L.removal_results.length>0&&e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Results"}),e.jsx("div",{className:"space-y-3",children:L.removal_results.map((i,A)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[i.removal_success?e.jsx(gs,{className:"w-5 h-5 text-green-600"}):e.jsx(ss,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium",children:["Watermark ",A+1]}),e.jsx("p",{className:"text-sm text-gray-600",children:i.removal_success?"Successfully removed":"Removal failed"})]})]}),e.jsxs(P,{className:i.removal_success?"bg-green-100 text-green-800":"bg-red-100 text-red-800",children:[i.confidence,"% confidence"]})]},A))})]})]}):e.jsxs("div",{className:"text-center py-12 bg-muted rounded-lg",children:[e.jsx(Ve,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Active Removal"}),e.jsx("p",{className:"text-gray-600",children:"Start watermark removal to see progress here."})]})}),Ne=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"text-center py-12 bg-muted rounded-lg",children:[e.jsx(We,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Quality Analysis"}),e.jsx("p",{className:"text-gray-600",children:"Complete watermark removal to see quality analysis."})]})}),ye=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Detection Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sensitivity"}),e.jsxs("select",{value:$.sensitivity,onChange:i=>j(A=>({...A,sensitivity:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"low",children:"Low - Detect obvious watermarks"}),e.jsx("option",{value:"medium",children:"Medium - Balanced detection"}),e.jsx("option",{value:"high",children:"High - Detect subtle watermarks"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Detection Mode"}),e.jsxs("select",{value:$.detection_mode,onChange:i=>j(A=>({...A,detection_mode:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast - Quick detection"}),e.jsx("option",{value:"balanced",children:"Balanced - Good accuracy and speed"}),e.jsx("option",{value:"thorough",children:"Thorough - Maximum accuracy"})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-6 border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Removal Settings"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quality Preset"}),e.jsxs("select",{value:$.quality_preset,onChange:i=>j(A=>({...A,quality_preset:i.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"fast",children:"Fast - Quick processing"}),e.jsx("option",{value:"balanced",children:"Balanced - Good quality and speed"}),e.jsx("option",{value:"high",children:"High - Best quality"}),e.jsx("option",{value:"ultra",children:"Ultra - Maximum quality"})]})]})})]})]}),_e=()=>{switch(U){case"detection":return le();case"removal":return ke();case"progress":return me();case"quality":return Ne();case"settings":return ye();default:return le()}};return!C&&!ee?e.jsxs("div",{className:`space-y-4 ${g}`,children:[e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-8 h-8 text-red-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Remove Watermarks"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Automatically detect and remove watermarks from your video using AI"})]}),e.jsx(G,{onClick:S,disabled:_||!t,size:"lg",className:"bg-red-600 hover:bg-red-700 text-white",children:_?e.jsxs(e.Fragment,{children:[e.jsx(ce,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Find and Remove Watermarks"]})}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"This will scan your entire video and automatically remove detected watermarks"})]}),e.jsxs("details",{className:"mt-6",children:[e.jsx("summary",{className:"cursor-pointer text-sm font-medium text-muted-foreground hover:text-foreground",children:"Advanced Options"}),e.jsxs("div",{className:"mt-3 space-y-3 p-3 border rounded-lg bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Detection Sensitivity"}),e.jsxs("select",{value:$.sensitivity,onChange:i=>j({...$,sensitivity:i.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm",children:[e.jsx("option",{value:"low",children:"Low - Fast detection"}),e.jsx("option",{value:"medium",children:"Medium - Balanced"}),e.jsx("option",{value:"high",children:"High - Thorough detection"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium",children:"Removal Method"}),e.jsx("select",{value:$.method,onChange:i=>j({...$,method:i.target.value}),className:"w-full mt-1 px-3 py-2 border rounded-md text-sm",children:v.map(i=>e.jsxs("option",{value:i.id,children:[i.name," - ",i.description]},i.id))})]})]})]})]}):e.jsxs("div",{className:`max-w-6xl mx-auto p-6 ${g}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AI Watermark Remover"}),e.jsx("p",{className:"text-gray-600",children:"Detect and remove watermarks from your videos"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(P,{className:"bg-blue-100 text-blue-800",children:"AI Powered"}),e.jsx(P,{className:"bg-green-100 text-green-800",children:"High Quality"})]})]}),e.jsx("div",{className:"flex space-x-1 mb-6 bg-gray-100 p-1 rounded-lg",children:b.map(i=>{const A=i.icon;return e.jsxs("button",{onClick:()=>m(i.id),className:`flex items-center px-4 py-2 rounded-md text-sm font-medium transition-colors ${U===i.id?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[e.jsx(A,{className:"w-4 h-4 mr-2"}),i.label]},i.id)})}),e.jsx("div",{className:"animate-in fade-in slide-in-from-bottom-4 duration-300",children:_e()})]})};function Ea({videoId:t,videoPath:k,title:g,className:U,onThumbnailSet:m}){const[_,a]=c.useState(null),[C,ne]=c.useState(!1),[L,O]=c.useState(null),[H,Y]=c.useState("suggestions"),{toast:ee}=Cs(),X=async()=>{var j,b;if(!t){ee({title:"No Video ID",description:"Please provide a video ID to optimize thumbnails.",variant:"destructive"});return}ne(!0);try{const S=await(await fetch("/ai/optimize-thumbnails",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((j=document.querySelector('meta[name="csrf-token"]'))==null?void 0:j.getAttribute("content"))||""},body:JSON.stringify({video_id:t,title:g||"Amazing Video",platforms:["youtube","instagram","tiktok"]})})).json();if(S.success)a(S.data),ee({title:"Thumbnail Optimization Complete! 🎨",description:`AI has analyzed your video and extracted ${((b=S.data.extracted_frames)==null?void 0:b.length)||0} thumbnail frames.`});else throw new Error(S.message||"Failed to optimize thumbnails")}catch(v){console.error("Thumbnail optimization error:",v),ee({title:"Optimization Failed",description:"Failed to optimize thumbnails. Please try again.",variant:"destructive"})}finally{ne(!1)}},$=async(j,b)=>{var v;if(!t){ee({title:"Error",description:"Video ID is required to set thumbnail.",variant:"destructive"});return}try{const se=await(await fetch("/ai/set-video-thumbnail",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((v=document.querySelector('meta[name="csrf-token"]'))==null?void 0:v.getAttribute("content"))||""},body:JSON.stringify({video_id:t,frame_id:j,thumbnail_path:b})})).json();if(se.success)ee({title:"Thumbnail Set Successfully! 🎯",description:"This thumbnail has been set for all platforms."}),m&&m();else throw new Error(se.message||"Failed to set thumbnail")}catch(S){console.error("Set thumbnail error:",S),ee({title:"Setting Failed",description:"Failed to set thumbnail. Please try again.",variant:"destructive"})}};return!_&&!C?e.jsxs(T,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",U),children:[e.jsxs(D,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto p-3 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit",children:e.jsx(qe,{className:"w-8 h-8 text-white"})}),e.jsx(q,{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate eye-catching thumbnails with AI-powered optimization and CTR predictions"})]}),e.jsxs(E,{className:"text-center space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(We,{className:"w-6 h-6 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"CTR Prediction"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx($t,{className:"w-6 h-6 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Face Detection"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(mt,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Color Analysis"})]}),e.jsxs("div",{className:"p-3 bg-background rounded-lg border",children:[e.jsx(As,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),e.jsx("p",{className:"font-medium text-foreground",children:"Text Optimization"})]})]}),e.jsxs(G,{onClick:X,disabled:!t,size:"lg",className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(ut,{className:"w-5 h-5 mr-2"}),"Analyze Video & Extract Thumbnails"]}),!t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"Video ID required for thumbnail analysis"})]})]}):C?e.jsx(T,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",U),children:e.jsxs(E,{className:"p-8 text-center space-y-6",children:[e.jsx("div",{className:"mx-auto p-4 bg-gradient-to-r from-purple-600 to-pink-600 rounded-full w-fit animate-pulse",children:e.jsx(qe,{className:"w-10 h-10 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-2",children:"Optimizing Thumbnails..."}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"AI is analyzing frames, detecting faces, and predicting CTR"}),e.jsx("div",{className:"w-full max-w-md mx-auto bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-purple-600"}),e.jsx("span",{className:"text-foreground",children:"Extracting frames..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-blue-600"}),e.jsx("span",{className:"text-foreground",children:"Analyzing faces..."})]}),e.jsxs("div",{className:"flex items-center justify-center gap-2 p-3 bg-background rounded-lg",children:[e.jsx(ce,{className:"w-4 h-4 animate-spin text-green-600"}),e.jsx("span",{className:"text-foreground",children:"Predicting CTR..."})]})]})]})}):e.jsxs(T,{className:re("border-2 border-purple-200 bg-gradient-to-br from-purple-50 to-pink-50",U),children:[e.jsx(D,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-600 to-pink-600 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx(q,{className:"text-xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Thumbnail Optimization Results"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Score: ",_.overall_score,"/100 • ",_.extracted_frames.length," frames analyzed"]})]})]}),e.jsxs(G,{onClick:X,disabled:C,size:"sm",variant:"outline",children:[e.jsx(ce,{className:"w-4 h-4 mr-2"}),"Re-analyze"]})]})}),e.jsx(E,{children:e.jsxs(bs,{value:H,onValueChange:Y,className:"w-full",children:[e.jsxs(js,{className:"grid w-full grid-cols-3",children:[e.jsx(be,{value:"suggestions",children:"Suggestions"}),e.jsx(be,{value:"platforms",children:"Platform Thumbnail Specifications"}),e.jsx(be,{value:"testing",children:"A/B Testing"})]}),e.jsx(je,{value:"suggestions",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:_.thumbnail_suggestions.slice(0,3).map((j,b)=>e.jsx(T,{className:b===0?"border-2 border-gold":"",children:e.jsx(E,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:j.preview_url,alt:`Thumbnail at ${j.timestamp}s`,className:"w-32 h-18 object-cover rounded-lg border-2 border-gray-200",onError:v=>{var se;const S=v.target;console.error("Thumbnail failed to load:",j.preview_url),S.style.display="none",(se=S.nextElementSibling)==null||se.classList.remove("hidden")},onLoad:()=>{console.log("Thumbnail loaded successfully:",j.preview_url)}}),e.jsx("div",{className:"w-32 h-18 bg-gray-200 rounded-lg flex items-center justify-center hidden",children:e.jsx(dt,{className:"w-6 h-6 text-gray-400"})}),b===0&&e.jsxs(P,{className:"absolute -top-2 -right-2 bg-yellow-500 text-black",children:[e.jsx(It,{className:"w-3 h-3 mr-1"}),"Best"]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("h4",{className:"font-medium",children:["Frame at ",j.timestamp,"s"]}),e.jsxs(P,{variant:"outline",children:[j.predicted_ctr,"% CTR"]}),e.jsxs(P,{variant:"outline",children:[j.confidence_score,"% confidence"]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-1",children:"Why this frame:"}),e.jsx("ul",{className:"text-sm text-gray-600",children:j.reasons.map((v,S)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),v]},S))})]}),j.design_scores&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Design Feature Scores:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(j.design_scores).map(([v,S])=>e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 capitalize",children:[v.replace("_"," "),":"]}),e.jsx(P,{variant:"outline",className:re("text-xs px-1.5 py-0.5",S>=80?"border-green-500 text-green-700 bg-green-50":S>=60?"border-yellow-500 text-yellow-700 bg-yellow-50":"border-red-500 text-red-700 bg-red-50"),children:S})]},v))})]})]})]}),e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs(G,{size:"sm",onClick:()=>$(j.frame_id,j.path),className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700",children:[e.jsx(Ke,{className:"w-4 h-4 mr-2"}),"Set as Thumbnail"]})})]})})},j.frame_id))})}),e.jsx(je,{value:"platforms",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:Object.entries(_.platform_optimizations).map(([j,b])=>e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs(q,{className:"text-lg capitalize flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),j]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Specifications"}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{children:["Dimensions: ",b.specifications.width,"×",b.specifications.height]}),e.jsxs("div",{children:["Aspect Ratio: ",b.specifications.aspect_ratio]}),e.jsxs("div",{children:["Max Size: ",b.specifications.max_file_size,"KB"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Optimization Focus"}),e.jsx("div",{className:"text-sm space-y-1",children:b.design_adjustments.map((v,S)=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-purple-400 rounded-full mt-2 flex-shrink-0"}),v]},S))})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected Improvement:"}),e.jsxs(P,{className:"bg-green-100 text-green-800",children:[e.jsx(Pe,{className:"w-3 h-3 mr-1"}),b.expected_improvement]})]})]})]},j))})}),e.jsx(je,{value:"testing",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:_.ab_test_variants.map(j=>e.jsxs(T,{children:[e.jsx(D,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(q,{className:"text-lg flex items-center gap-2",children:[e.jsx(ps,{className:"w-5 h-5"}),j.variant_id.replace("_"," ").toUpperCase()]}),e.jsxs(P,{variant:"outline",children:[j.confidence_level,"% confidence"]})]})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Test Hypothesis"}),e.jsx("p",{className:"text-sm text-gray-600",children:j.test_hypothesis})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Planned Modifications"}),e.jsx("div",{className:"space-y-1",children:j.modifications.map((b,v)=>e.jsxs("div",{className:"text-sm text-gray-600 flex items-start gap-2",children:[e.jsx("span",{className:"w-1.5 h-1.5 bg-blue-400 rounded-full mt-2 flex-shrink-0"}),b]},v))})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Expected CTR Increase:"}),e.jsxs(P,{className:"bg-blue-100 text-blue-800",children:["+",j.expected_outcome.expected_ctr_increase]})]})]})]},j.variant_id))})})]})})]})}const Ma=({isOpen:t,onClose:k,videoId:g,videoPath:U,title:m,onThumbnailSet:_})=>{if(!t)return null;const a=()=>{const C=document.createElement("div");C.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",C.textContent="✓ Thumbnail optimized successfully!",document.body.appendChild(C),setTimeout(()=>{document.body.contains(C)&&document.body.removeChild(C)},3e3),_&&_()};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-background rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b bg-gradient-to-r from-muted/50 to-muted/30",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-500 to-blue-500 rounded-lg",children:e.jsx(qe,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"AI Thumbnail Optimizer"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Create and optimize thumbnails for better engagement"})]})]}),e.jsx("button",{onClick:k,className:"flex items-center justify-center w-8 h-8 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-full transition-colors",title:"Close",children:e.jsx(Ze,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"p-6",children:e.jsx(Ea,{videoId:g,videoPath:U,title:m,onThumbnailSet:a})})]})})},za={youtube:Lt,instagram:qt,tiktok:Le,facebook:Le,snapchat:Le,pinterest:Le,x:Le},Ra={pending:fs,processing:ss,success:gs,failed:Ts},Pa={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-950/20 dark:text-yellow-300",processing:"bg-blue-100 text-blue-800 dark:bg-blue-950/20 dark:text-blue-300",success:"bg-green-100 text-green-800 dark:bg-green-950/20 dark:text-green-300",failed:"bg-red-100 text-red-800 dark:bg-red-950/20 dark:text-red-300"},Oa=(t,k)=>{if(!t||!k)return{status:"unknown",color:"text-muted-foreground",label:"Unknown"};const g=t*k;return g>=1920*1080?{status:"great",color:"text-green-600 dark:text-green-400",label:"1080p+"}:g>=1280*720?{status:"good",color:"text-orange-500 dark:text-orange-400",label:"720p"}:{status:"poor",color:"text-red-600 dark:text-red-400",label:"Low Quality"}};function Mr({video:t}){var ls;const{props:k}=tt(),g=((ls=k.app)==null?void 0:ls.env)==="local",U=[{title:"My channels",href:"/dashboard"},{title:"Videos",href:"/videos"},{title:t.title,href:`/videos/${t.id}/edit`}],{data:m,setData:_,put:a,errors:C}=jt({title:t.title||"",description:t.description||"",tags:t.tags||[],thumbnail:null}),[ne,L]=c.useState("overview"),[O,H]=c.useState(!1),[Y,ee]=c.useState("tikomat"),[X,$]=c.useState(!1),[j,b]=c.useState(!1),[v,S]=c.useState(t.thumbnail||null),[se,M]=c.useState([0]),[ue,de]=c.useState(null),[ie,le]=c.useState(null),[ke,me]=c.useState([]),[Ne,ye]=c.useState(!1),[_e,i]=c.useState(!1),[A,F]=c.useState(!1),[W,Q]=c.useState(!1),[Ee]=c.useState(["youtube","instagram","tiktok","facebook","x","pinterest","snapchat"]),[xe,we]=c.useState([]),[Se,Me]=c.useState({title:t.title||"",description:t.description||"",tags:t.tags||[],thumbnail:t.thumbnail||null,subtitles:!1,watermark_removal:!1}),[oe,he]=c.useState(!1),[Te,ve]=c.useState(!1),[pe,Fe]=c.useState(null),Ce=c.useRef(null),h=Oa(t.width,t.height),l=async()=>{var n;try{const o=await fetch(`/videos/${t.id}/check-unsaved-changes`,{method:"GET",headers:{Accept:"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}});if(o.ok){const d=await o.json();if(d.has_unsaved_changes){i(!0);const f=(d.changes||[]).map(I=>({...I,timestamp:new Date(I.timestamp)}));we(f),d.latest_data&&(_("title",d.latest_data.title||""),_("description",d.latest_data.description||""),_("tags",d.latest_data.tags||[]),d.latest_data.thumbnail&&S(d.latest_data.thumbnail))}}}catch(o){console.error("Failed to check for unsaved changes:",o)}},N=async n=>{pe&&clearTimeout(pe);const o=setTimeout(async()=>{var d;ve(!0);try{const f=await fetch(`/videos/${t.id}/auto-save`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||""},body:JSON.stringify(n)});if(f.ok){const I=await f.json();i(!0);const z=document.createElement("div");z.className="fixed bottom-4 right-4 bg-blue-500 text-white px-3 py-1 rounded-md shadow-lg z-50 text-sm",z.textContent="💾 Auto-saved",document.body.appendChild(z),setTimeout(()=>{document.body.contains(z)&&document.body.removeChild(z)},2e3)}else console.error("Auto-save failed:",f.statusText)}catch(f){console.error("Auto-save error:",f)}finally{ve(!1)}},1e3);Fe(o)},u=(n,o,d,f)=>{const I={type:n,field:o,oldValue:d,newValue:f,timestamp:new Date};we(J=>[...J.filter(Z=>Z.type!==n),I]);const z={type:n,field:o,value:f,[o]:f};N(z)},V=()=>{we([]),i(!1)},B=n=>{n.preventDefault(),a(`/videos/${t.id}`)},Oe=()=>{H(!0)},te=()=>{ks.delete(`/videos/${t.id}`,{data:{delete_option:Y},onSuccess:()=>{ks.visit("/videos")}})},Be=(n,o)=>{confirm(`Are you sure you want to remove this video from ${o}?`)&&ks.delete(`/video-targets/${n}`,{preserveScroll:!0,onSuccess:()=>{},onError:d=>{console.error("Failed to remove video from platform:",d),alert("Failed to remove video from platform. Please try again.")}})},Ue=n=>{if(n.platform_url)return n.platform_url;switch(n.platform){case"youtube":return n.platform_video_id?`https://youtube.com/watch?v=${n.platform_video_id}`:null;case"instagram":return n.platform_video_id?`https://instagram.com/p/${n.platform_video_id}`:null;case"tiktok":return n.platform_video_id?`https://tiktok.com/@username/video/${n.platform_video_id}`:null;default:return null}},ts=async()=>{var n;$(!0);try{const o=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify({video_id:t.id,content_type:"title",current_title:m.title})});if(o.ok){const d=await o.json();if(d.success&&d.data.optimized_title){const f=m.title,I=d.data.optimized_title;_("title",I),u("title","title",f,I);const z=d.data.analysis_summary;let J="Title generated based on video content analysis";if(z){const K=[];z.has_transcript&&K.push("audio transcription"),z.scenes_detected>0&&K.push(`${z.scenes_detected} visual scenes`),z.content_category!=="unknown"&&K.push(`${z.content_category} content`),K.length>0&&(J+=`. Analyzed: ${K.join(", ")}.`)}alert(`✅ AI Title Generated!

${J}`)}}else{const d=await o.json();console.error("Failed to generate AI title:",d),alert(`Failed to generate title: ${d.message||"Unknown error"}`)}}catch(o){console.error("Failed to generate AI title:",o),alert("An error occurred while generating the title. Please try again.")}finally{$(!1)}},as=async()=>{var n;b(!0);try{const o=await fetch("/ai/generate-video-content",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""},body:JSON.stringify({video_id:t.id,content_type:"description",current_description:m.description})});if(o.ok){const d=await o.json();if(d.success&&d.data.optimized_description){const f=m.description,I=d.data.optimized_description;_("description",I),u("description","description",f,I);const z=d.data.analysis_summary;let J="Description generated based on video content analysis";if(z){const K=[];z.has_transcript&&K.push("audio transcription"),z.scenes_detected>0&&K.push(`${z.scenes_detected} visual scenes`),z.content_category!=="unknown"&&K.push(`${z.content_category} content`),K.length>0&&(J+=`. Analyzed: ${K.join(", ")}.`)}alert(`✅ AI Description Generated!

${J}`)}}else{const d=await o.json();console.error("Failed to generate AI description:",d),alert(`Failed to generate description: ${d.message||"Unknown error"}`)}}catch(o){console.error("Failed to generate AI description:",o),alert("An error occurred while generating the description. Please try again.")}finally{b(!1)}},rs=async n=>{var d,f;const o=(d=n.target.files)==null?void 0:d[0];if(o){if(!o.type.startsWith("image/")){alert("Please select a valid image file");return}if(o.size>5*1024*1024){alert("Image size must be less than 5MB");return}Q(!0),de(o);try{const I=new FormData;I.append("thumbnail",o),I.append("video_id",t.id.toString());const z=(f=document.querySelector('meta[name="csrf-token"]'))==null?void 0:f.getAttribute("content");console.log("CSRF Token:",z?"Found":"Missing");const J=await fetch("/ai/upload-custom-thumbnail",{method:"POST",headers:{"X-CSRF-TOKEN":z||"",Accept:"application/json"},body:I});if(console.log("Response status:",J.status),console.log("Response headers:",Object.fromEntries(J.headers.entries())),J.ok){const K=await J.json();if(K.success){const Z=v,$e=K.thumbnail_url;S($e),u("thumbnail","thumbnail",Z,$e);const Ae=document.createElement("div");Ae.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",Ae.textContent="✅ Thumbnail uploaded successfully!",document.body.appendChild(Ae),setTimeout(()=>{document.body.contains(Ae)&&document.body.removeChild(Ae)},3e3)}else throw new Error(K.message||"Upload failed")}else{const K=J.headers.get("content-type");if(console.log("Error response content-type:",K),K&&K.includes("application/json")){const Z=await J.json();throw new Error(Z.message||`HTTP ${J.status}: Upload failed`)}else{const Z=await J.text();throw console.log("HTML error response:",Z.substring(0,200)),new Error(`HTTP ${J.status}: Server returned HTML instead of JSON - check Laravel logs`)}}}catch(I){console.error("Failed to upload thumbnail:",I);const z=document.createElement("div");z.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",z.textContent=`❌ Upload failed: ${I instanceof Error?I.message:"Unknown error"}`,document.body.appendChild(z),setTimeout(()=>{document.body.contains(z)&&document.body.removeChild(z)},5e3);const J=new FileReader;J.onload=K=>{var Ae;const Z=v,$e=(Ae=K.target)==null?void 0:Ae.result;S($e),u("thumbnail","thumbnail",Z,$e)},J.readAsDataURL(o)}finally{Q(!1)}}},Xe=n=>{le(n)};c.useEffect(()=>{l()},[]),c.useEffect(()=>()=>{pe&&clearTimeout(pe)},[pe]),c.useEffect(()=>{i(xe.length>0)},[xe]);const ns=async()=>{F(!0);const n=async(o=0)=>{var d,f,I;try{const z=((d=document.querySelector('meta[name="csrf-token"]'))==null?void 0:d.getAttribute("content"))||((f=document.querySelector('input[name="_token"]'))==null?void 0:f.getAttribute("value"))||"";if(!z)throw new Error("CSRF token not found");const J=await fetch("/ai/analyze-video-tags",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":z,Accept:"application/json"},body:JSON.stringify({video_id:t.id,title:m.title||"",description:m.description||""})});if(J.status===419&&o===0){console.log("CSRF token expired, refreshing...");const K=await fetch("/");if(K.ok){const Z=await K.text(),os=(I=new DOMParser().parseFromString(Z,"text/html").querySelector('meta[name="csrf-token"]'))==null?void 0:I.getAttribute("content");if(os){const cs=document.querySelector('meta[name="csrf-token"]');return cs&&cs.setAttribute("content",os),n(1)}}}return J}catch(z){if(o===0)return console.log("Request failed, retrying once...",z),n(1);throw z}};try{const o=await n();if(o.ok){const d=await o.json();if(console.log("Tag generation response:",d),d.success&&d.data&&d.data.analysis.tags){const f=m.tags,I=d.data.analysis.tags;_("tags",I),u("tags","tags",f,I)}else{console.warn("Unexpected response structure:",d);const f=document.createElement("div");f.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent="⚠️ Tag generation failed - unexpected response",document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},5e3)}}else{const d=await o.text();console.error("HTTP Error:",o.status,o.statusText,d);const f=document.createElement("div");f.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent=`⚠️ Tag generation failed - Server error (${o.status})`,document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},5e3)}}catch(o){console.error("Failed to generate tags:",o);const d=document.createElement("div");d.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",d.textContent="⚠️ Tag generation failed - Network error",document.body.appendChild(d),setTimeout(()=>{document.body.contains(d)&&document.body.removeChild(d)},5e3)}finally{F(!1)}},ys=n=>{if(!m.tags.includes(n)){const o=[...m.tags,n];_("tags",o),u("tags","tags",Se.tags,o)}},vs=n=>{const o=m.tags.filter(d=>d!==n);_("tags",o),u("tags","tags",Se.tags,o)},Ge=async()=>{var n;he(!0);try{const o=await fetch(`/videos/${t.id}/publish-changes`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}});if(o.ok){const d=await o.json();V();const f=document.createElement("div");if(f.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent=d.message||"✓ Changes published to all platforms successfully!",document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},3e3),d.jobs_created>0){const I=document.createElement("div");I.className="fixed top-16 right-4 bg-blue-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",I.textContent=`📋 ${d.jobs_created} update job(s) queued for processing`,document.body.appendChild(I),setTimeout(()=>{document.body.contains(I)&&document.body.removeChild(I)},5e3)}}else{const d=await o.json();console.error("Failed to publish changes:",d);const f=document.createElement("div");f.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent=`❌ Failed to publish changes: ${d.message||"Unknown error"}`,document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},5e3)}}catch(o){console.error("Failed to publish changes:",o);const d=document.createElement("div");d.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",d.textContent="❌ Network error while publishing changes",document.body.appendChild(d),setTimeout(()=>{document.body.contains(d)&&document.body.removeChild(d)},5e3)}finally{he(!1)}},Ns=async()=>{var n;he(!0);try{const o=await fetch(`/videos/${t.id}/discard-changes`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))||""}});if(o.ok){const d=await o.json();d.original_data&&(_("title",d.original_data.title||""),_("description",d.original_data.description||""),_("tags",d.original_data.tags||[]),S(d.original_data.thumbnail||null)),V();const f=document.createElement("div");f.className="fixed top-4 right-4 bg-orange-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent="↺ All changes discarded and reverted to original version",document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},3e3)}else{const d=await o.json();console.error("Failed to discard changes:",d);const f=document.createElement("div");f.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",f.textContent=`❌ Failed to discard changes: ${d.message||"Unknown error"}`,document.body.appendChild(f),setTimeout(()=>{document.body.contains(f)&&document.body.removeChild(f)},5e3)}}catch(o){console.error("Failed to discard changes:",o);const d=document.createElement("div");d.className="fixed top-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",d.textContent="❌ Network error while discarding changes",document.body.appendChild(d),setTimeout(()=>{document.body.contains(d)&&document.body.removeChild(d)},5e3)}finally{he(!1)}},ws=()=>{u("subtitles","subtitles",!1,!0)},is=()=>{u("watermark_removal","watermark_removal",!1,!0)};return e.jsxs(kt,{breadcrumbs:U,children:[e.jsx(yt,{title:`Edit: ${t.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(vt,{href:"/videos",children:e.jsxs(G,{variant:"outline",size:"sm",children:[e.jsx(Dt,{className:"mr-2 h-4 w-4"}),"Back to Videos"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:t.title}),e.jsx("p",{className:"text-muted-foreground",children:"Edit and optimize your video with AI-powered tools"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Te&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}),"Auto-saving..."]}),e.jsxs(G,{variant:"outline",onClick:Oe,className:"text-red-600 hover:text-red-700",children:[e.jsx(De,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]}),_e&&e.jsx(T,{className:"border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/20",children:e.jsx(E,{className:"p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-500 rounded-full",children:e.jsx(ss,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300 text-lg",children:"Unsaved Changes Detected"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-200",children:"The following changes have been made to your video:"})]})]}),e.jsx("div",{className:"space-y-2",children:xe.map((n,o)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background rounded-lg border border-orange-200 dark:border-orange-800",children:[e.jsxs("div",{className:"flex-shrink-0",children:[n.type==="title"&&e.jsx(As,{className:"w-4 h-4 text-blue-600"}),n.type==="description"&&e.jsx(ot,{className:"w-4 h-4 text-green-600"}),n.type==="tags"&&e.jsx(_s,{className:"w-4 h-4 text-purple-600"}),n.type==="thumbnail"&&e.jsx(qe,{className:"w-4 h-4 text-pink-600"}),n.type==="subtitles"&&e.jsx(Zt,{className:"w-4 h-4 text-indigo-600"}),n.type==="watermark_removal"&&e.jsx(De,{className:"w-4 h-4 text-red-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"font-medium text-foreground capitalize",children:[n.type.replace("_"," ")," Updated"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.type==="title"&&`"${n.oldValue}" → "${n.newValue}"`,n.type==="description"&&"Description content modified",n.type==="tags"&&`${n.oldValue.length} → ${n.newValue.length} tags`,n.type==="thumbnail"&&"Custom thumbnail uploaded",n.type==="subtitles"&&"Subtitles generated and applied",n.type==="watermark_removal"&&"Watermarks detected and removed"]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:n.timestamp.toLocaleTimeString()})]},o))}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsxs(G,{onClick:Ns,variant:"outline",disabled:oe,className:"border-red-200 text-red-600 hover:bg-red-50 dark:border-red-800 dark:text-red-300 dark:hover:bg-red-950/20",children:[oe?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Ze,{className:"w-4 h-4 mr-2"}),oe?"Discarding...":"Discard All Changes"]}),e.jsxs(G,{onClick:Ge,disabled:oe,className:"bg-orange-600 hover:bg-orange-700",children:[oe?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Qs,{className:"w-4 h-4 mr-2"}),oe?"Publishing...":"Publish Changes to All Platforms"]})]})]})})}),e.jsxs(bs,{value:ne,onValueChange:L,className:"w-full",children:[e.jsxs(js,{className:"grid w-full grid-cols-2",children:[e.jsx(be,{value:"overview",children:"Overview/Edit"}),e.jsx(be,{value:"performance",children:"Performance"})]}),e.jsx(je,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs(T,{children:[e.jsx(D,{children:e.jsx(q,{className:"flex items-center gap-2",children:"Video Editor"})}),e.jsx(E,{children:e.jsx(hs,{children:e.jsx(Aa,{videoPath:t.video_path||t.file_path||"",videoId:t.id,videoTitle:t.title,onSubtitleGenerated:ws})})})]}),e.jsxs(T,{children:[e.jsxs(D,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5"}),"Watermark Removal"]}),e.jsx(xs,{children:"Automatically detect and remove watermarks from your video"})]}),e.jsx(E,{children:g?e.jsx(hs,{children:e.jsx(Fa,{videoPath:t.original_file_path||t.file_path||"",onRemovalComplete:n=>{console.log("Watermark removal completed:",n),is();const o=document.createElement("div");o.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",o.textContent="✅ Watermarks removed successfully!",document.body.appendChild(o),setTimeout(()=>{document.body.contains(o)&&document.body.removeChild(o)},5e3)}})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mb-4",children:e.jsx(De,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-semibold text-muted-foreground mb-2",children:"Coming Soon"}),e.jsx("p",{className:"text-sm text-muted-foreground max-w-md",children:"AI-powered watermark detection and removal is currently in development. This feature will automatically identify and remove watermarks from your videos."}),e.jsx("div",{className:"mt-4 px-3 py-1 bg-blue-100 text-blue-800 dark:bg-blue-950/20 dark:text-blue-300 rounded-full text-xs font-medium",children:"Feature in Development"})]})})]}),e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-5 h-5"}),"AI Analysis"]})}),e.jsxs(E,{children:[e.jsx(hs,{children:e.jsx(Sa,{videoId:t.id,videoPath:t.original_file_path||t.file_path,onAnalysisComplete:Xe})}),ie&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),e.jsx("p",{className:"text-lg",children:ie.category||"Entertainment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Mood"}),e.jsx("p",{className:"text-lg",children:ie.mood||"Positive"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"AI Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:(ie.tags||["creative","engaging","trending"]).map((n,o)=>e.jsx(P,{variant:"secondary",className:"text-xs",children:n},o))})]})]})]})]}),e.jsxs(T,{children:[e.jsxs(D,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(xt,{className:"w-5 h-5"}),"AI Suggestions"]}),e.jsx(xs,{children:"Most important optimization recommendations"})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 border border-orange-200 bg-orange-50 dark:border-orange-800 dark:bg-orange-950/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Pe,{className:"w-5 h-5 text-orange-600 dark:text-orange-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-orange-800 dark:text-orange-300",children:"Increase Engagement"}),e.jsx("p",{className:"text-sm text-orange-700 dark:text-orange-200",children:"Add a call-to-action in the first 5 seconds to boost viewer retention."})]})]})}),e.jsx("div",{className:"p-4 border border-blue-200 bg-blue-50 dark:border-blue-800 dark:bg-blue-950/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(We,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Optimize Thumbnail"}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-200",children:"Consider adding text overlay to your thumbnail to increase click-through rate."})]})]})}),e.jsx("div",{className:"p-4 border border-green-200 bg-green-50 dark:border-green-800 dark:bg-green-950/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(_s,{className:"w-5 h-5 text-green-600 dark:text-green-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300",children:"Add More Tags"}),e.jsx("p",{className:"text-sm text-green-700 dark:text-green-200",children:"Include platform-specific hashtags to improve discoverability."})]})]})})]})})]}),t.targets&&t.targets.length>0&&e.jsxs(T,{children:[e.jsxs(D,{children:[e.jsx(q,{children:"Publishing Status"}),e.jsx(xs,{children:"Current status for each platform"})]}),e.jsx(E,{children:e.jsx("div",{className:"space-y-4",children:t.targets.map(n=>{const o=Ra[n.status],d=za[n.platform],f=Ue(n);return e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(d,{className:"h-5 w-5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:n.platform}),n.publish_at&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Scheduled: ",new Date(n.publish_at).toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(P,{className:Pa[n.status],children:[e.jsx(o,{className:"w-3 h-3 mr-1"}),n.status]}),f&&n.status==="success"&&e.jsx("a",{href:f,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700",children:e.jsx(Vt,{className:"w-4 h-4"})}),n.status==="success"&&e.jsxs(G,{size:"sm",variant:"outline",onClick:()=>Be(n.id,n.platform),className:"text-red-600 hover:text-red-700",children:[e.jsx(Ze,{className:"w-3 h-3 mr-1"}),"Remove"]})]})]},n.id)})})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs(T,{children:[e.jsx(D,{children:e.jsx(q,{children:"Title"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ks,{value:m.title,onChange:n=>{const o=n.target.value;_("title",o),u("title","title",Se.title,o)},placeholder:"Enter video title",className:"flex-1"}),e.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:ts,disabled:X,children:X?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full"}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4"}),"AI Generate"]})})]}),C.title&&e.jsx("p",{className:"text-sm text-red-600 mt-1",children:C.title})]})]}),e.jsxs(T,{children:[e.jsx(D,{children:e.jsx(q,{children:"Description"})}),e.jsxs(E,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Nt,{value:m.description,onChange:n=>{const o=n.target.value;_("description",o),u("description","description",Se.description,o)},placeholder:"Enter video description",rows:4}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(G,{type:"button",variant:"outline",size:"sm",onClick:as,disabled:j,children:[j?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"AI Generate"]})})]}),C.description&&e.jsx("p",{className:"text-sm text-red-600",children:C.description})]})]}),e.jsxs(T,{children:[e.jsx(D,{children:e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(_s,{className:"w-5 h-5"}),"Tags"]})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[m.tags.map((n,o)=>e.jsxs(P,{variant:"secondary",className:"flex items-center gap-1",children:[n,e.jsx("button",{type:"button",onClick:()=>vs(n),className:"ml-1 text-xs hover:text-red-600",children:e.jsx(Ze,{className:"w-3 h-3"})})]},o)),m.tags.length===0&&e.jsx("p",{className:"text-sm text-muted-foreground",children:"No tags added yet"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Ks,{placeholder:"Add a tag...",onKeyDown:n=>{if(n.key==="Enter"){n.preventDefault();const o=n.currentTarget.value.trim();o&&(ys(o),n.currentTarget.value="")}},className:"flex-1"}),e.jsx(G,{type:"button",variant:"outline",onClick:ns,disabled:A,children:A?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsxs(e.Fragment,{children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"AI Generate"]})})]}),m.tags.length>0&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Tags help categorize your video and improve discoverability across platforms"})]})})]})]}),e.jsxs(T,{children:[e.jsx(D,{children:e.jsx(q,{children:"Video Details"})}),e.jsxs(E,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Duration"}),e.jsx("p",{className:"text-lg",children:t.formatted_duration})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Resolution"}),e.jsx("p",{className:`text-lg ${h.color}`,children:t.width&&t.height?`${t.width}x${t.height}`:"Unknown"}),e.jsx("p",{className:`text-sm ${h.color}`,children:h.label})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Upload Date"}),e.jsx("p",{className:"text-lg",children:new Date(t.created_at).toLocaleString()})]})]})]}),e.jsxs(T,{children:[e.jsxs(D,{children:[e.jsxs(q,{className:"flex items-center gap-2",children:[e.jsx(qe,{className:"w-5 h-5"}),"Thumbnail Optimization"]}),e.jsx(xs,{children:"Set your video thumbnail using AI optimization or custom upload"})]}),e.jsxs(E,{children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(G,{onClick:()=>ye(!0),className:"bg-purple-600 hover:bg-purple-700",children:[e.jsx(ut,{className:"w-4 h-4 mr-2"}),"AI Optimize Thumbnail"]}),e.jsxs(G,{variant:"outline",onClick:()=>{var n;return(n=Ce.current)==null?void 0:n.click()},disabled:W,children:[W?e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-current border-t-transparent rounded-full mr-2"}):e.jsx(Qs,{className:"w-4 h-4 mr-2"}),W?"Uploading...":"Upload Custom Thumbnail"]}),e.jsx("input",{ref:Ce,type:"file",accept:"image/*",onChange:rs,className:"hidden"})]}),v&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 dark:bg-green-950/20 dark:border-green-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-green-700 dark:text-green-300",children:"✓ Thumbnail has been set for this video"})}),t.thumbnail&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Current Thumbnail:"}),e.jsx("img",{src:`${t.thumbnail}`,alt:"Current thumbnail",className:"w-32 object-cover rounded-lg border",onError:n=>{var d;const o=n.target;o.style.display="none",(d=o.nextElementSibling)==null||d.classList.remove("hidden")}}),e.jsx("div",{className:"w-32 h-20 bg-muted rounded-lg flex items-center justify-center hidden",children:e.jsx(qe,{className:"w-6 h-6 text-muted-foreground"})})]})]})]})]})]})}),e.jsx(je,{value:"performance",className:"space-y-6",children:e.jsx(hs,{children:e.jsx(Ta,{videoId:t.id})})})]}),e.jsx(at,{open:O,onOpenChange:H,children:e.jsxs(rt,{children:[e.jsxs(nt,{children:[e.jsx(it,{children:"Delete Video"}),e.jsx(lt,{children:"This action cannot be undone. Choose what you want to delete:"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-tikomat",name:"delete-option",value:"tikomat",checked:Y==="tikomat",onChange:n=>ee(n.target.value)}),e.jsx(Gs,{htmlFor:"delete-tikomat",children:"Delete only from Tikomat (keep on social platforms)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",id:"delete-all",name:"delete-option",value:"all",checked:Y==="all",onChange:n=>ee(n.target.value)}),e.jsx(Gs,{htmlFor:"delete-all",children:"Delete from everywhere (Tikomat + all social platforms)"})]})]}),e.jsxs(wt,{children:[e.jsx(G,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),e.jsx(G,{variant:"destructive",onClick:te,children:"Delete Video"})]})]})}),e.jsx(Ma,{isOpen:Ne,onClose:()=>ye(!1),videoId:t.id,videoPath:t.original_file_path||t.file_path||"",title:m.title,onThumbnailSet:()=>{const n=v,o=`ai_optimized_${Date.now()}`;S(o),u("thumbnail","thumbnail",n,o),ye(!1)}})]})]})}export{Mr as default};
