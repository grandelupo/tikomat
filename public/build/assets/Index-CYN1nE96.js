import{r as j,j as e,$ as Y,Y as f,m as x}from"./app-Dix-0CZJ.js";import{c as z,B as i}from"./createLucideIcon-BkgCo8iS.js";import{C as h,b as L,c as V,d as B,a as p}from"./card-BV5uTwUg.js";import{B as $}from"./message-square-N0I_HEuJ.js";import{S as g,a as v,b as N,d as w,e as y}from"./select-CqwR4_hr.js";import{I as _}from"./input-BkGkWmR8.js";import{L as c}from"./label-DV1EVHxB.js";import{S as E}from"./switch-D6zjQYf9.js";import{A as b,a as C}from"./alert-BwEFFGPz.js";import{A as R}from"./app-layout-BHJk1TeI.js";import{P as k}from"./plus-Dm8g4Jih.js";import{I as S}from"./info-kSJLatLm.js";import{P as U,C as Z}from"./palette-BvqY-nKD.js";import{T as G,F as H}from"./twitter-7VDQ9rcs.js";import{V as M}from"./video-rFNFgllK.js";import{I as q,Y as J}from"./youtube-D7WXEF7e.js";import{Z as K}from"./zap-Cw86Yozp.js";import{D as O}from"./download-CGaYt9Pi.js";import{A as Q}from"./arrow-right-D0h4Dw8w.js";import{U as X}from"./upload-CRI3TXyW.js";import{P as ee}from"./play-etUhWfhP.js";import{S as se}from"./workflow-CUhZVOiY.js";import{T as ae}from"./trash-2-Qe-Do4G0.js";import"./index-BofPx8cF.js";import"./index-B1NxcSBP.js";import"./index-C7lXM9fi.js";import"./chevron-down-ByoAC3eV.js";import"./check-DW5VBCxP.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],re=z("Pause",te),ie=[{title:"My channels",href:"/dashboard"},{title:"Workflow",href:"/workflow"}],m={youtube:J,instagram:q,tiktok:M,facebook:H,twitter:G,snapchat:Z,pinterest:U};function Te({workflows:u,channels:I,platforms:A}){const[F,n]=j.useState(!1),[a,t]=j.useState({name:"",description:"",channel_id:"",source_platform:"",target_platforms:[],is_active:!0}),W=()=>{x.post("/workflow",a,{onSuccess:()=>{n(!1),t({name:"",description:"",channel_id:"",source_platform:"",target_platforms:[],is_active:!0})}})},D=(s,r)=>{x.patch(`/workflow/${s}`,{is_active:r})},P=s=>{confirm("Are you sure you want to delete this workflow?")&&x.delete(`/workflow/${s}`)},o=A.filter(s=>s.connected);return e.jsxs(R,{breadcrumbs:ie,children:[e.jsx(Y,{title:"Workflow Automation"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Workflow Automation"}),e.jsx("p",{className:"text-muted-foreground",children:"Automatically sync videos between your social media platforms"})]}),e.jsxs(i,{onClick:()=>n(!0),children:[e.jsx(k,{className:"mr-2 h-4 w-4"}),"Create Workflow"]})]}),e.jsxs(b,{children:[e.jsx(S,{className:"h-4 w-4"}),e.jsx(C,{children:"Workflows automatically detect when you upload a video to one platform and sync it to your other connected accounts. This helps you maintain consistent content across all your social media channels."})]}),o.length<2&&e.jsxs(b,{className:"border-yellow-200 bg-yellow-50",children:[e.jsx(S,{className:"h-4 w-4 text-yellow-600"}),e.jsxs(C,{className:"text-yellow-800",children:["You need to first connect other social media accounts to use them in workflows."," ",e.jsx(f,{href:"/connections",className:"font-medium underline hover:no-underline",children:"Go to Connections"})]})]}),F&&o.length>=2&&e.jsxs(h,{children:[e.jsxs(L,{children:[e.jsx(V,{children:"Create New Workflow"}),e.jsx(B,{children:"Set up automatic video syncing between platforms for a specific channel"})]}),e.jsxs(p,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"name",children:"Workflow Name"}),e.jsx(_,{id:"name",placeholder:"e.g., YouTube to Instagram",value:a.name,onChange:s=>t({...a,name:s.target.value})})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"channel",children:"Channel"}),e.jsxs(g,{value:a.channel_id,onValueChange:s=>t({...a,channel_id:s}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select channel"})}),e.jsx(w,{children:I.map(s=>e.jsx(y,{value:s.id.toString(),children:s.name},s.id))})]})]})]}),e.jsxs("div",{children:[e.jsx(c,{htmlFor:"description",children:"Description"}),e.jsx(_,{id:"description",placeholder:"Brief description of this workflow",value:a.description,onChange:s=>t({...a,description:s.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(c,{htmlFor:"source",children:"Source Platform"}),e.jsxs(g,{value:a.source_platform,onValueChange:s=>t({...a,source_platform:s}),children:[e.jsx(v,{children:e.jsx(N,{placeholder:"Select source platform"})}),e.jsx(w,{children:o.map(s=>{const r=m[s.name];return e.jsx(y,{value:s.name,children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),s.label]})},s.name)})})]})]}),e.jsxs("div",{children:[e.jsx(c,{children:"Target Platforms"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-2",children:o.filter(s=>s.name!==a.source_platform).map(s=>{const r=m[s.name],l=a.target_platforms.includes(s.name);return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:s.name,checked:l,onChange:d=>{d.target.checked?t({...a,target_platforms:[...a.target_platforms,s.name]}):t({...a,target_platforms:a.target_platforms.filter(T=>T!==s.name)})},className:"rounded"}),e.jsxs("label",{htmlFor:s.name,className:"flex items-center text-sm",children:[e.jsx(r,{className:"w-4 h-4 mr-1"}),s.label]})]},s.name)})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{id:"active",checked:a.is_active,onCheckedChange:s=>t({...a,is_active:s})}),e.jsx(c,{htmlFor:"active",children:"Activate workflow immediately"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(i,{variant:"outline",onClick:()=>n(!1),children:"Cancel"}),e.jsx(i,{onClick:W,children:"Create Workflow"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Your Workflows"}),u.length===0?e.jsx(h,{children:e.jsxs(p,{className:"text-center py-12",children:[e.jsx(K,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No workflows yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first workflow to start automating video distribution across platforms."}),e.jsxs(i,{onClick:()=>n(!0),children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Create Your First Workflow"]})]})}):e.jsx("div",{className:"grid gap-4",children:u.map(s=>{const r=m[s.source_platform];return e.jsx(h,{children:e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:s.name}),e.jsx($,{variant:s.is_active?"default":"secondary",children:s.is_active?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),e.jsxs("div",{className:"flex items-center space-x-2 mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 bg-blue-50 px-3 py-1 rounded-lg",children:[e.jsx(O,{className:"w-4 h-4 text-blue-600"}),e.jsx(r,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium capitalize",children:s.source_platform})]}),e.jsx(Q,{className:"w-4 h-4 text-gray-400"}),e.jsx("div",{className:"flex items-center space-x-1",children:s.target_platforms.map(l=>{const d=m[l];return e.jsxs("div",{className:"flex items-center space-x-1 bg-green-50 px-2 py-1 rounded",children:[e.jsx(X,{className:"w-3 h-3 text-green-600"}),e.jsx(d,{className:"w-3 h-3"}),e.jsx("span",{className:"text-xs capitalize",children:l})]},l)})})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Created: ",new Date(s.created_at).toLocaleDateString()]}),s.last_run_at&&e.jsxs("span",{children:["Last run: ",new Date(s.last_run_at).toLocaleDateString()]}),e.jsxs("span",{children:["Videos processed: ",s.videos_processed]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(i,{variant:"outline",size:"sm",onClick:()=>D(s.id,!s.is_active),children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),"Pause"]}):e.jsxs(e.Fragment,{children:[e.jsx(ee,{className:"w-3 h-3 mr-1"}),"Activate"]})}),e.jsx(f,{href:`/workflow/${s.id}/edit`,children:e.jsxs(i,{variant:"outline",size:"sm",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Edit"]})}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>P(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"Delete"]})]})]})})},s.id)})})]})]})]})}export{Te as default};
