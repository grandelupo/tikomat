import{r,j as e,$ as Q,Y as h,m as v}from"./app-DuPmq8dl.js";import{B as a}from"./button-DDs2u_JD.js";import{C as B,b as O,c as Y,a as _,d as W}from"./card-36Ti7GnQ.js";import{B as Z}from"./badge-C6hojxy0.js";import{S as C,a as k,b as y,c as S,d as l}from"./select-EmVCSH5S.js";import{D as ee,b as se,c as le,d as ae,e as te,f as re}from"./dialog-CjsbOANW.js";import{I as ie}from"./input-CgOluhXk.js";import{T as ne,a as ce,b as z,c as i,d as oe,e as n,V as de,S as me}from"./VideoThumbnail-Bah5OxNR.js";import{A as he,d as xe,C as ue}from"./app-layout-y4BgOKw3.js";import{P as H}from"./plus-aktp--se.js";import{F as je}from"./filter-Dv4excdU.js";import{S as pe}from"./search-D9fDfCbH.js";import{V as d}from"./video-VBqgfnZn.js";import{C as fe}from"./circle-check-big-Ab9tHDNP.js";import{C as ge}from"./clock-MxjTrN-H.js";import{I as ve}from"./instagram-DrqG8U81.js";import{Y as be}from"./youtube-Cn2hN1oC.js";import{E as Ne}from"./eye-CId5D4nj.js";import{T as Ce}from"./trash-2-iD-3f041.js";import"./index-BLyW7CbN.js";import"./index-Byf6zZ8o.js";import"./index-C5FqYMGo.js";import"./chevron-down-DvDaCK_P.js";import"./workflow-C3SIZGvV.js";import"./calendar-BmG4KR8V.js";const ke=[{title:"My channels",href:"/dashboard"},{title:"All videos",href:"/videos"}],ye={youtube:be,instagram:ve,tiktok:d,facebook:d,x:d,snapchat:d,pinterest:d},Se={pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",success:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"},we={pending:ge,processing:ue,success:fe,failed:xe};function We({videos:b,channels:m,filters:c}){var F,$,R,E,U;const[N,w]=r.useState(c.search||""),[x,T]=r.useState(c.channel||""),[u,D]=r.useState(c.platform||""),[j,V]=r.useState(c.status||""),[L,p]=r.useState(!1),[A,I]=r.useState(null),[f,g]=r.useState("tikomat"),P=()=>{const s=new URLSearchParams;N&&s.set("search",N),x&&x!=="all"&&s.set("channel",x),u&&u!=="all"&&s.set("platform",u),j&&j!=="all"&&s.set("status",j),v.get("/videos",Object.fromEntries(s),{preserveState:!0})},M=()=>{w(""),T(""),D(""),V(""),v.get("/videos",{},{preserveState:!0})},X=s=>{v.post(`/video-targets/${s}/retry`)},q=s=>{I(s),p(!0)},G=()=>{A&&v.delete(`/videos/${A}`,{data:{delete_option:f},onSuccess:()=>{p(!1),I(null)}})},o=()=>m.find(s=>s.name.toLowerCase().includes("default"))||m[0];return e.jsxs(he,{breadcrumbs:ke,children:[e.jsx(Q,{title:"Recently Uploaded Videos"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-6 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recently Uploaded"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage all your uploaded videos and their publishing status"})]}),m.length>0&&o()&&((F=o())==null?void 0:F.slug)&&e.jsx(h,{href:`/channels/${($=o())==null?void 0:$.slug}/videos/create`,children:e.jsxs(a,{size:"lg",children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})]}),e.jsxs(B,{children:[e.jsx(O,{children:e.jsxs(Y,{className:"flex items-center",children:[e.jsx(je,{className:"w-4 h-4 mr-2"}),"Filters"]})}),e.jsx(_,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(ie,{placeholder:"Search videos...",value:N,onChange:s=>w(s.target.value),className:"pl-10",onKeyPress:s=>s.key==="Enter"&&P()})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Channel"}),e.jsxs(C,{value:x||"all",onValueChange:s=>T(s==="all"?"":s),children:[e.jsx(k,{children:e.jsx(y,{placeholder:"All channels"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All channels"}),m.map(s=>e.jsx(l,{value:s.slug,children:s.name},s.id))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Platform"}),e.jsxs(C,{value:u||"all",onValueChange:s=>D(s==="all"?"":s),children:[e.jsx(k,{children:e.jsx(y,{placeholder:"All platforms"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All platforms"}),e.jsx(l,{value:"youtube",children:"YouTube"}),e.jsx(l,{value:"instagram",children:"Instagram"}),e.jsx(l,{value:"tiktok",children:"TikTok"}),e.jsx(l,{value:"facebook",children:"Facebook"}),e.jsx(l,{value:"x",children:"X"}),e.jsx(l,{value:"snapchat",children:"Snapchat"}),e.jsx(l,{value:"pinterest",children:"Pinterest"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Status"}),e.jsxs(C,{value:j||"all",onValueChange:s=>V(s==="all"?"":s),children:[e.jsx(k,{children:e.jsx(y,{placeholder:"All statuses"})}),e.jsxs(S,{children:[e.jsx(l,{value:"all",children:"All statuses"}),e.jsx(l,{value:"pending",children:"Pending"}),e.jsx(l,{value:"processing",children:"Processing"}),e.jsx(l,{value:"success",children:"Success"}),e.jsx(l,{value:"failed",children:"Failed"})]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(a,{onClick:P,className:"flex-1",children:"Apply Filters"}),e.jsx(a,{variant:"outline",onClick:M,children:"Clear"})]})]})})]}),e.jsxs(B,{children:[e.jsxs(O,{children:[e.jsxs(Y,{children:["Videos (",((R=b.meta)==null?void 0:R.total)||0,")"]}),e.jsx(W,{children:"Your uploaded videos and their publishing status across platforms"})]}),e.jsx(_,{children:b.data.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(d,{className:"mx-auto h-12 w-12 text-muted-foreground"}),e.jsx("h3",{className:"mt-2 text-sm font-semibold text-gray-900",children:"No videos found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:Object.values(c).some(s=>s)?"Try adjusting your filters.":"Get started by uploading your first video."}),!Object.values(c).some(s=>s)&&m.length>0&&o()&&((E=o())==null?void 0:E.slug)&&e.jsx("div",{className:"mt-6",children:e.jsx(h,{href:`/channels/${(U=o())==null?void 0:U.slug}/videos/create`,children:e.jsxs(a,{children:[e.jsx(H,{className:"mr-2 h-4 w-4"}),"Upload Video"]})})})]}):e.jsxs(ne,{children:[e.jsx(ce,{children:e.jsxs(z,{children:[e.jsx(i,{className:"w-20",children:"Thumbnail"}),e.jsx(i,{children:"Title"}),e.jsx(i,{children:"Channel"}),e.jsx(i,{children:"Duration"}),e.jsx(i,{children:"Platforms"}),e.jsx(i,{children:"Upload Date"}),e.jsx(i,{className:"text-right",children:"Actions"})]})}),e.jsx(oe,{children:b.data.map(s=>e.jsxs(z,{children:[e.jsx(n,{children:e.jsx(de,{src:s.thumbnail_path,alt:s.title,width:s.video_width??void 0,height:s.video_height??void 0,className:"w-16 h-12"})}),e.jsx(n,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.title}),s.description&&e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(n,{children:s.channel?e.jsx(h,{href:`/channels/${s.channel.slug}`,className:"text-blue-600 hover:text-blue-700",children:s.channel.name}):e.jsx("span",{className:"text-muted-foreground",children:"No Channel"})}),e.jsx(n,{children:s.formatted_duration}),e.jsx(n,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:s.targets.map(t=>{const K=we[t.status],J=ye[t.platform];return e.jsxs("div",{className:"flex items-center",children:[e.jsxs(Z,{variant:"secondary",className:`${Se[t.status]} flex items-center gap-1 text-xs`,children:[e.jsx(J,{className:"h-3 w-3"}),e.jsx(K,{className:"h-3 w-3"}),t.platform.charAt(0).toUpperCase()+t.platform.slice(1)]}),t.status==="failed"&&e.jsx(a,{variant:"ghost",size:"sm",onClick:()=>X(t.id),className:"text-xs px-1 py-0 h-auto ml-1 text-red-600",children:"Retry"})]},t.id)})})}),e.jsx(n,{children:new Date(s.created_at).toLocaleDateString()}),e.jsx(n,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(h,{href:`/videos/${s.id}/edit`,children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(Ne,{className:"mr-1 h-3 w-3"}),"View"]})}),e.jsx(h,{href:`/videos/${s.id}/edit`,children:e.jsxs(a,{variant:"outline",size:"sm",children:[e.jsx(me,{className:"mr-1 h-3 w-3"}),"Edit"]})}),e.jsxs(a,{variant:"outline",size:"sm",onClick:()=>q(s.id),className:"text-red-600 hover:text-red-700",children:[e.jsx(Ce,{className:"mr-1 h-3 w-3"}),"Delete"]})]})})]},s.id))})]})})]}),e.jsx(ee,{open:L,onOpenChange:p,children:e.jsxs(se,{className:"sm:max-w-md",children:[e.jsxs(le,{children:[e.jsx(ae,{children:"Delete Video"}),e.jsx(te,{children:"Choose how you want to handle this video deletion. This action cannot be undone."})]}),e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>g("tikomat"),children:[e.jsx("input",{type:"radio",id:"delete-tikomat-videos",name:"delete-option",value:"tikomat",checked:f==="tikomat",onChange:s=>g(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-tikomat-videos",className:"text-sm font-medium cursor-pointer",children:"Remove only from Tikomat"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will remain published on all platforms but removed from Tikomat's tracking"})]})]}),e.jsxs("div",{className:"flex items-start space-x-3 p-3 border rounded-lg hover:bg-gray-50 cursor-pointer",onClick:()=>g("all"),children:[e.jsx("input",{type:"radio",id:"delete-all-videos",name:"delete-option",value:"all",checked:f==="all",onChange:s=>g(s.target.value),className:"h-4 w-4 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:"delete-all-videos",className:"text-sm font-medium cursor-pointer",children:"Take down from all platforms"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Video will be completely removed from all platforms and Tikomat"})]})]})]})}),e.jsxs(re,{children:[e.jsx(a,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(a,{variant:"destructive",onClick:G,children:f==="all"?"Take Down Video":"Remove from Tikomat"})]})]})})]})]})}export{We as default};
